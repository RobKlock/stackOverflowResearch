"","label","code"
"1","bad","**index.php** <html> <head> <link rel=""stylesheet"" type=""text/css"" href=""css/style.css"" /> <script src=""jquery.js"" type=""text/javascript""></script> <script type=""text/javascript""> $(document).ready(function() { $('form#submit').submit(function () { var nume = $('#nume').val(); $.ajax({ type: ""POST"", url: ""save.php"", data: ""nume=""+ nume, success: function() { $('#nume').val(''); } }); return false; }); }); </script> </head> <body> <form id=""submit"" method=""post""> <p>Nume: <input id=""nume"" name=""nume"" type=""text""></p> <p><input id=""submitButton"" type=""button"" value=""Submit""></p> </form> </body> </html> **save.php** <?php mysql_connect('localhost', 'root', 'root') or die(mysql_error()); mysql_select_db(""test"") or die(mysql_error()); $nume = htmlspecialchars(trim($_POST['nume'])); $add = ""INSERT INTO ajax_test (nume) VALUES ('$nume')""; mysql_query($add) or die(mysql_error()); ?>"
"2","bad","**index.php** <html> <head> <link rel=""stylesheet"" type=""text/css"" href=""css/style.css"" /> <script src=""jquery.js"" type=""text/javascript""></script> <script type=""text/javascript""> $(document).ready(function() { $('form#submit').submit(function () { var nume = $('#nume').val(); $.ajax({ type: ""POST"", url: ""save.php"", data: ""nume=""+ nume, success: function() { $('#nume').val(''); } }); return false; }); }); </script> </head> <body> <form id=""submit"" method=""post""> <p>Nume: <input id=""nume"" name=""nume"" type=""text""></p> <p><input id=""submitButton"" type=""button"" value=""Submit""></p> </form> </body> </html> **save.php** <?php mysql_connect('localhost', 'root', 'root') or die(mysql_error()); mysql_select_db(""test"") or die(mysql_error()); $nume = htmlspecialchars(trim($_POST['nume'])); $add = ""INSERT INTO ajax_test (nume) VALUES ('$nume')""; mysql_query($add) or die(mysql_error()); ?>"
"3","bad","$con = mysql_connect(""localhost"",""root"",""""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""Hospital"", $con); $hospnum = mysql_real_escape_string($_POST['HOSPNUM']); $rnum = mysql_real_escape_string($_POST['ROOMNUM']); $adate = mysql_real_escape_string($_POST['ADATE']); $adtime = mysql_real_escape_string($_POST['ADTIME']); $lname = mysql_real_escape_string($_POST['LASTNAME']); $fname = mysql_real_escape_string($_POST['FIRSTNAME']); $mname = mysql_real_escape_string($_POST['MIDNAME']); $cs = mysql_real_escape_string($_POST['CSTAT']); $age = mysql_real_escape_string($_POST['AGE']); $ad = mysql_real_escape_string($_POST['ADDRESS']); $bday = mysql_real_escape_string($_POST['BDAY']); $telnum = mysql_real_escape_string($_POST['TELNUM']); $sex = mysql_real_escape_string($_POST['SEX']); $stats1 = mysql_real_escape_string($_POST['STAT']); $stats2 = mysql_real_escape_string($_POST['STAT2']); $stats3 = mysql_real_escape_string($_POST['STAT3']); $stats4 = mysql_real_escape_string($_POST['STAT4']); $stats5 = mysql_real_escape_string($_POST['STAT5']); $stats6 = mysql_real_escape_string($_POST['STAT6']); $stats7 = mysql_real_escape_string($_POST['STAT7']); $stats8 = mysql_real_escape_string($_POST['STAT8']); $nurse = mysql_real_escape_string($_POST['NURSE']); $sqlque=""INSERT INTO t2 (HOSPNUM, ROOMNUM, ADATE, ADTIME, LASTNAME, FIRSTNAME, MIDNAME, CSTAT, AGE, BDAY, ADDRESS, TELNUM, SEX, STAT, STAT2, STAT3, STAT4, STAT5, STAT6, STAT7, STAT8, NURSE) VALUES ('$hospnum', '$rnum' , '$adate' , '$adtime', '$lname', '$fname', '$mname', '$cs', '$age', '$bday', '$ad', '$telnum', '$sex','$stats1', '$stats2', '$stats3', '$stats4', '$stats5', '$stats6', '$stats7', '$stats8', '$nurse')""; if (!mysql_query($sqlque,$con)) { die('Error: ' . mysql_error()); } echo ""<script>alert('Record successfully added in Table In-patient!')</script>""; mysql_close($con) ?><html> <head> <script language=""javascript"" src=""cal2.js""> /* Xin's Popup calendar script- Xin Yang (http://www.yxscripts.com/) Script featured on/available at http://www.dynamicdrive.com/ This notice must stay intact for use */ </script> <script language=""javascript"" src=""cal_conf2.js""></script> </head> <body onLoad=""show_clock()""> <style> input { font-size: 16px;} </style> <?php include('header.php'); ?> <div id=""main_content""> </div> <?php include('footer.php'); ?> </head> <table width=""900"" border=""0"" align=""left"" cellpadding=""0"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <form name=""form1"" method=""post"" action=""aisaction.php""> <td> <table width=""100%"" border=""0"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#FFFFFF""> <tr> <td colspan=""16"" style=""background:#9ACD32; color:white; border:white 1px solid; text-align: center""><strong><font size=""3"">Add In-Patient</strong></td> </tr> <tr> <td width=""54""><font size=""3"">Hospital #</td> <td width=""3"">:</td> <td width=""168""><input name=""hnum"" type=""text"" id=""hospnum"" maxlength=""4""></td> <td width=""41""><font size=""3"">Room #</td> <td width=""3"">:</td> <td width=""168""><input name=""rnum"" type=""text"" id=""rnum"" maxlength=""4""></td> <td width=""67""><font size=""3"">Date</td> <td width=""3"">:</td> <td width=""168""><input name=""adate"" type=""text"" id=""adate"" maxlength=""15""> <td width=""67""><font size=""3"">Time</td> <td width=""3"">:</td> <td width=""168""><input name=""adtime"" type=""text"" id=""adtime"" maxlength=""15""> </td> </tr> <tr> <td><font size=""3"">Last Name</td> <td>:</td> <td><input name=""lname"" type=""text"" id=""lname"" maxlength=""15""></td> <td><font size=""3"">First Name</td> <td>:</td> <td><input name=""fname"" type=""text"" id=""fname"" maxlength=""15""></td> <td><font size=""3"">Middle Name</td> <td>:</td> <td><input name=""mname"" type=""text"" id=""mname"" maxlength=""15""></td> </tr> <tr> <td><font size=""3"">Civil Status</td> <td>:</td> <td> <select name=""cs"" id=""cs""> <option>Single</option> <option>Married</option> <option>Widowed</option> </select></td></td> <td><font size=""3"">Age</td> <td>:</td> <td><input name=""age"" type=""text"" id=""age"" maxlength=""3""></td> <td><font size=""3"">Birthday</td> <td>:</td> <td><input name=""bday"" type=""text"" id=""bday"" maxlength=""12""> </td> </tr> <tr> <td><font size=""3"">Address</td> <td>:</td> <td><input name=""ad"" type=""text"" id=""ad"" maxlength=""25""></td> <td><font size=""3"">Telephone #</td> <td>:</td> <td><input name=""telnum"" type=""text"" id=""telnum"" maxlength=""11""></td> <td width=""23""><font size=""3"">Sex</td> <td width=""3"">:</td> <td width=""174""><input name=""sex"" type=""text"" id=""sex"" maxlength=""1""></td> </tr> <tr> <td><font size=""3"">Pls. Check</td> <td>:</td> <input type='hidden' name=""stats1"" value=""0""> <td><input name=""stats1"" type=""checkbox"" id=""SSS"" value=""SSS"">SSS</td> <td><font size=""3""></td> <td>:</td> <input type='hidden' name=""stats2"" value=""0""> <td><input name=""stats2"" type=""checkbox"" id=""nonmed"" value=""NonMedicare"">Non Medicare</td> <td><font size=""3""></td> <td>:</td> <input type='hidden' name=""stats3"" value=""0""> <td><input name=""stats3"" type=""checkbox"" id=""sh"" value=""stockholder"">Stockholder</td> </tr> <tr> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats4"" value=""0""> <td><input name=""stats4"" type=""checkbox"" id=""gsis"" value=""GSIS"">GSIS</td> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats5"" value=""0""> <td><input name=""stats5"" type=""checkbox"" id=""senior"" value=""seniorcitizen"">Senior-Citizen</td> <tr> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats6"" value=""0""> <td><input name=""stats6"" type=""checkbox"" id=""dep"" value=""dependent"">Dependent</td> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats7"" value=""0""> <td><input name=""stats7"" type=""checkbox"" id=""emp"" value=""employee"">Employee</td> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats8"" value=""0""> <td><input name=""stats8"" type=""text"" id="""" value="""" maxlength=""15"">Others</td> </tr> <tr> <td><font size=""3"">Admitting/Attending Nurse</td> <td>:</td> <td><input name=""nurse"" type=""text"" id=""nurse"" maxlength=""15""></td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> <td><input type=""submit"" name=""Submit"" value=""Add""> <input type=""reset"" name=""Reset"" value=""Reset""></td></td> </form> </tr> </table> </td> </form> </tr> </table> <table> <tr><td> </tr> </table> </html>Notice: Undefined index: HOSPNUM in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 15 Notice: Undefined index: ROOMNUM in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 16 Notice: Undefined index: ADATE in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 17 Notice: Undefined index: ADTIME in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 19"
"4","bad","$con = mysql_connect(""localhost"",""root"",""""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""Hospital"", $con); $hospnum = mysql_real_escape_string($_POST['HOSPNUM']); $rnum = mysql_real_escape_string($_POST['ROOMNUM']); $adate = mysql_real_escape_string($_POST['ADATE']); $adtime = mysql_real_escape_string($_POST['ADTIME']); $lname = mysql_real_escape_string($_POST['LASTNAME']); $fname = mysql_real_escape_string($_POST['FIRSTNAME']); $mname = mysql_real_escape_string($_POST['MIDNAME']); $cs = mysql_real_escape_string($_POST['CSTAT']); $age = mysql_real_escape_string($_POST['AGE']); $ad = mysql_real_escape_string($_POST['ADDRESS']); $bday = mysql_real_escape_string($_POST['BDAY']); $telnum = mysql_real_escape_string($_POST['TELNUM']); $sex = mysql_real_escape_string($_POST['SEX']); $stats1 = mysql_real_escape_string($_POST['STAT']); $stats2 = mysql_real_escape_string($_POST['STAT2']); $stats3 = mysql_real_escape_string($_POST['STAT3']); $stats4 = mysql_real_escape_string($_POST['STAT4']); $stats5 = mysql_real_escape_string($_POST['STAT5']); $stats6 = mysql_real_escape_string($_POST['STAT6']); $stats7 = mysql_real_escape_string($_POST['STAT7']); $stats8 = mysql_real_escape_string($_POST['STAT8']); $nurse = mysql_real_escape_string($_POST['NURSE']); $sqlque=""INSERT INTO t2 (HOSPNUM, ROOMNUM, ADATE, ADTIME, LASTNAME, FIRSTNAME, MIDNAME, CSTAT, AGE, BDAY, ADDRESS, TELNUM, SEX, STAT, STAT2, STAT3, STAT4, STAT5, STAT6, STAT7, STAT8, NURSE) VALUES ('$hospnum', '$rnum' , '$adate' , '$adtime', '$lname', '$fname', '$mname', '$cs', '$age', '$bday', '$ad', '$telnum', '$sex','$stats1', '$stats2', '$stats3', '$stats4', '$stats5', '$stats6', '$stats7', '$stats8', '$nurse')""; if (!mysql_query($sqlque,$con)) { die('Error: ' . mysql_error()); } echo ""<script>alert('Record successfully added in Table In-patient!')</script>""; mysql_close($con) ?><html> <head> <script language=""javascript"" src=""cal2.js""> /* Xin's Popup calendar script- Xin Yang (http://www.yxscripts.com/) Script featured on/available at http://www.dynamicdrive.com/ This notice must stay intact for use */ </script> <script language=""javascript"" src=""cal_conf2.js""></script> </head> <body onLoad=""show_clock()""> <style> input { font-size: 16px;} </style> <?php include('header.php'); ?> <div id=""main_content""> </div> <?php include('footer.php'); ?> </head> <table width=""900"" border=""0"" align=""left"" cellpadding=""0"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <form name=""form1"" method=""post"" action=""aisaction.php""> <td> <table width=""100%"" border=""0"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#FFFFFF""> <tr> <td colspan=""16"" style=""background:#9ACD32; color:white; border:white 1px solid; text-align: center""><strong><font size=""3"">Add In-Patient</strong></td> </tr> <tr> <td width=""54""><font size=""3"">Hospital #</td> <td width=""3"">:</td> <td width=""168""><input name=""hnum"" type=""text"" id=""hospnum"" maxlength=""4""></td> <td width=""41""><font size=""3"">Room #</td> <td width=""3"">:</td> <td width=""168""><input name=""rnum"" type=""text"" id=""rnum"" maxlength=""4""></td> <td width=""67""><font size=""3"">Date</td> <td width=""3"">:</td> <td width=""168""><input name=""adate"" type=""text"" id=""adate"" maxlength=""15""> <td width=""67""><font size=""3"">Time</td> <td width=""3"">:</td> <td width=""168""><input name=""adtime"" type=""text"" id=""adtime"" maxlength=""15""> </td> </tr> <tr> <td><font size=""3"">Last Name</td> <td>:</td> <td><input name=""lname"" type=""text"" id=""lname"" maxlength=""15""></td> <td><font size=""3"">First Name</td> <td>:</td> <td><input name=""fname"" type=""text"" id=""fname"" maxlength=""15""></td> <td><font size=""3"">Middle Name</td> <td>:</td> <td><input name=""mname"" type=""text"" id=""mname"" maxlength=""15""></td> </tr> <tr> <td><font size=""3"">Civil Status</td> <td>:</td> <td> <select name=""cs"" id=""cs""> <option>Single</option> <option>Married</option> <option>Widowed</option> </select></td></td> <td><font size=""3"">Age</td> <td>:</td> <td><input name=""age"" type=""text"" id=""age"" maxlength=""3""></td> <td><font size=""3"">Birthday</td> <td>:</td> <td><input name=""bday"" type=""text"" id=""bday"" maxlength=""12""> </td> </tr> <tr> <td><font size=""3"">Address</td> <td>:</td> <td><input name=""ad"" type=""text"" id=""ad"" maxlength=""25""></td> <td><font size=""3"">Telephone #</td> <td>:</td> <td><input name=""telnum"" type=""text"" id=""telnum"" maxlength=""11""></td> <td width=""23""><font size=""3"">Sex</td> <td width=""3"">:</td> <td width=""174""><input name=""sex"" type=""text"" id=""sex"" maxlength=""1""></td> </tr> <tr> <td><font size=""3"">Pls. Check</td> <td>:</td> <input type='hidden' name=""stats1"" value=""0""> <td><input name=""stats1"" type=""checkbox"" id=""SSS"" value=""SSS"">SSS</td> <td><font size=""3""></td> <td>:</td> <input type='hidden' name=""stats2"" value=""0""> <td><input name=""stats2"" type=""checkbox"" id=""nonmed"" value=""NonMedicare"">Non Medicare</td> <td><font size=""3""></td> <td>:</td> <input type='hidden' name=""stats3"" value=""0""> <td><input name=""stats3"" type=""checkbox"" id=""sh"" value=""stockholder"">Stockholder</td> </tr> <tr> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats4"" value=""0""> <td><input name=""stats4"" type=""checkbox"" id=""gsis"" value=""GSIS"">GSIS</td> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats5"" value=""0""> <td><input name=""stats5"" type=""checkbox"" id=""senior"" value=""seniorcitizen"">Senior-Citizen</td> <tr> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats6"" value=""0""> <td><input name=""stats6"" type=""checkbox"" id=""dep"" value=""dependent"">Dependent</td> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats7"" value=""0""> <td><input name=""stats7"" type=""checkbox"" id=""emp"" value=""employee"">Employee</td> <td><font size=""3""></td> <td></td> <input type='hidden' name=""stats8"" value=""0""> <td><input name=""stats8"" type=""text"" id="""" value="""" maxlength=""15"">Others</td> </tr> <tr> <td><font size=""3"">Admitting/Attending Nurse</td> <td>:</td> <td><input name=""nurse"" type=""text"" id=""nurse"" maxlength=""15""></td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> <td><input type=""submit"" name=""Submit"" value=""Add""> <input type=""reset"" name=""Reset"" value=""Reset""></td></td> </form> </tr> </table> </td> </form> </tr> </table> <table> <tr><td> </tr> </table> </html>Notice: Undefined index: HOSPNUM in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 15 Notice: Undefined index: ROOMNUM in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 16 Notice: Undefined index: ADATE in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 17 Notice: Undefined index: ADTIME in C:\wamp\www\backup\kamikorosutengenmyo510\aisaction.php on line 19"
"5","bad","$month$day$yearMay 6 1901if (isset($_POST['submitted'])) { $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""SELECT users.* FROM users WHERE user_id=3""); $month_options = array(""Month"", ""January"", ""February"", ""March"", ""April"", ""May"", ""June"", ""July"", ""August"", ""September"", ""October"", ""November"", ""December""); $day_options = array(""Day"", ""1"", ""2"", ""3"", ""4"", ""5"", ""6"", ""7"", ""8"", ""9"", ""10"", ""11"", ""12"", ""13"", ""14"", ""15"", ""16"", ""17"", ""18"", ""19"", ""20"", ""21"", ""22"", ""23"", ""24"", ""25"", ""26"", ""27"", ""28"", ""29"", ""30"", ""31""); $month = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['month']))); $day = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['day']))); $year = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['year']))); if (mysqli_num_rows($dbc) == 0) { $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""INSERT INTO users (user_id, month, day, year) VALUES ('$user_id', '$month', '$day', '$year')""); } if ($dbc == TRUE) { $dbc = mysqli_query($mysqli,""UPDATE users SET month = '$month', day = '$day', year = '$year' WHERE user_id = '$user_id'""); echo '<p class=""changes-saved"">Your changes have been saved!</p>'; } if (!$dbc) { print mysqli_error($mysqli); return; } }<form method=""post"" action=""index.php""> <fieldset> <ul> <li><label>Date of Birth: </label> <label for=""month"" class=""hide"">Month: </label> <?php // month options echo '<select name=""month"" id=""month"">' . ""\n""; foreach($month_options as $option) { if ($option == $month) { echo '<option value=""' . stripslashes(htmlentities(strip_tags($option))) . '"" selected=""selected"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>' . ""\n""; } else { echo '<option value=""'. stripslashes(htmlentities(strip_tags($option))) . '"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>'.""\n""; } } echo '</select>'; ?> <label for=""day"" class=""hide"">Day: </label> <?php // day options echo '<select id=""day"" name=""day"">' . ""\n""; foreach($day_options as $option) { if ($option == $day) { echo '<option value=""' . stripslashes(htmlentities(strip_tags($option))) . '"" selected=""selected"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>' . ""\n""; } else { echo '<option value=""'. stripslashes(htmlentities(strip_tags($option))) . '"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>'.""\n""; } } echo '</select>'; ?> <label for=""year"" class=""hide"">Year: </label><input type=""text"" name=""year"" id=""year"" size=""4"" maxlength=""4"" value=""<?php if (isset($_POST['year'])) { echo stripslashes(htmlentities(strip_tags($_POST['year']))); } else if(!empty($year)) { echo stripslashes(htmlentities(strip_tags($year))); } ?>"" /></li> <li><input type=""submit"" name=""submit"" value=""Save Changes"" class=""save-button"" /> <input type=""hidden"" name=""submitted"" value=""true"" /> <input type=""submit"" name=""submit"" value=""Preview Changes"" class=""preview-changes-button"" /></li> </ul> </fieldset> </form>"
"6","bad","$month$day$yearMay 6 1901if (isset($_POST['submitted'])) { $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""SELECT users.* FROM users WHERE user_id=3""); $month_options = array(""Month"", ""January"", ""February"", ""March"", ""April"", ""May"", ""June"", ""July"", ""August"", ""September"", ""October"", ""November"", ""December""); $day_options = array(""Day"", ""1"", ""2"", ""3"", ""4"", ""5"", ""6"", ""7"", ""8"", ""9"", ""10"", ""11"", ""12"", ""13"", ""14"", ""15"", ""16"", ""17"", ""18"", ""19"", ""20"", ""21"", ""22"", ""23"", ""24"", ""25"", ""26"", ""27"", ""28"", ""29"", ""30"", ""31""); $month = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['month']))); $day = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['day']))); $year = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['year']))); if (mysqli_num_rows($dbc) == 0) { $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""INSERT INTO users (user_id, month, day, year) VALUES ('$user_id', '$month', '$day', '$year')""); } if ($dbc == TRUE) { $dbc = mysqli_query($mysqli,""UPDATE users SET month = '$month', day = '$day', year = '$year' WHERE user_id = '$user_id'""); echo '<p class=""changes-saved"">Your changes have been saved!</p>'; } if (!$dbc) { print mysqli_error($mysqli); return; } }<form method=""post"" action=""index.php""> <fieldset> <ul> <li><label>Date of Birth: </label> <label for=""month"" class=""hide"">Month: </label> <?php // month options echo '<select name=""month"" id=""month"">' . ""\n""; foreach($month_options as $option) { if ($option == $month) { echo '<option value=""' . stripslashes(htmlentities(strip_tags($option))) . '"" selected=""selected"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>' . ""\n""; } else { echo '<option value=""'. stripslashes(htmlentities(strip_tags($option))) . '"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>'.""\n""; } } echo '</select>'; ?> <label for=""day"" class=""hide"">Day: </label> <?php // day options echo '<select id=""day"" name=""day"">' . ""\n""; foreach($day_options as $option) { if ($option == $day) { echo '<option value=""' . stripslashes(htmlentities(strip_tags($option))) . '"" selected=""selected"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>' . ""\n""; } else { echo '<option value=""'. stripslashes(htmlentities(strip_tags($option))) . '"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>'.""\n""; } } echo '</select>'; ?> <label for=""year"" class=""hide"">Year: </label><input type=""text"" name=""year"" id=""year"" size=""4"" maxlength=""4"" value=""<?php if (isset($_POST['year'])) { echo stripslashes(htmlentities(strip_tags($_POST['year']))); } else if(!empty($year)) { echo stripslashes(htmlentities(strip_tags($year))); } ?>"" /></li> <li><input type=""submit"" name=""submit"" value=""Save Changes"" class=""save-button"" /> <input type=""hidden"" name=""submitted"" value=""true"" /> <input type=""submit"" name=""submit"" value=""Preview Changes"" class=""preview-changes-button"" /></li> </ul> </fieldset> </form>"
"7","bad","$month$day$yearMay 6 1901if (isset($_POST['submitted'])) { $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""SELECT users.* FROM users WHERE user_id=3""); $month_options = array(""Month"", ""January"", ""February"", ""March"", ""April"", ""May"", ""June"", ""July"", ""August"", ""September"", ""October"", ""November"", ""December""); $day_options = array(""Day"", ""1"", ""2"", ""3"", ""4"", ""5"", ""6"", ""7"", ""8"", ""9"", ""10"", ""11"", ""12"", ""13"", ""14"", ""15"", ""16"", ""17"", ""18"", ""19"", ""20"", ""21"", ""22"", ""23"", ""24"", ""25"", ""26"", ""27"", ""28"", ""29"", ""30"", ""31""); $month = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['month']))); $day = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['day']))); $year = mysqli_real_escape_string($mysqli, htmlentities(strip_tags($_POST['year']))); if (mysqli_num_rows($dbc) == 0) { $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""INSERT INTO users (user_id, month, day, year) VALUES ('$user_id', '$month', '$day', '$year')""); } if ($dbc == TRUE) { $dbc = mysqli_query($mysqli,""UPDATE users SET month = '$month', day = '$day', year = '$year' WHERE user_id = '$user_id'""); echo '<p class=""changes-saved"">Your changes have been saved!</p>'; } if (!$dbc) { print mysqli_error($mysqli); return; } }<form method=""post"" action=""index.php""> <fieldset> <ul> <li><label>Date of Birth: </label> <label for=""month"" class=""hide"">Month: </label> <?php // month options echo '<select name=""month"" id=""month"">' . ""\n""; foreach($month_options as $option) { if ($option == $month) { echo '<option value=""' . stripslashes(htmlentities(strip_tags($option))) . '"" selected=""selected"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>' . ""\n""; } else { echo '<option value=""'. stripslashes(htmlentities(strip_tags($option))) . '"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>'.""\n""; } } echo '</select>'; ?> <label for=""day"" class=""hide"">Day: </label> <?php // day options echo '<select id=""day"" name=""day"">' . ""\n""; foreach($day_options as $option) { if ($option == $day) { echo '<option value=""' . stripslashes(htmlentities(strip_tags($option))) . '"" selected=""selected"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>' . ""\n""; } else { echo '<option value=""'. stripslashes(htmlentities(strip_tags($option))) . '"">' . stripslashes(htmlentities(strip_tags($option))) . '</option>'.""\n""; } } echo '</select>'; ?> <label for=""year"" class=""hide"">Year: </label><input type=""text"" name=""year"" id=""year"" size=""4"" maxlength=""4"" value=""<?php if (isset($_POST['year'])) { echo stripslashes(htmlentities(strip_tags($_POST['year']))); } else if(!empty($year)) { echo stripslashes(htmlentities(strip_tags($year))); } ?>"" /></li> <li><input type=""submit"" name=""submit"" value=""Save Changes"" class=""save-button"" /> <input type=""hidden"" name=""submitted"" value=""true"" /> <input type=""submit"" name=""submit"" value=""Preview Changes"" class=""preview-changes-button"" /></li> </ul> </fieldset> </form>"
"8","bad","<?php //tipping fees application require('base.inc.php'); require('functions.inc.php'); // connect to the database & save this message there try { $dbh = new PDO(""mysql:host=$dbhost;dbname=$dbname"", $dbuser, $dbpass); //$number = formatPhone($_REQUEST['From']); //if($number != 'xxx-xxx-xxxx'){die('SMS from unknown number');} // kill this if from anyone but mike $message = $_REQUEST['Body']; //$Sid = $_REQUEST['SmsSid']; $now = time(); echo $message; $message = explode("","",$message); echo '<pre>'; print_r($message); echo 'message count = '.count($message); echo '</pre>'; $i = 0; $j = count($message); while($i<$j){ $quantity =$message[$i]; $material = substr($quantity, 0, 1); $amount = substr($quantity, 1); switch ($material) { case 'p': $m = ""paper""; break; case 'c': $m = ""containers""; break; default: $m = ""other""; } $count = $dbh->exec(""INSERT INTO tippingtotals(sid,time,material,weight) VALUES('$i+$j','$now','$m','$amount')""); echo $count; echo '<br />'; $i++; } //close the database connection $dbh = null; } catch(PDOException $e) { echo $e->getMessage(); } ?>http://localhost/mysite/save.php?Body=p180,c220 GET /mysite/save.php?Body=p180,c220 HTTP/1.1 Host: localhost User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 115 Connection: keep-alive HTTP/1.1 200 OK Date: Mon, 19 Apr 2010 22:17:31 GMT Server: Apache/2.0.63 (Unix) PHP/5.2.11 DAV/2 X-Powered-By: PHP/5.2.11 Content-Length: 93 Keep-Alive: timeout=15, max=100 Connection: Keep-Alive Content-Type: text/html ----------------------------------------------------------"
"9","bad","<?php //tipping fees application require('base.inc.php'); require('functions.inc.php'); // connect to the database & save this message there try { $dbh = new PDO(""mysql:host=$dbhost;dbname=$dbname"", $dbuser, $dbpass); //$number = formatPhone($_REQUEST['From']); //if($number != 'xxx-xxx-xxxx'){die('SMS from unknown number');} // kill this if from anyone but mike $message = $_REQUEST['Body']; //$Sid = $_REQUEST['SmsSid']; $now = time(); echo $message; $message = explode("","",$message); echo '<pre>'; print_r($message); echo 'message count = '.count($message); echo '</pre>'; $i = 0; $j = count($message); while($i<$j){ $quantity =$message[$i]; $material = substr($quantity, 0, 1); $amount = substr($quantity, 1); switch ($material) { case 'p': $m = ""paper""; break; case 'c': $m = ""containers""; break; default: $m = ""other""; } $count = $dbh->exec(""INSERT INTO tippingtotals(sid,time,material,weight) VALUES('$i+$j','$now','$m','$amount')""); echo $count; echo '<br />'; $i++; } //close the database connection $dbh = null; } catch(PDOException $e) { echo $e->getMessage(); } ?>http://localhost/mysite/save.php?Body=p180,c220 GET /mysite/save.php?Body=p180,c220 HTTP/1.1 Host: localhost User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 115 Connection: keep-alive HTTP/1.1 200 OK Date: Mon, 19 Apr 2010 22:17:31 GMT Server: Apache/2.0.63 (Unix) PHP/5.2.11 DAV/2 X-Powered-By: PHP/5.2.11 Content-Length: 93 Keep-Alive: timeout=15, max=100 Connection: Keep-Alive Content-Type: text/html ----------------------------------------------------------"
"10","bad","<?php //tipping fees application require('base.inc.php'); require('functions.inc.php'); // connect to the database & save this message there try { $dbh = new PDO(""mysql:host=$dbhost;dbname=$dbname"", $dbuser, $dbpass); //$number = formatPhone($_REQUEST['From']); //if($number != 'xxx-xxx-xxxx'){die('SMS from unknown number');} // kill this if from anyone but mike $message = $_REQUEST['Body']; //$Sid = $_REQUEST['SmsSid']; $now = time(); echo $message; $message = explode("","",$message); echo '<pre>'; print_r($message); echo 'message count = '.count($message); echo '</pre>'; $i = 0; $j = count($message); while($i<$j){ $quantity =$message[$i]; $material = substr($quantity, 0, 1); $amount = substr($quantity, 1); switch ($material) { case 'p': $m = ""paper""; break; case 'c': $m = ""containers""; break; default: $m = ""other""; } $count = $dbh->exec(""INSERT INTO tippingtotals(sid,time,material,weight) VALUES('$i+$j','$now','$m','$amount')""); echo $count; echo '<br />'; $i++; } //close the database connection $dbh = null; } catch(PDOException $e) { echo $e->getMessage(); } ?>http://localhost/mysite/save.php?Body=p180,c220 GET /mysite/save.php?Body=p180,c220 HTTP/1.1 Host: localhost User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 115 Connection: keep-alive HTTP/1.1 200 OK Date: Mon, 19 Apr 2010 22:17:31 GMT Server: Apache/2.0.63 (Unix) PHP/5.2.11 DAV/2 X-Powered-By: PHP/5.2.11 Content-Length: 93 Keep-Alive: timeout=15, max=100 Connection: Keep-Alive Content-Type: text/html ----------------------------------------------------------"
"11","bad","<p>This color has already been entered!</p>$_POST['color']<input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" />for($i=0; $i < count($_POST['color']); $i++) { $color = ""'"" . $_POST['color'][$i] . ""'""; } $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""SELECT * FROM colors WHERE color = '$color' AND user = '$user_id' ""); if(mysqli_num_rows($dbc) == TRUE) { echo '<p>This color has already been entered!</p>'; } else if(mysqli_num_rows($dbc) == 0) { // enter the color into the database }"
"12","bad","<p>This color has already been entered!</p>$_POST['color']<input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" />for($i=0; $i < count($_POST['color']); $i++) { $color = ""'"" . $_POST['color'][$i] . ""'""; } $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""SELECT * FROM colors WHERE color = '$color' AND user = '$user_id' ""); if(mysqli_num_rows($dbc) == TRUE) { echo '<p>This color has already been entered!</p>'; } else if(mysqli_num_rows($dbc) == 0) { // enter the color into the database }"
"13","bad","<p>This color has already been entered!</p>$_POST['color']<input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" /> <input type=""text"" name=""color[]"" />for($i=0; $i < count($_POST['color']); $i++) { $color = ""'"" . $_POST['color'][$i] . ""'""; } $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename""); $dbc = mysqli_query($mysqli,""SELECT * FROM colors WHERE color = '$color' AND user = '$user_id' ""); if(mysqli_num_rows($dbc) == TRUE) { echo '<p>This color has already been entered!</p>'; } else if(mysqli_num_rows($dbc) == 0) { // enter the color into the database }"
"14","bad","<?php $realname = $_POST['realname']; $age = $_POST['age']; $country = $_POST['country']; $gamename = $_POST['gamename']; $gamelevel = $_POST['gamelevel']; $itemlevel = $_POST['itemlevel']; $class = $_POST['class']; $played = $_POST['played']; $support = $_POST['support']; mysql_connect (""localhost"", ""mydb_userid"", ""MYPASSWORD"") or die ('Error: ' . mysql_error()); mysql_select_db (""mydb_recruitment""); $query=""INSERT INTO applicants (ID, realname, age, country, gamename, gamelevel, itemlevel, class, played, support)VALUES ('NULL','"".$realname.""','"".$age.""','"".$country.""','"".$gamename.""','"".$gamelevel.""','"".$itemlevel.""','"".$class.""','"".$played.""','"".$support.""')""; mysql_query($query) or die ('Error updating DB'); echo ""You have sucessfully sent an application. Your details will be reviewed and someone will get back to you""; ?><!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <title>Candidate Registration</title> </head> <body> <form medthod=""post"" action=""update.php""> Real Name:<br /> <input type=""text"" name=""realname"" size=""50"" /><br /> Age:<br /> <input type=""text"" name=""age"" size=""10"" /><br /> Country:<br /> <input type=""text"" name=""country"" size=""20"" /><br /> In Game Name:<br /> <input type=""text"" name=""gamename"" size=""30"" /><br /> In Game Level:<br /> <input type=""text"" name=""gamelevel"" size=""10"" /><br /> In Game Item Level:<br /> <input type=""text"" name=""itemlevel"" size=""10"" /><br /> Class Played:<br /> <input type=""text"" name=""class"" size=""30"" /><br /> How long have you played wow?:<br /> <input type=""text"" name=""played"" size=""10"" /><br /> Please enter a brief statement of why you want to join:<br /> <input type=""text"" name=""support"" size=""5000"" /><br /> <br /> <input type=""submit"" value=""Update DB"" /> </form> </body> </html><?php $realname = $_POST['realname']; $age = $_POST['age']; $country = $_POST['country']; $gamename = $_POST['gamename']; $gamelevel = $_POST['gamelevel']; $itemlevel = $_POST['itemlevel']; $class = $_POST['class']; $played = $_POST['played']; $support = $_POST['support']; mysql_connect (""localhost"", ""mydb_daniel"", ""mypwd"") or die ('Error: ' . mysql_error()); mysql_select_db (""mydb_recruitment""); $query=""INSERT INTO applicants (ID, realname, age, country, gamename, gamelevel, itemlevel, class, played, support)VALUES ('NULL','"".$realname.""','"".$age.""','"".$country.""','"".$gamename.""','"".$gamelevel.""','"".$itemlevel.""','"".$class.""','"".$played.""','"".$support.""')""; mysql_query($query) or die ('Error updating DB'); echo ""You have sucessfully sent an application. Your details will be reviewed and someone will get back to you""; ?>"
"15","bad","<?php $realname = $_POST['realname']; $age = $_POST['age']; $country = $_POST['country']; $gamename = $_POST['gamename']; $gamelevel = $_POST['gamelevel']; $itemlevel = $_POST['itemlevel']; $class = $_POST['class']; $played = $_POST['played']; $support = $_POST['support']; mysql_connect (""localhost"", ""mydb_userid"", ""MYPASSWORD"") or die ('Error: ' . mysql_error()); mysql_select_db (""mydb_recruitment""); $query=""INSERT INTO applicants (ID, realname, age, country, gamename, gamelevel, itemlevel, class, played, support)VALUES ('NULL','"".$realname.""','"".$age.""','"".$country.""','"".$gamename.""','"".$gamelevel.""','"".$itemlevel.""','"".$class.""','"".$played.""','"".$support.""')""; mysql_query($query) or die ('Error updating DB'); echo ""You have sucessfully sent an application. Your details will be reviewed and someone will get back to you""; ?><!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <title>Candidate Registration</title> </head> <body> <form medthod=""post"" action=""update.php""> Real Name:<br /> <input type=""text"" name=""realname"" size=""50"" /><br /> Age:<br /> <input type=""text"" name=""age"" size=""10"" /><br /> Country:<br /> <input type=""text"" name=""country"" size=""20"" /><br /> In Game Name:<br /> <input type=""text"" name=""gamename"" size=""30"" /><br /> In Game Level:<br /> <input type=""text"" name=""gamelevel"" size=""10"" /><br /> In Game Item Level:<br /> <input type=""text"" name=""itemlevel"" size=""10"" /><br /> Class Played:<br /> <input type=""text"" name=""class"" size=""30"" /><br /> How long have you played wow?:<br /> <input type=""text"" name=""played"" size=""10"" /><br /> Please enter a brief statement of why you want to join:<br /> <input type=""text"" name=""support"" size=""5000"" /><br /> <br /> <input type=""submit"" value=""Update DB"" /> </form> </body> </html><?php $realname = $_POST['realname']; $age = $_POST['age']; $country = $_POST['country']; $gamename = $_POST['gamename']; $gamelevel = $_POST['gamelevel']; $itemlevel = $_POST['itemlevel']; $class = $_POST['class']; $played = $_POST['played']; $support = $_POST['support']; mysql_connect (""localhost"", ""mydb_daniel"", ""mypwd"") or die ('Error: ' . mysql_error()); mysql_select_db (""mydb_recruitment""); $query=""INSERT INTO applicants (ID, realname, age, country, gamename, gamelevel, itemlevel, class, played, support)VALUES ('NULL','"".$realname.""','"".$age.""','"".$country.""','"".$gamename.""','"".$gamelevel.""','"".$itemlevel.""','"".$class.""','"".$played.""','"".$support.""')""; mysql_query($query) or die ('Error updating DB'); echo ""You have sucessfully sent an application. Your details will be reviewed and someone will get back to you""; ?>"
"16","bad","<form name=""form1"" method=""post"" action=""checklogin.php""> <td> <table width=""100%"" border=""0"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#FFFFFF"" class=""post""> <tr> <td colspan=""3""><h2><strong>Member Login </strong></h2></td> </tr> <tr> <td width=""78"">Username</td> <td width=""6"">:</td> <td width=""294""><input name=""myusername"" type=""text"" id=""myusername"" maxlength=""65""></td> </tr> <tr> <td>Password</td> <td>:</td> <td><input name=""mypassword"" type=""password"" id=""mypassword"" maxlength=""65""></td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> <td><input type=""submit"" name=""Submit"" value=""Login""></td> </tr> </table> </td> </form><?php ob_start(); $host=""localhost""; // Host name $username=""root""; // Mysql username $password=""123""; // Mysql password $db_name=""test""; // Database name $tbl_name=""member""; // Table name // Connect to server and select databse. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Define $myusername and $mypassword $myusername=$_POST['myusername']; $mypassword=$_POST['mypassword']; // To protect MySQL injection (more detail about MySQL injection) $myusername = stripslashes($myusername); $mypassword = stripslashes($mypassword); $myusername = mysql_real_escape_string($myusername); $mypassword = mysql_real_escape_string($mypassword); $sql=""SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'""; $result=mysql_query($sql); // Mysql_num_row is counting table row $count=mysql_num_rows($result); // If result matched $myusername and $mypassword, table row must be 1 row if($count==1){ // Register $myusername, $mypassword and redirect to file ""login_success.php"" session_register(""myusername""); session_register(""mypassword""); echo(""<SCRIPT LANGUAGE='JavaScript'>window.alert('you have logged in successfully')</SCRIPT>""); echo(""<SCRIPT LANGUAGE='JavaScript'>window.location = 'main_login.php'</SCRIPT>""); //header(""location:login_success.php""); //window.location = 'login_success.php' //echo ""<script>navigate('login_success.php')</script>""; //exit(); } else { echo ""Wrong Username or Password""; include 'main_login.php'; } ob_end_flush(); ?>"
"17","bad","<form name=""form1"" method=""post"" action=""checklogin.php""> <td> <table width=""100%"" border=""0"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#FFFFFF"" class=""post""> <tr> <td colspan=""3""><h2><strong>Member Login </strong></h2></td> </tr> <tr> <td width=""78"">Username</td> <td width=""6"">:</td> <td width=""294""><input name=""myusername"" type=""text"" id=""myusername"" maxlength=""65""></td> </tr> <tr> <td>Password</td> <td>:</td> <td><input name=""mypassword"" type=""password"" id=""mypassword"" maxlength=""65""></td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> <td><input type=""submit"" name=""Submit"" value=""Login""></td> </tr> </table> </td> </form><?php ob_start(); $host=""localhost""; // Host name $username=""root""; // Mysql username $password=""123""; // Mysql password $db_name=""test""; // Database name $tbl_name=""member""; // Table name // Connect to server and select databse. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Define $myusername and $mypassword $myusername=$_POST['myusername']; $mypassword=$_POST['mypassword']; // To protect MySQL injection (more detail about MySQL injection) $myusername = stripslashes($myusername); $mypassword = stripslashes($mypassword); $myusername = mysql_real_escape_string($myusername); $mypassword = mysql_real_escape_string($mypassword); $sql=""SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'""; $result=mysql_query($sql); // Mysql_num_row is counting table row $count=mysql_num_rows($result); // If result matched $myusername and $mypassword, table row must be 1 row if($count==1){ // Register $myusername, $mypassword and redirect to file ""login_success.php"" session_register(""myusername""); session_register(""mypassword""); echo(""<SCRIPT LANGUAGE='JavaScript'>window.alert('you have logged in successfully')</SCRIPT>""); echo(""<SCRIPT LANGUAGE='JavaScript'>window.location = 'main_login.php'</SCRIPT>""); //header(""location:login_success.php""); //window.location = 'login_success.php' //echo ""<script>navigate('login_success.php')</script>""; //exit(); } else { echo ""Wrong Username or Password""; include 'main_login.php'; } ob_end_flush(); ?>"
"18","bad","Question: <input type=""text"" name=""question[][text]"" id=""question"" /> Type: <select name=""question[][type]"" id=""type""> <option value=""1to5scale"">1 to 5 scale</option> <option value=""freetext"">Open text</option> </select>foreach ( $_POST['question'] as $key=>$question ) { if ($key >= 1) { $question_text = $question['text']; $type = $question['type']; $query = "" INSERT INTO questions (question_text, survey_id, type) "". "" VALUES ('$question_text','$survey_id', '$type')""; mysql_query($query) or die('Error ,query failed'); } }"
"19","bad","<?php if(isset($_POST[user_name])) { $user_name=$_POST[user_name]; include(""include/conn.php""); $sql_check = mysql_query(""select userid from `vector`.`signup` where userid='"".$user_name.""'"") or die(mysql_error()); //checking weather user exists or not in $existing_users array if (mysql_num_rows($sql_check)) { //user name is not availble echo ""no""; } else { //user name is available echo ""yes""; } } ?><script language=""javascript""> $(document).ready(function() { $(""#username"").blur(function() { //remove all the class add the messagebox classes and start fading $(""#msgbox"").removeClass().addClass('messagebox').text('Checking...').fadeIn(""slow""); //check the username exists or not from ajax $.post(""user_availability.php"",{ user_name:$(this).val() } ,function(data) { if(data=='no') //if username not avaiable { $(""#msgbox"").fadeTo(200,0.1,function() //start fading the messagebox { //add message and change the class of the box and start fading $(this).html('This User name Already exists').addClass('messageboxerror').fadeTo(900,1); }); } else { $(""#msgbox"").fadeTo(200,0.1,function() //start fading the messagebox { //add message and change the class of the box and start fading $(this).html('Username available to register').addClass('messageboxok').fadeTo(900,1); }); } }); }); }); </script>"
"20","bad","<?php if(isset($_POST[user_name])) { $user_name=$_POST[user_name]; include(""include/conn.php""); $sql_check = mysql_query(""select userid from `vector`.`signup` where userid='"".$user_name.""'"") or die(mysql_error()); //checking weather user exists or not in $existing_users array if (mysql_num_rows($sql_check)) { //user name is not availble echo ""no""; } else { //user name is available echo ""yes""; } } ?><script language=""javascript""> $(document).ready(function() { $(""#username"").blur(function() { //remove all the class add the messagebox classes and start fading $(""#msgbox"").removeClass().addClass('messagebox').text('Checking...').fadeIn(""slow""); //check the username exists or not from ajax $.post(""user_availability.php"",{ user_name:$(this).val() } ,function(data) { if(data=='no') //if username not avaiable { $(""#msgbox"").fadeTo(200,0.1,function() //start fading the messagebox { //add message and change the class of the box and start fading $(this).html('This User name Already exists').addClass('messageboxerror').fadeTo(900,1); }); } else { $(""#msgbox"").fadeTo(200,0.1,function() //start fading the messagebox { //add message and change the class of the box and start fading $(this).html('Username available to register').addClass('messageboxok').fadeTo(900,1); }); } }); }); }); </script>"
"21","bad","$row[0]$select = ""SELECT U.id, U.first_name, U.last_name, U.email_address, U.password, U.gender, U.day, U.month, U.year, COUNT(O.user_id) FROM users U LEFT JOIN orders O ON U.id = O.user_id GROUP BY U.id ORDER BY id $order LIMIT $offset , $rowsPerPage""; $result=mysql_query($select) or die(mysql_error()); while($row=mysql_fetch_array($result)){ ?> <table> <tr> <td><?php echo ""<a href= 'editUser.html'> $row[0]</a>""; ?></td> <td><?php echo $row[1];?></td> <td><?php echo $row[2];?></td> <td><?php echo $row[3];?></td> <td><?php echo $row[4];?></td> <td><?php echo $row[5];?></td> <td><?php echo $row[6];?></td> <td><?php echo $row[7];?></td> <td><?php echo $row[8];?></td> <td><?php echo $row[9];} </tr> </table>"
"22","bad","$row[0]$select = ""SELECT U.id, U.first_name, U.last_name, U.email_address, U.password, U.gender, U.day, U.month, U.year, COUNT(O.user_id) FROM users U LEFT JOIN orders O ON U.id = O.user_id GROUP BY U.id ORDER BY id $order LIMIT $offset , $rowsPerPage""; $result=mysql_query($select) or die(mysql_error()); while($row=mysql_fetch_array($result)){ ?> <table> <tr> <td><?php echo ""<a href= 'editUser.html'> $row[0]</a>""; ?></td> <td><?php echo $row[1];?></td> <td><?php echo $row[2];?></td> <td><?php echo $row[3];?></td> <td><?php echo $row[4];?></td> <td><?php echo $row[5];?></td> <td><?php echo $row[6];?></td> <td><?php echo $row[7];?></td> <td><?php echo $row[8];?></td> <td><?php echo $row[9];} </tr> </table>"
"23","bad","$row[0]$select = ""SELECT U.id, U.first_name, U.last_name, U.email_address, U.password, U.gender, U.day, U.month, U.year, COUNT(O.user_id) FROM users U LEFT JOIN orders O ON U.id = O.user_id GROUP BY U.id ORDER BY id $order LIMIT $offset , $rowsPerPage""; $result=mysql_query($select) or die(mysql_error()); while($row=mysql_fetch_array($result)){ ?> <table> <tr> <td><?php echo ""<a href= 'editUser.html'> $row[0]</a>""; ?></td> <td><?php echo $row[1];?></td> <td><?php echo $row[2];?></td> <td><?php echo $row[3];?></td> <td><?php echo $row[4];?></td> <td><?php echo $row[5];?></td> <td><?php echo $row[6];?></td> <td><?php echo $row[7];?></td> <td><?php echo $row[8];?></td> <td><?php echo $row[9];} </tr> </table>"
"24","bad","<form method=POST action=myActPage.php> <input type=PASSWORD name=PWD value="""" /> <input type=SUBMIT value=GO /> </form>if ($_POST) { $pwd = $_POST['PWD']; $pwd = md5($pwd); $response = mysql_query(""INSERT INTO tbl_pwd ('pwd') VALUES ('$pwd') ""); }"
"25","bad","http://mydomain.com/get.php?id=TEXTMASH-1FD0066D-F75A-5D0C-6784-2FA0D055B0D7TEXTMASH-1FD0066D-F75A-5D0C-6784-2FA0D055B0D7<?php include_once(""../../extern/dbinclude.php""); $id= $_GET['id']; $result = mysql_query(""SELECT text FROM mytable WHERE id='$id'"") or die(mysql_error()); $row = mysql_fetch_array($result); if($row) { echo nl2br($row['text']); } else { ?> <h2>Invalid URL</h2> <?php }"
"26","bad","http://mydomain.com/get.php?id=TEXTMASH-1FD0066D-F75A-5D0C-6784-2FA0D055B0D7TEXTMASH-1FD0066D-F75A-5D0C-6784-2FA0D055B0D7<?php include_once(""../../extern/dbinclude.php""); $id= $_GET['id']; $result = mysql_query(""SELECT text FROM mytable WHERE id='$id'"") or die(mysql_error()); $row = mysql_fetch_array($result); if($row) { echo nl2br($row['text']); } else { ?> <h2>Invalid URL</h2> <?php }"
"27","bad","$u_name = verisign_ssl_encryption($_POST['username']); $pass = verisign_ssl_encryption($_POST['password']); mysql_query('insert into table (username,password) values (""'.$u_name.'"", ""'.$pass.'"")';$row = mysql_fetch_array(mysql_query('select * from table where u_id = 1')); $user_card_no = verisign_ssl_decrypt($row['card_no']); echo $user_card_no;"
"28","bad","<html> <head> <title>Address Book</title> </head> <body> <?php mysql_connect(""localhost"", ""mydb"", ""mypassword"") or die(mysql_error()); mysql_select_db(""mydb"") or die(mysql_error()); if (isset($_POST['mode'])) { $mode = $_POST['mode']; $id = $_POST['id']; $name = $_POST['name']; $phone = $_POST['phone']; $email= $_POST['email']; if ($mode==""add"") {Print '<h2>Add Contact</h2> <p> <form action="""" method=post> <table> <tr><td>Name:</td><td><input type=""text"" name=""name"" /></td></tr> <tr><td>Phone:</td><td><input type=""text"" name=""phone"" /></td></tr> <tr><td>Email:</td><td><input type=""text"" name=""email"" /></td></tr> <tr><td colspan=""2"" align=""center""> <input type=""hidden"" name=""mode"" value=""added"" /> <input type=""submit"" value=""Submit"" /> </td></tr> </table> </form> <p>'; } if ($mode ==""added"") {mysql_query (""INSERT INTO address (name, phone, email) VALUES ( '$name', '$phone', '$email')""); echo ""New contact added successfully!"";} if ($mode==""edit"") {Print '<h2>Edit Contact</h2> <p> <form action="""" method=post> <table> <tr><td>Name:</td><td><input type=""text"" value=""'; Print $name; print '"" name=""name"" /></td></tr> <tr><td>Phone:</td><td><input type=""text"" value=""'; Print $phone; print '"" name=""phone"" /></td></tr> <tr><td>Email:</td><td><input type=""text"" value=""'; Print $email; print '"" name=""email"" /></td></tr> <tr><td colspan=""2"" align=""center""><input type=""submit"" /></td></tr> <input type=hidden name=mode value=edited> <input type=hidden name=id value='; Print $id; print '> </table> </form> <p>'; } if($mode==""edited"") {mysql_query (""UPDATE address SET name = '$name', phone = '$phone', email = '$email' WHERE id = $id""); Print ""Data Updated!<p>"";} if ($mode==""remove"") {mysql_query (""DELETE FROM address where id=$id""); Print ""Entry has been removed <p>"";} } $data = mysql_query(""SELECT * FROM address ORDER BY name ASC"") or die(mysql_error()); Print '<h2>Address Book</h2><p> <form action="""" method=post> <table border cellpadding=3> <tr><th width=100>Name</th><th width=100>Phone</th><th width=200>Email</th><th width=100 colspan=2>Admin</th></tr> <td colspan=5 align=right> <input type =""hidden"" name = ""mode"" value=""add""/> <input type = ""submit"" value=""Add Contact""/>'; while($info = mysql_fetch_array( $data )) { Print ""<tr><td>"".$info['name'] . ""</td> ""; Print ""<td>"".$info['phone'] . ""</td> ""; Print ""<td> <a href=mailto:"".$info['email'] . "">"" .$info['email'] . ""</a></td>""; Print '<td> <input type =""hidden"" name=""mode"" vlaue=""edit""/> <input type =""submit"" value=""Edit"" ?id='. $info['id'] .'&name=' . $info['name'] .' &phone=' . $info ['phone'] .'&email=' . $info['email'] .'/></td>'; Print ""<td> <input type ='hidden' name='mode' value='remove'/> <input type ='hidden' name='id' value = "".$info['id']."" /> <input type ='submit' value = 'remove' /> </td></tr> ""; } Print ""</table>""; Print "" </form>""; if(!$mode) echo ""You may add, edit or delete a contact""; echo $mode; ?> </body> </html>"
"29","bad","<html> <head> <title>Address Book</title> </head> <body> <?php mysql_connect(""localhost"", ""mydb"", ""mypassword"") or die(mysql_error()); mysql_select_db(""mydb"") or die(mysql_error()); if (isset($_POST['mode'])) { $mode = $_POST['mode']; $id = $_POST['id']; $name = $_POST['name']; $phone = $_POST['phone']; $email= $_POST['email']; if ($mode==""add"") {Print '<h2>Add Contact</h2> <p> <form action="""" method=post> <table> <tr><td>Name:</td><td><input type=""text"" name=""name"" /></td></tr> <tr><td>Phone:</td><td><input type=""text"" name=""phone"" /></td></tr> <tr><td>Email:</td><td><input type=""text"" name=""email"" /></td></tr> <tr><td colspan=""2"" align=""center""> <input type=""hidden"" name=""mode"" value=""added"" /> <input type=""submit"" value=""Submit"" /> </td></tr> </table> </form> <p>'; } if ($mode ==""added"") {mysql_query (""INSERT INTO address (name, phone, email) VALUES ( '$name', '$phone', '$email')""); echo ""New contact added successfully!"";} if ($mode==""edit"") {Print '<h2>Edit Contact</h2> <p> <form action="""" method=post> <table> <tr><td>Name:</td><td><input type=""text"" value=""'; Print $name; print '"" name=""name"" /></td></tr> <tr><td>Phone:</td><td><input type=""text"" value=""'; Print $phone; print '"" name=""phone"" /></td></tr> <tr><td>Email:</td><td><input type=""text"" value=""'; Print $email; print '"" name=""email"" /></td></tr> <tr><td colspan=""2"" align=""center""><input type=""submit"" /></td></tr> <input type=hidden name=mode value=edited> <input type=hidden name=id value='; Print $id; print '> </table> </form> <p>'; } if($mode==""edited"") {mysql_query (""UPDATE address SET name = '$name', phone = '$phone', email = '$email' WHERE id = $id""); Print ""Data Updated!<p>"";} if ($mode==""remove"") {mysql_query (""DELETE FROM address where id=$id""); Print ""Entry has been removed <p>"";} } $data = mysql_query(""SELECT * FROM address ORDER BY name ASC"") or die(mysql_error()); Print '<h2>Address Book</h2><p> <form action="""" method=post> <table border cellpadding=3> <tr><th width=100>Name</th><th width=100>Phone</th><th width=200>Email</th><th width=100 colspan=2>Admin</th></tr> <td colspan=5 align=right> <input type =""hidden"" name = ""mode"" value=""add""/> <input type = ""submit"" value=""Add Contact""/>'; while($info = mysql_fetch_array( $data )) { Print ""<tr><td>"".$info['name'] . ""</td> ""; Print ""<td>"".$info['phone'] . ""</td> ""; Print ""<td> <a href=mailto:"".$info['email'] . "">"" .$info['email'] . ""</a></td>""; Print '<td> <input type =""hidden"" name=""mode"" vlaue=""edit""/> <input type =""submit"" value=""Edit"" ?id='. $info['id'] .'&name=' . $info['name'] .' &phone=' . $info ['phone'] .'&email=' . $info['email'] .'/></td>'; Print ""<td> <input type ='hidden' name='mode' value='remove'/> <input type ='hidden' name='id' value = "".$info['id']."" /> <input type ='submit' value = 'remove' /> </td></tr> ""; } Print ""</table>""; Print "" </form>""; if(!$mode) echo ""You may add, edit or delete a contact""; echo $mode; ?> </body> </html>"
"30","bad","<html> <head> <title>Address Book</title> </head> <body> <?php mysql_connect(""localhost"", ""mydb"", ""mypassword"") or die(mysql_error()); mysql_select_db(""mydb"") or die(mysql_error()); if (isset($_POST['mode'])) { $mode = $_POST['mode']; $id = $_POST['id']; $name = $_POST['name']; $phone = $_POST['phone']; $email= $_POST['email']; if ($mode==""add"") {Print '<h2>Add Contact</h2> <p> <form action="""" method=post> <table> <tr><td>Name:</td><td><input type=""text"" name=""name"" /></td></tr> <tr><td>Phone:</td><td><input type=""text"" name=""phone"" /></td></tr> <tr><td>Email:</td><td><input type=""text"" name=""email"" /></td></tr> <tr><td colspan=""2"" align=""center""> <input type=""hidden"" name=""mode"" value=""added"" /> <input type=""submit"" value=""Submit"" /> </td></tr> </table> </form> <p>'; } if ($mode ==""added"") {mysql_query (""INSERT INTO address (name, phone, email) VALUES ( '$name', '$phone', '$email')""); echo ""New contact added successfully!"";} if ($mode==""edit"") {Print '<h2>Edit Contact</h2> <p> <form action="""" method=post> <table> <tr><td>Name:</td><td><input type=""text"" value=""'; Print $name; print '"" name=""name"" /></td></tr> <tr><td>Phone:</td><td><input type=""text"" value=""'; Print $phone; print '"" name=""phone"" /></td></tr> <tr><td>Email:</td><td><input type=""text"" value=""'; Print $email; print '"" name=""email"" /></td></tr> <tr><td colspan=""2"" align=""center""><input type=""submit"" /></td></tr> <input type=hidden name=mode value=edited> <input type=hidden name=id value='; Print $id; print '> </table> </form> <p>'; } if($mode==""edited"") {mysql_query (""UPDATE address SET name = '$name', phone = '$phone', email = '$email' WHERE id = $id""); Print ""Data Updated!<p>"";} if ($mode==""remove"") {mysql_query (""DELETE FROM address where id=$id""); Print ""Entry has been removed <p>"";} } $data = mysql_query(""SELECT * FROM address ORDER BY name ASC"") or die(mysql_error()); Print '<h2>Address Book</h2><p> <form action="""" method=post> <table border cellpadding=3> <tr><th width=100>Name</th><th width=100>Phone</th><th width=200>Email</th><th width=100 colspan=2>Admin</th></tr> <td colspan=5 align=right> <input type =""hidden"" name = ""mode"" value=""add""/> <input type = ""submit"" value=""Add Contact""/>'; while($info = mysql_fetch_array( $data )) { Print ""<tr><td>"".$info['name'] . ""</td> ""; Print ""<td>"".$info['phone'] . ""</td> ""; Print ""<td> <a href=mailto:"".$info['email'] . "">"" .$info['email'] . ""</a></td>""; Print '<td> <input type =""hidden"" name=""mode"" vlaue=""edit""/> <input type =""submit"" value=""Edit"" ?id='. $info['id'] .'&name=' . $info['name'] .' &phone=' . $info ['phone'] .'&email=' . $info['email'] .'/></td>'; Print ""<td> <input type ='hidden' name='mode' value='remove'/> <input type ='hidden' name='id' value = "".$info['id']."" /> <input type ='submit' value = 'remove' /> </td></tr> ""; } Print ""</table>""; Print "" </form>""; if(!$mode) echo ""You may add, edit or delete a contact""; echo $mode; ?> </body> </html>"
"31","bad","if ($row1>0) { $id3=mysql_query(""SELECT id FROM searchengine WHERE url='$url'""); $runrow2=mysql_query(""SELECT * FROM keywords WHERE id='$id3' AND keyword='$search'""); $row2=mysql_num_rows($runrow2); $runrow3=mysql_query(""SELECT * FROM tags WHERE id='$id3' AND tag='$tag'""); $row3=mysql_num_rows($runrow3); if ($row2==0) { mysql_query(""INSERT INTO keywords (id,keyword) VALUES ($id3,'$search')""); } if ($row3==0) { mysql_query(""INSERT INTO tags (id,tag) VALUES ($id3,'$tag')""); } if ($row2>0 and $row3>0) { ?> <script type=""text/javascript""> alert(""Already in database.""); history.back(); </script> <?php } if ($row2==0 or $row3==0) { ?> <script type=""text/javascript""> alert(""Successfully updated.""); history.back(); </script> <?php } }"
"32","bad","if ($row1>0) { $id3=mysql_query(""SELECT id FROM searchengine WHERE url='$url'""); $runrow2=mysql_query(""SELECT * FROM keywords WHERE id='$id3' AND keyword='$search'""); $row2=mysql_num_rows($runrow2); $runrow3=mysql_query(""SELECT * FROM tags WHERE id='$id3' AND tag='$tag'""); $row3=mysql_num_rows($runrow3); if ($row2==0) { mysql_query(""INSERT INTO keywords (id,keyword) VALUES ($id3,'$search')""); } if ($row3==0) { mysql_query(""INSERT INTO tags (id,tag) VALUES ($id3,'$tag')""); } if ($row2>0 and $row3>0) { ?> <script type=""text/javascript""> alert(""Already in database.""); history.back(); </script> <?php } if ($row2==0 or $row3==0) { ?> <script type=""text/javascript""> alert(""Successfully updated.""); history.back(); </script> <?php } }"
"33","bad","$ids = '""' . implode('"", ""', $crumbs) . '""'; $motd = array(); $dober = $db->query(""SELECT id, name, msg, datetime FROM tbl_depts td INNER JOIN tbl_motd tm ON td.id = tm.deptid WHERE td.id IN ("" . $ids . "")""); while ($row = $dober->fetch_array()) { $motd[] = $row; }Array ( [0] => Array ( [0] => 1 [id] => 1 [1] => Management [name] => Management [2] => New Management Rule! [msg] => New Management Rule! [3] => [datetime] => ) [1] => Array ( [0] => 2 [id] => 2 [1] => Human Resources [name] => Human Resources [2] => DPS [msg] => DPS [3] => [datetime] => ) )foreach ($motd[] as &$value) { if ($motd['msg'] != """") { if ($i == 0) { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab active""><?php echo $value['name']; ?></a></li> <? } elseif ($i == $len - 1) { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab""><?php echo $value['name']; ?></a></li> <?php } else { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab""><?php echo $value['name']; ?></a></li> <? } $i++; } }"
"34","bad","$ids = '""' . implode('"", ""', $crumbs) . '""'; $motd = array(); $dober = $db->query(""SELECT id, name, msg, datetime FROM tbl_depts td INNER JOIN tbl_motd tm ON td.id = tm.deptid WHERE td.id IN ("" . $ids . "")""); while ($row = $dober->fetch_array()) { $motd[] = $row; }Array ( [0] => Array ( [0] => 1 [id] => 1 [1] => Management [name] => Management [2] => New Management Rule! [msg] => New Management Rule! [3] => [datetime] => ) [1] => Array ( [0] => 2 [id] => 2 [1] => Human Resources [name] => Human Resources [2] => DPS [msg] => DPS [3] => [datetime] => ) )foreach ($motd[] as &$value) { if ($motd['msg'] != """") { if ($i == 0) { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab active""><?php echo $value['name']; ?></a></li> <? } elseif ($i == $len - 1) { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab""><?php echo $value['name']; ?></a></li> <?php } else { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab""><?php echo $value['name']; ?></a></li> <? } $i++; } }"
"35","bad","$ids = '""' . implode('"", ""', $crumbs) . '""'; $motd = array(); $dober = $db->query(""SELECT id, name, msg, datetime FROM tbl_depts td INNER JOIN tbl_motd tm ON td.id = tm.deptid WHERE td.id IN ("" . $ids . "")""); while ($row = $dober->fetch_array()) { $motd[] = $row; }Array ( [0] => Array ( [0] => 1 [id] => 1 [1] => Management [name] => Management [2] => New Management Rule! [msg] => New Management Rule! [3] => [datetime] => ) [1] => Array ( [0] => 2 [id] => 2 [1] => Human Resources [name] => Human Resources [2] => DPS [msg] => DPS [3] => [datetime] => ) )foreach ($motd[] as &$value) { if ($motd['msg'] != """") { if ($i == 0) { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab active""><?php echo $value['name']; ?></a></li> <? } elseif ($i == $len - 1) { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab""><?php echo $value['name']; ?></a></li> <?php } else { ?> <li><a href=""#"" title=""content_<?php echo $value['id']; ?>"" class=""tab""><?php echo $value['name']; ?></a></li> <? } $i++; } }"
"36","bad","<?php include (""db.php""); ?> <script src='js/jquery-1.4.2.min.js' type='text/javascript'></script> <script src=""js/jquery.valid8.js"" type=""text/javascript"" charset=""utf-8""></script> <?php $username = mysql_real_escape_string($_POST['username']); $email = mysql_real_escape_string($_POST['email']); $password = mysql_real_escape_string($_POST['password']); $act=isset($_GET['act'])?$_GET['act']:""""; if($act=='sub'){ $result = mysql_query (""INSERT INTO users (username, email, password) VALUES ('"".$username.""','"".$email.""','"".$password.""')"") or die (mysql_error()); echo ""Data Updated""; } ?> <form class=""form_user"" method=""post"" action=""register.php?act=sub""> <section> <label for=""user""> Username </label> <div> <input type=""text"" tabindex=""1"" class=""input"" id=""inputUsername"" name=""username"" onblur=""check(this)"" value="""" /> </div> </section> <!--#--> <section> <label for=""user_mail""> Email </label> <div> <input type=""text"" tabindex=""2"" class=""input"" id=""inputEmail"" name=""email"" value="""" /> </div> </section> <!--#--> <section> <label for=""pass""> Password </label> <div> <input type=""password"" tabindex=""3"" class=""input"" id=""inputPassword"" name=""password"" value="""" /> </div> </section> <!--#--> <section> <label for=""pass""> Re-type Password </label> <div> <input type=""password"" tabindex=""4"" class=""input"" id=""inputConfirmPassword"" name=""password"" value="""" /> </div> </section> <!--#--> <br /> <input type=""submit"" tabindex=""5"" id=""buttonSignup"" value=""Regisiter"" /> </form> </div> </div> </section> <script type=""text/javascript""> // <![CDATA[ $(document).ready(function(){ // Set focus to first input $('#inputUsername').focus(); // Custom validator (checks if password == confirm password) function confirmPassword(args){ if(args.password == args.check) return {valid:true} else return {valid:false, message:'Passwords does not match'} } // Username is required $('#inputPassword, #inputUsername').valid8(); // Confirm password must match Password $('#inputConfirmPassword').valid8({ regularExpressions: [ {expression: /^.+$/, errormessage: 'Required'} ], jsFunctions:[ { 'function': confirmPassword, 'values': function(){ return {password: $('#inputPassword').val(), check: $('#inputConfirmPassword').val()} }} ] }); $('#inputUsername').valid8({ regularExpressions: [ {expression: /^.+$/, errormessage: 'Required'} ], ajaxRequests: [ { url: 'class/isUsernameUnique.php'} ] }); $('#inputPolicy').valid8(); $('#inputEmail').valid8({ regularExpressions: [ {expression: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel.ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|.fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|.il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\b$/, errormessage: 'You sure it is valid? The next step in this registration will be sent to the email you enter here.'} ] }); // Check if all input fields are valid $('#buttonSignup').click(function(){ alert('Are input fields valid? ' + $('input').isValid()); }); }); // ]]> </script> <span id=""msgbox"" ></span><?php include (""../db.php""); $username = $_GET['username']; if(!isUsernameUnique($username)){ $json[""valid""] = false; $json[""message""] = 'username is already in use'; } else { $json[""valid""] = true; } function isUsernameUnique($username){ $query = mysql_query(""SELECT * FROM users WHERE username ='$username'""); $result = mysql_num_rows($query); if ($result > 0) { $vl = '0'; } if ($result < 1){ $vl = '1';} return ($vl); } print json_encode($json); ?>"
"37","bad","<?php include (""db.php""); ?> <script src='js/jquery-1.4.2.min.js' type='text/javascript'></script> <script src=""js/jquery.valid8.js"" type=""text/javascript"" charset=""utf-8""></script> <?php $username = mysql_real_escape_string($_POST['username']); $email = mysql_real_escape_string($_POST['email']); $password = mysql_real_escape_string($_POST['password']); $act=isset($_GET['act'])?$_GET['act']:""""; if($act=='sub'){ $result = mysql_query (""INSERT INTO users (username, email, password) VALUES ('"".$username.""','"".$email.""','"".$password.""')"") or die (mysql_error()); echo ""Data Updated""; } ?> <form class=""form_user"" method=""post"" action=""register.php?act=sub""> <section> <label for=""user""> Username </label> <div> <input type=""text"" tabindex=""1"" class=""input"" id=""inputUsername"" name=""username"" onblur=""check(this)"" value="""" /> </div> </section> <!--#--> <section> <label for=""user_mail""> Email </label> <div> <input type=""text"" tabindex=""2"" class=""input"" id=""inputEmail"" name=""email"" value="""" /> </div> </section> <!--#--> <section> <label for=""pass""> Password </label> <div> <input type=""password"" tabindex=""3"" class=""input"" id=""inputPassword"" name=""password"" value="""" /> </div> </section> <!--#--> <section> <label for=""pass""> Re-type Password </label> <div> <input type=""password"" tabindex=""4"" class=""input"" id=""inputConfirmPassword"" name=""password"" value="""" /> </div> </section> <!--#--> <br /> <input type=""submit"" tabindex=""5"" id=""buttonSignup"" value=""Regisiter"" /> </form> </div> </div> </section> <script type=""text/javascript""> // <![CDATA[ $(document).ready(function(){ // Set focus to first input $('#inputUsername').focus(); // Custom validator (checks if password == confirm password) function confirmPassword(args){ if(args.password == args.check) return {valid:true} else return {valid:false, message:'Passwords does not match'} } // Username is required $('#inputPassword, #inputUsername').valid8(); // Confirm password must match Password $('#inputConfirmPassword').valid8({ regularExpressions: [ {expression: /^.+$/, errormessage: 'Required'} ], jsFunctions:[ { 'function': confirmPassword, 'values': function(){ return {password: $('#inputPassword').val(), check: $('#inputConfirmPassword').val()} }} ] }); $('#inputUsername').valid8({ regularExpressions: [ {expression: /^.+$/, errormessage: 'Required'} ], ajaxRequests: [ { url: 'class/isUsernameUnique.php'} ] }); $('#inputPolicy').valid8(); $('#inputEmail').valid8({ regularExpressions: [ {expression: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel.ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|.fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|.il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\b$/, errormessage: 'You sure it is valid? The next step in this registration will be sent to the email you enter here.'} ] }); // Check if all input fields are valid $('#buttonSignup').click(function(){ alert('Are input fields valid? ' + $('input').isValid()); }); }); // ]]> </script> <span id=""msgbox"" ></span><?php include (""../db.php""); $username = $_GET['username']; if(!isUsernameUnique($username)){ $json[""valid""] = false; $json[""message""] = 'username is already in use'; } else { $json[""valid""] = true; } function isUsernameUnique($username){ $query = mysql_query(""SELECT * FROM users WHERE username ='$username'""); $result = mysql_num_rows($query); if ($result > 0) { $vl = '0'; } if ($result < 1){ $vl = '1';} return ($vl); } print json_encode($json); ?>"
"38","bad","<?php include (""db.php""); ?> <script src='js/jquery-1.4.2.min.js' type='text/javascript'></script> <script src=""js/jquery.valid8.js"" type=""text/javascript"" charset=""utf-8""></script> <?php $username = mysql_real_escape_string($_POST['username']); $email = mysql_real_escape_string($_POST['email']); $password = mysql_real_escape_string($_POST['password']); $act=isset($_GET['act'])?$_GET['act']:""""; if($act=='sub'){ $result = mysql_query (""INSERT INTO users (username, email, password) VALUES ('"".$username.""','"".$email.""','"".$password.""')"") or die (mysql_error()); echo ""Data Updated""; } ?> <form class=""form_user"" method=""post"" action=""register.php?act=sub""> <section> <label for=""user""> Username </label> <div> <input type=""text"" tabindex=""1"" class=""input"" id=""inputUsername"" name=""username"" onblur=""check(this)"" value="""" /> </div> </section> <!--#--> <section> <label for=""user_mail""> Email </label> <div> <input type=""text"" tabindex=""2"" class=""input"" id=""inputEmail"" name=""email"" value="""" /> </div> </section> <!--#--> <section> <label for=""pass""> Password </label> <div> <input type=""password"" tabindex=""3"" class=""input"" id=""inputPassword"" name=""password"" value="""" /> </div> </section> <!--#--> <section> <label for=""pass""> Re-type Password </label> <div> <input type=""password"" tabindex=""4"" class=""input"" id=""inputConfirmPassword"" name=""password"" value="""" /> </div> </section> <!--#--> <br /> <input type=""submit"" tabindex=""5"" id=""buttonSignup"" value=""Regisiter"" /> </form> </div> </div> </section> <script type=""text/javascript""> // <![CDATA[ $(document).ready(function(){ // Set focus to first input $('#inputUsername').focus(); // Custom validator (checks if password == confirm password) function confirmPassword(args){ if(args.password == args.check) return {valid:true} else return {valid:false, message:'Passwords does not match'} } // Username is required $('#inputPassword, #inputUsername').valid8(); // Confirm password must match Password $('#inputConfirmPassword').valid8({ regularExpressions: [ {expression: /^.+$/, errormessage: 'Required'} ], jsFunctions:[ { 'function': confirmPassword, 'values': function(){ return {password: $('#inputPassword').val(), check: $('#inputConfirmPassword').val()} }} ] }); $('#inputUsername').valid8({ regularExpressions: [ {expression: /^.+$/, errormessage: 'Required'} ], ajaxRequests: [ { url: 'class/isUsernameUnique.php'} ] }); $('#inputPolicy').valid8(); $('#inputEmail').valid8({ regularExpressions: [ {expression: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel.ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|.fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|.il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\b$/, errormessage: 'You sure it is valid? The next step in this registration will be sent to the email you enter here.'} ] }); // Check if all input fields are valid $('#buttonSignup').click(function(){ alert('Are input fields valid? ' + $('input').isValid()); }); }); // ]]> </script> <span id=""msgbox"" ></span><?php include (""../db.php""); $username = $_GET['username']; if(!isUsernameUnique($username)){ $json[""valid""] = false; $json[""message""] = 'username is already in use'; } else { $json[""valid""] = true; } function isUsernameUnique($username){ $query = mysql_query(""SELECT * FROM users WHERE username ='$username'""); $result = mysql_num_rows($query); if ($result > 0) { $vl = '0'; } if ($result < 1){ $vl = '1';} return ($vl); } print json_encode($json); ?>"
"39","bad","if($_REQUEST['do'] == 'edit') { $title = 'change password'; $page = $_POST['page']; $userId = safe($_POST['userId']); $passwd = safe($_POST['password']); $email = safe($_POST['Email']); $passw2 = $_POST['password2']; if(md5($passwd) == $_SESSION['user']['password']) { if(empty($passw2)) { $pass = $_SESSION['user']['password']; } else { $pass = $passw2; } $query = $db->query(""UPDATE users SET email = '"".$email.""' , password = '"".$pass.""' WHERE Id = '"".$userId.""' ""); if($query) { $msg = ""password changed successfully""; }"
"40","bad","if($_REQUEST['do'] == 'edit') { $title = 'change password'; $page = $_POST['page']; $userId = safe($_POST['userId']); $passwd = safe($_POST['password']); $email = safe($_POST['Email']); $passw2 = $_POST['password2']; if(md5($passwd) == $_SESSION['user']['password']) { if(empty($passw2)) { $pass = $_SESSION['user']['password']; } else { $pass = $passw2; } $query = $db->query(""UPDATE users SET email = '"".$email.""' , password = '"".$pass.""' WHERE Id = '"".$userId.""' ""); if($query) { $msg = ""password changed successfully""; }"
"41","bad","if($_REQUEST['do'] == 'edit') { $title = 'change password'; $page = $_POST['page']; $userId = safe($_POST['userId']); $passwd = safe($_POST['password']); $email = safe($_POST['Email']); $passw2 = $_POST['password2']; if(md5($passwd) == $_SESSION['user']['password']) { if(empty($passw2)) { $pass = $_SESSION['user']['password']; } else { $pass = $passw2; } $query = $db->query(""UPDATE users SET email = '"".$email.""' , password = '"".$pass.""' WHERE Id = '"".$userId.""' ""); if($query) { $msg = ""password changed successfully""; }"
"42","bad","<? $host=""XXXXXXXXXXXX""; $username=""XXXXXXXX""; $password=""XXXXXXXX""; $db_name=""XXXXXXXXX""; $tbl_name=""cartons_current""; mysql_connect(""$host"", ""$username"", ""$password"") or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); $order = ""INSERT INTO cartons_current (type, part_no, description, count, size, min, max, qty) VALUES ('$_POST[type]', '$_POST[part_no]', '$_POST[description]', '$_POST[count]', '$_POST[size]', '$_POST[min]', '$_POST[max]', '$_POST[qty]')""; $result = mysql_query($order); $result = mysql_query($order); //order executes if ($result) { $part_no = $_REQUEST['part_no'] ; header(""location: inv_fc_result_new_success.php?part_no="" . urlencode($part_no)); } else { header(""location: inv_fc_result_new_fail.php""); } ?>"
"43","bad","<? $host=""XXXXXXXXXXXX""; $username=""XXXXXXXX""; $password=""XXXXXXXX""; $db_name=""XXXXXXXXX""; $tbl_name=""cartons_current""; mysql_connect(""$host"", ""$username"", ""$password"") or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); $order = ""INSERT INTO cartons_current (type, part_no, description, count, size, min, max, qty) VALUES ('$_POST[type]', '$_POST[part_no]', '$_POST[description]', '$_POST[count]', '$_POST[size]', '$_POST[min]', '$_POST[max]', '$_POST[qty]')""; $result = mysql_query($order); $result = mysql_query($order); //order executes if ($result) { $part_no = $_REQUEST['part_no'] ; header(""location: inv_fc_result_new_success.php?part_no="" . urlencode($part_no)); } else { header(""location: inv_fc_result_new_fail.php""); } ?>"
"44","bad","if(empty($errors)){ $id = mysql_prep($_GET['subj']); $menu_name = mysql_prep($_POST['menu_name']); $position = mysql_prep($_POST['position']); $visible = mysql_prep($_POST['visible']); $content = mysql_prep($_POST['content']); $subject = get_subject_by_id($id));//This fetches the subject id from the db $query = ""INSERT INTO pages WHERE subject_id = $subject ( menu_name, position, visible, content ) VALUES ( '{$menu_name}', {$position}, {$visible}, '{$content}' )""; $result = mysql_query($query, $db_connect); if (mysql_affected_rows() == 1){ echo ""<p>suceess</p>""; } else { ...."
"45","bad","$_SERVER['REQUEST_URI'] . $_SERVER['QUERY_STRING']index.php?$_SERVER['PHP_SELF']Array ( . . . [REQUEST_METHOD] => GET [QUERY_STRING] => view=scores&yr=2010&wk=1 [REQUEST_URI] => /index.php?view=scores&yr=2010&wk=1 . . . )mysql_query(""insert into clickstream (user_id, page) values ("" . $_SESSION['user_id'] . "", '"" . mysql_real_escape_string($_SERVER['REQUEST_URI']) . mysql_real_escape_string($_SERVER['QUERY_STRING']) . ""');"") or die('mysql error: ' . mysql_error());?$_SERVER['QUERY_STRING']?"
"46","bad","$_SERVER['REQUEST_URI'] . $_SERVER['QUERY_STRING']index.php?$_SERVER['PHP_SELF']Array ( . . . [REQUEST_METHOD] => GET [QUERY_STRING] => view=scores&yr=2010&wk=1 [REQUEST_URI] => /index.php?view=scores&yr=2010&wk=1 . . . )mysql_query(""insert into clickstream (user_id, page) values ("" . $_SESSION['user_id'] . "", '"" . mysql_real_escape_string($_SERVER['REQUEST_URI']) . mysql_real_escape_string($_SERVER['QUERY_STRING']) . ""');"") or die('mysql error: ' . mysql_error());?$_SERVER['QUERY_STRING']?"
"47","bad","function showResult(str) { if (str=="""") { document.getElementById(""description"").innerHTML=""""; return; } if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); } else {// code for IE6, IE5 xmlhttp=new ActiveXObject(""Microsoft.XMLHTTP""); } xmlhttp.onreadystatechange=function() { if (xmlhttp.readyState==4 && xmlhttp.status==200) { document.getElementById(""description"").innerHTML=xmlhttp.responseText; } } xmlhttp.open(""GET"",""getuser.php?voucher=""+str,true); xmlhttp.send(null); }<?php $q=$_GET[""voucher""]; $con = mysql_connect('localhost', 'root', ''); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""test"", $con); $sql=""SELECT * FROM redemption WHERE voucher = '"".$q.""'""; $result = mysql_query($sql); echo ""<table> <tr> <th>Name</th> <th>Product</th> <th>Address</th> <th>Status</th> </tr>""; while($row = mysql_fetch_array($result)) { echo ""<tr>""; echo ""<td>"" . $row['name'] . ""</td>""; echo ""<td>"" . $row['product'] . ""</td>""; echo ""<td>"" . $row['address'] ."" "".$row['city'] ."" "".$row['province'] ."" "".$row['postal'] . ""</td>""; echo ""<td>"" . $row['status'] . ""</td>""; echo ""</tr>""; } echo ""</table>""; mysql_close($con); ?>$sql=""SELECT * FROM redemption WHERE voucher = '"".$q.""'"" AND status = 'not redeemed'"
"48","bad","<?php $result = mysql_query(""SELECT * FROM products "") or die(mysql_error()); ; if (mysql_num_rows($result) == 0) { echo 'There Arent Any Products'; } else { echo ""<table border='1' width=100%><tr><th>Product Name</th><th>Description</th><th>Price</th><th>Image</th><th>Edit</th><th>Delete</th>""; while($info = mysql_fetch_array($result)) { echo ""<tr>""; echo ""<td>"" . $info['name']. ""</td>""; echo ""<td>"" . $info['description']. ""</td>""; echo ""<td>£"" .$info['price']."" </td>""; echo ""<td>"" . ""<img src='../getImage.php?id="" . $info['serial'] .""'/></td>""; echo '<td> <a href=""edit.php?product_id=' . $info['serial'] . '"">Edit</a></td>'; } } echo ""</tr>""; echo ""</table>""; ?><?php $id = $_GET['product_id']; $query = mysql_query(""SELECT * FROM products WHERE serial = '$id'"") or die(mysql_error()); while($info = mysql_fetch_array($query)) { echo """"; $name = $info['name']; $description = $info['description']; $price = $info['price']; $picture = $info['picture']; } ?> <form action=""editsuccess.php"" method=""post""> Product ID:<br/> <input type=""text"" value=""<?php echo $id;?>"" name=""serial"" disabled/> <br/> Name:<br/> <input type=""text"" value=""<?php echo $name;?>"" name=""name""/> <br/> Description:<br/> <input type=""text"" value=""<?php echo $description;?>"" name=""description""/> <br/> Price:<br/> <input type=""text"" value=""<?php echo $price;?>"" name=""price""/> <br/> Picture:<br/> <? echo'<img src=""../getImage.php?id=' . $info['serial'] .'""/>'?> </br> <input type=""submit"" value=""Update Product""/> </form><?php session_start(); require_once '../includes/db.php'; $id = $_REQUEST['product_id']; $name = $_POST['name']; $description = $_POST['description']; $price = $_POST['price']; $info = ""UPDATE products SET name='$name', description ='$description', price ='$price' WHERE serial ='$id'""; mysql_query($info) or die (""Error: "".mysql_error()); echo ""Database updated.""; ?>"
"49","bad","<?php $result = mysql_query(""SELECT * FROM products "") or die(mysql_error()); ; if (mysql_num_rows($result) == 0) { echo 'There Arent Any Products'; } else { echo ""<table border='1' width=100%><tr><th>Product Name</th><th>Description</th><th>Price</th><th>Image</th><th>Edit</th><th>Delete</th>""; while($info = mysql_fetch_array($result)) { echo ""<tr>""; echo ""<td>"" . $info['name']. ""</td>""; echo ""<td>"" . $info['description']. ""</td>""; echo ""<td>£"" .$info['price']."" </td>""; echo ""<td>"" . ""<img src='../getImage.php?id="" . $info['serial'] .""'/></td>""; echo '<td> <a href=""edit.php?product_id=' . $info['serial'] . '"">Edit</a></td>'; } } echo ""</tr>""; echo ""</table>""; ?><?php $id = $_GET['product_id']; $query = mysql_query(""SELECT * FROM products WHERE serial = '$id'"") or die(mysql_error()); while($info = mysql_fetch_array($query)) { echo """"; $name = $info['name']; $description = $info['description']; $price = $info['price']; $picture = $info['picture']; } ?> <form action=""editsuccess.php"" method=""post""> Product ID:<br/> <input type=""text"" value=""<?php echo $id;?>"" name=""serial"" disabled/> <br/> Name:<br/> <input type=""text"" value=""<?php echo $name;?>"" name=""name""/> <br/> Description:<br/> <input type=""text"" value=""<?php echo $description;?>"" name=""description""/> <br/> Price:<br/> <input type=""text"" value=""<?php echo $price;?>"" name=""price""/> <br/> Picture:<br/> <? echo'<img src=""../getImage.php?id=' . $info['serial'] .'""/>'?> </br> <input type=""submit"" value=""Update Product""/> </form><?php session_start(); require_once '../includes/db.php'; $id = $_REQUEST['product_id']; $name = $_POST['name']; $description = $_POST['description']; $price = $_POST['price']; $info = ""UPDATE products SET name='$name', description ='$description', price ='$price' WHERE serial ='$id'""; mysql_query($info) or die (""Error: "".mysql_error()); echo ""Database updated.""; ?>"
"50","bad","$_GET$_GETSELECT text FROM database WHERE id=$_GET['id'];$_GETmysql_real_escape_string()addslashes()strip_tags()"
"51","bad","$_GET$_GETSELECT text FROM database WHERE id=$_GET['id'];$_GETmysql_real_escape_string()addslashes()strip_tags()"
"52","bad","$_GET$_GETSELECT text FROM database WHERE id=$_GET['id'];$_GETmysql_real_escape_string()addslashes()strip_tags()"
"53","bad","if ($_GET['action'] == ""like"") { mysql_query(""UPDATE blog SET like=like+1 WHERE id="".$_GET['id'].""""); header('Location: blog.php?id='.$_GET['id'].''); } else if ($_GET['action'] == ""dislike"") { mysql_query(""UPDATE blog SET dislike = dislike+1 WHERE id = "".$_GET['id'].""""); header('Location: blog.php?id='.$_GET['id'].''); }"
"54","bad","if ($_GET['action'] == ""like"") { mysql_query(""UPDATE blog SET like=like+1 WHERE id="".$_GET['id'].""""); header('Location: blog.php?id='.$_GET['id'].''); } else if ($_GET['action'] == ""dislike"") { mysql_query(""UPDATE blog SET dislike = dislike+1 WHERE id = "".$_GET['id'].""""); header('Location: blog.php?id='.$_GET['id'].''); }"
"55","bad","if ($_GET['action'] == ""like"") { mysql_query(""UPDATE blog SET like=like+1 WHERE id="".$_GET['id'].""""); header('Location: blog.php?id='.$_GET['id'].''); } else if ($_GET['action'] == ""dislike"") { mysql_query(""UPDATE blog SET dislike = dislike+1 WHERE id = "".$_GET['id'].""""); header('Location: blog.php?id='.$_GET['id'].''); }"
"56","bad","echo sha1(""password"");<?php session_start(); require(""config.php""); if(isset($_POST['submit'])) { $username = mysql_real_escape_string($_POST['username']); $password = sha1(mysql_real_escape_string($_POST['password'])); $loginsql = ""SELECT * FROM login WHERE username = '"" . $username . ""' AND password = '"" . $password . ""'""; $loginresult = mysql_query($loginsql); $loginnumrows = mysql_num_rows($loginresult); if($loginnumrows == 1) { $loginrow = mysql_fetch_assoc($loginresult); session_register(""USERNAME""); session_register(""USERID""); $_SESSION['USERNAME'] = $loginrow['username']; $_SESSION['USERID'] = $loginrow['id']; header(""Location: "" . $config_basedir . ""controlpanel.php""); } else{ echo ""<p>Incorrect Login, please try again!</p>""; } } else{ } ?>"
"57","bad","echo sha1(""password"");<?php session_start(); require(""config.php""); if(isset($_POST['submit'])) { $username = mysql_real_escape_string($_POST['username']); $password = sha1(mysql_real_escape_string($_POST['password'])); $loginsql = ""SELECT * FROM login WHERE username = '"" . $username . ""' AND password = '"" . $password . ""'""; $loginresult = mysql_query($loginsql); $loginnumrows = mysql_num_rows($loginresult); if($loginnumrows == 1) { $loginrow = mysql_fetch_assoc($loginresult); session_register(""USERNAME""); session_register(""USERID""); $_SESSION['USERNAME'] = $loginrow['username']; $_SESSION['USERID'] = $loginrow['id']; header(""Location: "" . $config_basedir . ""controlpanel.php""); } else{ echo ""<p>Incorrect Login, please try again!</p>""; } } else{ } ?>"
"58","bad","mysql_set_charset('utf8');mb_internal_encoding('UTF-8');mysql_query('INSERT INTO `table` SET `name`=""Jáuò Iñe""');JÃ¡uÃ² IÃ±e$m = mysql_real_escape_string('¿<?php echo ""¬<b>\'PHP &aacute; (á)ţăriîş </b>""; ?> ă-ţi abcdd;//;ñç´พดแทฝใจคçăâξβψδπλξξςαยนñ ;'); mysql_set_charset('utf8'); mysql_query('INSERT INTO `table` SET `name`=""'.$m.'""'); mysql_set_charset('latin1'); mysql_query('INSERT INTO `table` SET `name`=""'.$m.'""'); mysql_set_charset('utf8'); $result = mysql_iquery('SELECT * FROM `table`'); while ($row = mysql_fetch_assoc($result)) { $message = $row['name']; $message = mb_convert_encoding($message, 'ISO-8859-15', 'UTF-8'); //$message = iconv(""UTF-8"", ""ISO-8859-1//IGNORE"", $message); mysql_iquery('UPDATE `table` SET `name`=""'.mysql_real_escape_string($message).'"" WHERE `a1`=""'.$row['a1'].'""'); }"
"59","bad","<?php $__error_reporting_level=1; $server='localhost'; $user='root'; $password=''; $dbase='eauction'; ?><?php include ('config.php'); error_reporting($__error_reporting_level); class sql { function connect() { $connections = mysql_connect($server, $user,$password) or die ('Unabale to connect to the database'); mysql_select_db($dbase) or die ('Unable to select database!'); return; } function login($email, $pwd) { $this->connect(); $result = $this->qry(""SELECT uid,nameF FROM user WHERE email='"".$email.""' AND password='"".$pwd.""'""); $row=mysql_fetch_array($result); if (mysql_num_rows($result)>0) return array($row[0],$row[1]); else return array(0,0); } } ?>include ('core/sql.php'); $obj = new sql; $data=$obj->login($email,$pwd); print_r($data);"
"60","bad","<?php $__error_reporting_level=1; $server='localhost'; $user='root'; $password=''; $dbase='eauction'; ?><?php include ('config.php'); error_reporting($__error_reporting_level); class sql { function connect() { $connections = mysql_connect($server, $user,$password) or die ('Unabale to connect to the database'); mysql_select_db($dbase) or die ('Unable to select database!'); return; } function login($email, $pwd) { $this->connect(); $result = $this->qry(""SELECT uid,nameF FROM user WHERE email='"".$email.""' AND password='"".$pwd.""'""); $row=mysql_fetch_array($result); if (mysql_num_rows($result)>0) return array($row[0],$row[1]); else return array(0,0); } } ?>include ('core/sql.php'); $obj = new sql; $data=$obj->login($email,$pwd); print_r($data);"
"61","bad","<?php $__error_reporting_level=1; $server='localhost'; $user='root'; $password=''; $dbase='eauction'; ?><?php include ('config.php'); error_reporting($__error_reporting_level); class sql { function connect() { $connections = mysql_connect($server, $user,$password) or die ('Unabale to connect to the database'); mysql_select_db($dbase) or die ('Unable to select database!'); return; } function login($email, $pwd) { $this->connect(); $result = $this->qry(""SELECT uid,nameF FROM user WHERE email='"".$email.""' AND password='"".$pwd.""'""); $row=mysql_fetch_array($result); if (mysql_num_rows($result)>0) return array($row[0],$row[1]); else return array(0,0); } } ?>include ('core/sql.php'); $obj = new sql; $data=$obj->login($email,$pwd); print_r($data);"
"62","bad","Fatal error: require() [function.require]: Failed opening required '/home/retrorea/public_html/tradepost/includes/messages.english.php.inc.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/retrorea/public_html/tradepost/includes/messages.inc.php on line 5050require($include_path.'messages.'.$language.'.inc.php');<?#//v.3.2.5 if(!defined('INCLUDED')) exit(""Access denied""); #/////////////////////////////////////////////////////// #// COPYRIGHT 2007 Phpauction.net ALL RIGHTS RESERVED // #/////////////////////////////////////////////////////// /** ************************************************************* * NOTE: Language management */ if(!empty($_GET[lan])) { $language = $_GET[lan]; $_SESSION['language'] = $language; #// Set language cookie setcookie(""USERLANGUAGE"","""",time()-3600); setcookie(""USERLANGUAGE"",$_GET[lan],time()+31536000,""/""); } elseif(isset($_SESSION['language'])) { $language = $_SESSION['language']; } elseif(empty($_SESSION['language']) && !isset($_COOKIE['USERLANGUAGE'])) { $language = $SETTINGS['defaultlanguage']; $_SESSION['language'] = $language; #// Set language cookie setcookie(""USERLANGUAGE"","""",time()-3600); setcookie(""USERLANGUAGE"",$language,time()+31536000); } elseif(empty($_GET[lan])) { if(isset($_COOKIE['USERLANGUAGE'])) { $language = $_COOKIE['USERLANGUAGE']; } else { $language = $SETTINGS['defaultlanguage']; } } elseif(isset($_COOKIE['USERLANGUAGE'])) { $language = $_COOKIE['USERLANGUAGE']; } elseif(strlen($_GET[lan]) > 2 ) { $language = $SETTINGS['defaultlanguage']; } else { $language = $SETTINGS['defaultlanguage']; } $language = str_replace('..','',addslashes(htmlspecialchars($language))); #// If the user is logged in, update the user's record #// This is used to send the e-mails in the user's language if(isset($_SESSION['PHPAUCTION_LOGGED_IN'])) { mysql_query(""DELETE FROM PHPAUCTIONXL_userslanguage WHERE user='"".$_SESSION['PHPAUCTION_LOGGED_IN'].""'""); mysql_query(""INSERT INTO PHPAUCTIONXL_userslanguage VALUES( '"".$_SESSION['PHPAUCTION_LOGGED_IN'].""', '$language')""); } if (!$language) $language = $SETTINGS['defaultlanguage']; require($include_path.'messages.'.$language.'.inc.php'); /* **************************************************************/ ?>"
"63","bad","Fatal error: require() [function.require]: Failed opening required '/home/retrorea/public_html/tradepost/includes/messages.english.php.inc.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/retrorea/public_html/tradepost/includes/messages.inc.php on line 5050require($include_path.'messages.'.$language.'.inc.php');<?#//v.3.2.5 if(!defined('INCLUDED')) exit(""Access denied""); #/////////////////////////////////////////////////////// #// COPYRIGHT 2007 Phpauction.net ALL RIGHTS RESERVED // #/////////////////////////////////////////////////////// /** ************************************************************* * NOTE: Language management */ if(!empty($_GET[lan])) { $language = $_GET[lan]; $_SESSION['language'] = $language; #// Set language cookie setcookie(""USERLANGUAGE"","""",time()-3600); setcookie(""USERLANGUAGE"",$_GET[lan],time()+31536000,""/""); } elseif(isset($_SESSION['language'])) { $language = $_SESSION['language']; } elseif(empty($_SESSION['language']) && !isset($_COOKIE['USERLANGUAGE'])) { $language = $SETTINGS['defaultlanguage']; $_SESSION['language'] = $language; #// Set language cookie setcookie(""USERLANGUAGE"","""",time()-3600); setcookie(""USERLANGUAGE"",$language,time()+31536000); } elseif(empty($_GET[lan])) { if(isset($_COOKIE['USERLANGUAGE'])) { $language = $_COOKIE['USERLANGUAGE']; } else { $language = $SETTINGS['defaultlanguage']; } } elseif(isset($_COOKIE['USERLANGUAGE'])) { $language = $_COOKIE['USERLANGUAGE']; } elseif(strlen($_GET[lan]) > 2 ) { $language = $SETTINGS['defaultlanguage']; } else { $language = $SETTINGS['defaultlanguage']; } $language = str_replace('..','',addslashes(htmlspecialchars($language))); #// If the user is logged in, update the user's record #// This is used to send the e-mails in the user's language if(isset($_SESSION['PHPAUCTION_LOGGED_IN'])) { mysql_query(""DELETE FROM PHPAUCTIONXL_userslanguage WHERE user='"".$_SESSION['PHPAUCTION_LOGGED_IN'].""'""); mysql_query(""INSERT INTO PHPAUCTIONXL_userslanguage VALUES( '"".$_SESSION['PHPAUCTION_LOGGED_IN'].""', '$language')""); } if (!$language) $language = $SETTINGS['defaultlanguage']; require($include_path.'messages.'.$language.'.inc.php'); /* **************************************************************/ ?>"
"64","bad","<?php session_start(); if (isset($_POST['id'])) { $_SESSION['id'] = $_POST['id']; } if (isset($_POST['dateChosen'])) { $_SESSION['dateChosen'] = $_POST['dateChosen']; } if (isset($_POST['timeChosen'])) { $_SESSION['timeChosen'] = $_POST['timeChosen']; } $username=""xxx""; $password=""xxx""; $database=""xxx""; mysql_connect('localhost',$username,$password); mysql_select_db($database) or die( ""Unable to select database""); $insert = array(); for ($i = 1, $n = $_POST['sessionNum']; $i <= $n; ++$i) { $insert[] = ""' "". mysql_real_escape_string( $_POST['id'] ) . ($n == 1 ? '' : $i) . ""',' "". mysql_real_escape_string( $_POST['timeChosen'] ) . ""',' "". mysql_real_escape_string( date(""Y-m-d"", strtotime( $_POST['dateChosen'] ) ) ) . ""'""; } $sql = ""INSERT INTO Session (SessionId, SessionTime, SessionDate) VALUES ("" . implode('), (', $insert) . "")""; mysql_query($sql); mysql_close(); ?>"
"65","bad","<?php session_start(); if (isset($_POST['id'])) { $_SESSION['id'] = $_POST['id']; } if (isset($_POST['dateChosen'])) { $_SESSION['dateChosen'] = $_POST['dateChosen']; } if (isset($_POST['timeChosen'])) { $_SESSION['timeChosen'] = $_POST['timeChosen']; } $username=""xxx""; $password=""xxx""; $database=""xxx""; mysql_connect('localhost',$username,$password); mysql_select_db($database) or die( ""Unable to select database""); $insert = array(); for ($i = 1, $n = $_POST['sessionNum']; $i <= $n; ++$i) { $insert[] = ""' "". mysql_real_escape_string( $_POST['id'] ) . ($n == 1 ? '' : $i) . ""',' "". mysql_real_escape_string( $_POST['timeChosen'] ) . ""',' "". mysql_real_escape_string( date(""Y-m-d"", strtotime( $_POST['dateChosen'] ) ) ) . ""'""; } $sql = ""INSERT INTO Session (SessionId, SessionTime, SessionDate) VALUES ("" . implode('), (', $insert) . "")""; mysql_query($sql); mysql_close(); ?>"
"66","bad","else { $seatID = $_POST['form_submitted']; $query1 = ""SELECT seatTaken FROM SEATS WHERE seatNo = '$seatID'""; $result = mysql_query($query1); while($row = mysql_fetch_array($result)) { $taken = $row['seatTaken']; } $query2 = ""SELECT passNo FROM PASSENGER WHERE username = '$loggedinuser'""; $result = mysql_query($query2); while($row = mysql_fetch_array($result)) { $passno = $row['passNo']; } $query3 = ""SELECT groupID FROM PASSENGER WHERE username = '$loggedinuser'""; $result = mysql_query($query3); while($row = mysql_fetch_array($result)) { $groupno = $row['groupID']; } $query4 = ""SELECT flightNo FROM PASSENGER WHERE username = '$loggedinuser'""; $result = mysql_query($query3); while($row = mysql_fetch_array($result)) { $flightno = $row['flightNo']; } // if ($taken = 0) { $update = mysql_query(""UPDATE PASSENGER SET seatNo = $seatID WHERE username = '$loggedinuser'""); $update2 = mysql_query(""UPDATE SEATS SET seatTaken = 1, passNo = '$passNo', groupID = '$groupid' WHERE seatNo = '$seatID'""); // AND flightNo = '$flightno'"" echo '<meta http-equiv=""refresh"" content=""5;url=http://www.mywebsite.com/"">'; echo mysql_error(); //} } ?> $seatID = $_POST['form_submitted']; $update = mysql_query(""UPDATE PASSENGER SET seatNo = $seatID WHERE username = '$loggedinuser'""); $update2 = mysql_query(""UPDATE SEATS SET seatTaken = 1, passNo = '$passNo', groupID = '$groupid' WHERE seatNo = '$seatID'"");"
"67","bad","else { $seatID = $_POST['form_submitted']; $query1 = ""SELECT seatTaken FROM SEATS WHERE seatNo = '$seatID'""; $result = mysql_query($query1); while($row = mysql_fetch_array($result)) { $taken = $row['seatTaken']; } $query2 = ""SELECT passNo FROM PASSENGER WHERE username = '$loggedinuser'""; $result = mysql_query($query2); while($row = mysql_fetch_array($result)) { $passno = $row['passNo']; } $query3 = ""SELECT groupID FROM PASSENGER WHERE username = '$loggedinuser'""; $result = mysql_query($query3); while($row = mysql_fetch_array($result)) { $groupno = $row['groupID']; } $query4 = ""SELECT flightNo FROM PASSENGER WHERE username = '$loggedinuser'""; $result = mysql_query($query3); while($row = mysql_fetch_array($result)) { $flightno = $row['flightNo']; } // if ($taken = 0) { $update = mysql_query(""UPDATE PASSENGER SET seatNo = $seatID WHERE username = '$loggedinuser'""); $update2 = mysql_query(""UPDATE SEATS SET seatTaken = 1, passNo = '$passNo', groupID = '$groupid' WHERE seatNo = '$seatID'""); // AND flightNo = '$flightno'"" echo '<meta http-equiv=""refresh"" content=""5;url=http://www.mywebsite.com/"">'; echo mysql_error(); //} } ?> $seatID = $_POST['form_submitted']; $update = mysql_query(""UPDATE PASSENGER SET seatNo = $seatID WHERE username = '$loggedinuser'""); $update2 = mysql_query(""UPDATE SEATS SET seatTaken = 1, passNo = '$passNo', groupID = '$groupid' WHERE seatNo = '$seatID'"");"
"68","bad","echo"" <table style='border:1px solid #666;'> <tr>""; do { printf("" <td><a data-val='%s' id='ip'>%s</a><br><hr></td> "",$showrequestarr['ip'],$showrequestarr['ip']); } while ($showrequestarr = mysql_fetch_array ($showrequest)); /****************************chat*****************************/ if (isset($_REQUEST['userip'])) { $showresult = mysql_query(""SELECT text FROM message WHERE userip = '$userip'""); $showarray = mysql_fetch_array ($showresult); }$(""a"").click(function() { var ip = $(this).data('val'); $(""#change"").load('operator.php' {""userip"":ip} ); });"
"69","bad","echo"" <table style='border:1px solid #666;'> <tr>""; do { printf("" <td><a data-val='%s' id='ip'>%s</a><br><hr></td> "",$showrequestarr['ip'],$showrequestarr['ip']); } while ($showrequestarr = mysql_fetch_array ($showrequest)); /****************************chat*****************************/ if (isset($_REQUEST['userip'])) { $showresult = mysql_query(""SELECT text FROM message WHERE userip = '$userip'""); $showarray = mysql_fetch_array ($showresult); }$(""a"").click(function() { var ip = $(this).data('val'); $(""#change"").load('operator.php' {""userip"":ip} ); });"
"70","good","$stmt = $this->db->prepare('SELECT CLINIC.clinic_name AS ""clinicname"" FROM CLINIC ORDER BY CLINIC.clinic_name ASC'); $stmt->execute(); $stmt->bind_result($clinicname); $test = array(); while($stmt->fetch()){ $tempArray = array('clinicname' => $clinicname); array_push($test, $tempArray); } $stmt->close(); // Return clinics, encoded with JSON header('Content-type: application/json'); $json = json_encode($test); echo $json;[{""clinicname"":""Bangor""},{""clinicname"":""Belfast""},{""clinicname"":""Crumlin""},{""clinicname"":""Londonderry""}]"
"71","good","$stmt = $this->db->prepare('SELECT CLINIC.clinic_name AS ""clinicname"" FROM CLINIC ORDER BY CLINIC.clinic_name ASC'); $stmt->execute(); $stmt->bind_result($clinicname); $test = array(); while($stmt->fetch()){ $tempArray = array('clinicname' => $clinicname); array_push($test, $tempArray); } $stmt->close(); // Return clinics, encoded with JSON header('Content-type: application/json'); $json = json_encode($test); echo $json;[{""clinicname"":""Bangor""},{""clinicname"":""Belfast""},{""clinicname"":""Crumlin""},{""clinicname"":""Londonderry""}]"
"72","good","$stmt = $this->db->prepare('SELECT CLINIC.clinic_name AS ""clinicname"" FROM CLINIC ORDER BY CLINIC.clinic_name ASC'); $stmt->execute(); $stmt->bind_result($clinicname); $test = array(); while($stmt->fetch()){ $tempArray = array('clinicname' => $clinicname); array_push($test, $tempArray); } $stmt->close(); // Return clinics, encoded with JSON header('Content-type: application/json'); $json = json_encode($test); echo $json;[{""clinicname"":""Bangor""},{""clinicname"":""Belfast""},{""clinicname"":""Crumlin""},{""clinicname"":""Londonderry""}]"
"73","bad","<?php require_once('Connections/Main.php'); ?> <?php if (!function_exists(""GetSQLValueString"")) { function GetSQLValueString($theValue, $theType, $theDefinedValue = """", $theNotDefinedValue = """") { if (PHP_VERSION < 6) { $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue; } $theValue = function_exists(""mysql_real_escape_string"") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue); switch ($theType) { case ""text"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""long"": case ""int"": $theValue = ($theValue != """") ? intval($theValue) : ""NULL""; break; case ""double"": $theValue = ($theValue != """") ? doubleval($theValue) : ""NULL""; break; case ""date"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""defined"": $theValue = ($theValue != """") ? $theDefinedValue : $theNotDefinedValue; break; } return $theValue; } } $editFormAction = $_SERVER['PHP_SELF']; if (isset($_SERVER['QUERY_STRING'])) { $editFormAction .= ""?"" . htmlentities($_SERVER['QUERY_STRING']); } if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""form"")) { $insertSQL = sprintf(""INSERT INTO blog_comments (first_name, last_name, content, post_id) VALUES (%s, now(), %s, %s, %s)"", GetSQLValueString($_POST['first_name'], ""text""), GetSQLValueString($_POST['last_name'], ""text""), GetSQLValueString($_POST['content'], ""text""), GetSQLValueString($_POST['post_id'], ""int"")); mysql_select_db($database_Main, $Main); $Result1 = mysql_query($insertSQL, $Main) or die(mysql_error()); } $colname_getSinglePost = ""-1""; if (isset($_GET['post_id'])) { $colname_getSinglePost = $_GET['post_id']; } mysql_select_db($database_Main, $Main); $query_getSinglePost = sprintf(""SELECT post_id, post_date, post_img, content, tags, post_title FROM blog_posts WHERE post_id = %s LIMIT 1"", GetSQLValueString($colname_getSinglePost, ""int"")); $getSinglePost = mysql_query($query_getSinglePost, $Main) or die(mysql_error()); $row_getSinglePost = mysql_fetch_assoc($getSinglePost); $totalRows_getSinglePost = mysql_num_rows($getSinglePost); $maxRows_getSingleComments = 20; $pageNum_getSingleComments = 0; if (isset($_GET['pageNum_getSingleComments'])) { $pageNum_getSingleComments = $_GET['pageNum_getSingleComments']; } $startRow_getSingleComments = $pageNum_getSingleComments * $maxRows_getSingleComments; $colname_getSingleComments = ""-1""; if (isset($_GET['post_id'])) { $colname_getSingleComments = $_GET['post_id']; } mysql_select_db($database_Main, $Main); $query_getSingleComments = sprintf(""SELECT id, first_name, comment_date, last_name, content, post_id FROM blog_comments WHERE post_id = %s"", GetSQLValueString($colname_getSingleComments, ""int"")); $query_limit_getSingleComments = sprintf(""%s LIMIT %d, %d"", $query_getSingleComments, $startRow_getSingleComments, $maxRows_getSingleComments); $getSingleComments = mysql_query($query_limit_getSingleComments, $Main) or die(mysql_error()); $row_getSingleComments = mysql_fetch_assoc($getSingleComments); if (isset($_GET['totalRows_getSingleComments'])) { $totalRows_getSingleComments = $_GET['totalRows_getSingleComments']; } else { $all_getSingleComments = mysql_query($query_getSingleComments); $totalRows_getSingleComments = mysql_num_rows($all_getSingleComments); } $totalPages_getSingleComments = ceil($totalRows_getSingleComments/$maxRows_getSingleComments)-1; ?><?php do { ?> <div id=""comments"" style=""border-bottom:1px solid #000; margin-bottom:3px;""> <?php $row_getSingleComments = mysql_fetch_assoc($getSingleComments); ?> <div class=""single""> <span class=""author""><?php echo $row_getSingleComments['first_name']; ?> <?php echo $row_getSingleComments['last_name'];?> commented on <?php $phpdate = strtotime($row_getSingleComments['comment_date']); $mysqldate = date('F j, Y',$phpdate); echo $mysqldate; ?> at <?php $mysqltime = date('g:i A',$phpdate); echo $mysqltime; ?></span><br /> <?php echo $row_getSingleComments['content']; ?> </div> <?php } while ($row_getSingleComments = mysql_fetch_assoc($getSingleComments)); ?> <p>Add a Comment</p> <form method=""POST"" action=""<?php echo $editFormAction; ?>"" name=""form""> <p> First Name <input type=""text"" name=""first_name"" /> <br/> Last Name <input type=""text"" name=""last_name"" /> <textarea name=""content"" cols=""60"" rows=""15""></textarea> </p> <input type=""hidden"" value=""<?php echo $colname_getSinglePost ?>"" name=""post_id"" /> <input type=""submit"" name=""submit"" id=""submit"" value=""Submit"" style=""float:right;"" /> <input type=""hidden"" name=""MM_insert"" value=""form"" /> </form> </div> </div> </div> </div><!-- end #content --> <?php mysql_free_result($getSinglePost); mysql_free_result($getSingleComments);?>"
"74","bad","<?php require_once('Connections/Main.php'); ?> <?php if (!function_exists(""GetSQLValueString"")) { function GetSQLValueString($theValue, $theType, $theDefinedValue = """", $theNotDefinedValue = """") { if (PHP_VERSION < 6) { $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue; } $theValue = function_exists(""mysql_real_escape_string"") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue); switch ($theType) { case ""text"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""long"": case ""int"": $theValue = ($theValue != """") ? intval($theValue) : ""NULL""; break; case ""double"": $theValue = ($theValue != """") ? doubleval($theValue) : ""NULL""; break; case ""date"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""defined"": $theValue = ($theValue != """") ? $theDefinedValue : $theNotDefinedValue; break; } return $theValue; } } $editFormAction = $_SERVER['PHP_SELF']; if (isset($_SERVER['QUERY_STRING'])) { $editFormAction .= ""?"" . htmlentities($_SERVER['QUERY_STRING']); } if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""form"")) { $insertSQL = sprintf(""INSERT INTO blog_comments (first_name, last_name, content, post_id) VALUES (%s, now(), %s, %s, %s)"", GetSQLValueString($_POST['first_name'], ""text""), GetSQLValueString($_POST['last_name'], ""text""), GetSQLValueString($_POST['content'], ""text""), GetSQLValueString($_POST['post_id'], ""int"")); mysql_select_db($database_Main, $Main); $Result1 = mysql_query($insertSQL, $Main) or die(mysql_error()); } $colname_getSinglePost = ""-1""; if (isset($_GET['post_id'])) { $colname_getSinglePost = $_GET['post_id']; } mysql_select_db($database_Main, $Main); $query_getSinglePost = sprintf(""SELECT post_id, post_date, post_img, content, tags, post_title FROM blog_posts WHERE post_id = %s LIMIT 1"", GetSQLValueString($colname_getSinglePost, ""int"")); $getSinglePost = mysql_query($query_getSinglePost, $Main) or die(mysql_error()); $row_getSinglePost = mysql_fetch_assoc($getSinglePost); $totalRows_getSinglePost = mysql_num_rows($getSinglePost); $maxRows_getSingleComments = 20; $pageNum_getSingleComments = 0; if (isset($_GET['pageNum_getSingleComments'])) { $pageNum_getSingleComments = $_GET['pageNum_getSingleComments']; } $startRow_getSingleComments = $pageNum_getSingleComments * $maxRows_getSingleComments; $colname_getSingleComments = ""-1""; if (isset($_GET['post_id'])) { $colname_getSingleComments = $_GET['post_id']; } mysql_select_db($database_Main, $Main); $query_getSingleComments = sprintf(""SELECT id, first_name, comment_date, last_name, content, post_id FROM blog_comments WHERE post_id = %s"", GetSQLValueString($colname_getSingleComments, ""int"")); $query_limit_getSingleComments = sprintf(""%s LIMIT %d, %d"", $query_getSingleComments, $startRow_getSingleComments, $maxRows_getSingleComments); $getSingleComments = mysql_query($query_limit_getSingleComments, $Main) or die(mysql_error()); $row_getSingleComments = mysql_fetch_assoc($getSingleComments); if (isset($_GET['totalRows_getSingleComments'])) { $totalRows_getSingleComments = $_GET['totalRows_getSingleComments']; } else { $all_getSingleComments = mysql_query($query_getSingleComments); $totalRows_getSingleComments = mysql_num_rows($all_getSingleComments); } $totalPages_getSingleComments = ceil($totalRows_getSingleComments/$maxRows_getSingleComments)-1; ?><?php do { ?> <div id=""comments"" style=""border-bottom:1px solid #000; margin-bottom:3px;""> <?php $row_getSingleComments = mysql_fetch_assoc($getSingleComments); ?> <div class=""single""> <span class=""author""><?php echo $row_getSingleComments['first_name']; ?> <?php echo $row_getSingleComments['last_name'];?> commented on <?php $phpdate = strtotime($row_getSingleComments['comment_date']); $mysqldate = date('F j, Y',$phpdate); echo $mysqldate; ?> at <?php $mysqltime = date('g:i A',$phpdate); echo $mysqltime; ?></span><br /> <?php echo $row_getSingleComments['content']; ?> </div> <?php } while ($row_getSingleComments = mysql_fetch_assoc($getSingleComments)); ?> <p>Add a Comment</p> <form method=""POST"" action=""<?php echo $editFormAction; ?>"" name=""form""> <p> First Name <input type=""text"" name=""first_name"" /> <br/> Last Name <input type=""text"" name=""last_name"" /> <textarea name=""content"" cols=""60"" rows=""15""></textarea> </p> <input type=""hidden"" value=""<?php echo $colname_getSinglePost ?>"" name=""post_id"" /> <input type=""submit"" name=""submit"" id=""submit"" value=""Submit"" style=""float:right;"" /> <input type=""hidden"" name=""MM_insert"" value=""form"" /> </form> </div> </div> </div> </div><!-- end #content --> <?php mysql_free_result($getSinglePost); mysql_free_result($getSingleComments);?>"
"75","bad","<form name=""input"" action=""<?php $_SERVER['PHP_SELF']?>"" method=""post""> Usernames: <input type=""text"" name=""usernames"" /> <input type=""submit"" value=""Submit"" name=""submit"" /> </form> <?php if(isset($_POST['submit'])) { $link = mysql_connect('', '', ''); if (!$link) { die('Could not connect: ' . mysql_error()); } $db_selected = mysql_select_db('', $link); if (!$db_selected) { die ('Can\'t use : ' . mysql_error()); } $result = mysql_query(""INSERT INTO users(user_name) VALUES('"".$_POST['usernames'].""')""); if (!$result) { die('Invalid query: ' . mysql_error()); } } ?> <script type=""text/javascript"" src=""jquery-1.7.1.min.js""></script> <?php $link = mysql_connect('localhost', 'root', ''); if (!$link) { die('Could not connect: ' . mysql_error()); } $db_selected = mysql_select_db('test', $link); if (!$db_selected) { die ('Can\'t use test : ' . mysql_error()); } $result = mysql_query(""SELECT user_name FROM users""); if (!$result) { die('Invalid query: ' . mysql_error()); } $names = array(); while ($row = mysql_fetch_assoc($result)) { foreach ($row as $key => $val) { $names[][$key] = $val; } } echo json_encode($names); ?> <script type=""text/javascript""> $.getJSON(""http://localhost/test/results.php"", function(json){ alert(""JSON Data: "" + json); }); </script> <div></div>"
"76","bad","<form name=""input"" action=""<?php $_SERVER['PHP_SELF']?>"" method=""post""> Usernames: <input type=""text"" name=""usernames"" /> <input type=""submit"" value=""Submit"" name=""submit"" /> </form> <?php if(isset($_POST['submit'])) { $link = mysql_connect('', '', ''); if (!$link) { die('Could not connect: ' . mysql_error()); } $db_selected = mysql_select_db('', $link); if (!$db_selected) { die ('Can\'t use : ' . mysql_error()); } $result = mysql_query(""INSERT INTO users(user_name) VALUES('"".$_POST['usernames'].""')""); if (!$result) { die('Invalid query: ' . mysql_error()); } } ?> <script type=""text/javascript"" src=""jquery-1.7.1.min.js""></script> <?php $link = mysql_connect('localhost', 'root', ''); if (!$link) { die('Could not connect: ' . mysql_error()); } $db_selected = mysql_select_db('test', $link); if (!$db_selected) { die ('Can\'t use test : ' . mysql_error()); } $result = mysql_query(""SELECT user_name FROM users""); if (!$result) { die('Invalid query: ' . mysql_error()); } $names = array(); while ($row = mysql_fetch_assoc($result)) { foreach ($row as $key => $val) { $names[][$key] = $val; } } echo json_encode($names); ?> <script type=""text/javascript""> $.getJSON(""http://localhost/test/results.php"", function(json){ alert(""JSON Data: "" + json); }); </script> <div></div>"
"77","bad","<form action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""post""> <fieldset> <legend>Subscribe to Our Newsletter &nbsp;</legend> <?php if ($feedback!='') echo('<p>'.$feedback.'</p>'); ?> <label>Name: <input name=""name"" type=""text"" value=""<?php echo $name; ?>"" /></label> <label>Email: <input name=""email"" type=""text"" value=""<?php echo $email; ?>"" /></label> <label><input type=""submit"" value=""Sign Up!"" /></label> </fieldset> </form> <?php $feedback=''; if (!$email) { $feedback .= '<strong>Please enter your email address</strong><br />'; } if (!$name) { $feedback .= '<strong>Please enter your name</strong><br />'; } list($username, $mailDomain) = explode(""@"", $email); if (!@checkdnsrr($mailDomain, ""MX"")) { $feedback .= '<strong>Invalid email domain</strong><br />'; } if(!preg_match(""/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/"", $email)) { $feedback .= '<strong>Your email address doesn\'t appear to be valid - please check and try again'; } function cleaninput($value, $DB) { if (get_magic_quotes_gpc()) { $value = stripslashes( $value ); } return mysql_real_escape_string( $value, $DB ); } $name=$_POST['name']; $email=$_POST['email']; include_once ""connect.php""; $sql = mysql_query(""SELECT * FROM subscribers WHERE email='$email'""); $numRows = mysql_num_rows($sql); if ($numRows>0) { $feedback = '<strong>That email address is already subscribed.</strong>'; } $insertresult = mysql_query(""INSERT INTO subscribers (name, email) VALUES('$name', '$email')"") or die (mysql_error()); if ($insertresult) { $completed = true; } if($competed=false) { ?> <form action=""<?php echo $_SERVER['PHP_SELF']; ?> method=""post""> <fieldset> <legend>Subscribe to OUr Newsletter &nbsp;</legend> <?php if ($feedback!='') echo('<p>'.$feedback.'</p>'); ?> <label>Name: <input name=""name"" type=""text"" value=""<?php echo $name; ?>"" /></label> <label>Email: <input name=""email"" type=""text"" value=""<?php echo $email; ?>"" /></label> <label><input type=""submit"" value=""Sign Up!"" /></label> </fieldset> </form> <?php } else { echo('Thanks - you have subscribed to our newsletter successfully. You can unsubscribe at any time by clicking the link at the bottom of each email we send.'); } ?>else { echo('Thanks - you have subscribed to our newsletter successfully. You can unsubscribe at any time by clicking the link at the bottom of each email we send.'); }"
"78","bad","<form action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""post""> <fieldset> <legend>Subscribe to Our Newsletter &nbsp;</legend> <?php if ($feedback!='') echo('<p>'.$feedback.'</p>'); ?> <label>Name: <input name=""name"" type=""text"" value=""<?php echo $name; ?>"" /></label> <label>Email: <input name=""email"" type=""text"" value=""<?php echo $email; ?>"" /></label> <label><input type=""submit"" value=""Sign Up!"" /></label> </fieldset> </form> <?php $feedback=''; if (!$email) { $feedback .= '<strong>Please enter your email address</strong><br />'; } if (!$name) { $feedback .= '<strong>Please enter your name</strong><br />'; } list($username, $mailDomain) = explode(""@"", $email); if (!@checkdnsrr($mailDomain, ""MX"")) { $feedback .= '<strong>Invalid email domain</strong><br />'; } if(!preg_match(""/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/"", $email)) { $feedback .= '<strong>Your email address doesn\'t appear to be valid - please check and try again'; } function cleaninput($value, $DB) { if (get_magic_quotes_gpc()) { $value = stripslashes( $value ); } return mysql_real_escape_string( $value, $DB ); } $name=$_POST['name']; $email=$_POST['email']; include_once ""connect.php""; $sql = mysql_query(""SELECT * FROM subscribers WHERE email='$email'""); $numRows = mysql_num_rows($sql); if ($numRows>0) { $feedback = '<strong>That email address is already subscribed.</strong>'; } $insertresult = mysql_query(""INSERT INTO subscribers (name, email) VALUES('$name', '$email')"") or die (mysql_error()); if ($insertresult) { $completed = true; } if($competed=false) { ?> <form action=""<?php echo $_SERVER['PHP_SELF']; ?> method=""post""> <fieldset> <legend>Subscribe to OUr Newsletter &nbsp;</legend> <?php if ($feedback!='') echo('<p>'.$feedback.'</p>'); ?> <label>Name: <input name=""name"" type=""text"" value=""<?php echo $name; ?>"" /></label> <label>Email: <input name=""email"" type=""text"" value=""<?php echo $email; ?>"" /></label> <label><input type=""submit"" value=""Sign Up!"" /></label> </fieldset> </form> <?php } else { echo('Thanks - you have subscribed to our newsletter successfully. You can unsubscribe at any time by clicking the link at the bottom of each email we send.'); } ?>else { echo('Thanks - you have subscribed to our newsletter successfully. You can unsubscribe at any time by clicking the link at the bottom of each email we send.'); }"
"79","bad","if ($auth->isLogged()) { if(!empty($email)) { if ($this->checkEmail($mail)) { $this->db->selectDb(""login""); if (!mysql_result(mysql_query(""SELECT COUNT(id) FROM account WHERE email='"".$mail.""'""), 0) > 0) {$login_db_new_connect = mysql_connect($logindb[db_host],$logindb[db_username],$logindb[db_password]); $selectdb = mysql_select_db($logindb[db_name],$login_db_new_connect); if ($_GET[h] && $_GET[h] != '' && $_GET[h] != '0') { $emailz = $newemail1; $query = mysql_query(""SELECT username FROM `account` WHERE reset_email='$_GET[h]'""); $res = mysql_fetch_array($query); $check = mysql_query(""SELECT email FROM `account` WHERE reset_email='$_GET[h]'""); $ress = mysql_fetch_array($check); $check1 = mysql_query(""SELECT reset_email2 FROM `account` WHERE reset_email='$_GET[h]'""); $resss = mysql_fetch_array($check1); $emailz = $resss[reset_email2]; if (mysql_num_rows($query) == 1) { echo ""<b>E-mail was changed.</b>""; $to = $ress[email]; $headers = ""Headers here""; $message = ""Email has been Changed (more text to come later)""; mail($to, '', $message, $headers); mysql_query(""UPDATE account SET email='$emailz' WHERE reset_email='$_GET[h]'"") or die ('query change ...'); mysql_query(""UPDATE account SET reset_email='', reset_email2='' WHERE username='$res[username]'"") or die ('query ...'); } else { echo ""<b>Error not changed.</b>""; } } else { $oldemail = addslashes($_POST[""oldemail""]); $newemail1 = addslashes($_POST[""newemail1""]); $newemail2 = addslashes($_POST[""newemail2""]); if ($oldemail == """" || $newemail1 == """" || $newemail2 == """") { $reason = "" <form action=\"""".$_SERVER['PHP_SELF'].""\"" method=\""POST\""> <table width=\""310\""> <tr><td>Old e-mail:</td><td><input type=\""email\"" name=\""oldemail\""></td></tr> <tr><td>New e-mail:</td><td><input type=\""email\"" name=\""newemail1\""></td></tr> <tr><td>New e-mail again:</td><td><input type=\""email\"" name=\""newemail2\""></td></tr> <tr><td align=\""center\"" colspan=\""2\""><br><input type=\""submit\"" value=\""Change e-mail\""> </table> </form>""; } else { $login_db_new_connect = mysql_connect($logindb[db_host],$logindb[db_username],$logindb[db_password]); $selectdb = mysql_select_db($logindb[db_name],$login_db_new_connect); $queryy = mysql_query(""SELECT username FROM `account` WHERE id='$id'""); $resu = mysql_fetch_array($queryy); $sql = ""SELECT * FROM account WHERE email='$oldemail' AND username='$resu[username]'""; $result = mysql_query($sql); $result2 = mysql_num_rows($result); if ($result2 !== 1) { $reason = ""Something is wrong""; } else { if ($newemail1 == $newemail2) { $emailz = $newemail1; $rand = random_string(40); $sql1 = ""UPDATE `account` SET reset_email='$rand' WHERE id='$id'""; mysql_query($sql1) or die ('query ...'); $sql2 = ""UPDATE `account` SET reset_email2='$newemail1' WHERE id='$id'""; mysql_query($sql2) or die ('query ...'); $to = $_POST[""oldemail""]; $headers = """"; $message = ""Activation link: $config[path_to_thisfile]?h=$rand\n\n\n""; mail($to, '', $message, $headers); echo ""<b>activation link has been sent</b>""; } else { echo ""<b>wrong input data</b>""; } } } } ?>"
"80","bad","$description = mysql_real_escape_string($_REQUEST['description']); $query = 'BEGIN; INSERT INTO indiespark.tasks (description, owner_user_id) VALUES (""' . $description . '"", ' . $user->user_id . '); SET @task_id = LAST_INSERT_ID(); INSERT INTO indiespark.projecttasks (task_id, project_id) VALUES (@task_id, ' . $project->project_id . '); COMMIT;'; $result = mysql_query($query); var_dump($query); var_dump($result); if ($result) { return viewproject(); } else { throw new Exception('database error'); }"
"81","bad","$description = mysql_real_escape_string($_REQUEST['description']); $query = 'BEGIN; INSERT INTO indiespark.tasks (description, owner_user_id) VALUES (""' . $description . '"", ' . $user->user_id . '); SET @task_id = LAST_INSERT_ID(); INSERT INTO indiespark.projecttasks (task_id, project_id) VALUES (@task_id, ' . $project->project_id . '); COMMIT;'; $result = mysql_query($query); var_dump($query); var_dump($result); if ($result) { return viewproject(); } else { throw new Exception('database error'); }"
"82","good","<form action=""#"" method=""post""> <table border=""0""> <tr> <td id=""tb-w_a""><p>Kategori</p></td> <td>:</td> <td> <select name=""kategori""> <?php $query = ""SELECT id, title FROM forum_kategorier""; $result = $mysqli->query($query); while(list($id, $title) = $result->fetch_row()) { echo ""<option value=\""$id\"">$title</option>""; } ?> </select> </td> </tr> <tr> <td id=""tb-w_a""><p>Title</p></td> <td>:</td> <td><input type=""text"" name=""title""></td> </tr> </table> <textarea name=""tekst_indhold"" style=""width:716px; height:170px;""></textarea><br /> <input type=""hidden"" value=""<?php echo $_SERVER['PHP_SELF'] ?>"" name=""return_page""> <input type=""submit"" value=""Opret indhold"" name=""godkendt""> </form> <?php if ($stmt = $mysqli->prepare('INSERT INTO `forum_traede` (`kategori_id`, `bruger_id`, `tekst`, `dato`, `titel`) VALUES (?, ?, ?, NOW(), ?)')) { $stmt->bind_param('ssss', $katgori_id, $bruger_id, $tekst, $titel); $katgori_id = $_POST[""kategori""]; $bruger_id = $_SESSION[""user_id""]; $tekst = $_POST[""tekst_indhold""]; $titel = $_POST[""title""]; $stmt->execute(); $stmt->close(); if (isset($_POST['return_page'])) { $return_page = $_POST[""return_page""]; } else { header('Location: http://xxxx.dk/bruger-forum-opret/'); } } else { echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error; } ?>"
"83","good","<form action=""#"" method=""post""> <table border=""0""> <tr> <td id=""tb-w_a""><p>Kategori</p></td> <td>:</td> <td> <select name=""kategori""> <?php $query = ""SELECT id, title FROM forum_kategorier""; $result = $mysqli->query($query); while(list($id, $title) = $result->fetch_row()) { echo ""<option value=\""$id\"">$title</option>""; } ?> </select> </td> </tr> <tr> <td id=""tb-w_a""><p>Title</p></td> <td>:</td> <td><input type=""text"" name=""title""></td> </tr> </table> <textarea name=""tekst_indhold"" style=""width:716px; height:170px;""></textarea><br /> <input type=""hidden"" value=""<?php echo $_SERVER['PHP_SELF'] ?>"" name=""return_page""> <input type=""submit"" value=""Opret indhold"" name=""godkendt""> </form> <?php if ($stmt = $mysqli->prepare('INSERT INTO `forum_traede` (`kategori_id`, `bruger_id`, `tekst`, `dato`, `titel`) VALUES (?, ?, ?, NOW(), ?)')) { $stmt->bind_param('ssss', $katgori_id, $bruger_id, $tekst, $titel); $katgori_id = $_POST[""kategori""]; $bruger_id = $_SESSION[""user_id""]; $tekst = $_POST[""tekst_indhold""]; $titel = $_POST[""title""]; $stmt->execute(); $stmt->close(); if (isset($_POST['return_page'])) { $return_page = $_POST[""return_page""]; } else { header('Location: http://xxxx.dk/bruger-forum-opret/'); } } else { echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error; } ?>"
"84","bad","include 'functions/functions.php'; global $db; $db = mysqlconnect(); $password = md5($_POST['mypassword']); $mod = '1' ; $statement = $db->prepare(""SELECT * FROM users WHERE username = ? AND password = ? And mod = ?""); $statement->execute(array($_POST['myusername'],$password, $mod)); $count = $statement->rowCount(); if($count == 1){ $db = mysqlconnect(); // Register $myusername, $mypassword and redirect to file ""login_success.php"" $_SESSION['user'] = $_POST['myusername'] ; //Test if it is a shared client if (!empty($_SERVER['HTTP_CLIENT_IP'])){ $ip=$_SERVER['HTTP_CLIENT_IP']; //Is it a proxy address }elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){ $ip=$_SERVER['HTTP_X_FORWARDED_FOR']; }else{ $ip=$_SERVER['REMOTE_ADDR']; } $sqll = ""UPDATE users SET lastip=? WHERE username=?""; $q = $db->prepare($sqll); $q->execute(array($ip,$_SESSION['username'])); $_SESSION['user'] = $_POST['myusername'] ; $sqlll = ""INSERT INTO user_log (username,ip) VALUES (?, ?)""; $qq = $db->prepare($sqlll); $qq->execute(array($_SESSION['username'],$ip)); header(""Location: home.php""); } else { echo ""Wrong Username or Password""; }$statement = $db->prepare(""SELECT * FROM users WHERE username = ? AND password = ? And mod = ?""); function mysqlconnect(){ global $db; $host = 'localhost'; $port = 3306; // This is the default port for MySQL $database = ''; $username = ''; $password = ''; // Construct the DSN, or ""Data Source Name"". Really, it's just a fancy name // for a string that says what type of server we're connecting to, and how // to connect to it. As long as the above is filled out, this line is all // you need :) $dsn = ""mysql:host=$host;port=$port;dbname=$database""; // Connect! $db = new PDO($dsn, $username, $password); }"
"85","bad","<?php include('lock.php'); ?> <body> <div id=""menu""> <ul> <li><a href=""logout.php"">log out</a></li> </ul> </div> <h1> Welcome <?php echo $login_session; ?> </h1> </body><?php include(""config.php""); session_start(); if($_SERVER[""REQUEST_METHOD""] == ""POST"") { // username and password sent from Form $myusername=addslashes($_POST['username']); $mypassword=addslashes($_POST['password']); $sql=""SELECT id FROM admin WHERE username='$myusername' and passcode='$mypassword'""; $result=mysql_query($sql); $row=mysql_fetch_array($result); $active=$row['active']; $count=mysql_num_rows($result); // If result matched $myusername and $mypassword, table row must be 1 row if($count==1) { session_register(""myusername""); $_SESSION['login_user']=$myusername; header(""location: welcome.php""); } else { $error=""Your Login Name or Password is invalid""; } } ?> <form action="""" method=""post""> <label>UserName :</label> <input type=""text"" name=""username""/><br /> <label>Password :</label> <input type=""password"" name=""password""/><br/> <input type=""submit"" value="" Submit ""/><br /> </form>"
"86","bad","<?php include('lock.php'); ?> <body> <div id=""menu""> <ul> <li><a href=""logout.php"">log out</a></li> </ul> </div> <h1> Welcome <?php echo $login_session; ?> </h1> </body><?php include(""config.php""); session_start(); if($_SERVER[""REQUEST_METHOD""] == ""POST"") { // username and password sent from Form $myusername=addslashes($_POST['username']); $mypassword=addslashes($_POST['password']); $sql=""SELECT id FROM admin WHERE username='$myusername' and passcode='$mypassword'""; $result=mysql_query($sql); $row=mysql_fetch_array($result); $active=$row['active']; $count=mysql_num_rows($result); // If result matched $myusername and $mypassword, table row must be 1 row if($count==1) { session_register(""myusername""); $_SESSION['login_user']=$myusername; header(""location: welcome.php""); } else { $error=""Your Login Name or Password is invalid""; } } ?> <form action="""" method=""post""> <label>UserName :</label> <input type=""text"" name=""username""/><br /> <label>Password :</label> <input type=""password"" name=""password""/><br/> <input type=""submit"" value="" Submit ""/><br /> </form>"
"87","bad","""Rock/Classic 80’s-90’s""$d = str_replace(""’"", """", $d); $d = str_replace(array(""'"", ""\'"", ""\’"", ""’""), """", $d);$band_insert = ""INSERT INTO `schedule` (`Band`, `Date`, `Genre`, `Club`, `Location`, `Venue`, `Time`) VALUES ( '%s', '%s', '%s', '%s', '%s', '%s', '%s' )""; $result = $mysqli->query('TRUNCATE TABLE `schedule`'); if(!$result) die('Truncate error'); if( ($handle=fopen('./export/schedule.csv', 'r')) !== FALSE) { while( ($data=fgetcsv($handle, 1000, ',', '""', '\\')) !== FALSE ) { foreach($data as $d) { $d = str_replace(""’"", """", $d); # For debugging purposes only echo ""<p>$d</p>""; } $sql = sprintf($band_insert, $data[0], $data[1], $data[2], $data[3], $data[4], $data[5], $data[6]); #$sql = $mysqli->real_escape_string($sql); $result = $mysqli->query($sql); if( ! $result ) $log[] = lg(""Unable to perform query ($mysqli->errno): $mysqli->error""); } $log[] = lg(""Successful upload ("".date(""Y-m-d"")."").""); fclose($handle); }header('Content-type: text/html; charset=utf-8');"
"88","bad","<?php $cart1 = rawurldecode($_GET[""path""]); list( , , , , , $cart2) = explode (""\\"", $cart1); $cart3 = $cart2; list($cart4) = explode ("" "", $cart3); $con = mysql_connect(""SERVER"",""USER"",""PASS""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""cartmatch"", $con); $result = mysql_query(""SELECT * FROM cartmatch WHERE CARTNO='$cart4'""); while($row = mysql_fetch_array($result)) { echo '<form enctype=""multipart/form-data"" action=""albumgo.php"" method=""POST""><input name=""ID"" type=""hidden"" value='; echo $_GET[""ID""]; echo ' ><input name=""enabled"" type=""hidden"" value='; echo $_GET[""enabled""]; echo ' ><input name=""artist"" type=""hidden"" value='; echo $_GET[""artist""]; echo ' ><input name=""title"" type=""hidden"" value=""'; echo $_GET[""title""]; echo '"" >Name:<br/><input name=""album"" type=""text"" autofocus=""autofocus"" value=""'; echo $row['ALBUM']; echo '"" ><input type=""submit"" name=""edit"" value=""Save""></form>'; } mysql_close($con); ?>"
"89","bad","<?php $cart1 = rawurldecode($_GET[""path""]); list( , , , , , $cart2) = explode (""\\"", $cart1); $cart3 = $cart2; list($cart4) = explode ("" "", $cart3); $con = mysql_connect(""SERVER"",""USER"",""PASS""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""cartmatch"", $con); $result = mysql_query(""SELECT * FROM cartmatch WHERE CARTNO='$cart4'""); while($row = mysql_fetch_array($result)) { echo '<form enctype=""multipart/form-data"" action=""albumgo.php"" method=""POST""><input name=""ID"" type=""hidden"" value='; echo $_GET[""ID""]; echo ' ><input name=""enabled"" type=""hidden"" value='; echo $_GET[""enabled""]; echo ' ><input name=""artist"" type=""hidden"" value='; echo $_GET[""artist""]; echo ' ><input name=""title"" type=""hidden"" value=""'; echo $_GET[""title""]; echo '"" >Name:<br/><input name=""album"" type=""text"" autofocus=""autofocus"" value=""'; echo $row['ALBUM']; echo '"" ><input type=""submit"" name=""edit"" value=""Save""></form>'; } mysql_close($con); ?>"
"90","bad","<?php $cart1 = rawurldecode($_GET[""path""]); list( , , , , , $cart2) = explode (""\\"", $cart1); $cart3 = $cart2; list($cart4) = explode ("" "", $cart3); $con = mysql_connect(""SERVER"",""USER"",""PASS""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""cartmatch"", $con); $result = mysql_query(""SELECT * FROM cartmatch WHERE CARTNO='$cart4'""); while($row = mysql_fetch_array($result)) { echo '<form enctype=""multipart/form-data"" action=""albumgo.php"" method=""POST""><input name=""ID"" type=""hidden"" value='; echo $_GET[""ID""]; echo ' ><input name=""enabled"" type=""hidden"" value='; echo $_GET[""enabled""]; echo ' ><input name=""artist"" type=""hidden"" value='; echo $_GET[""artist""]; echo ' ><input name=""title"" type=""hidden"" value=""'; echo $_GET[""title""]; echo '"" >Name:<br/><input name=""album"" type=""text"" autofocus=""autofocus"" value=""'; echo $row['ALBUM']; echo '"" ><input type=""submit"" name=""edit"" value=""Save""></form>'; } mysql_close($con); ?>"
"91","good","public function createUser($userName, $password) { if($this->getConnection() === true) { $stmt = mysqli_prepare($this->link, 'INSERT INTO users (Username, Login, Password) VALUES (?, ?, ?)'); mysqli_stmt_bind_param($stmt, 'sss', $userName, $userName, $password); mysqli_stmt_execute($stmt); mysqli_stmt_close($stmt); } $this->link->close(); }"
"92","bad","id | detail 1 | this, that 2 | these, thoseid | visit | cost 1 | this | 20 2 | that | 30 3 | these | 40 4 | those | 50<?php $id=$_GET['id']; $detail=$_GET['detail']; $pieces = explode("","", $rows['detail']); // $pieces[0]; piece1 // $pieces[1]; piece2 // $pieces[2]; piece2 // $pieces[3]; piece3 // $pieces[4]; piece4 foreach($pieces[1] as $test){ $query=""SELECT * FROM tbl1, tbl2 WHERE $test = tbl2.cost AND tbl1.id='$id'""; } $result=mysql_query($query) or die(""error: "" . mysql_error()); while($rows=mysql_fetch_array($result)){ ?> <table> <tr> <td><input value=""<? echo $rows['code'];?>"" readonly=""readonly""/></td> <td><input value=""<? echo $rows['cost']; ?>"" readonly=""readonly""/></td> </tr> </table> <?php } ?>foreach($pieces[1] as $test)$pieces[1]$pieces[0]$pieces[1]$pieces[4]$pieces[1]"
"93","bad","id | detail 1 | this, that 2 | these, thoseid | visit | cost 1 | this | 20 2 | that | 30 3 | these | 40 4 | those | 50<?php $id=$_GET['id']; $detail=$_GET['detail']; $pieces = explode("","", $rows['detail']); // $pieces[0]; piece1 // $pieces[1]; piece2 // $pieces[2]; piece2 // $pieces[3]; piece3 // $pieces[4]; piece4 foreach($pieces[1] as $test){ $query=""SELECT * FROM tbl1, tbl2 WHERE $test = tbl2.cost AND tbl1.id='$id'""; } $result=mysql_query($query) or die(""error: "" . mysql_error()); while($rows=mysql_fetch_array($result)){ ?> <table> <tr> <td><input value=""<? echo $rows['code'];?>"" readonly=""readonly""/></td> <td><input value=""<? echo $rows['cost']; ?>"" readonly=""readonly""/></td> </tr> </table> <?php } ?>foreach($pieces[1] as $test)$pieces[1]$pieces[0]$pieces[1]$pieces[4]$pieces[1]"
"94","bad","id | detail 1 | this, that 2 | these, thoseid | visit | cost 1 | this | 20 2 | that | 30 3 | these | 40 4 | those | 50<?php $id=$_GET['id']; $detail=$_GET['detail']; $pieces = explode("","", $rows['detail']); // $pieces[0]; piece1 // $pieces[1]; piece2 // $pieces[2]; piece2 // $pieces[3]; piece3 // $pieces[4]; piece4 foreach($pieces[1] as $test){ $query=""SELECT * FROM tbl1, tbl2 WHERE $test = tbl2.cost AND tbl1.id='$id'""; } $result=mysql_query($query) or die(""error: "" . mysql_error()); while($rows=mysql_fetch_array($result)){ ?> <table> <tr> <td><input value=""<? echo $rows['code'];?>"" readonly=""readonly""/></td> <td><input value=""<? echo $rows['cost']; ?>"" readonly=""readonly""/></td> </tr> </table> <?php } ?>foreach($pieces[1] as $test)$pieces[1]$pieces[0]$pieces[1]$pieces[4]$pieces[1]"
"95","bad","<?php include(""config.php""); $dir = ""../images/""; $dir = $dir . basename( $_FILES['image']['name']); $title = $_POST['title']; $description = $_POST['desc']; $position = $_POST['position']; $image = ($_FILES['image']['name']); $uploadedfile = $_FILES['image']['tmp_name']; $uploadedfiletype = $_FILES['image']['type']; if (!($uploadedfiletype ==""image/pjpeg"" OR $uploadedfiletype ==""image/jpeg"" OR $uploadedfiletype ==""image/jpg"")){ echo ""Image must be jpg file""; }else if (move_uploaded_file($_FILES['image']['tmp_name'], $dir)){ $sql=""INSERT INTO test (title, description, position) VALUES ('$title','$description','$position')""; if (!mysql_query($sql,$con)){ die('Error: ' . mysql_error()); } $newname = ""../images/"" . mysql_insert_id() . "".jpg""; rename (""../images/$image"",""$newname""); $orig_image = imagecreatefromjpeg(""../image/$newname""); $sm_image = imagecreatetruecolor(96,96); imagecopyresampled($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image)); imagejpeg($sm_image, $newname, 100); echo 'Upload good <a href=""connected.php"">Retour</a>'; }else{ echo ""Problem""; } ?><?php include(""config.php""); $dir = ""../images/""; $dir = $dir . basename( $_FILES['image']['name']); $title = $_POST['title']; $description = $_POST['desc']; $position = $_POST['position']; $id=$_POST['id']; $image = ($_FILES['image']['name']); $uploadedfile = $_FILES['image']['tmp_name']; $uploadedfiletype = $_FILES['image']['type']; unlink('../images/$id'); if (!($uploadedfiletype ==""image/pjpeg"" OR $uploadedfiletype ==""image/jpeg"" OR $uploadedfiletype ==""image/jpg"")){ echo ""L'image doit être en .jpg ou .jpeg""; }else if (move_uploaded_file($_FILES['image']['tmp_name'], $dir)){ $sql=""UPDATE test SET title='$title', description='$description' WHERE id='$id'""; if (!mysql_query($sql)){ die('Error: ' . mysql_error()); } $newname = ""../images/"" . mysql_insert_id() . "".jpg""; rename (""../images/$image"",""$newname""); $orig_image = imagecreatefromjpeg(""../image/$newname""); $sm_image = imagecreatetruecolor(96,96); imagecopyresampled($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image)); imagejpeg($sm_image, $newname, 100); echo 'Modif réussi <a href=""connected.php"">Retour</a>'; }else{ echo ""Un probleme est survenue""; } ?>"
"96","bad","<?php include(""config.php""); $dir = ""../images/""; $dir = $dir . basename( $_FILES['image']['name']); $title = $_POST['title']; $description = $_POST['desc']; $position = $_POST['position']; $image = ($_FILES['image']['name']); $uploadedfile = $_FILES['image']['tmp_name']; $uploadedfiletype = $_FILES['image']['type']; if (!($uploadedfiletype ==""image/pjpeg"" OR $uploadedfiletype ==""image/jpeg"" OR $uploadedfiletype ==""image/jpg"")){ echo ""Image must be jpg file""; }else if (move_uploaded_file($_FILES['image']['tmp_name'], $dir)){ $sql=""INSERT INTO test (title, description, position) VALUES ('$title','$description','$position')""; if (!mysql_query($sql,$con)){ die('Error: ' . mysql_error()); } $newname = ""../images/"" . mysql_insert_id() . "".jpg""; rename (""../images/$image"",""$newname""); $orig_image = imagecreatefromjpeg(""../image/$newname""); $sm_image = imagecreatetruecolor(96,96); imagecopyresampled($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image)); imagejpeg($sm_image, $newname, 100); echo 'Upload good <a href=""connected.php"">Retour</a>'; }else{ echo ""Problem""; } ?><?php include(""config.php""); $dir = ""../images/""; $dir = $dir . basename( $_FILES['image']['name']); $title = $_POST['title']; $description = $_POST['desc']; $position = $_POST['position']; $id=$_POST['id']; $image = ($_FILES['image']['name']); $uploadedfile = $_FILES['image']['tmp_name']; $uploadedfiletype = $_FILES['image']['type']; unlink('../images/$id'); if (!($uploadedfiletype ==""image/pjpeg"" OR $uploadedfiletype ==""image/jpeg"" OR $uploadedfiletype ==""image/jpg"")){ echo ""L'image doit être en .jpg ou .jpeg""; }else if (move_uploaded_file($_FILES['image']['tmp_name'], $dir)){ $sql=""UPDATE test SET title='$title', description='$description' WHERE id='$id'""; if (!mysql_query($sql)){ die('Error: ' . mysql_error()); } $newname = ""../images/"" . mysql_insert_id() . "".jpg""; rename (""../images/$image"",""$newname""); $orig_image = imagecreatefromjpeg(""../image/$newname""); $sm_image = imagecreatetruecolor(96,96); imagecopyresampled($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image)); imagejpeg($sm_image, $newname, 100); echo 'Modif réussi <a href=""connected.php"">Retour</a>'; }else{ echo ""Un probleme est survenue""; } ?>"
"97","bad","<body> <?php $db_server[""host""] = ""localhost""; //database server $db_server[""username""] = ""root""; // DB username $db_server[""password""] = ""mypass""; // DB password $db_server[""database""] = ""mudb"";// database name $dbc = mysql_connect($db_server[""host""], $db_server[""username""], $db_server[""password""]); mysql_select_db($db_server[""database""], $dbc); $user = $_COOKIE['mycookie']; $q = ""SELECT * FROM members WHERE username='$user'""; $r = mysql_query( $q,$dbc); while ($row = mysql_fetch_array($r, MYSQLI_ASSOC)) { echo 'username: '.$row['username'], '<br/>'; $password=$row['password']; ?> <form method=""post"" id=""changepasswordform"" > <input type=""password"" id=""newpassword"" name=""newpassword""/> <input type=""submit"" name=""changepasswordbutton"" > </form> <?php echo 'email: '.$row['email'], '<br/>'; } ?> <form method=""post"" id=""changeemailform"" > <input type=""text"" id=""newemail"" name=""newemail""/> <input type=""submit"" value=""αλλαγή"" name=""changeemailbutton"" > </form> <?php } if (isset($_POST['changepasswordbutton'])){ $newpassword=$_POST['newpassword']; $q2 = ""UPDATE members SET password=$newpassword WHERE username='$user'""; $r2 = mysql_query($q2,$dbc); } if (isset($_POST['changeemailbutton'])){ $newemail=$_POST['newemail']; $q3 = ""UPDATE members SET email=$newemail WHERE username='$user'""; $r3 = @mysql_query( $q3,$dbc); } ?> </body>"
"98","good","SELECT * FROM mytable WHERE `Bob's Stuff` > 1$stmt->prepare(""SELECT * FROM mytable WHERE `Bob's Stuff` > :int""); $stmt->bindValue(':int', $int); $stmt->execute();Bob's Stuff"
"99","good","SELECT * FROM mytable WHERE `Bob's Stuff` > 1$stmt->prepare(""SELECT * FROM mytable WHERE `Bob's Stuff` > :int""); $stmt->bindValue(':int', $int); $stmt->execute();Bob's Stuff"
"100","good","SELECT * FROM mytable WHERE `Bob's Stuff` > 1$stmt->prepare(""SELECT * FROM mytable WHERE `Bob's Stuff` > :int""); $stmt->bindValue(':int', $int); $stmt->execute();Bob's Stuff"
"101","bad","jQuery(document).ready(function(){ // binds form submission and fields to the validation engine jQuery(""#register-form"").validationEngine(); });<form action="""" id=""register-form""> <input value="""" class=""validate[required,custom[onlyLetterNumber],maxSize[20],ajax[ajaxNameCallPhp]]] input"" type=""text"" name=""username""/> </form>(function($){ $.fn.validationEngineLanguage = function(){}; $.validationEngineLanguage = { newLang: function(){ $.validationEngineLanguage.allRules = { ""ajaxNameCallPhp"": { // remote json service location ""url"": ""ajaxNameCallPhp.php"", // error ""alertText"": ""* This name is already taken"", // speaks by itself ""alertTextLoad"": ""* Validating, please wait"" } }; } }; $.validationEngineLanguage.newLang(); })(jQuery);ajaxNameCallPhp.phpinclude (""config.php""); $username = trim(strtolower($_POST['username'])); $username = mysql_escape_string($username); $query = ""SELECT username FROM user WHERE username = '$username' LIMIT 1""; $result = mysql_query($query); $num = mysql_num_rows($result); echo $num; mysql_close();"
"102","good","case 'search': if((empty($_POST['username'])) && (empty($_POST['firstname'])) && (empty($_POST['lastname'])) && (empty($_POSt['agemin'])) && (empty($_POST['agemax'])) && (empty($_POST['country']))){ $members = get_all_username(); } else { if(isset($_POST['username'])){ $otheruser = $_POST['username']; } else { $otheruser = null; } if(isset($_POST['agemin'])){ $ageMin = $_POST['agemin']; } else { $ageMin = null; } if(isset($_POST['agemax'])){ $ageMax = $_POST['agemax']; } else { $ageMax = null; } if(isset($_POST['country'])){ $country = $_POST['country']; } else { $country = null; } //if(isset($_POST['isonline'])) $members = search_members($otheruser, $ageMin, $ageMax, $country); } include('displaySearch.php'); break;function search_members($username, $ageMin, $ageMax, $country){ global $db; $query = ""SELECT username FROM profiles WHERE username = :username AND age > :ageMin AND age < :ageMax AND country = :country""; $statement = $db->prepare($query); $statement->bindValue(':username', $username); $statement->bindValue(':ageMin', $ageMin); $statement->bindValue(':ageMax', $ageMax); $statement->bindValue(':country', $country); $statement->execute(); if($statement->rowCount() >= 1){ return $statement->fetchAll(); } else { return false; } }"
"103","bad","$.ajax( { url: 'shipprocess.php', dataType: 'json', type: 'POST', success: function(data) { alert('Data is: ' + data); alert('The AJAX request was a success.'); }, 'error': function() { alert('An unexpected error occurred.'); } }); return false;<div class=""processedDate""> <form action=""shipprocess.php"" method=""POST"" id=""shipProcess2"" name=""shipProcess2""> <input type=""hidden"" name=""empID"" value=""1"" /> <input type=""hidden"" name=""thisOrderID"" id=""thisOrderID2"" value=""2"" /> <label>Date Shipped </label> <input type=""text"" name=""shipDate"" id=""shipDate2"" class=""shipDate"" size=""20"" value="""" /> <input type=""submit"" name=""shipped"" id=""shipped2"" class=""shipped"" value=""Shipped!"" /> </form> </div>[ { ""sd"": ""2012-09-17"", ""eid"": ""1"", ""oid"": ""2"", ""efn"": ""Johnathan"", ""eln"": ""Smith"" } ]<?php require_once('dblogin.php'); require_once('dbconnect.php'); require_once('funcs.php'); $err = array(); $datePattern = ""!^(\\d\\d)[-/](\\d\\d)[-/](\\d\\d(?:\\d\\d)?)$!""; $psErr = ""Shipping date is required.""; $emErr = ""Employee ID is missing.""; $orErr = ""Order ID is missing.""; if(isset($_POST['shipped'])) { $postEID = clean($_POST['empID'],$emErr,$n); $postOID = clean($_POST['thisOrderID'],$orErr,$n); $postShipDate = clean($_POST['shipDate'],$psErr,$n); $now = date(""Y-m-d H:i:s""); if($postEID == $emErr) { $err[] = $postEID; } else { $query = ""SELECT FK_UserID,FirstName,LastName FROM employees WHERE EmployeeID = '$postEID'""; $res = mysql_query($query); if(mysql_num_rows($res) < 1) { $err[] = ""Employee does not exist.""; } else { while($row = mysql_fetch_assoc($res)) { $retUserID = $row['FK_UserID']; $retFirstName = $row['FirstName']; $retLastName = $row['LastName']; } } } if($postOID == $orErr) { $err[] = $postOID; } if($postShipDate == $psErr) { $err[] = $postShipDate; } else { if (preg_match($datePattern,$postShipDate,$sMatches)) { $sMonth = $sMatches[1]; $sDay = $sMatches[2]; $sYear = $sMatches[3]; if(checkdate($sMonth,$sDay,$sYear)) { $shipDate = ""$sYear-$sMonth-$sDay""; } else { $err[] = ""Invalid shipping date.""; } } else { $err[] = ""Invalid Shipping Date""; } } if(empty($err)) // Keep processing the information if there are no errors. { $data[] = ""$postEID,$shipDate,$postOID,$now,$retFirstName,$retLastName""; } else // Return the errors to the user so corrections can be made. { $data[] = implode("","",$err); } for ($i=0;$i<sizeof($data);$i++) { $info = explode("","",$data[$i]); $data[$i] = $info; } $result = array(); for ($y=0;$y<sizeof($data);$y++) { if (($data[$y][0]) !== false) { array_push($result, array(""sd""=>$data[$y][1], ""eid""=>$data[$y][0], ""oid"" => $data[$y][2], ""efn""=>$data[$y][4], ""eln""=>$data[$y][5])); } if (count($result) > 2) { break; } } } echo array_to_json($result); ?>"
"104","bad","$.ajax( { url: 'shipprocess.php', dataType: 'json', type: 'POST', success: function(data) { alert('Data is: ' + data); alert('The AJAX request was a success.'); }, 'error': function() { alert('An unexpected error occurred.'); } }); return false;<div class=""processedDate""> <form action=""shipprocess.php"" method=""POST"" id=""shipProcess2"" name=""shipProcess2""> <input type=""hidden"" name=""empID"" value=""1"" /> <input type=""hidden"" name=""thisOrderID"" id=""thisOrderID2"" value=""2"" /> <label>Date Shipped </label> <input type=""text"" name=""shipDate"" id=""shipDate2"" class=""shipDate"" size=""20"" value="""" /> <input type=""submit"" name=""shipped"" id=""shipped2"" class=""shipped"" value=""Shipped!"" /> </form> </div>[ { ""sd"": ""2012-09-17"", ""eid"": ""1"", ""oid"": ""2"", ""efn"": ""Johnathan"", ""eln"": ""Smith"" } ]<?php require_once('dblogin.php'); require_once('dbconnect.php'); require_once('funcs.php'); $err = array(); $datePattern = ""!^(\\d\\d)[-/](\\d\\d)[-/](\\d\\d(?:\\d\\d)?)$!""; $psErr = ""Shipping date is required.""; $emErr = ""Employee ID is missing.""; $orErr = ""Order ID is missing.""; if(isset($_POST['shipped'])) { $postEID = clean($_POST['empID'],$emErr,$n); $postOID = clean($_POST['thisOrderID'],$orErr,$n); $postShipDate = clean($_POST['shipDate'],$psErr,$n); $now = date(""Y-m-d H:i:s""); if($postEID == $emErr) { $err[] = $postEID; } else { $query = ""SELECT FK_UserID,FirstName,LastName FROM employees WHERE EmployeeID = '$postEID'""; $res = mysql_query($query); if(mysql_num_rows($res) < 1) { $err[] = ""Employee does not exist.""; } else { while($row = mysql_fetch_assoc($res)) { $retUserID = $row['FK_UserID']; $retFirstName = $row['FirstName']; $retLastName = $row['LastName']; } } } if($postOID == $orErr) { $err[] = $postOID; } if($postShipDate == $psErr) { $err[] = $postShipDate; } else { if (preg_match($datePattern,$postShipDate,$sMatches)) { $sMonth = $sMatches[1]; $sDay = $sMatches[2]; $sYear = $sMatches[3]; if(checkdate($sMonth,$sDay,$sYear)) { $shipDate = ""$sYear-$sMonth-$sDay""; } else { $err[] = ""Invalid shipping date.""; } } else { $err[] = ""Invalid Shipping Date""; } } if(empty($err)) // Keep processing the information if there are no errors. { $data[] = ""$postEID,$shipDate,$postOID,$now,$retFirstName,$retLastName""; } else // Return the errors to the user so corrections can be made. { $data[] = implode("","",$err); } for ($i=0;$i<sizeof($data);$i++) { $info = explode("","",$data[$i]); $data[$i] = $info; } $result = array(); for ($y=0;$y<sizeof($data);$y++) { if (($data[$y][0]) !== false) { array_push($result, array(""sd""=>$data[$y][1], ""eid""=>$data[$y][0], ""oid"" => $data[$y][2], ""efn""=>$data[$y][4], ""eln""=>$data[$y][5])); } if (count($result) > 2) { break; } } } echo array_to_json($result); ?>"
"105","bad","<?php include(""../includes/config.php""); ?> <?php if ($_SESSION[""isteacher""]) { $con=mysql_connect($dbserver,$dbusername,$dbpassword); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($dbname, $con); $courseid=$_GET[""id""]; $result = mysql_query(""SELECT * FROM courses WHERE (id='"".$courseid.""')""); while($row = mysql_fetch_array($result)) { $id=$row['id']; $title = $row['title']; $des = $row['description']; $subjectid = $row['subjects-id']; } mysql_close($con); ?> <script type=""text/javascript""> $(function() { $(""form"").validity(function() { $(""#title"") .require(""This Field Must Be Filled!!"") }); }); </script> <?php include(""../includes/header.php""); ?> <?php include(""includes/nav.php""); ?> <div id=""maincontent""> <div class=""span-24 last""> <div id=""breadcrumbs""> <a href=""index.php"">Home</a> > <a href=""manage-courses.php"">Manage Courses</a> > <a href=""courses-list.php"">List Courses</a> > Edit Course </div> </div> <?php include(""../teacher/includes/manage-courses-aside.php""); ?> <div class=""span-18 last""> <h2 class=""alt"">Edit Course</h2> <form id=""form"" method=""post"" action=""courses-edit-action.php""> <input type=""hidden"" value=""<?php echo $courseid; ?>"" name=""id"" /> <label>Course Name:</label><input type=""text"" name=""title"" id=""title"" class=""text"" value=""<?php echo $title; ?>"" /><br /><br /> <label>Choose Subject:</label> <?php $con=mysql_connect($dbserver,$dbusername,$dbpassword); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($dbname, $con); $result = mysql_query(""SELECT * FROM subjects""); echo ""<select name='subjects-id'>\n""; while($row = mysql_fetch_array($result)) { echo ""<option value='"".$row['id'] . ""'""; if ($subjectid==$row['id']) echo 'selected=""selected""'; echo "" >"" . $row['subjectname'] . ""</option>\n""; } echo ""</select>\n""; mysql_close($con); ?> <label>Description:</label><textarea name=""description"" id=""description""><?php echo $des; ?></textarea><br /> <br /> <input type=""submit"" value=""Edit Course"" class=""button"" /> </form> <?php include(""../includes/footer.php""); ?> <?php } else { header(""Location: "".$fullpath.""login/unauthorized.php""); } ?><?php include(""../includes/config.php"");?> <?php $id=$_POST[""id""]; $title=$_POST[""title""]; $des=$_POST[""description""]; $subjectid=$_POST[""subjects-id""]; $con=mysql_connect($dbserver,$dbusername,$dbpassword); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""ombts"", $con); $query=(""UPDATE courses SET title='"".$title.""', description='"".$des.""', 'subjects- id'='"".$subjectid.""' WHERE (id='"".$id.""')""); $query=mysql_query($query); if($result){ echo header(""Location:manage-courses.php?status=2""); } mysql_close($con); ?>Notice: Undefined index: id in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 4 Notice: Undefined index: title in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 5 Notice: Undefined index: description in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 6 Notice: Undefined index: subjects-id in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 7"
"106","bad","<?php include(""../includes/config.php""); ?> <?php if ($_SESSION[""isteacher""]) { $con=mysql_connect($dbserver,$dbusername,$dbpassword); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($dbname, $con); $courseid=$_GET[""id""]; $result = mysql_query(""SELECT * FROM courses WHERE (id='"".$courseid.""')""); while($row = mysql_fetch_array($result)) { $id=$row['id']; $title = $row['title']; $des = $row['description']; $subjectid = $row['subjects-id']; } mysql_close($con); ?> <script type=""text/javascript""> $(function() { $(""form"").validity(function() { $(""#title"") .require(""This Field Must Be Filled!!"") }); }); </script> <?php include(""../includes/header.php""); ?> <?php include(""includes/nav.php""); ?> <div id=""maincontent""> <div class=""span-24 last""> <div id=""breadcrumbs""> <a href=""index.php"">Home</a> > <a href=""manage-courses.php"">Manage Courses</a> > <a href=""courses-list.php"">List Courses</a> > Edit Course </div> </div> <?php include(""../teacher/includes/manage-courses-aside.php""); ?> <div class=""span-18 last""> <h2 class=""alt"">Edit Course</h2> <form id=""form"" method=""post"" action=""courses-edit-action.php""> <input type=""hidden"" value=""<?php echo $courseid; ?>"" name=""id"" /> <label>Course Name:</label><input type=""text"" name=""title"" id=""title"" class=""text"" value=""<?php echo $title; ?>"" /><br /><br /> <label>Choose Subject:</label> <?php $con=mysql_connect($dbserver,$dbusername,$dbpassword); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($dbname, $con); $result = mysql_query(""SELECT * FROM subjects""); echo ""<select name='subjects-id'>\n""; while($row = mysql_fetch_array($result)) { echo ""<option value='"".$row['id'] . ""'""; if ($subjectid==$row['id']) echo 'selected=""selected""'; echo "" >"" . $row['subjectname'] . ""</option>\n""; } echo ""</select>\n""; mysql_close($con); ?> <label>Description:</label><textarea name=""description"" id=""description""><?php echo $des; ?></textarea><br /> <br /> <input type=""submit"" value=""Edit Course"" class=""button"" /> </form> <?php include(""../includes/footer.php""); ?> <?php } else { header(""Location: "".$fullpath.""login/unauthorized.php""); } ?><?php include(""../includes/config.php"");?> <?php $id=$_POST[""id""]; $title=$_POST[""title""]; $des=$_POST[""description""]; $subjectid=$_POST[""subjects-id""]; $con=mysql_connect($dbserver,$dbusername,$dbpassword); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""ombts"", $con); $query=(""UPDATE courses SET title='"".$title.""', description='"".$des.""', 'subjects- id'='"".$subjectid.""' WHERE (id='"".$id.""')""); $query=mysql_query($query); if($result){ echo header(""Location:manage-courses.php?status=2""); } mysql_close($con); ?>Notice: Undefined index: id in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 4 Notice: Undefined index: title in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 5 Notice: Undefined index: description in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 6 Notice: Undefined index: subjects-id in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 7"
"107","bad","<?php mysql_connect(""mysql15.000webhost.com"",""a3189966_root"",""""); mysql_select_db(""a3189966_pd""); $firstName = $_GET[firstName]; echo $firstName; $q=mysql_query(""SELECT * FROM people where first='$firstName'""); while($e=mysql_fetch_assoc($q)) $output[]=$e; $json = json_encode($output); echo($json); mysql_close(); ?> $(""#myForm"").submit(function(){ var postData = $(this).serialize(); $.ajax({ type: ""GET"", dataType: ""json"", data: $(""#myForm"").serialize(), url: ""db2.php"", success: function(data){ alert(""processing now"" + data); $.each(data,function(i,item){ alert(""processing each data now""); $('<li></li>').html(item.first + "" "" + item.last).appendTo('#data'); }); }, error: function(data){alert(""failed""+data);} }); return false; }); <form id=""myForm"" method=""GET"" action=""""> <input type=""textbox"" name=""firstName"" id=""firstName""> <input type=""submit"" name=""myButton"" value=""submit""> </form> <ul id=""data""> </ul>[{""id"":""1"",""first"":""wen"",""last"":""hao"",""age"":""123""}]"
"108","bad","<?php mysql_connect(""mysql15.000webhost.com"",""a3189966_root"",""""); mysql_select_db(""a3189966_pd""); $firstName = $_GET[firstName]; echo $firstName; $q=mysql_query(""SELECT * FROM people where first='$firstName'""); while($e=mysql_fetch_assoc($q)) $output[]=$e; $json = json_encode($output); echo($json); mysql_close(); ?> $(""#myForm"").submit(function(){ var postData = $(this).serialize(); $.ajax({ type: ""GET"", dataType: ""json"", data: $(""#myForm"").serialize(), url: ""db2.php"", success: function(data){ alert(""processing now"" + data); $.each(data,function(i,item){ alert(""processing each data now""); $('<li></li>').html(item.first + "" "" + item.last).appendTo('#data'); }); }, error: function(data){alert(""failed""+data);} }); return false; }); <form id=""myForm"" method=""GET"" action=""""> <input type=""textbox"" name=""firstName"" id=""firstName""> <input type=""submit"" name=""myButton"" value=""submit""> </form> <ul id=""data""> </ul>[{""id"":""1"",""first"":""wen"",""last"":""hao"",""age"":""123""}]"
"109","bad","<?php mysql_connect(""mysql15.000webhost.com"",""a3189966_root"",""""); mysql_select_db(""a3189966_pd""); $firstName = $_GET[firstName]; echo $firstName; $q=mysql_query(""SELECT * FROM people where first='$firstName'""); while($e=mysql_fetch_assoc($q)) $output[]=$e; $json = json_encode($output); echo($json); mysql_close(); ?> $(""#myForm"").submit(function(){ var postData = $(this).serialize(); $.ajax({ type: ""GET"", dataType: ""json"", data: $(""#myForm"").serialize(), url: ""db2.php"", success: function(data){ alert(""processing now"" + data); $.each(data,function(i,item){ alert(""processing each data now""); $('<li></li>').html(item.first + "" "" + item.last).appendTo('#data'); }); }, error: function(data){alert(""failed""+data);} }); return false; }); <form id=""myForm"" method=""GET"" action=""""> <input type=""textbox"" name=""firstName"" id=""firstName""> <input type=""submit"" name=""myButton"" value=""submit""> </form> <ul id=""data""> </ul>[{""id"":""1"",""first"":""wen"",""last"":""hao"",""age"":""123""}]"
"110","good","include 'stuff/class_stuff.php'; function SweetStuff() { $foo = new db_connection(); $foo->queryPreparedQuery(""SELECT Bacon, Eggs, Coffee FROM Necessary_Items WHERE Available = ?"",$bool); $bar = $foo->Load(); $stuff = 'Brand of Pork is '.$bar['Bacon'].' combined with '.$bar['Eggs'].' eggs and '.$bar['Coffee'].' nectar for energy and heart failure.'; return $stuff; } echo SweetStuff();class db_connection { private $conn; private $stmt; private $result; #Build a mysql connection public function __construct($host=""HOST"", $user=""USER"", $pass=""PASS"", $db=""DB_NAME"") { $this->conn = new mysqli($host, $user, $pass, $db); if(mysqli_connect_errno()) { echo(""Database connect Error : "" . mysqli_connect_error()); } } #return the connected connection public function getConnect() { return $this->conn; } #execute a prepared query without selecting public function execPreparedQuery($query, $params_r) { $stmt = $this->conn->stmt_init(); if (!$stmt->prepare($query)) { echo(""Error in $statement when preparing: "" . mysqli_error($this->conn)); return 0; } $types = ''; $values = ''; $index = 0; if(!is_array($params_r)) $params_r = array($params_r); $bindParam = '$stmt->bind_param(""'; foreach($params_r as $param) { if (is_numeric($param)) { $types.=""i""; } elseif (is_float($param)) { $types.=""d""; }else{ $types.=""s""; } $values .= '$params_r[' . $index . '],'; $index++; } $values = rtrim($values, ','); $bindParam .= $types . '"", ' . $values . ');'; if (strlen($types) > 0) { //for debug //if(strpos($query, ""INSERT"") > 0) //var_dump($params_r); eval($bindParam); } $stmt->execute(); return $stmt; } #execute a prepared query public function queryPreparedQuery($query, $params_r) { $this->stmt = $this->execPreparedQuery($query, $params_r); $this->stmt->store_result(); $meta = $this->stmt->result_metadata(); $bindResult = '$this->stmt->bind_result('; while ($columnName = $meta->fetch_field()) { $bindResult .= '$this->result[""'.$columnName->name.'""],'; } $bindResult = rtrim($bindResult, ',') . ');'; eval($bindResult); } #Load result public function Load(&$result = null) { if (func_num_args() == 0) { $this->stmt->fetch(); return $this->result; } else { $res = $this->stmt->fetch(); $result = $this->result; return $res; } } #Load result public function Execute(&$result = null) { if (func_num_args() == 0) { $this->stmt->fetch_array(); return $this->result; } else { $res = $this->stmt->fetch_array(); $result = $this->result; return $res; } } private function bindParameters(&$obj, &$bind_params_r) { call_user_func_array(array($obj, ""bind_param""), $bind_params_r); } } # these lines of code below return multi-dimentional/ nested array, similar to mysqli::fetch_all() $stmt->store_result(); $variables = array(); $data = array(); $meta = $stmt->result_metadata(); while($field = $meta->fetch_field()) $variables[] = &$data[$field->name]; // pass by reference call_user_func_array(array($stmt, 'bind_result'), $variables); $i=0; while($stmt->fetch()) { $array[$i] = array(); foreach($data as $k=>$v) $array[$i][$k] = $v; $i++; } # close statement $stmt->close(); return $array;"
"111","good","<?php ini_set('display_errors', 'On'); error_reporting(E_ALL); $db = new PDO('sqlite:/usr/users2/mieic2009/ei09072/public_html/TP1/Delicious /Database.db'); $a = $_GET['linkRef']; $b = $_GET['tagToAdd']; $checkIdLink = $db->prepare('SELECT idLink FROM Links WHERE nome_L = :link_n;'); $checkIdLink->bindParam(':link_n', $a, PDO::PARAM_STR); $checkIdLink->execute(); $linkID = $checkIdLink->fetch(); $insertLink = $db->prepare('INSERT INTO Tags (nome_T, idLink) VALUES (:addTag, :link_id)'); $insertLink->bindParam(':addTag', $b, PDO::PARAM_STR); $insertLink->bindParam(':link_id', $linkID, PDO::PARAM_INT); $insertLink->execute(); echo 'Tag added to the specified link!'; ?>"
"112","good","<?php ini_set('display_errors', 'On'); error_reporting(E_ALL); $db = new PDO('sqlite:/usr/users2/mieic2009/ei09072/public_html/TP1/Delicious /Database.db'); $a = $_GET['linkRef']; $b = $_GET['tagToAdd']; $checkIdLink = $db->prepare('SELECT idLink FROM Links WHERE nome_L = :link_n;'); $checkIdLink->bindParam(':link_n', $a, PDO::PARAM_STR); $checkIdLink->execute(); $linkID = $checkIdLink->fetch(); $insertLink = $db->prepare('INSERT INTO Tags (nome_T, idLink) VALUES (:addTag, :link_id)'); $insertLink->bindParam(':addTag', $b, PDO::PARAM_STR); $insertLink->bindParam(':link_id', $linkID, PDO::PARAM_INT); $insertLink->execute(); echo 'Tag added to the specified link!'; ?>"
"113","good","<?php ini_set('display_errors', 'On'); error_reporting(E_ALL); $db = new PDO('sqlite:/usr/users2/mieic2009/ei09072/public_html/TP1/Delicious /Database.db'); $a = $_GET['linkRef']; $b = $_GET['tagToAdd']; $checkIdLink = $db->prepare('SELECT idLink FROM Links WHERE nome_L = :link_n;'); $checkIdLink->bindParam(':link_n', $a, PDO::PARAM_STR); $checkIdLink->execute(); $linkID = $checkIdLink->fetch(); $insertLink = $db->prepare('INSERT INTO Tags (nome_T, idLink) VALUES (:addTag, :link_id)'); $insertLink->bindParam(':addTag', $b, PDO::PARAM_STR); $insertLink->bindParam(':link_id', $linkID, PDO::PARAM_INT); $insertLink->execute(); echo 'Tag added to the specified link!'; ?>"
"114","bad","function deq($s) { if($s == null) return null; return get_magic_quotes_gpc() ? stripslashes($s) : $s; } if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).""blabla"") == $_REQUEST['hash']){ mysql_connect(""localhost"", ""blub"", ""blub"") or die(mysql_error()); mysql_select_db(""blub"") or die(mysql_error()); // mysql_set_charset('UTF8'); // does not work as too old php mysql_query(""SET NAMES 'utf8'""); mysql_query(""SET CHARACTER SET utf8""); mysql_query(""SET COLLATION_CONNECTION = 'utf8_unicode_ci'""); $mysqldate = gmdate( 'Y-m-d H:i:s'); $language = (int) $_REQUEST['language']; $device = $_REQUEST['device']; $ipaddress = $_SERVER['REMOTE_ADDR']; mysql_query(""INSERT INTO test(username, text, language, rating, checked, date) VALUES('"".$_REQUEST['username'].""', '"".$_REQUEST['text'].""', '"".$language.""', '0' , 'false', '"".$mysqldate.""') "") or die(mysql_error()); mysql_close();"
"115","bad","function deq($s) { if($s == null) return null; return get_magic_quotes_gpc() ? stripslashes($s) : $s; } if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).""blabla"") == $_REQUEST['hash']){ mysql_connect(""localhost"", ""blub"", ""blub"") or die(mysql_error()); mysql_select_db(""blub"") or die(mysql_error()); // mysql_set_charset('UTF8'); // does not work as too old php mysql_query(""SET NAMES 'utf8'""); mysql_query(""SET CHARACTER SET utf8""); mysql_query(""SET COLLATION_CONNECTION = 'utf8_unicode_ci'""); $mysqldate = gmdate( 'Y-m-d H:i:s'); $language = (int) $_REQUEST['language']; $device = $_REQUEST['device']; $ipaddress = $_SERVER['REMOTE_ADDR']; mysql_query(""INSERT INTO test(username, text, language, rating, checked, date) VALUES('"".$_REQUEST['username'].""', '"".$_REQUEST['text'].""', '"".$language.""', '0' , 'false', '"".$mysqldate.""') "") or die(mysql_error()); mysql_close();"
"116","bad","function deq($s) { if($s == null) return null; return get_magic_quotes_gpc() ? stripslashes($s) : $s; } if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).""blabla"") == $_REQUEST['hash']){ mysql_connect(""localhost"", ""blub"", ""blub"") or die(mysql_error()); mysql_select_db(""blub"") or die(mysql_error()); // mysql_set_charset('UTF8'); // does not work as too old php mysql_query(""SET NAMES 'utf8'""); mysql_query(""SET CHARACTER SET utf8""); mysql_query(""SET COLLATION_CONNECTION = 'utf8_unicode_ci'""); $mysqldate = gmdate( 'Y-m-d H:i:s'); $language = (int) $_REQUEST['language']; $device = $_REQUEST['device']; $ipaddress = $_SERVER['REMOTE_ADDR']; mysql_query(""INSERT INTO test(username, text, language, rating, checked, date) VALUES('"".$_REQUEST['username'].""', '"".$_REQUEST['text'].""', '"".$language.""', '0' , 'false', '"".$mysqldate.""') "") or die(mysql_error()); mysql_close();"
"117","bad","function deq($s) { if($s == null) return null; return get_magic_quotes_gpc() ? stripslashes($s) : $s; } if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).""blabla"") == $_REQUEST['hash']){ mysql_connect(""localhost"", ""blub"", ""blub"") or die(mysql_error()); mysql_select_db(""blub"") or die(mysql_error()); // mysql_set_charset('UTF8'); // does not work as too old php mysql_query(""SET NAMES 'utf8'""); mysql_query(""SET CHARACTER SET utf8""); mysql_query(""SET COLLATION_CONNECTION = 'utf8_unicode_ci'""); $mysqldate = gmdate( 'Y-m-d H:i:s'); $language = (int) $_REQUEST['language']; $device = $_REQUEST['device']; $ipaddress = $_SERVER['REMOTE_ADDR']; mysql_query(""INSERT INTO test(username, text, language, rating, checked, date) VALUES('"".$_REQUEST['username'].""', '"".$_REQUEST['text'].""', '"".$language.""', '0' , 'false', '"".$mysqldate.""') "") or die(mysql_error()); mysql_close();"
"118","bad","function deq($s) { if($s == null) return null; return get_magic_quotes_gpc() ? stripslashes($s) : $s; } if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).""blabla"") == $_REQUEST['hash']){ mysql_connect(""localhost"", ""blub"", ""blub"") or die(mysql_error()); mysql_select_db(""blub"") or die(mysql_error()); // mysql_set_charset('UTF8'); // does not work as too old php mysql_query(""SET NAMES 'utf8'""); mysql_query(""SET CHARACTER SET utf8""); mysql_query(""SET COLLATION_CONNECTION = 'utf8_unicode_ci'""); $mysqldate = gmdate( 'Y-m-d H:i:s'); $language = (int) $_REQUEST['language']; $device = $_REQUEST['device']; $ipaddress = $_SERVER['REMOTE_ADDR']; mysql_query(""INSERT INTO test(username, text, language, rating, checked, date) VALUES('"".$_REQUEST['username'].""', '"".$_REQUEST['text'].""', '"".$language.""', '0' , 'false', '"".$mysqldate.""') "") or die(mysql_error()); mysql_close();"
"119","bad","function deq($s) { if($s == null) return null; return get_magic_quotes_gpc() ? stripslashes($s) : $s; } if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).""blabla"") == $_REQUEST['hash']){ mysql_connect(""localhost"", ""blub"", ""blub"") or die(mysql_error()); mysql_select_db(""blub"") or die(mysql_error()); // mysql_set_charset('UTF8'); // does not work as too old php mysql_query(""SET NAMES 'utf8'""); mysql_query(""SET CHARACTER SET utf8""); mysql_query(""SET COLLATION_CONNECTION = 'utf8_unicode_ci'""); $mysqldate = gmdate( 'Y-m-d H:i:s'); $language = (int) $_REQUEST['language']; $device = $_REQUEST['device']; $ipaddress = $_SERVER['REMOTE_ADDR']; mysql_query(""INSERT INTO test(username, text, language, rating, checked, date) VALUES('"".$_REQUEST['username'].""', '"".$_REQUEST['text'].""', '"".$language.""', '0' , 'false', '"".$mysqldate.""') "") or die(mysql_error()); mysql_close();"
"120","bad","<?php $login = ""coolkidz""; //this line insets into username $sname = ""heyu""; $city = ""beautiful""; $empass = ""awesome""; $eusername = ""what""; $mcode = ""nice""; $sql = ""INSERT INTO login(sname, city, empass, eusername, mcode, username) VALUES('$sname', '$city', '$empass', '$eusername', '$mcode', '$login')""); $hostname_Database = ""censored""; $database_Database = ""censored""; $username_Database = ""censored""; $password_Database = ""censored""; $mysqli = new mysqli($hostname_Database, $username_Database, $password_Database, $database_Database); if (mysqli_connect_errno()) { printf(""Connect failed: %s\n"", mysqli_connect_error()); exit(); } $result = $mysqli->query($sql); if (!$result) { printf(""%s\n"", $mysqli->error); exit(); } ?>"
"121","bad","<?php $login = ""coolkidz""; //this line insets into username $sname = ""heyu""; $city = ""beautiful""; $empass = ""awesome""; $eusername = ""what""; $mcode = ""nice""; $sql = ""INSERT INTO login(sname, city, empass, eusername, mcode, username) VALUES('$sname', '$city', '$empass', '$eusername', '$mcode', '$login')""); $hostname_Database = ""censored""; $database_Database = ""censored""; $username_Database = ""censored""; $password_Database = ""censored""; $mysqli = new mysqli($hostname_Database, $username_Database, $password_Database, $database_Database); if (mysqli_connect_errno()) { printf(""Connect failed: %s\n"", mysqli_connect_error()); exit(); } $result = $mysqli->query($sql); if (!$result) { printf(""%s\n"", $mysqli->error); exit(); } ?>"
"122","bad","<?php $login = ""coolkidz""; //this line insets into username $sname = ""heyu""; $city = ""beautiful""; $empass = ""awesome""; $eusername = ""what""; $mcode = ""nice""; $sql = ""INSERT INTO login(sname, city, empass, eusername, mcode, username) VALUES('$sname', '$city', '$empass', '$eusername', '$mcode', '$login')""); $hostname_Database = ""censored""; $database_Database = ""censored""; $username_Database = ""censored""; $password_Database = ""censored""; $mysqli = new mysqli($hostname_Database, $username_Database, $password_Database, $database_Database); if (mysqli_connect_errno()) { printf(""Connect failed: %s\n"", mysqli_connect_error()); exit(); } $result = $mysqli->query($sql); if (!$result) { printf(""%s\n"", $mysqli->error); exit(); } ?>"
"123","bad","Warning: include(work.php?user=EEN0422) [function.include]: failed to open stream: Operation not permitted in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16 Warning: include(work.php?user=EEN0422) [function.include]: failed to open stream: Operation not permitted in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16 Warning: include() [function.include]: Failed opening 'work.php?user=EEN0422' for inclusion (include_path='.;./includes;./pear') in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16<?php $status = $_GET['status']; $user = $_GET['user']; switch ($status) { case ""working"": include(""index2.php""); break; case ""log"": include(""admin.php""); break; case ""admin"": include(""settings.php""); break; case ""users"": include(""work.php?user=$user""); break; } ?><?php session_start(); if(!$_SESSION['LoggedIn']) header(""location: settingsauth.php""); $host=""localhost""; $username=""root""; $password=""root""; $db_name=""db""; $tbl_name=""log""; $user=$_GET['user']; mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); $sql=""SELECT *, (UNIX_TIMESTAMP(end) - UNIX_TIMESTAMP(start)) / 60.0 / 60.0 as hours_difference FROM $tbl_name WHERE user='$user'""; $result=mysql_query($sql); if ($result === false) { echo ""An error occurred.""; } ?> <table width=""90%"" border=""0"" align=""center"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>Start</strong></td> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>End</strong></td> <td width=""30%"" align=""center"" bgcolor=""#E6E6E6""><strong>Kommentar</strong></td> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>Tid</strong></td> <td width=""5%"" align=""center"" bgcolor=""E6E6E6""></td> </tr> <?php while($rows=mysql_fetch_array($result)){ ?> <title>VTLog - <? echo $rows['user']; ?></title> <tr> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['start']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['end']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['comment']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><?$var = number_format($rows['hours_difference'],2); $var = number_format($var,1); echo $var; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><a href=""editwork.php?editid=<? echo $rows['editid']; ?>""><img src=""ret.jpg"" alt=""Ret""></a><form action=""workstatus.php"" method=""get""><input type=""hidden"" name=""editit"" value=""<? echo $rows['editid']; ?>"" /><input type=""submit"" value=""Slet"" /></form></td> </tr> <?php } mysql_close(); ?> <tr> <td align=""left"" bgcolor=""#E6E6E6""><a href=""settings.php"">Tilbage til oversigt</a></td><td colspan=""2"" align=""center"" bgcolor=""#E6E6E6"">Total arbejdstid: <?php $var = number_format($rows['hours_difference'],2); $var = number_format($var,1); echo $var;?></td><td bgcolor=""#E6E6E6"" colspan=""2""></td> </tr> </table>"
"124","bad","Warning: include(work.php?user=EEN0422) [function.include]: failed to open stream: Operation not permitted in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16 Warning: include(work.php?user=EEN0422) [function.include]: failed to open stream: Operation not permitted in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16 Warning: include() [function.include]: Failed opening 'work.php?user=EEN0422' for inclusion (include_path='.;./includes;./pear') in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16<?php $status = $_GET['status']; $user = $_GET['user']; switch ($status) { case ""working"": include(""index2.php""); break; case ""log"": include(""admin.php""); break; case ""admin"": include(""settings.php""); break; case ""users"": include(""work.php?user=$user""); break; } ?><?php session_start(); if(!$_SESSION['LoggedIn']) header(""location: settingsauth.php""); $host=""localhost""; $username=""root""; $password=""root""; $db_name=""db""; $tbl_name=""log""; $user=$_GET['user']; mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); $sql=""SELECT *, (UNIX_TIMESTAMP(end) - UNIX_TIMESTAMP(start)) / 60.0 / 60.0 as hours_difference FROM $tbl_name WHERE user='$user'""; $result=mysql_query($sql); if ($result === false) { echo ""An error occurred.""; } ?> <table width=""90%"" border=""0"" align=""center"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>Start</strong></td> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>End</strong></td> <td width=""30%"" align=""center"" bgcolor=""#E6E6E6""><strong>Kommentar</strong></td> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>Tid</strong></td> <td width=""5%"" align=""center"" bgcolor=""E6E6E6""></td> </tr> <?php while($rows=mysql_fetch_array($result)){ ?> <title>VTLog - <? echo $rows['user']; ?></title> <tr> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['start']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['end']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['comment']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><?$var = number_format($rows['hours_difference'],2); $var = number_format($var,1); echo $var; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><a href=""editwork.php?editid=<? echo $rows['editid']; ?>""><img src=""ret.jpg"" alt=""Ret""></a><form action=""workstatus.php"" method=""get""><input type=""hidden"" name=""editit"" value=""<? echo $rows['editid']; ?>"" /><input type=""submit"" value=""Slet"" /></form></td> </tr> <?php } mysql_close(); ?> <tr> <td align=""left"" bgcolor=""#E6E6E6""><a href=""settings.php"">Tilbage til oversigt</a></td><td colspan=""2"" align=""center"" bgcolor=""#E6E6E6"">Total arbejdstid: <?php $var = number_format($rows['hours_difference'],2); $var = number_format($var,1); echo $var;?></td><td bgcolor=""#E6E6E6"" colspan=""2""></td> </tr> </table>"
"125","bad","Warning: include(work.php?user=EEN0422) [function.include]: failed to open stream: Operation not permitted in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16 Warning: include(work.php?user=EEN0422) [function.include]: failed to open stream: Operation not permitted in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16 Warning: include() [function.include]: Failed opening 'work.php?user=EEN0422' for inclusion (include_path='.;./includes;./pear') in E:\vhosts\example.com\httpdocs\vtlog\browse.php on line 16<?php $status = $_GET['status']; $user = $_GET['user']; switch ($status) { case ""working"": include(""index2.php""); break; case ""log"": include(""admin.php""); break; case ""admin"": include(""settings.php""); break; case ""users"": include(""work.php?user=$user""); break; } ?><?php session_start(); if(!$_SESSION['LoggedIn']) header(""location: settingsauth.php""); $host=""localhost""; $username=""root""; $password=""root""; $db_name=""db""; $tbl_name=""log""; $user=$_GET['user']; mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); $sql=""SELECT *, (UNIX_TIMESTAMP(end) - UNIX_TIMESTAMP(start)) / 60.0 / 60.0 as hours_difference FROM $tbl_name WHERE user='$user'""; $result=mysql_query($sql); if ($result === false) { echo ""An error occurred.""; } ?> <table width=""90%"" border=""0"" align=""center"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>Start</strong></td> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>End</strong></td> <td width=""30%"" align=""center"" bgcolor=""#E6E6E6""><strong>Kommentar</strong></td> <td width=""15%"" align=""center"" bgcolor=""#E6E6E6""><strong>Tid</strong></td> <td width=""5%"" align=""center"" bgcolor=""E6E6E6""></td> </tr> <?php while($rows=mysql_fetch_array($result)){ ?> <title>VTLog - <? echo $rows['user']; ?></title> <tr> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['start']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['end']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><? echo $rows['comment']; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><?$var = number_format($rows['hours_difference'],2); $var = number_format($var,1); echo $var; ?></td> <td align=""center"" bgcolor=""#FFFFFF""><a href=""editwork.php?editid=<? echo $rows['editid']; ?>""><img src=""ret.jpg"" alt=""Ret""></a><form action=""workstatus.php"" method=""get""><input type=""hidden"" name=""editit"" value=""<? echo $rows['editid']; ?>"" /><input type=""submit"" value=""Slet"" /></form></td> </tr> <?php } mysql_close(); ?> <tr> <td align=""left"" bgcolor=""#E6E6E6""><a href=""settings.php"">Tilbage til oversigt</a></td><td colspan=""2"" align=""center"" bgcolor=""#E6E6E6"">Total arbejdstid: <?php $var = number_format($rows['hours_difference'],2); $var = number_format($var,1); echo $var;?></td><td bgcolor=""#E6E6E6"" colspan=""2""></td> </tr> </table>"
"126","bad","<form action=""res/scripts/editsubscriber.php"" method=""post""> <label for=""name"">Name: </label> <input name=""name"" type=""text"" value=""<?php echo $name; ?>""> ...etc, etc... </form> include('appvars.php'); if(isset($_POST['submit'])){ $id = $_POST['id']; $name = $_POST['name']; $email = $_POST['email']; $month = $_POST['month']; $day = $_POST['day']; $year = $_POST['year']; $date = $_POST['date']; $time = substr($date, 0, (stripos($date, "" "")+1)); $time = str_replace($time, '', $date); $created = $year.'-'.$month.'-'.$day.' '.$time; $query = ""UPDATE newslettersubscribers SET name = '$name', email = '$email', created = '$created' WHERE id = $id)""; mysqli_query($dbc, $query); }"
"127","bad","<form action=""res/scripts/editsubscriber.php"" method=""post""> <label for=""name"">Name: </label> <input name=""name"" type=""text"" value=""<?php echo $name; ?>""> ...etc, etc... </form> include('appvars.php'); if(isset($_POST['submit'])){ $id = $_POST['id']; $name = $_POST['name']; $email = $_POST['email']; $month = $_POST['month']; $day = $_POST['day']; $year = $_POST['year']; $date = $_POST['date']; $time = substr($date, 0, (stripos($date, "" "")+1)); $time = str_replace($time, '', $date); $created = $year.'-'.$month.'-'.$day.' '.$time; $query = ""UPDATE newslettersubscribers SET name = '$name', email = '$email', created = '$created' WHERE id = $id)""; mysqli_query($dbc, $query); }"
"128","bad","$sql = ""SELECT id,title FROM tbl_accounts WHERE uid = ? ORDER BY title""; $q = $db->prepare($sql); $q->execute(array($uid));<select name=""account_id2"" class=""medium"" id=""account_id2""> <option value=""null"">---</option> <?php while ($r = $q->fetch()) { echo '<option value=""'.$r['id'].'"">'.$r['title'].'</option>'; } ?> </select>"
"129","bad","<!DOCTYPE HTML> <?php $server = 'localhost'; $user = 'xxxx'; $pass = 'xxxxx'; $db = 'xxxxxx'; try { $con = new PDO(""mysql:host=$server;dbname=$db"",$user,$pass); } catch(PDOException $e) { echo $e->getMessage(); } ?> <html> <form name=""Contact form"" action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""POST""> First name: <input type=""text"" name=""firstname""><br /> Last name: <input type=""text"" name=""lastname""><br /> <input type=""submit"" value=""Submit this!"" name=""submit""> </form> </html> <?php if(isset($_POST['submit'])) { $sql = $con->query(""INSERT INTO names (fname,lname) VALUES (:$_POST[firstname],:$_POST[lastname])""); } ?> <?php $con = null; ?>"
"130","bad","<!DOCTYPE HTML> <?php $server = 'localhost'; $user = 'xxxx'; $pass = 'xxxxx'; $db = 'xxxxxx'; try { $con = new PDO(""mysql:host=$server;dbname=$db"",$user,$pass); } catch(PDOException $e) { echo $e->getMessage(); } ?> <html> <form name=""Contact form"" action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""POST""> First name: <input type=""text"" name=""firstname""><br /> Last name: <input type=""text"" name=""lastname""><br /> <input type=""submit"" value=""Submit this!"" name=""submit""> </form> </html> <?php if(isset($_POST['submit'])) { $sql = $con->query(""INSERT INTO names (fname,lname) VALUES (:$_POST[firstname],:$_POST[lastname])""); } ?> <?php $con = null; ?>"
"131","bad","<!DOCTYPE HTML> <?php $server = 'localhost'; $user = 'xxxx'; $pass = 'xxxxx'; $db = 'xxxxxx'; try { $con = new PDO(""mysql:host=$server;dbname=$db"",$user,$pass); } catch(PDOException $e) { echo $e->getMessage(); } ?> <html> <form name=""Contact form"" action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""POST""> First name: <input type=""text"" name=""firstname""><br /> Last name: <input type=""text"" name=""lastname""><br /> <input type=""submit"" value=""Submit this!"" name=""submit""> </form> </html> <?php if(isset($_POST['submit'])) { $sql = $con->query(""INSERT INTO names (fname,lname) VALUES (:$_POST[firstname],:$_POST[lastname])""); } ?> <?php $con = null; ?>"
"132","bad","<!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <script type=""text/javascript"" src=""Locus.js""></script> <!-- LINKS TO THE EXTERNAL JAVASCRIPT --> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <title>Locus of control test</title> <link href=""Locus.css"" rel=""stylesheet"" type=""text/css"" /> <!-- LINKS TO THE EXTERNAL CS SHEET --> </head> <body> <form action=""Locus.php"" id=""Locus"" method=""post"" name=""Locus"" onsubmit=""validateForm()""> <!-- GIVES A LINK TO THE PHP FORM AND THE METHOD --> <h4>Surname: <input type=""text"" name=""surname""/> <br/>Prison: <input type=""text"" name=""prison""/><br/>National Insurance: <input type=""text"" name=""NI""/></h4> <h3> Please carefully read all the instructions given on the left hand panel.</h3> <h1 class=""Header""> LOCUS OF CONTROL</h1> <h2>Please click submit ONLY when all questions have been completed <br/> <input name=""submit"" id=""submit"" type=""submit"" value=""Check & Submit"" /></h2> <p>1. I can anticipate difficulties and take action to avoid them. <br /> <input type=""radio"" name=""Q1"" value=""4"" /> Always Agree <input type=""radio"" name=""Q1"" value=""3"" /> Agree <input type=""radio"" name=""Q1"" value=""2"" /> Unsure <input type=""radio"" name=""Q1"" value=""1"" /> Disgree <input type=""radio"" name=""Q1"" value=""0"" /> Always Disagree </p> <p>2. A great deal of what happens to me is just a matter of chance. <br /> <input type=""radio"" name=""Q2"" value=""0"" /> Always Agree <input type=""radio"" name=""Q2"" value=""1"" /> Agree <input type=""radio"" name=""Q2"" value=""2"" /> Unsure <input type=""radio"" name=""Q2"" value=""3"" /> Disgree <input type=""radio"" name=""Q2"" value=""4"" /> Always Disagree </p> <p>3. Everyone knows that luck or chance determines the future. <br /> <input type=""radio"" name=""Q3"" value=""0"" /> Always Agree <input type=""radio"" name=""Q3"" value=""1"" /> Agree <input type=""radio"" name=""Q3"" value=""2"" /> Unsure <input type=""radio"" name=""Q3"" value=""3"" /> Disgree <input type=""radio"" name=""Q3"" value=""4"" /> Always Disagree </p> <p>4. I can control my problems only if I have outside support. <br /> <input type=""radio"" name=""Q4"" value=""0"" /> Always Agree <input type=""radio"" name=""Q4"" value=""1"" /> Agree <input type=""radio"" name=""Q4"" value=""2"" /> Unsure <input type=""radio"" name=""Q4"" value=""3"" /> Disgree <input type=""radio"" name=""Q4"" value=""4"" /> Always Disagree </p> <p>5. When I make plans I am almost certain I can make them work. <br /> <input type=""radio"" name=""Q5"" value=""4"" /> Always Agree <input type=""radio"" name=""Q5"" value=""3"" /> Agree <input type=""radio"" name=""Q5"" value=""2"" /> Unsure <input type=""radio"" name=""Q5"" value=""1"" /> Disgree <input type=""radio"" name=""Q5"" value=""0"" /> Always Disagree </p> <p>6. My problems will dominate all my life. <br /> <input type=""radio"" name=""Q6"" value=""0"" /> Always Agree <input type=""radio"" name=""Q6"" value=""1"" /> Agree <input type=""radio"" name=""Q6"" value=""2"" /> Unsure <input type=""radio"" name=""Q6"" value=""3"" /> Disgree <input type=""radio"" name=""Q6"" value=""4"" /> Always Disagree </p> <p>7. My mistakes and problems are my responsibility to deal with. <br /> <input type=""radio"" name=""Q7"" value=""4"" /> Always Agree <input type=""radio"" name=""Q7"" value=""3"" /> Agree <input type=""radio"" name=""Q7"" value=""2"" /> Unsure <input type=""radio"" name=""Q7"" value=""1"" /> Disgree <input type=""radio"" name=""Q7"" value=""0"" /> Always Disagree </p> <p>8. Becoming a success is a matter of hard work, luck has little or nothing to do with it. <br /> <input type=""radio"" name=""Q8"" value=""4"" /> Always Agree <input type=""radio"" name=""Q8"" value=""3"" /> Agree <input type=""radio"" name=""Q8"" value=""2"" /> Unsure <input type=""radio"" name=""Q8"" value=""1"" /> Disgree <input type=""radio"" name=""Q8"" value=""0"" /> Always Disagree </p> <p>9. My life is controlled by outside actions and events. <br /> <input type=""radio"" name=""Q9"" value=""0"" /> Always Agree <input type=""radio"" name=""Q9"" value=""1"" /> Agree <input type=""radio"" name=""Q9"" value=""2"" /> Unsure <input type=""radio"" name=""Q9"" value=""3"" /> Disgree <input type=""radio"" name=""Q9"" value=""4"" /> Always Disagree </p> <p>10. I believe people are victims of circumstances beyond their control. <br /> <input type=""radio"" name=""Q10"" value=""0"" /> Always Agree <input type=""radio"" name=""Q10"" value=""1"" /> Agree <input type=""radio"" name=""Q10"" value=""2"" /> Unsure <input type=""radio"" name=""Q10"" value=""3"" /> Disgree <input type=""radio"" name=""Q10"" value=""4"" /> Always Disagree </p> <p>11. To continually manage my problems I need professional help. <br /> <input type=""radio"" name=""Q11"" value=""0"" /> Always Agree <input type=""radio"" name=""Q11"" value=""1"" /> Agree <input type=""radio"" name=""Q11"" value=""2"" /> Unsure <input type=""radio"" name=""Q11"" value=""3"" /> Disgree <input type=""radio"" name=""Q11"" value=""4"" /> Always Disagree </p> <p>12. When I am under stress the tightness in my muscles is due to things outside my control.<br /> <input type=""radio"" name=""Q12"" value=""0"" /> Always Agree <input type=""radio"" name=""Q12"" value=""1"" /> Agree <input type=""radio"" name=""Q12"" value=""2"" /> Unsure <input type=""radio"" name=""Q12"" value=""3"" /> Disgree <input type=""radio"" name=""Q12"" value=""4"" /> Always Disagree </p> <p>13. 1 believe a person really can be master of his own fate.<br /> <input type=""radio"" name=""Q13"" value=""4"" /> Always Agree <input type=""radio"" name=""Q13"" value=""3"" /> Agree <input type=""radio"" name=""Q13"" value=""2"" /> Unsure <input type=""radio"" name=""Q13"" value=""1"" /> Disgree <input type=""radio"" name=""Q13"" value=""0"" /> Always Disagree </p> <p>14. It is impossible to control irregular fast breathing when I am having difficulties.<br /> <input type=""radio"" name=""Q14"" value=""0"" /> Always Agree <input type=""radio"" name=""Q14"" value=""1"" /> Agree <input type=""radio"" name=""Q14"" value=""2"" /> Unsure <input type=""radio"" name=""Q14"" value=""3"" /> Disgree <input type=""radio"" name=""Q14"" value=""4"" /> Always Disagree </p> <p>15. I understand why my problems vary so much from one occasion to another. <br /> <input type=""radio"" name=""Q15"" value=""4"" /> Always Agree <input type=""radio"" name=""Q15"" value=""3"" /> Agree <input type=""radio"" name=""Q15"" value=""2"" /> Unsure <input type=""radio"" name=""Q15"" value=""1"" /> Disgree <input type=""radio"" name=""Q15"" value=""0"" /> Always Disagree </p> <p>16. I am confident of being able to deal successfully with future problems.<br /> <input type=""radio"" name=""Q16"" value=""4"" /> Always Agree <input type=""radio"" name=""Q16"" value=""3"" /> Agree <input type=""radio"" name=""Q16"" value=""2"" /> Unsure <input type=""radio"" name=""Q16"" value=""1"" /> Disgree <input type=""radio"" name=""Q16"" value=""0"" /> Always Disagree </p> <p>17. In my case maintaining control over my problems is mainly due to luck. <br /> <input type=""radio"" name=""Q17"" value=""0"" /> Always Agree <input type=""radio"" name=""Q17"" value=""1"" /> Agree <input type=""radio"" name=""Q17"" value=""2"" /> Unsure <input type=""radio"" name=""Q17"" value=""3"" /> Disgree <input type=""radio"" name=""Q17"" value=""4"" /> Always Disagree </p> <p>18. I have often been blamed for events beyond my control. <br /> <input type=""radio"" name=""Q18"" value=""0"" /> Always Agree <input type=""radio"" name=""Q18"" value=""1"" /> Agree <input type=""radio"" name=""Q18"" value=""2"" /> Unsure <input type=""radio"" name=""Q18"" value=""3"" /> Disgree <input type=""radio"" name=""Q18"" value=""4"" /> Always Disagree </p> <h5>Please click 'submit' at the start of this test</h5> </form> </body> </html><!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <link href=""Locus.css"" rel=""stylesheet"" type=""text/css"" /> <!-- LINKED ATTACHED STYLE SHEET--> <title>Locus Test Complete</title> </head> <h4>THANK YOU FOR SUBMITTING THIS TEST, PLEASE CHOOSE ANOTHER FROM THE MENU BAR.</h4> <body> <?php /*DECLARING THE VARIABLES FOR ACCESS*/ $username=""root""; $password=""""; $database_server=""localhost""; /*CONNECTING TO THE SERVER*/ $database=""locus""; mysql_connect($database_server,$username,$password) or die(""cannot connect""); /*CONNECTING TO THE DATABASE*/ @mysql_select_db($database) or die( ""Unable to select database""); /*CHECK THE STATUS AND DECLARE THE VARIABLES*/ $_POST = array( ); if( isset( $_POST['surname'])) { $Surname = $_POST['surname']; } else { $Surname = """"; } if( isset( $_POST['prison'])) { $Prison = $_POST['prison']; } else { $Prison = """"; } /*SHORTHAND WAY TO CHECK THE STATUS AND DECLARE THE VARIABLES*/ $NI = isset( $_POST['NI']) ? $_POST['NI'] : """"; $Q1 = isset( $_POST['Q1']) ? $_POST['Q1'] : """"; $Q2 = isset( $_POST['Q2']) ? $_POST['Q2'] : """"; $Q3 = isset( $_POST['Q3']) ? $_POST['Q3'] : """"; $Q4 = isset( $_POST['Q4']) ? $_POST['Q4'] : """"; $Q5 = isset( $_POST['Q5']) ? $_POST['Q5'] : """"; $Q6 = isset( $_POST['Q6']) ? $_POST['Q6'] : """"; $Q7 = isset( $_POST['Q7']) ? $_POST['Q7'] : """"; $Q8 = isset( $_POST['Q8']) ? $_POST['Q8'] : """"; $Q9 = isset( $_POST['Q9']) ? $_POST['Q9'] : """"; $Q10 = isset( $_POST['Q10']) ? $_POST['Q10'] : """"; $Q11 = isset( $_POST['Q11']) ? $_POST['Q11'] : """"; $Q12 = isset( $_POST['Q12']) ? $_POST['Q12'] : """"; $Q13 = isset( $_POST['Q13']) ? $_POST['Q13'] : """"; $Q14 = isset( $_POST['Q14']) ? $_POST['Q14'] : """"; $Q15 = isset( $_POST['Q15']) ? $_POST['Q15'] : """"; $Q16 = isset( $_POST['Q16']) ? $_POST['Q16'] : """"; $Q17 = isset( $_POST['Q17']) ? $_POST['Q17'] : """"; $Q18 = isset( $_POST['Q18']) ? $_POST['Q18'] : """"; /*PLAVE THE VALUES OF THE VARIABLES WITHIN THE DATABASE TABLE*/ $query = ""INSERT INTO locus.locusofcontrolscores VALUES ('','$Surname','$Prison','$NI','$Q1','$Q2','$Q3','$Q4','$Q5','$Q6','$Q7','$Q8','$Q9','$Q10','$Q11','$Q12','$Q13','$Q14','$Q15','$Q16','$Q17','$Q18')""; /*CREATE A QUERY FROM THE VARIABLE*/ mysql_query($query); /*CLOSE THE SERVER CONNECTION*/ mysql_close(); ?> </body> </html>"
"133","bad","<!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <script type=""text/javascript"" src=""Locus.js""></script> <!-- LINKS TO THE EXTERNAL JAVASCRIPT --> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <title>Locus of control test</title> <link href=""Locus.css"" rel=""stylesheet"" type=""text/css"" /> <!-- LINKS TO THE EXTERNAL CS SHEET --> </head> <body> <form action=""Locus.php"" id=""Locus"" method=""post"" name=""Locus"" onsubmit=""validateForm()""> <!-- GIVES A LINK TO THE PHP FORM AND THE METHOD --> <h4>Surname: <input type=""text"" name=""surname""/> <br/>Prison: <input type=""text"" name=""prison""/><br/>National Insurance: <input type=""text"" name=""NI""/></h4> <h3> Please carefully read all the instructions given on the left hand panel.</h3> <h1 class=""Header""> LOCUS OF CONTROL</h1> <h2>Please click submit ONLY when all questions have been completed <br/> <input name=""submit"" id=""submit"" type=""submit"" value=""Check & Submit"" /></h2> <p>1. I can anticipate difficulties and take action to avoid them. <br /> <input type=""radio"" name=""Q1"" value=""4"" /> Always Agree <input type=""radio"" name=""Q1"" value=""3"" /> Agree <input type=""radio"" name=""Q1"" value=""2"" /> Unsure <input type=""radio"" name=""Q1"" value=""1"" /> Disgree <input type=""radio"" name=""Q1"" value=""0"" /> Always Disagree </p> <p>2. A great deal of what happens to me is just a matter of chance. <br /> <input type=""radio"" name=""Q2"" value=""0"" /> Always Agree <input type=""radio"" name=""Q2"" value=""1"" /> Agree <input type=""radio"" name=""Q2"" value=""2"" /> Unsure <input type=""radio"" name=""Q2"" value=""3"" /> Disgree <input type=""radio"" name=""Q2"" value=""4"" /> Always Disagree </p> <p>3. Everyone knows that luck or chance determines the future. <br /> <input type=""radio"" name=""Q3"" value=""0"" /> Always Agree <input type=""radio"" name=""Q3"" value=""1"" /> Agree <input type=""radio"" name=""Q3"" value=""2"" /> Unsure <input type=""radio"" name=""Q3"" value=""3"" /> Disgree <input type=""radio"" name=""Q3"" value=""4"" /> Always Disagree </p> <p>4. I can control my problems only if I have outside support. <br /> <input type=""radio"" name=""Q4"" value=""0"" /> Always Agree <input type=""radio"" name=""Q4"" value=""1"" /> Agree <input type=""radio"" name=""Q4"" value=""2"" /> Unsure <input type=""radio"" name=""Q4"" value=""3"" /> Disgree <input type=""radio"" name=""Q4"" value=""4"" /> Always Disagree </p> <p>5. When I make plans I am almost certain I can make them work. <br /> <input type=""radio"" name=""Q5"" value=""4"" /> Always Agree <input type=""radio"" name=""Q5"" value=""3"" /> Agree <input type=""radio"" name=""Q5"" value=""2"" /> Unsure <input type=""radio"" name=""Q5"" value=""1"" /> Disgree <input type=""radio"" name=""Q5"" value=""0"" /> Always Disagree </p> <p>6. My problems will dominate all my life. <br /> <input type=""radio"" name=""Q6"" value=""0"" /> Always Agree <input type=""radio"" name=""Q6"" value=""1"" /> Agree <input type=""radio"" name=""Q6"" value=""2"" /> Unsure <input type=""radio"" name=""Q6"" value=""3"" /> Disgree <input type=""radio"" name=""Q6"" value=""4"" /> Always Disagree </p> <p>7. My mistakes and problems are my responsibility to deal with. <br /> <input type=""radio"" name=""Q7"" value=""4"" /> Always Agree <input type=""radio"" name=""Q7"" value=""3"" /> Agree <input type=""radio"" name=""Q7"" value=""2"" /> Unsure <input type=""radio"" name=""Q7"" value=""1"" /> Disgree <input type=""radio"" name=""Q7"" value=""0"" /> Always Disagree </p> <p>8. Becoming a success is a matter of hard work, luck has little or nothing to do with it. <br /> <input type=""radio"" name=""Q8"" value=""4"" /> Always Agree <input type=""radio"" name=""Q8"" value=""3"" /> Agree <input type=""radio"" name=""Q8"" value=""2"" /> Unsure <input type=""radio"" name=""Q8"" value=""1"" /> Disgree <input type=""radio"" name=""Q8"" value=""0"" /> Always Disagree </p> <p>9. My life is controlled by outside actions and events. <br /> <input type=""radio"" name=""Q9"" value=""0"" /> Always Agree <input type=""radio"" name=""Q9"" value=""1"" /> Agree <input type=""radio"" name=""Q9"" value=""2"" /> Unsure <input type=""radio"" name=""Q9"" value=""3"" /> Disgree <input type=""radio"" name=""Q9"" value=""4"" /> Always Disagree </p> <p>10. I believe people are victims of circumstances beyond their control. <br /> <input type=""radio"" name=""Q10"" value=""0"" /> Always Agree <input type=""radio"" name=""Q10"" value=""1"" /> Agree <input type=""radio"" name=""Q10"" value=""2"" /> Unsure <input type=""radio"" name=""Q10"" value=""3"" /> Disgree <input type=""radio"" name=""Q10"" value=""4"" /> Always Disagree </p> <p>11. To continually manage my problems I need professional help. <br /> <input type=""radio"" name=""Q11"" value=""0"" /> Always Agree <input type=""radio"" name=""Q11"" value=""1"" /> Agree <input type=""radio"" name=""Q11"" value=""2"" /> Unsure <input type=""radio"" name=""Q11"" value=""3"" /> Disgree <input type=""radio"" name=""Q11"" value=""4"" /> Always Disagree </p> <p>12. When I am under stress the tightness in my muscles is due to things outside my control.<br /> <input type=""radio"" name=""Q12"" value=""0"" /> Always Agree <input type=""radio"" name=""Q12"" value=""1"" /> Agree <input type=""radio"" name=""Q12"" value=""2"" /> Unsure <input type=""radio"" name=""Q12"" value=""3"" /> Disgree <input type=""radio"" name=""Q12"" value=""4"" /> Always Disagree </p> <p>13. 1 believe a person really can be master of his own fate.<br /> <input type=""radio"" name=""Q13"" value=""4"" /> Always Agree <input type=""radio"" name=""Q13"" value=""3"" /> Agree <input type=""radio"" name=""Q13"" value=""2"" /> Unsure <input type=""radio"" name=""Q13"" value=""1"" /> Disgree <input type=""radio"" name=""Q13"" value=""0"" /> Always Disagree </p> <p>14. It is impossible to control irregular fast breathing when I am having difficulties.<br /> <input type=""radio"" name=""Q14"" value=""0"" /> Always Agree <input type=""radio"" name=""Q14"" value=""1"" /> Agree <input type=""radio"" name=""Q14"" value=""2"" /> Unsure <input type=""radio"" name=""Q14"" value=""3"" /> Disgree <input type=""radio"" name=""Q14"" value=""4"" /> Always Disagree </p> <p>15. I understand why my problems vary so much from one occasion to another. <br /> <input type=""radio"" name=""Q15"" value=""4"" /> Always Agree <input type=""radio"" name=""Q15"" value=""3"" /> Agree <input type=""radio"" name=""Q15"" value=""2"" /> Unsure <input type=""radio"" name=""Q15"" value=""1"" /> Disgree <input type=""radio"" name=""Q15"" value=""0"" /> Always Disagree </p> <p>16. I am confident of being able to deal successfully with future problems.<br /> <input type=""radio"" name=""Q16"" value=""4"" /> Always Agree <input type=""radio"" name=""Q16"" value=""3"" /> Agree <input type=""radio"" name=""Q16"" value=""2"" /> Unsure <input type=""radio"" name=""Q16"" value=""1"" /> Disgree <input type=""radio"" name=""Q16"" value=""0"" /> Always Disagree </p> <p>17. In my case maintaining control over my problems is mainly due to luck. <br /> <input type=""radio"" name=""Q17"" value=""0"" /> Always Agree <input type=""radio"" name=""Q17"" value=""1"" /> Agree <input type=""radio"" name=""Q17"" value=""2"" /> Unsure <input type=""radio"" name=""Q17"" value=""3"" /> Disgree <input type=""radio"" name=""Q17"" value=""4"" /> Always Disagree </p> <p>18. I have often been blamed for events beyond my control. <br /> <input type=""radio"" name=""Q18"" value=""0"" /> Always Agree <input type=""radio"" name=""Q18"" value=""1"" /> Agree <input type=""radio"" name=""Q18"" value=""2"" /> Unsure <input type=""radio"" name=""Q18"" value=""3"" /> Disgree <input type=""radio"" name=""Q18"" value=""4"" /> Always Disagree </p> <h5>Please click 'submit' at the start of this test</h5> </form> </body> </html><!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <link href=""Locus.css"" rel=""stylesheet"" type=""text/css"" /> <!-- LINKED ATTACHED STYLE SHEET--> <title>Locus Test Complete</title> </head> <h4>THANK YOU FOR SUBMITTING THIS TEST, PLEASE CHOOSE ANOTHER FROM THE MENU BAR.</h4> <body> <?php /*DECLARING THE VARIABLES FOR ACCESS*/ $username=""root""; $password=""""; $database_server=""localhost""; /*CONNECTING TO THE SERVER*/ $database=""locus""; mysql_connect($database_server,$username,$password) or die(""cannot connect""); /*CONNECTING TO THE DATABASE*/ @mysql_select_db($database) or die( ""Unable to select database""); /*CHECK THE STATUS AND DECLARE THE VARIABLES*/ $_POST = array( ); if( isset( $_POST['surname'])) { $Surname = $_POST['surname']; } else { $Surname = """"; } if( isset( $_POST['prison'])) { $Prison = $_POST['prison']; } else { $Prison = """"; } /*SHORTHAND WAY TO CHECK THE STATUS AND DECLARE THE VARIABLES*/ $NI = isset( $_POST['NI']) ? $_POST['NI'] : """"; $Q1 = isset( $_POST['Q1']) ? $_POST['Q1'] : """"; $Q2 = isset( $_POST['Q2']) ? $_POST['Q2'] : """"; $Q3 = isset( $_POST['Q3']) ? $_POST['Q3'] : """"; $Q4 = isset( $_POST['Q4']) ? $_POST['Q4'] : """"; $Q5 = isset( $_POST['Q5']) ? $_POST['Q5'] : """"; $Q6 = isset( $_POST['Q6']) ? $_POST['Q6'] : """"; $Q7 = isset( $_POST['Q7']) ? $_POST['Q7'] : """"; $Q8 = isset( $_POST['Q8']) ? $_POST['Q8'] : """"; $Q9 = isset( $_POST['Q9']) ? $_POST['Q9'] : """"; $Q10 = isset( $_POST['Q10']) ? $_POST['Q10'] : """"; $Q11 = isset( $_POST['Q11']) ? $_POST['Q11'] : """"; $Q12 = isset( $_POST['Q12']) ? $_POST['Q12'] : """"; $Q13 = isset( $_POST['Q13']) ? $_POST['Q13'] : """"; $Q14 = isset( $_POST['Q14']) ? $_POST['Q14'] : """"; $Q15 = isset( $_POST['Q15']) ? $_POST['Q15'] : """"; $Q16 = isset( $_POST['Q16']) ? $_POST['Q16'] : """"; $Q17 = isset( $_POST['Q17']) ? $_POST['Q17'] : """"; $Q18 = isset( $_POST['Q18']) ? $_POST['Q18'] : """"; /*PLAVE THE VALUES OF THE VARIABLES WITHIN THE DATABASE TABLE*/ $query = ""INSERT INTO locus.locusofcontrolscores VALUES ('','$Surname','$Prison','$NI','$Q1','$Q2','$Q3','$Q4','$Q5','$Q6','$Q7','$Q8','$Q9','$Q10','$Q11','$Q12','$Q13','$Q14','$Q15','$Q16','$Q17','$Q18')""; /*CREATE A QUERY FROM THE VARIABLE*/ mysql_query($query); /*CLOSE THE SERVER CONNECTION*/ mysql_close(); ?> </body> </html>"
"134","bad","<?php $connection = mysql_connect('localhost', 'username', 'password') or die (mysql_error()); mysql_select_db('table', $connection) or die (mysql_error()); $message = $_POST[""Body""]; $data = explode(""*"", $message); $id = ''; $phone = $_POST[""From""]; $location = $data[0]; $speed = $data[1]; $direction = $data[2]; $comment = $data[3]; $query = mysql_query(""INSERT INTO user_data (id, phone, location, speed, direction, comment) VALUES ('$id', '$phone', '$location', '$speed', '$direction', '$comment')"");"
"135","bad","<?php $connection = mysql_connect('localhost', 'username', 'password') or die (mysql_error()); mysql_select_db('table', $connection) or die (mysql_error()); $message = $_POST[""Body""]; $data = explode(""*"", $message); $id = ''; $phone = $_POST[""From""]; $location = $data[0]; $speed = $data[1]; $direction = $data[2]; $comment = $data[3]; $query = mysql_query(""INSERT INTO user_data (id, phone, location, speed, direction, comment) VALUES ('$id', '$phone', '$location', '$speed', '$direction', '$comment')"");"
"136","bad","<?php $connection = mysql_connect('localhost', 'username', 'password') or die (mysql_error()); mysql_select_db('table', $connection) or die (mysql_error()); $message = $_POST[""Body""]; $data = explode(""*"", $message); $id = ''; $phone = $_POST[""From""]; $location = $data[0]; $speed = $data[1]; $direction = $data[2]; $comment = $data[3]; $query = mysql_query(""INSERT INTO user_data (id, phone, location, speed, direction, comment) VALUES ('$id', '$phone', '$location', '$speed', '$direction', '$comment')"");"
"137","bad","<!DOCTYPE html><head> <link rel=""stylesheet"" type=""text/css"" href=""mobile.css"" media=""screen and (max-device-width: 480px)"" /> <!--[if IE]> <link rel=""stylesheet"" type=""text/css"" media=""screen and (min-width: 481px)"" href=""IEjoin.css"" /> <![endif]--> <script src=""jquery-1.8.2.min.js"" type=""text/javascript""></script> <script src=""register.js"" type=""text/javascript""></script> <script src=""jquery.placeholder.js"" type=""text/javascript""></script> </head> <body> <div id=""wrapper""> <div id=""logo""> </div> <div id=""headline""> <h1>Create your account</h1> </div> <div id=""container""> <form id=""register"" action=""form.php"" method=""post""> <ul> <li id=""first_name""> <input name=""fname"" type=""text"" value="""" id=""fname"" placeholder=""First Name"" maxlength=""30""> <div class=""error""></div> </li> <li id=""last_name""> <input name=""lname"" type=""text"" value="""" id=""lname"" placeholder=""Last Name"" maxlength=""30""> <div class=""error""></div> </li> <li id=""email_address""> <input name=""email"" type=""text"" value="""" id=""email"" placeholder=""Email Address"" maxlength=""60""> <div class=""error""></div> </li> <li id=""uname""> <input name=""username"" type=""text"" value="""" id=""username"" placeholder=""Username"" maxlength=""15""> <div class=""error""></div> </li> <li id=""pword""> <input name=""password"" type=""password"" value="""" id=""password"" placeholder=""Password""> <div class=""error""></div> </li> <li id=""gender_select""> <select id=""gender"" name=""gender""> <option value="""" selected=""selected"">Select your gender</option> <option value=""male"">Male</option> <option value=""female"">Female</option> <option value=""unspecified"">Unspecified</option> </select> </li> <li id=""submit_button""> <button id=""register_button"" class=""register_button_disabled"">Create Account</button> </li> </ul> </form> <script> $('input[placeholder]').placeholder();</script> </div> </div> </body>$(document).ready(function() { function validateEmail(email) { var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/; return emailReg.test(email); } function submitButton() { if (($(""#first_name"").hasClass(""good"")) && ($(""#email_address"").hasClass(""good"")) && ($(""#uname"").hasClass(""good"")) && ($(""#pword"").hasClass(""good"")) ){ $(""#register_button"").removeAttr(""disabled""); $(""#register_button"").removeClass(""register_button_disabled"").addClass(""register_button""); } else { $(""#register_button"").attr(""disabled"", ""disabled""); $(""#register_button"").removeClass(""register_button"").addClass(""register_button_disabled""); } } $(""body"").mousedown(submitButton); $(""body"").keyup(submitButton); $(""body"").hover(submitButton); $(""body"").mouseover(submitButton); $(""#fname"").keydown(function(){ $(""#first_name"").removeClass(""required""); $(""#first_name div"").html(""""); }); $(""#fname"").bind (""keyup mousedown"",function(){ if(this.value===""""){ $(""#first_name"").removeClass(""good"").addClass(""wait""); } else { $(""#first_name"").removeClass(""wait"").addClass(""good""); } }); $(""#fname"").blur(function(){ if(this.value===""""){ $(""#first_name"").removeClass(""good"").addClass(""required""); $(""#first_name div"").html(""Please enter your first name""); } else { $(""#first_name"").removeClass(""wait"").addClass(""good""); } }); $(""#email"").keydown(function(){ $(""#email_address"").removeClass(""required""); $(""#email_address div"").html(""""); }); $(""#email"").bind (""keyup mousedown"",function(){ var email = this.value; var emailLength = email.length; if (emailLength<=4){ $(""#email_address"").removeClass(""good"").addClass(""wait""); } else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } }); $(""#email"").blur(function(){ var email = this.value; var emailLength = email.length; if ((emailLength<=4) || (!validateEmail(this.value))) { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Please use a valid email address""); } else if (emailLength>=3){ $.ajax({ type: ""POST"", cache: false, url: ""Check.php"", data: ""email=""+email, dataType: ""json"", success: function(data) { if (data.status === ""success"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Sorry, that email is already used"");} else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } } }); } else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } }); $(""#username"").keydown(function(){ var un = this.value; var unLength = un.length; if(unLength<3){ $(""#uname"").removeClass(""good"").addClass(""wait""); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } }); $(""#username"").bind (""keyup mousedown"",function(){ $(""#uname"").removeClass(""required""); $(""#uname div"").html(""""); }); $(""#username"").blur(function(){ var un = this.value; var unLength = un.length; if(unLength<3){ $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Please use at least 3 characters""); } else if (unLength>=3){ $.ajax({ type: ""POST"", cache: false, url: ""check.php"", data: ""username=""+un, dataType: ""json"", success: function(data) { if (data.status === ""success"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Sorry, that username is taken""); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } } }); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } }); $(""#password"").keydown(function(){ var pw = this.value; var pwLength = pw.length; if(pwLength<=5){ $(""#pword"").removeClass(""good"").addClass(""wait""); } else { $(""#pword"").removeClass(""wait"").addClass(""good""); } }); $(""#password"").bind (""keyup mousedown"",function(){ $(""#pword"").removeClass(""required""); $(""#pword div"").html(""""); }); $(""#password"").blur(function(){ var pw = this.value; var pwLength = pw.length; if(pw===""""){ $(""#pword"").removeClass(""good"").addClass(""required""); $(""#pword div"").html(""Please enter a password""); } if(pwLength<=5){ $(""#pword"").removeClass(""good"").addClass(""required""); $(""#pword div"").html(""Please use at least 6 characters""); } else { $(""#pword"").removeClass(""wait"").addClass(""good""); } }); $(""#button"").click(function(e) { e.preventDefault(); $.ajax({ type: ""POST"", cache: false, url: ""form.php"", data: $('#register').serialize(), success: function(data) { if (data === ""fname"") { $(""#first_name"").removeClass(""good"").addClass(""required""); $(""#first_name div"").html(""Please enter your first name""); } else if (data === ""email"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Please use a valid email address""); } else if (data === ""email2"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Sorry, that email is already used""); } else if (data === ""username"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Please use at least 3 characters""); } else if (data === ""username2"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Sorry, that username is taken""); } else { window.location.href = ""http://site.com""; }, error: function(httpRequest, textStatus, errorThrown) { alert(""status="" + textStatus + "",error="" + errorThrown); } }); return false; });<?php $host=""""; // Host name $username=""""; // Mysql username $password=""""; // Mysql password $db_name=""""; // Database name $tbl_name=""""; // Table name // Connect to server and select database. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Get values from form $fname = mysql_real_escape_string($_POST['fname']); $lname = mysql_real_escape_string($_POST['lname']); $email = mysql_real_escape_string($_POST['email']); $username = mysql_real_escape_string($_POST['username']); $password = mysql_real_escape_string($_POST['password']); $gender = mysql_real_escape_string($_POST['gender']); //validate inputs $emailpull = ""SELECT email FROM $tbl_name WHERE email='$email'""; $emailresult=mysql_query($emailpull); $emailnum=mysql_num_rows($emailresult); $emailReg = ""/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/""; $unpull = ""SELECT username FROM $tbl_name WHERE username='$username'""; $unresult=mysql_query($unpull); $unnum=mysql_num_rows($unresult); if ($fname == """") { $response = ""fname""; } elseif ($email == """") { $response = 'email'; } elseif (!preg_match($emailReg, $email)) { $response = 'email'; } elseif ($emailnum > 0) { $response = 'email2'; } elseif (strlen($username)<3) { $response = 'username'; } elseif ($unnum > 0) { $response = 'username2'; } elseif (strlen($password)<6) { $response = 'password'; } else { // Insert data into mysql $sql=""INSERT INTO $tbl_name(fname,lname,email,username,password,gender)VALUES ('$fname','$lname','$email','$username','$password','$gender')""; } $result=mysql_query($sql); if($result) $response = ""success""; // send message back echo $response; ?> <?php // close connection mysql_close(); ?>"
"138","bad","<!DOCTYPE html><head> <link rel=""stylesheet"" type=""text/css"" href=""mobile.css"" media=""screen and (max-device-width: 480px)"" /> <!--[if IE]> <link rel=""stylesheet"" type=""text/css"" media=""screen and (min-width: 481px)"" href=""IEjoin.css"" /> <![endif]--> <script src=""jquery-1.8.2.min.js"" type=""text/javascript""></script> <script src=""register.js"" type=""text/javascript""></script> <script src=""jquery.placeholder.js"" type=""text/javascript""></script> </head> <body> <div id=""wrapper""> <div id=""logo""> </div> <div id=""headline""> <h1>Create your account</h1> </div> <div id=""container""> <form id=""register"" action=""form.php"" method=""post""> <ul> <li id=""first_name""> <input name=""fname"" type=""text"" value="""" id=""fname"" placeholder=""First Name"" maxlength=""30""> <div class=""error""></div> </li> <li id=""last_name""> <input name=""lname"" type=""text"" value="""" id=""lname"" placeholder=""Last Name"" maxlength=""30""> <div class=""error""></div> </li> <li id=""email_address""> <input name=""email"" type=""text"" value="""" id=""email"" placeholder=""Email Address"" maxlength=""60""> <div class=""error""></div> </li> <li id=""uname""> <input name=""username"" type=""text"" value="""" id=""username"" placeholder=""Username"" maxlength=""15""> <div class=""error""></div> </li> <li id=""pword""> <input name=""password"" type=""password"" value="""" id=""password"" placeholder=""Password""> <div class=""error""></div> </li> <li id=""gender_select""> <select id=""gender"" name=""gender""> <option value="""" selected=""selected"">Select your gender</option> <option value=""male"">Male</option> <option value=""female"">Female</option> <option value=""unspecified"">Unspecified</option> </select> </li> <li id=""submit_button""> <button id=""register_button"" class=""register_button_disabled"">Create Account</button> </li> </ul> </form> <script> $('input[placeholder]').placeholder();</script> </div> </div> </body>$(document).ready(function() { function validateEmail(email) { var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/; return emailReg.test(email); } function submitButton() { if (($(""#first_name"").hasClass(""good"")) && ($(""#email_address"").hasClass(""good"")) && ($(""#uname"").hasClass(""good"")) && ($(""#pword"").hasClass(""good"")) ){ $(""#register_button"").removeAttr(""disabled""); $(""#register_button"").removeClass(""register_button_disabled"").addClass(""register_button""); } else { $(""#register_button"").attr(""disabled"", ""disabled""); $(""#register_button"").removeClass(""register_button"").addClass(""register_button_disabled""); } } $(""body"").mousedown(submitButton); $(""body"").keyup(submitButton); $(""body"").hover(submitButton); $(""body"").mouseover(submitButton); $(""#fname"").keydown(function(){ $(""#first_name"").removeClass(""required""); $(""#first_name div"").html(""""); }); $(""#fname"").bind (""keyup mousedown"",function(){ if(this.value===""""){ $(""#first_name"").removeClass(""good"").addClass(""wait""); } else { $(""#first_name"").removeClass(""wait"").addClass(""good""); } }); $(""#fname"").blur(function(){ if(this.value===""""){ $(""#first_name"").removeClass(""good"").addClass(""required""); $(""#first_name div"").html(""Please enter your first name""); } else { $(""#first_name"").removeClass(""wait"").addClass(""good""); } }); $(""#email"").keydown(function(){ $(""#email_address"").removeClass(""required""); $(""#email_address div"").html(""""); }); $(""#email"").bind (""keyup mousedown"",function(){ var email = this.value; var emailLength = email.length; if (emailLength<=4){ $(""#email_address"").removeClass(""good"").addClass(""wait""); } else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } }); $(""#email"").blur(function(){ var email = this.value; var emailLength = email.length; if ((emailLength<=4) || (!validateEmail(this.value))) { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Please use a valid email address""); } else if (emailLength>=3){ $.ajax({ type: ""POST"", cache: false, url: ""Check.php"", data: ""email=""+email, dataType: ""json"", success: function(data) { if (data.status === ""success"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Sorry, that email is already used"");} else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } } }); } else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } }); $(""#username"").keydown(function(){ var un = this.value; var unLength = un.length; if(unLength<3){ $(""#uname"").removeClass(""good"").addClass(""wait""); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } }); $(""#username"").bind (""keyup mousedown"",function(){ $(""#uname"").removeClass(""required""); $(""#uname div"").html(""""); }); $(""#username"").blur(function(){ var un = this.value; var unLength = un.length; if(unLength<3){ $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Please use at least 3 characters""); } else if (unLength>=3){ $.ajax({ type: ""POST"", cache: false, url: ""check.php"", data: ""username=""+un, dataType: ""json"", success: function(data) { if (data.status === ""success"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Sorry, that username is taken""); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } } }); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } }); $(""#password"").keydown(function(){ var pw = this.value; var pwLength = pw.length; if(pwLength<=5){ $(""#pword"").removeClass(""good"").addClass(""wait""); } else { $(""#pword"").removeClass(""wait"").addClass(""good""); } }); $(""#password"").bind (""keyup mousedown"",function(){ $(""#pword"").removeClass(""required""); $(""#pword div"").html(""""); }); $(""#password"").blur(function(){ var pw = this.value; var pwLength = pw.length; if(pw===""""){ $(""#pword"").removeClass(""good"").addClass(""required""); $(""#pword div"").html(""Please enter a password""); } if(pwLength<=5){ $(""#pword"").removeClass(""good"").addClass(""required""); $(""#pword div"").html(""Please use at least 6 characters""); } else { $(""#pword"").removeClass(""wait"").addClass(""good""); } }); $(""#button"").click(function(e) { e.preventDefault(); $.ajax({ type: ""POST"", cache: false, url: ""form.php"", data: $('#register').serialize(), success: function(data) { if (data === ""fname"") { $(""#first_name"").removeClass(""good"").addClass(""required""); $(""#first_name div"").html(""Please enter your first name""); } else if (data === ""email"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Please use a valid email address""); } else if (data === ""email2"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Sorry, that email is already used""); } else if (data === ""username"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Please use at least 3 characters""); } else if (data === ""username2"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Sorry, that username is taken""); } else { window.location.href = ""http://site.com""; }, error: function(httpRequest, textStatus, errorThrown) { alert(""status="" + textStatus + "",error="" + errorThrown); } }); return false; });<?php $host=""""; // Host name $username=""""; // Mysql username $password=""""; // Mysql password $db_name=""""; // Database name $tbl_name=""""; // Table name // Connect to server and select database. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Get values from form $fname = mysql_real_escape_string($_POST['fname']); $lname = mysql_real_escape_string($_POST['lname']); $email = mysql_real_escape_string($_POST['email']); $username = mysql_real_escape_string($_POST['username']); $password = mysql_real_escape_string($_POST['password']); $gender = mysql_real_escape_string($_POST['gender']); //validate inputs $emailpull = ""SELECT email FROM $tbl_name WHERE email='$email'""; $emailresult=mysql_query($emailpull); $emailnum=mysql_num_rows($emailresult); $emailReg = ""/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/""; $unpull = ""SELECT username FROM $tbl_name WHERE username='$username'""; $unresult=mysql_query($unpull); $unnum=mysql_num_rows($unresult); if ($fname == """") { $response = ""fname""; } elseif ($email == """") { $response = 'email'; } elseif (!preg_match($emailReg, $email)) { $response = 'email'; } elseif ($emailnum > 0) { $response = 'email2'; } elseif (strlen($username)<3) { $response = 'username'; } elseif ($unnum > 0) { $response = 'username2'; } elseif (strlen($password)<6) { $response = 'password'; } else { // Insert data into mysql $sql=""INSERT INTO $tbl_name(fname,lname,email,username,password,gender)VALUES ('$fname','$lname','$email','$username','$password','$gender')""; } $result=mysql_query($sql); if($result) $response = ""success""; // send message back echo $response; ?> <?php // close connection mysql_close(); ?>"
"139","bad","<!DOCTYPE html><head> <link rel=""stylesheet"" type=""text/css"" href=""mobile.css"" media=""screen and (max-device-width: 480px)"" /> <!--[if IE]> <link rel=""stylesheet"" type=""text/css"" media=""screen and (min-width: 481px)"" href=""IEjoin.css"" /> <![endif]--> <script src=""jquery-1.8.2.min.js"" type=""text/javascript""></script> <script src=""register.js"" type=""text/javascript""></script> <script src=""jquery.placeholder.js"" type=""text/javascript""></script> </head> <body> <div id=""wrapper""> <div id=""logo""> </div> <div id=""headline""> <h1>Create your account</h1> </div> <div id=""container""> <form id=""register"" action=""form.php"" method=""post""> <ul> <li id=""first_name""> <input name=""fname"" type=""text"" value="""" id=""fname"" placeholder=""First Name"" maxlength=""30""> <div class=""error""></div> </li> <li id=""last_name""> <input name=""lname"" type=""text"" value="""" id=""lname"" placeholder=""Last Name"" maxlength=""30""> <div class=""error""></div> </li> <li id=""email_address""> <input name=""email"" type=""text"" value="""" id=""email"" placeholder=""Email Address"" maxlength=""60""> <div class=""error""></div> </li> <li id=""uname""> <input name=""username"" type=""text"" value="""" id=""username"" placeholder=""Username"" maxlength=""15""> <div class=""error""></div> </li> <li id=""pword""> <input name=""password"" type=""password"" value="""" id=""password"" placeholder=""Password""> <div class=""error""></div> </li> <li id=""gender_select""> <select id=""gender"" name=""gender""> <option value="""" selected=""selected"">Select your gender</option> <option value=""male"">Male</option> <option value=""female"">Female</option> <option value=""unspecified"">Unspecified</option> </select> </li> <li id=""submit_button""> <button id=""register_button"" class=""register_button_disabled"">Create Account</button> </li> </ul> </form> <script> $('input[placeholder]').placeholder();</script> </div> </div> </body>$(document).ready(function() { function validateEmail(email) { var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/; return emailReg.test(email); } function submitButton() { if (($(""#first_name"").hasClass(""good"")) && ($(""#email_address"").hasClass(""good"")) && ($(""#uname"").hasClass(""good"")) && ($(""#pword"").hasClass(""good"")) ){ $(""#register_button"").removeAttr(""disabled""); $(""#register_button"").removeClass(""register_button_disabled"").addClass(""register_button""); } else { $(""#register_button"").attr(""disabled"", ""disabled""); $(""#register_button"").removeClass(""register_button"").addClass(""register_button_disabled""); } } $(""body"").mousedown(submitButton); $(""body"").keyup(submitButton); $(""body"").hover(submitButton); $(""body"").mouseover(submitButton); $(""#fname"").keydown(function(){ $(""#first_name"").removeClass(""required""); $(""#first_name div"").html(""""); }); $(""#fname"").bind (""keyup mousedown"",function(){ if(this.value===""""){ $(""#first_name"").removeClass(""good"").addClass(""wait""); } else { $(""#first_name"").removeClass(""wait"").addClass(""good""); } }); $(""#fname"").blur(function(){ if(this.value===""""){ $(""#first_name"").removeClass(""good"").addClass(""required""); $(""#first_name div"").html(""Please enter your first name""); } else { $(""#first_name"").removeClass(""wait"").addClass(""good""); } }); $(""#email"").keydown(function(){ $(""#email_address"").removeClass(""required""); $(""#email_address div"").html(""""); }); $(""#email"").bind (""keyup mousedown"",function(){ var email = this.value; var emailLength = email.length; if (emailLength<=4){ $(""#email_address"").removeClass(""good"").addClass(""wait""); } else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } }); $(""#email"").blur(function(){ var email = this.value; var emailLength = email.length; if ((emailLength<=4) || (!validateEmail(this.value))) { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Please use a valid email address""); } else if (emailLength>=3){ $.ajax({ type: ""POST"", cache: false, url: ""Check.php"", data: ""email=""+email, dataType: ""json"", success: function(data) { if (data.status === ""success"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Sorry, that email is already used"");} else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } } }); } else { $(""#email_address"").removeClass(""wait"").addClass(""good""); } }); $(""#username"").keydown(function(){ var un = this.value; var unLength = un.length; if(unLength<3){ $(""#uname"").removeClass(""good"").addClass(""wait""); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } }); $(""#username"").bind (""keyup mousedown"",function(){ $(""#uname"").removeClass(""required""); $(""#uname div"").html(""""); }); $(""#username"").blur(function(){ var un = this.value; var unLength = un.length; if(unLength<3){ $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Please use at least 3 characters""); } else if (unLength>=3){ $.ajax({ type: ""POST"", cache: false, url: ""check.php"", data: ""username=""+un, dataType: ""json"", success: function(data) { if (data.status === ""success"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Sorry, that username is taken""); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } } }); } else { $(""#uname"").removeClass(""wait"").addClass(""good""); } }); $(""#password"").keydown(function(){ var pw = this.value; var pwLength = pw.length; if(pwLength<=5){ $(""#pword"").removeClass(""good"").addClass(""wait""); } else { $(""#pword"").removeClass(""wait"").addClass(""good""); } }); $(""#password"").bind (""keyup mousedown"",function(){ $(""#pword"").removeClass(""required""); $(""#pword div"").html(""""); }); $(""#password"").blur(function(){ var pw = this.value; var pwLength = pw.length; if(pw===""""){ $(""#pword"").removeClass(""good"").addClass(""required""); $(""#pword div"").html(""Please enter a password""); } if(pwLength<=5){ $(""#pword"").removeClass(""good"").addClass(""required""); $(""#pword div"").html(""Please use at least 6 characters""); } else { $(""#pword"").removeClass(""wait"").addClass(""good""); } }); $(""#button"").click(function(e) { e.preventDefault(); $.ajax({ type: ""POST"", cache: false, url: ""form.php"", data: $('#register').serialize(), success: function(data) { if (data === ""fname"") { $(""#first_name"").removeClass(""good"").addClass(""required""); $(""#first_name div"").html(""Please enter your first name""); } else if (data === ""email"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Please use a valid email address""); } else if (data === ""email2"") { $(""#email_address"").removeClass(""good"").addClass(""required""); $(""#email_address div"").html(""Sorry, that email is already used""); } else if (data === ""username"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Please use at least 3 characters""); } else if (data === ""username2"") { $(""#uname"").removeClass(""good"").addClass(""required""); $(""#uname div"").html(""Sorry, that username is taken""); } else { window.location.href = ""http://site.com""; }, error: function(httpRequest, textStatus, errorThrown) { alert(""status="" + textStatus + "",error="" + errorThrown); } }); return false; });<?php $host=""""; // Host name $username=""""; // Mysql username $password=""""; // Mysql password $db_name=""""; // Database name $tbl_name=""""; // Table name // Connect to server and select database. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Get values from form $fname = mysql_real_escape_string($_POST['fname']); $lname = mysql_real_escape_string($_POST['lname']); $email = mysql_real_escape_string($_POST['email']); $username = mysql_real_escape_string($_POST['username']); $password = mysql_real_escape_string($_POST['password']); $gender = mysql_real_escape_string($_POST['gender']); //validate inputs $emailpull = ""SELECT email FROM $tbl_name WHERE email='$email'""; $emailresult=mysql_query($emailpull); $emailnum=mysql_num_rows($emailresult); $emailReg = ""/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/""; $unpull = ""SELECT username FROM $tbl_name WHERE username='$username'""; $unresult=mysql_query($unpull); $unnum=mysql_num_rows($unresult); if ($fname == """") { $response = ""fname""; } elseif ($email == """") { $response = 'email'; } elseif (!preg_match($emailReg, $email)) { $response = 'email'; } elseif ($emailnum > 0) { $response = 'email2'; } elseif (strlen($username)<3) { $response = 'username'; } elseif ($unnum > 0) { $response = 'username2'; } elseif (strlen($password)<6) { $response = 'password'; } else { // Insert data into mysql $sql=""INSERT INTO $tbl_name(fname,lname,email,username,password,gender)VALUES ('$fname','$lname','$email','$username','$password','$gender')""; } $result=mysql_query($sql); if($result) $response = ""success""; // send message back echo $response; ?> <?php // close connection mysql_close(); ?>"
"140","bad","//My main.java code is : public void insertdata() { ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2); nameValuePairs.add(new BasicNameValuePair(""Lat"",""34"")); nameValuePairs.add(new BasicNameValuePair(""Lon"",""72"")); //http post try{ HttpClient httpclient = new DefaultHttpClient(); HttpPost httppost = new HttpPost(""http://localhost/androidconnection/insertdata.php""); httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); HttpResponse response = httpclient.execute(httppost); HttpEntity entity = response.getEntity(); InputStream is = entity.getContent(); Log.i(""postData"", response.getStatusLine().toString()); } catch(Exception e) { Log.e(""log_tag"", ""Error in http connection ""+e.toString()); } <?php mysql_connect(""localhost"",""root"",""""); mysql_select_db(""PeopleData""); //retrieve the data $lat = $_POST['lat']; $lon = $_POST['lon']; $sql = ""INSERT INTO coords (Lat, Lon) VALUES('$lat', '$lon')""; if (!mysql_query($sql, $sqlCon)) { die('Error: ' . mysql_error()); } else { //echo ""1 record added""; } ?>"
"141","bad","//My main.java code is : public void insertdata() { ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2); nameValuePairs.add(new BasicNameValuePair(""Lat"",""34"")); nameValuePairs.add(new BasicNameValuePair(""Lon"",""72"")); //http post try{ HttpClient httpclient = new DefaultHttpClient(); HttpPost httppost = new HttpPost(""http://localhost/androidconnection/insertdata.php""); httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); HttpResponse response = httpclient.execute(httppost); HttpEntity entity = response.getEntity(); InputStream is = entity.getContent(); Log.i(""postData"", response.getStatusLine().toString()); } catch(Exception e) { Log.e(""log_tag"", ""Error in http connection ""+e.toString()); } <?php mysql_connect(""localhost"",""root"",""""); mysql_select_db(""PeopleData""); //retrieve the data $lat = $_POST['lat']; $lon = $_POST['lon']; $sql = ""INSERT INTO coords (Lat, Lon) VALUES('$lat', '$lon')""; if (!mysql_query($sql, $sqlCon)) { die('Error: ' . mysql_error()); } else { //echo ""1 record added""; } ?>"
"142","bad","|ID| |mid| |value1| |value2|mid1 = 66 mid2 = 78 mid3 = 24 $con = mysql_connect(""localhost"",""User"",""Pass""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(baza, $con); $result = mysql_query(""SELECT * FROM table WHERE mid='???' ""); while($row = mysql_fetch_array($result)) { $mid=$row['mid']; $name=$row['value1']; $alias=$row['value2']; } mysql_close($con); ?> <?php $con2 = mysql_connect(""localhost"",""user2"",""pass2""); if (!$con2) { die('Could not connect: ' . mysql_error()); } mysql_select_db(baza2, $con2); $query = ""SELECT * FROM table WHERE mid='$mid' ""; $resulta = mysql_query($query) or die(mysql_error()); if (mysql_num_rows($resulta) ) { mysql_query(""UPDATE table SET mid='$mid', name='$name', alias='$alias'""); mysql_close($con2); echo ""1 record added1""; } else { $sql=""INSERT INTO table (mid, name, alias) VALUES ('$mid','$name','$alias')""; if (!mysql_query($sql,$con2)) { die('Error: ' . mysql_error()); } echo ""1 record added""; mysql_close($con2); }"
"143","bad","|ID| |mid| |value1| |value2|mid1 = 66 mid2 = 78 mid3 = 24 $con = mysql_connect(""localhost"",""User"",""Pass""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(baza, $con); $result = mysql_query(""SELECT * FROM table WHERE mid='???' ""); while($row = mysql_fetch_array($result)) { $mid=$row['mid']; $name=$row['value1']; $alias=$row['value2']; } mysql_close($con); ?> <?php $con2 = mysql_connect(""localhost"",""user2"",""pass2""); if (!$con2) { die('Could not connect: ' . mysql_error()); } mysql_select_db(baza2, $con2); $query = ""SELECT * FROM table WHERE mid='$mid' ""; $resulta = mysql_query($query) or die(mysql_error()); if (mysql_num_rows($resulta) ) { mysql_query(""UPDATE table SET mid='$mid', name='$name', alias='$alias'""); mysql_close($con2); echo ""1 record added1""; } else { $sql=""INSERT INTO table (mid, name, alias) VALUES ('$mid','$name','$alias')""; if (!mysql_query($sql,$con2)) { die('Error: ' . mysql_error()); } echo ""1 record added""; mysql_close($con2); }"
"144","bad","|ID| |mid| |value1| |value2|mid1 = 66 mid2 = 78 mid3 = 24 $con = mysql_connect(""localhost"",""User"",""Pass""); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db(baza, $con); $result = mysql_query(""SELECT * FROM table WHERE mid='???' ""); while($row = mysql_fetch_array($result)) { $mid=$row['mid']; $name=$row['value1']; $alias=$row['value2']; } mysql_close($con); ?> <?php $con2 = mysql_connect(""localhost"",""user2"",""pass2""); if (!$con2) { die('Could not connect: ' . mysql_error()); } mysql_select_db(baza2, $con2); $query = ""SELECT * FROM table WHERE mid='$mid' ""; $resulta = mysql_query($query) or die(mysql_error()); if (mysql_num_rows($resulta) ) { mysql_query(""UPDATE table SET mid='$mid', name='$name', alias='$alias'""); mysql_close($con2); echo ""1 record added1""; } else { $sql=""INSERT INTO table (mid, name, alias) VALUES ('$mid','$name','$alias')""; if (!mysql_query($sql,$con2)) { die('Error: ' . mysql_error()); } echo ""1 record added""; mysql_close($con2); }"
"145","bad","mysql_query(UPDATE ps_product SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); <?php $mysql_db = """"; $mysql_user = """"; $mysql_pwd = """"; $con = mysql_connect(""localhost"", $mysql_user, $mysql_pwd); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($mysql_db, $con); $countUpdated=0; mysql_query(UPDATE ps_product_shop prod_shop INNER JOIN ps_product prod USING(id_product) SET prod_shop.id_category_default = prod.id_category_default WHERE prod_shop.id_product BETWEEN 1 AND 62226); mysql_query(UPDATE ps_product_supplier SET id_currency = 3 WHERE id_currency = 0); mysql_query(UPDATE ps_product SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); mysql_query(UPDATE ps_product_shop SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); $kveri = ""SELECT id_product,id_supplier,supplier_reference, wholesale_price FROM ps_product""; $ispis = mysql_query($kveri) or die(mysql_error()); while ($row = mysql_fetch_array($ispis)){ $trenutnired = $row['id_product']; $trenutnired1 = 0; $trenutnired2 = $row['id_supplier']; $trenutnired4 = $row['supplier_reference']; $trenutnired5 = $row['wholesale_price']; $trenutnired6 = 3; $drugatab = mysql_query(""SELECT * FROM ps_product_supplier WHERE id_product = '$trenutnired'""); $dalipostoji = mysql_num_rows($drugatab); if ($dalipostoji == 0) { echo ""ID $trenutnired does not exist in table and:: $countUpdated<br />""; mysql_query(""INSERT INTO ps_product_supplier (id_product_supplier, id_product, id_product_attribute, id_supplier, product_supplier_reference, product_supplier_price_te, id_currency) VALUES ('', '$trenutnired', '$trenutnired1', '$trenutnired2', '$trenutnired4', '$trenutnired5', '$trenutnired6')""); $countUpdated++; }; } ?>"
"146","bad","mysql_query(UPDATE ps_product SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); <?php $mysql_db = """"; $mysql_user = """"; $mysql_pwd = """"; $con = mysql_connect(""localhost"", $mysql_user, $mysql_pwd); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($mysql_db, $con); $countUpdated=0; mysql_query(UPDATE ps_product_shop prod_shop INNER JOIN ps_product prod USING(id_product) SET prod_shop.id_category_default = prod.id_category_default WHERE prod_shop.id_product BETWEEN 1 AND 62226); mysql_query(UPDATE ps_product_supplier SET id_currency = 3 WHERE id_currency = 0); mysql_query(UPDATE ps_product SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); mysql_query(UPDATE ps_product_shop SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); $kveri = ""SELECT id_product,id_supplier,supplier_reference, wholesale_price FROM ps_product""; $ispis = mysql_query($kveri) or die(mysql_error()); while ($row = mysql_fetch_array($ispis)){ $trenutnired = $row['id_product']; $trenutnired1 = 0; $trenutnired2 = $row['id_supplier']; $trenutnired4 = $row['supplier_reference']; $trenutnired5 = $row['wholesale_price']; $trenutnired6 = 3; $drugatab = mysql_query(""SELECT * FROM ps_product_supplier WHERE id_product = '$trenutnired'""); $dalipostoji = mysql_num_rows($drugatab); if ($dalipostoji == 0) { echo ""ID $trenutnired does not exist in table and:: $countUpdated<br />""; mysql_query(""INSERT INTO ps_product_supplier (id_product_supplier, id_product, id_product_attribute, id_supplier, product_supplier_reference, product_supplier_price_te, id_currency) VALUES ('', '$trenutnired', '$trenutnired1', '$trenutnired2', '$trenutnired4', '$trenutnired5', '$trenutnired6')""); $countUpdated++; }; } ?>"
"147","bad","mysql_query(UPDATE ps_product SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); <?php $mysql_db = """"; $mysql_user = """"; $mysql_pwd = """"; $con = mysql_connect(""localhost"", $mysql_user, $mysql_pwd); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db($mysql_db, $con); $countUpdated=0; mysql_query(UPDATE ps_product_shop prod_shop INNER JOIN ps_product prod USING(id_product) SET prod_shop.id_category_default = prod.id_category_default WHERE prod_shop.id_product BETWEEN 1 AND 62226); mysql_query(UPDATE ps_product_supplier SET id_currency = 3 WHERE id_currency = 0); mysql_query(UPDATE ps_product SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); mysql_query(UPDATE ps_product_shop SET id_tax_rules_group = 1 WHERE id_tax_rules_group = 0); $kveri = ""SELECT id_product,id_supplier,supplier_reference, wholesale_price FROM ps_product""; $ispis = mysql_query($kveri) or die(mysql_error()); while ($row = mysql_fetch_array($ispis)){ $trenutnired = $row['id_product']; $trenutnired1 = 0; $trenutnired2 = $row['id_supplier']; $trenutnired4 = $row['supplier_reference']; $trenutnired5 = $row['wholesale_price']; $trenutnired6 = 3; $drugatab = mysql_query(""SELECT * FROM ps_product_supplier WHERE id_product = '$trenutnired'""); $dalipostoji = mysql_num_rows($drugatab); if ($dalipostoji == 0) { echo ""ID $trenutnired does not exist in table and:: $countUpdated<br />""; mysql_query(""INSERT INTO ps_product_supplier (id_product_supplier, id_product, id_product_attribute, id_supplier, product_supplier_reference, product_supplier_price_te, id_currency) VALUES ('', '$trenutnired', '$trenutnired1', '$trenutnired2', '$trenutnired4', '$trenutnired5', '$trenutnired6')""); $countUpdated++; }; } ?>"
"148","good","<?php if (isset($_POST['insert'])) { require_once 'login.php'; $OK = false; $conn = new mysqli ($host, $user, $password, $database) or die(""Connection Failed""); $stmt = $conn->stmt_init(); $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password) VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))'; if ($stmt->prepare($sql)) { // bind parameters and execute statement $stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); // execute and get number of affected rows $stmt->execute(); if ($stmt->affected_rows > 0) { $OK = true; } } if ($OK) { header('Location: confirm.php'); exit; } else { $error = $stmt->error; } } ?> <!DOCTYPE HTML> <html> <head> <meta charset=""utf-8""> <title>Add User</title> </head> <body> <h1>Add User</h1> <?php if (isset($error)) { echo ""<p>Error: $error</p>""; } ?> <form id=""form1"" method=""post"" action=""""> <p> <label for=""user_email"">User email:</label> <input name=""user_email"" type=""text"" class=""widebox"" id=""user_email""> </p> <p> <label for=""user_name"">User name:</label> <input name=""user_name"" type=""text"" class=""widebox"" id=""user_name""> </p> <p> User role: <select name = ""user_pref""> <option value = ""BLU"">Blue</option> <option value = ""YEL"">Yellow<option> <option value = ""GRE"">GREEN</option> </select> </p> <p> <input type=""submit"" name=""insert"" value=""Register New User"" id=""insert""> </p> </form> </body> </html>$stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']);"
"149","good","<?php if (isset($_POST['insert'])) { require_once 'login.php'; $OK = false; $conn = new mysqli ($host, $user, $password, $database) or die(""Connection Failed""); $stmt = $conn->stmt_init(); $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password) VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))'; if ($stmt->prepare($sql)) { // bind parameters and execute statement $stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); // execute and get number of affected rows $stmt->execute(); if ($stmt->affected_rows > 0) { $OK = true; } } if ($OK) { header('Location: confirm.php'); exit; } else { $error = $stmt->error; } } ?> <!DOCTYPE HTML> <html> <head> <meta charset=""utf-8""> <title>Add User</title> </head> <body> <h1>Add User</h1> <?php if (isset($error)) { echo ""<p>Error: $error</p>""; } ?> <form id=""form1"" method=""post"" action=""""> <p> <label for=""user_email"">User email:</label> <input name=""user_email"" type=""text"" class=""widebox"" id=""user_email""> </p> <p> <label for=""user_name"">User name:</label> <input name=""user_name"" type=""text"" class=""widebox"" id=""user_name""> </p> <p> User role: <select name = ""user_pref""> <option value = ""BLU"">Blue</option> <option value = ""YEL"">Yellow<option> <option value = ""GRE"">GREEN</option> </select> </p> <p> <input type=""submit"" name=""insert"" value=""Register New User"" id=""insert""> </p> </form> </body> </html>$stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']);"
"150","good","<?php if (isset($_POST['insert'])) { require_once 'login.php'; $OK = false; $conn = new mysqli ($host, $user, $password, $database) or die(""Connection Failed""); $stmt = $conn->stmt_init(); $sql = 'INSERT INTO users (user_email, user_name, user_pref, user_password) VALUES(?, ?, ?, des_encrypt(substring(md5(rand()),1,8)))'; if ($stmt->prepare($sql)) { // bind parameters and execute statement $stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']); // execute and get number of affected rows $stmt->execute(); if ($stmt->affected_rows > 0) { $OK = true; } } if ($OK) { header('Location: confirm.php'); exit; } else { $error = $stmt->error; } } ?> <!DOCTYPE HTML> <html> <head> <meta charset=""utf-8""> <title>Add User</title> </head> <body> <h1>Add User</h1> <?php if (isset($error)) { echo ""<p>Error: $error</p>""; } ?> <form id=""form1"" method=""post"" action=""""> <p> <label for=""user_email"">User email:</label> <input name=""user_email"" type=""text"" class=""widebox"" id=""user_email""> </p> <p> <label for=""user_name"">User name:</label> <input name=""user_name"" type=""text"" class=""widebox"" id=""user_name""> </p> <p> User role: <select name = ""user_pref""> <option value = ""BLU"">Blue</option> <option value = ""YEL"">Yellow<option> <option value = ""GRE"">GREEN</option> </select> </p> <p> <input type=""submit"" name=""insert"" value=""Register New User"" id=""insert""> </p> </form> </body> </html>$stmt->bind_param('ssss', $_POST['user_email'], $_POST['user_name'], $_POST['user_pref'], $_POST['user_password']);"
"151","bad","<script type=""text/javascript""> $(function() { $("".cat_button"").click(function() { var element = $(this); var test = $(""#cou"").val(); var test2 = $(""#category2"").val(); var data = [ {data:test}, {data:test2} ]; if(test=='' || test2=='.....') { alert(""fill data""); } else { $(""#flash"").show(); $(""#flash"").fadeIn(400).html('<img src=""http://tiggin.com/ajax-loader.gif"" align=""absmiddle"">&nbsp;<span class=""loading"">Loading...</span>'); $.ajax({ type: ""POST"", url: ""insert2.php"", data: {data: data}, cache: false, success: function(response){ console.log(response); } }); } return false; }); }); </script>print_r($_POST['data']); // dumps an array $course = $_POST['data'][0]['data']; $category = $_POST['data'][1]['data']; $insert_new_cou = mysql_query(""insert into course (name,cat_id) values ('$course','$category')"") or die($insert_new_cou.""<br/><br/>"".mysql_error());"
"152","bad","$members$members_name$members<?php session_start(); $members = $_POST['mem']; $n=count($members); foreach($members as $key=>$value){ $res = mysql_query(""SELECT id,name,email FROM users WHERE id='"".$value.""'""); if ($res === false) { echo mysql_error(); die; } $row = mysql_fetch_assoc($res); if($row['id']) { $members_name[]=$row['name']; $members_email[]=$row['email']; } } $sess_uid = $_SESSION['id']; $sess_email = $_SESSION['email']; $sess_name = $_SESSION['name']; $id=$_SESSION['eid']; $name=$_SESSION['ename']; $members=$_SESSION['emembers']; if ($n==5){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name,mem_6_id,mem_6_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""','"".$members[3]."",'"".$members_name[3].""','"".$members[4]."",'"".$members_name[4].""')""); } else if ($n==4){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""','"".$members[3]."",'"".$members_name[3].""')""); } else if ($n==3){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""')""); } else if ($n==2){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""')""); } else if ($n==1){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""')""); } else if ($n==0){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""')""); } $url=""events.php?slug="".$slug; header('Location: ' . $url); exit; ?>"
"153","bad","$members$members_name$members<?php session_start(); $members = $_POST['mem']; $n=count($members); foreach($members as $key=>$value){ $res = mysql_query(""SELECT id,name,email FROM users WHERE id='"".$value.""'""); if ($res === false) { echo mysql_error(); die; } $row = mysql_fetch_assoc($res); if($row['id']) { $members_name[]=$row['name']; $members_email[]=$row['email']; } } $sess_uid = $_SESSION['id']; $sess_email = $_SESSION['email']; $sess_name = $_SESSION['name']; $id=$_SESSION['eid']; $name=$_SESSION['ename']; $members=$_SESSION['emembers']; if ($n==5){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name,mem_6_id,mem_6_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""','"".$members[3]."",'"".$members_name[3].""','"".$members[4]."",'"".$members_name[4].""')""); } else if ($n==4){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""','"".$members[3]."",'"".$members_name[3].""')""); } else if ($n==3){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""')""); } else if ($n==2){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""')""); } else if ($n==1){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""')""); } else if ($n==0){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""')""); } $url=""events.php?slug="".$slug; header('Location: ' . $url); exit; ?>"
"154","bad","$members$members_name$members<?php session_start(); $members = $_POST['mem']; $n=count($members); foreach($members as $key=>$value){ $res = mysql_query(""SELECT id,name,email FROM users WHERE id='"".$value.""'""); if ($res === false) { echo mysql_error(); die; } $row = mysql_fetch_assoc($res); if($row['id']) { $members_name[]=$row['name']; $members_email[]=$row['email']; } } $sess_uid = $_SESSION['id']; $sess_email = $_SESSION['email']; $sess_name = $_SESSION['name']; $id=$_SESSION['eid']; $name=$_SESSION['ename']; $members=$_SESSION['emembers']; if ($n==5){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name,mem_6_id,mem_6_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""','"".$members[3]."",'"".$members_name[3].""','"".$members[4]."",'"".$members_name[4].""')""); } else if ($n==4){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""','"".$members[3]."",'"".$members_name[3].""')""); } else if ($n==3){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""','"".$members[2]."",'"".$members_name[2].""')""); } else if ($n==2){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""','"".$members[1]."",'"".$members_name[1].""')""); } else if ($n==1){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""','"".$members[0]."",'"".$members_name[0].""')""); } else if ($n==0){ $res=mysql_query(""INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name) VALUES('"".$id.""','"".$name.""','"".$members.""','"".$sess_uid.""','"".$sess_name.""')""); } $url=""events.php?slug="".$slug; header('Location: ' . $url); exit; ?>"
"155","bad","$uemail = 'driggg2@gmail.com'; $authkey = '2f4071bffda44aa30064364055687d13'; require_once ('./domainsiteconnect.php'); // Connect to the database. if ( $uemail && $authkey) { echo ""<br>--uemail: [$uemail] -- && -- [$authkey] --- ""; $query1 = ""SELECT * FROM member WHERE email='$uemail' AND actkey='$authkey' AND status='pending' ""; $result1 = mysql_query ($query1); $num1 = mysql_num_rows ($result1); if ( $num1 == 1 ) // Exactly 1 rec found - Update member to verified. { echo '<br>+++ query1: successful +++>br>'; $status = 'verified'; $query2 = "" UPDATE member SET status='$status' WHERE email='$uemail' ""; //AND actkey='$authkey' ""; //- $query2 = "" UPDATE member SET status='$status' WHERE email='$uemail' AND actkey='$authkey' ""; $result2 = mysql_query($query2); $num2 = mysql_affected_rows($result2); if ( $num2 ) // updated? - inform user { echo ""<br>--$uemail updated to verified --""; } else echo ""<br>--$uemail verfication [update] failed --""; $val1=mysql_errno(); $val2=mysql_error(); //-- echo '<br>['.$query2.']--<br>--['.$result2.']<br>val-1:'.$val1.'<br> val-2'.$val2; } } //-- eof. if auth/email flags ok --- --uemail: [driggg2@gmail.com] -- && -- [2f4071bffda44aa30064364055687d13] --- +++ query1: successful +++>br> Warning: mysql_affected_rows() expects parameter 1 to be resource, boolean given in /home/arif/public_html/amy/public/domainsite/verifyfirst.php on line 125 --driggg2@gmail.com verfication [update] failed -- [ UPDATE member SET status='verified' WHERE email='driggg2@gmail.com'; ]-- --[1] val-1:0 val-2"
"156","bad","$uemail = 'driggg2@gmail.com'; $authkey = '2f4071bffda44aa30064364055687d13'; require_once ('./domainsiteconnect.php'); // Connect to the database. if ( $uemail && $authkey) { echo ""<br>--uemail: [$uemail] -- && -- [$authkey] --- ""; $query1 = ""SELECT * FROM member WHERE email='$uemail' AND actkey='$authkey' AND status='pending' ""; $result1 = mysql_query ($query1); $num1 = mysql_num_rows ($result1); if ( $num1 == 1 ) // Exactly 1 rec found - Update member to verified. { echo '<br>+++ query1: successful +++>br>'; $status = 'verified'; $query2 = "" UPDATE member SET status='$status' WHERE email='$uemail' ""; //AND actkey='$authkey' ""; //- $query2 = "" UPDATE member SET status='$status' WHERE email='$uemail' AND actkey='$authkey' ""; $result2 = mysql_query($query2); $num2 = mysql_affected_rows($result2); if ( $num2 ) // updated? - inform user { echo ""<br>--$uemail updated to verified --""; } else echo ""<br>--$uemail verfication [update] failed --""; $val1=mysql_errno(); $val2=mysql_error(); //-- echo '<br>['.$query2.']--<br>--['.$result2.']<br>val-1:'.$val1.'<br> val-2'.$val2; } } //-- eof. if auth/email flags ok --- --uemail: [driggg2@gmail.com] -- && -- [2f4071bffda44aa30064364055687d13] --- +++ query1: successful +++>br> Warning: mysql_affected_rows() expects parameter 1 to be resource, boolean given in /home/arif/public_html/amy/public/domainsite/verifyfirst.php on line 125 --driggg2@gmail.com verfication [update] failed -- [ UPDATE member SET status='verified' WHERE email='driggg2@gmail.com'; ]-- --[1] val-1:0 val-2"
"157","bad","$uemail = 'driggg2@gmail.com'; $authkey = '2f4071bffda44aa30064364055687d13'; require_once ('./domainsiteconnect.php'); // Connect to the database. if ( $uemail && $authkey) { echo ""<br>--uemail: [$uemail] -- && -- [$authkey] --- ""; $query1 = ""SELECT * FROM member WHERE email='$uemail' AND actkey='$authkey' AND status='pending' ""; $result1 = mysql_query ($query1); $num1 = mysql_num_rows ($result1); if ( $num1 == 1 ) // Exactly 1 rec found - Update member to verified. { echo '<br>+++ query1: successful +++>br>'; $status = 'verified'; $query2 = "" UPDATE member SET status='$status' WHERE email='$uemail' ""; //AND actkey='$authkey' ""; //- $query2 = "" UPDATE member SET status='$status' WHERE email='$uemail' AND actkey='$authkey' ""; $result2 = mysql_query($query2); $num2 = mysql_affected_rows($result2); if ( $num2 ) // updated? - inform user { echo ""<br>--$uemail updated to verified --""; } else echo ""<br>--$uemail verfication [update] failed --""; $val1=mysql_errno(); $val2=mysql_error(); //-- echo '<br>['.$query2.']--<br>--['.$result2.']<br>val-1:'.$val1.'<br> val-2'.$val2; } } //-- eof. if auth/email flags ok --- --uemail: [driggg2@gmail.com] -- && -- [2f4071bffda44aa30064364055687d13] --- +++ query1: successful +++>br> Warning: mysql_affected_rows() expects parameter 1 to be resource, boolean given in /home/arif/public_html/amy/public/domainsite/verifyfirst.php on line 125 --driggg2@gmail.com verfication [update] failed -- [ UPDATE member SET status='verified' WHERE email='driggg2@gmail.com'; ]-- --[1] val-1:0 val-2"
"158","bad","$departmentSql = ""SELECT * FROM b_departments WHERE loc_id='$locid' AND b_id = '$bid'""; $departmentResults = mysql_query($departmentSql,$con); $a = 0; while ($departmentRow = mysql_fetch_array($departmentResults)) { $department = $departmentRow['b_dep_name']; $departmentID = $departmentRow['dep_id']; $b_departmentID = $departmentRow['b_dep_id']; $a++; echo "" <div id=depDiv> <div id=depDivHeader> "".$department."" </div> ""; $areaSql = ""SELECT * from areas WHERE dep_id = $departmentID ORDER BY area_name ASC""; $areaSqlResult = mysql_query($areaSql); ?> <br /> <input type=""hidden"" name=""bdep<?php echo $a;?>"" value=""<?php echo $b_departmentID; ?>"" /> Add Area: <select name=""dep_area<?php echo $a;?>"" type=""menu""> <option value=""""></option> <?php while($areaRows=mysql_fetch_assoc($areaSqlResult)){?> <option value=""<?php echo """".$areaRows['area_id']."","".$areaRows['area_name']."""" ?>""><? php echo $areaRows[ 'area_name'] ?></option> <?php } ?> </select> &nbsp;&nbsp; <input type=""submit"" name=""areaSub<?php echo $a;?>"" value=""Add"" /> <?php echo ""</div>""; } ?>$departmentSql = ""SELECT * FROM b_departments WHERE loc_id='$locid' AND b_id = '$bid'""; $departmentResults = mysql_query($departmentSql,$con); $a = 0; while ($departmentRow = mysql_fetch_array($departmentResults)) { $department = $departmentRow['b_dep_name']; $departmentID = $departmentRow['dep_id']; $b_departmentID = $departmentRow['b_dep_id']; $a++; echo "" <div id=depDiv> <div id=depDivHeader> "".$department."" </div> <div id=$a> ""; $areaSql = ""SELECT * from areas WHERE dep_id = $departmentID ORDER BY area_name ASC""; $areaSqlResult = mysql_query($areaSql); ?> <br /> <input type=""hidden"" name=""bdep<?php echo $a ?>"" value=""<?php echo $b_departmentID; ?>"" /> Add Area: <select name=""dep_area<?php echo $a ?>"" type=""menu""> <option value=""""></option> <?php while($areaRows=mysql_fetch_assoc($areaSqlResult)){?> <option value=""<?php echo """".$areaRows['area_id']."","".$areaRows['area_name']."""" ?>""><? php echo $areaRows[ 'area_name'] ?></option> <?php } ?> </select> &nbsp;&nbsp; <button type=""submit"" name=""areaSub"" value=""<?php echo $a ?>"" />Add</button> <?php echo ""</div></div>""; } ?><script> $(document).ready(function() { $('#<?php echo $a ?>').submit(function() { .post(""include/action.php"") }); }); </script>if(isset($_POST['areaSub'])) { $areaval = intval($_POST['areaSub']); $area = mysql_real_escape_string($_POST[""dep_area"".$areaval.""""]); list($area_id, $area_name) = explode(',', $area, 2); $bdep = mysql_real_escape_string($_POST[""bdep"".$areaval.""""]); echo $areaval; echo $area_name; echo $bdep; }"
"159","bad","$departmentSql = ""SELECT * FROM b_departments WHERE loc_id='$locid' AND b_id = '$bid'""; $departmentResults = mysql_query($departmentSql,$con); $a = 0; while ($departmentRow = mysql_fetch_array($departmentResults)) { $department = $departmentRow['b_dep_name']; $departmentID = $departmentRow['dep_id']; $b_departmentID = $departmentRow['b_dep_id']; $a++; echo "" <div id=depDiv> <div id=depDivHeader> "".$department."" </div> ""; $areaSql = ""SELECT * from areas WHERE dep_id = $departmentID ORDER BY area_name ASC""; $areaSqlResult = mysql_query($areaSql); ?> <br /> <input type=""hidden"" name=""bdep<?php echo $a;?>"" value=""<?php echo $b_departmentID; ?>"" /> Add Area: <select name=""dep_area<?php echo $a;?>"" type=""menu""> <option value=""""></option> <?php while($areaRows=mysql_fetch_assoc($areaSqlResult)){?> <option value=""<?php echo """".$areaRows['area_id']."","".$areaRows['area_name']."""" ?>""><? php echo $areaRows[ 'area_name'] ?></option> <?php } ?> </select> &nbsp;&nbsp; <input type=""submit"" name=""areaSub<?php echo $a;?>"" value=""Add"" /> <?php echo ""</div>""; } ?>$departmentSql = ""SELECT * FROM b_departments WHERE loc_id='$locid' AND b_id = '$bid'""; $departmentResults = mysql_query($departmentSql,$con); $a = 0; while ($departmentRow = mysql_fetch_array($departmentResults)) { $department = $departmentRow['b_dep_name']; $departmentID = $departmentRow['dep_id']; $b_departmentID = $departmentRow['b_dep_id']; $a++; echo "" <div id=depDiv> <div id=depDivHeader> "".$department."" </div> <div id=$a> ""; $areaSql = ""SELECT * from areas WHERE dep_id = $departmentID ORDER BY area_name ASC""; $areaSqlResult = mysql_query($areaSql); ?> <br /> <input type=""hidden"" name=""bdep<?php echo $a ?>"" value=""<?php echo $b_departmentID; ?>"" /> Add Area: <select name=""dep_area<?php echo $a ?>"" type=""menu""> <option value=""""></option> <?php while($areaRows=mysql_fetch_assoc($areaSqlResult)){?> <option value=""<?php echo """".$areaRows['area_id']."","".$areaRows['area_name']."""" ?>""><? php echo $areaRows[ 'area_name'] ?></option> <?php } ?> </select> &nbsp;&nbsp; <button type=""submit"" name=""areaSub"" value=""<?php echo $a ?>"" />Add</button> <?php echo ""</div></div>""; } ?><script> $(document).ready(function() { $('#<?php echo $a ?>').submit(function() { .post(""include/action.php"") }); }); </script>if(isset($_POST['areaSub'])) { $areaval = intval($_POST['areaSub']); $area = mysql_real_escape_string($_POST[""dep_area"".$areaval.""""]); list($area_id, $area_name) = explode(',', $area, 2); $bdep = mysql_real_escape_string($_POST[""bdep"".$areaval.""""]); echo $areaval; echo $area_name; echo $bdep; }"
"160","good","mysqliheightVARCHAR(10)SELECT5' 6""5\' 6\""CREATE TABLE IF NOT EXISTS `user_details` ( `uname` varchar(20) NOT NULL, `height` varchar(10) NOT NULL, `body_type` varchar(20) NOT NULL, `hair_color` varchar(20) NOT NULL, `eye_color` varchar(20) NOT NULL, `description` text NOT NULL, PRIMARY KEY (`uname`), UNIQUE KEY `uname` (`uname`) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;$statement = $mysqli->prepare(""SELECT * from user_details WHERE uname = ?""); $statement->bind_param(""s"", $uname); $statement->execute(); if ($statement->bind_result($uname, $height, $body, $hair, $eye, $desc) && $statement->fetch()) { // work with data. }$statement = $mysqli->prepare(""INSERT INTO user_details VALUES(?, ?, ?, ?, ?, ?)""); $statement->bind_param(""ssssss"", $_POST['uname'], $_POST['height'], $_POST['body'], $_POST['hair'], $_POST['eye'], $_POST['description']); if ($statement->execute()) { echo ""<div>Username successfully added</div>""; }<form method=""POST"" enctype=""multipart/form-data""> <table> <tr><td>Name (Must be unique) : </td><td><input type=""text"" name=""uname""></td></tr> <tr><td>Profile Image : </td><td><input type=""file"" name=""pic""></td></tr> <tr><td>Height : </td><td><input type=""text"" name=""height""></td></tr> <tr><td>Body Type: </td><td><input type=""text"" name=""body""></td></tr> <tr><td>Hair Color: </td><td><input type=""text"" name=""hair""></td></tr> <tr><td>Eye Color: </td><td><input type=""text"" name=""eye""></td></tr> <tr><td>Description: </td><td><textarea name=""description"" rows=""5""></textarea></td></tr> <tr><td colspan=""2""><input type=""submit"" value=""Save New User""></td></tr> </table> </form>"
"161","good","mysqliheightVARCHAR(10)SELECT5' 6""5\' 6\""CREATE TABLE IF NOT EXISTS `user_details` ( `uname` varchar(20) NOT NULL, `height` varchar(10) NOT NULL, `body_type` varchar(20) NOT NULL, `hair_color` varchar(20) NOT NULL, `eye_color` varchar(20) NOT NULL, `description` text NOT NULL, PRIMARY KEY (`uname`), UNIQUE KEY `uname` (`uname`) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;$statement = $mysqli->prepare(""SELECT * from user_details WHERE uname = ?""); $statement->bind_param(""s"", $uname); $statement->execute(); if ($statement->bind_result($uname, $height, $body, $hair, $eye, $desc) && $statement->fetch()) { // work with data. }$statement = $mysqli->prepare(""INSERT INTO user_details VALUES(?, ?, ?, ?, ?, ?)""); $statement->bind_param(""ssssss"", $_POST['uname'], $_POST['height'], $_POST['body'], $_POST['hair'], $_POST['eye'], $_POST['description']); if ($statement->execute()) { echo ""<div>Username successfully added</div>""; }<form method=""POST"" enctype=""multipart/form-data""> <table> <tr><td>Name (Must be unique) : </td><td><input type=""text"" name=""uname""></td></tr> <tr><td>Profile Image : </td><td><input type=""file"" name=""pic""></td></tr> <tr><td>Height : </td><td><input type=""text"" name=""height""></td></tr> <tr><td>Body Type: </td><td><input type=""text"" name=""body""></td></tr> <tr><td>Hair Color: </td><td><input type=""text"" name=""hair""></td></tr> <tr><td>Eye Color: </td><td><input type=""text"" name=""eye""></td></tr> <tr><td>Description: </td><td><textarea name=""description"" rows=""5""></textarea></td></tr> <tr><td colspan=""2""><input type=""submit"" value=""Save New User""></td></tr> </table> </form>"
"162","good","mysqliheightVARCHAR(10)SELECT5' 6""5\' 6\""CREATE TABLE IF NOT EXISTS `user_details` ( `uname` varchar(20) NOT NULL, `height` varchar(10) NOT NULL, `body_type` varchar(20) NOT NULL, `hair_color` varchar(20) NOT NULL, `eye_color` varchar(20) NOT NULL, `description` text NOT NULL, PRIMARY KEY (`uname`), UNIQUE KEY `uname` (`uname`) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;$statement = $mysqli->prepare(""SELECT * from user_details WHERE uname = ?""); $statement->bind_param(""s"", $uname); $statement->execute(); if ($statement->bind_result($uname, $height, $body, $hair, $eye, $desc) && $statement->fetch()) { // work with data. }$statement = $mysqli->prepare(""INSERT INTO user_details VALUES(?, ?, ?, ?, ?, ?)""); $statement->bind_param(""ssssss"", $_POST['uname'], $_POST['height'], $_POST['body'], $_POST['hair'], $_POST['eye'], $_POST['description']); if ($statement->execute()) { echo ""<div>Username successfully added</div>""; }<form method=""POST"" enctype=""multipart/form-data""> <table> <tr><td>Name (Must be unique) : </td><td><input type=""text"" name=""uname""></td></tr> <tr><td>Profile Image : </td><td><input type=""file"" name=""pic""></td></tr> <tr><td>Height : </td><td><input type=""text"" name=""height""></td></tr> <tr><td>Body Type: </td><td><input type=""text"" name=""body""></td></tr> <tr><td>Hair Color: </td><td><input type=""text"" name=""hair""></td></tr> <tr><td>Eye Color: </td><td><input type=""text"" name=""eye""></td></tr> <tr><td>Description: </td><td><textarea name=""description"" rows=""5""></textarea></td></tr> <tr><td colspan=""2""><input type=""submit"" value=""Save New User""></td></tr> </table> </form>"
"163","bad","$('#contForm').submit(function() { //contForm is the name of my form var formData = $(this).serialize(); $.post('contact.php',formData,dispAdd); //dispAdd is the callback function dispAdd(result) { if (!result) { $('#main').html('<div>Your have been added to the mailing list</div>'); } else { if ($('#fail').length==0) { $('#main').append('<div id=""fail"">This email address is already subscribed to our mailing list</div>'); } } } return false; });function dispAdd() { $email= $_POST['email']; $sql= ""SELECT * FROM mailList WHERE email = '$email'""; $result= mysql_query($sql) or die(mysql_error()); $rows = array(); if(mysql_num_rows($result) > 0) { while ( $row = mysql_fetch_assoc($result)) { $rows[] = $row; } echo json_encode( $rows ); }"
"164","bad","$('#contForm').submit(function() { //contForm is the name of my form var formData = $(this).serialize(); $.post('contact.php',formData,dispAdd); //dispAdd is the callback function dispAdd(result) { if (!result) { $('#main').html('<div>Your have been added to the mailing list</div>'); } else { if ($('#fail').length==0) { $('#main').append('<div id=""fail"">This email address is already subscribed to our mailing list</div>'); } } } return false; });function dispAdd() { $email= $_POST['email']; $sql= ""SELECT * FROM mailList WHERE email = '$email'""; $result= mysql_query($sql) or die(mysql_error()); $rows = array(); if(mysql_num_rows($result) > 0) { while ( $row = mysql_fetch_assoc($result)) { $rows[] = $row; } echo json_encode( $rows ); }"
"165","bad","if(isset($_POST['submit'])) { $bool = true; $gender=$_POST['gender']; } if(($bool == true) { $bool1=true; $connection = mysql_connect(""localhost"",""root"",""Sakthi""); if (!$connection) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""nursingcarein"",$connection); if (isset($_GET[""page""])) { $page = $_GET[""page""]; } else { $page=1; }; $start_from = ($page-1) * 3; $gender1=$gender; $profession1=$profession; $state1=$state; /**** Here gender value doesnt update when click the next page i think we have a error in this query ****/ $sql = ""SELECT id,description,name FROM nursereg WHERE gender='$gender1' LIMIT $start_from, 3""; $rs_result = mysql_query ($sql,$connection); echo ""<table> <tr><td>Image</td><td>Description</td></tr>""; while($row=mysql_fetch_array($rs_result)) { echo"" <tr>""; echo""<td>""; echo ""<img src='image1.php?id="".$row['id'].""'>""; echo""</td>""; echo""<td>""; echo $row['name']; echo""</td>""; echo""<td>""; echo $row['description']; echo""</td>""; echo""</tr>""; }; echo""</table>""; $sql = ""SELECT COUNT(Name) FROM nursereg""; $rs_result = mysql_query($sql,$connection); $row = mysql_fetch_row($rs_result); $total_records = $row[0]; $total_pages = ceil($total_records / 5); for ($i=1; $i<=$total_pages; $i++) { $pageno = $i; echo ""<a href='index2.php?page="".$i.""'>"".$i.""</a> ""; }; }; ?>"
"166","bad","if(isset($_POST['submit'])) { $bool = true; $gender=$_POST['gender']; } if(($bool == true) { $bool1=true; $connection = mysql_connect(""localhost"",""root"",""Sakthi""); if (!$connection) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""nursingcarein"",$connection); if (isset($_GET[""page""])) { $page = $_GET[""page""]; } else { $page=1; }; $start_from = ($page-1) * 3; $gender1=$gender; $profession1=$profession; $state1=$state; /**** Here gender value doesnt update when click the next page i think we have a error in this query ****/ $sql = ""SELECT id,description,name FROM nursereg WHERE gender='$gender1' LIMIT $start_from, 3""; $rs_result = mysql_query ($sql,$connection); echo ""<table> <tr><td>Image</td><td>Description</td></tr>""; while($row=mysql_fetch_array($rs_result)) { echo"" <tr>""; echo""<td>""; echo ""<img src='image1.php?id="".$row['id'].""'>""; echo""</td>""; echo""<td>""; echo $row['name']; echo""</td>""; echo""<td>""; echo $row['description']; echo""</td>""; echo""</tr>""; }; echo""</table>""; $sql = ""SELECT COUNT(Name) FROM nursereg""; $rs_result = mysql_query($sql,$connection); $row = mysql_fetch_row($rs_result); $total_records = $row[0]; $total_pages = ceil($total_records / 5); for ($i=1; $i<=$total_pages; $i++) { $pageno = $i; echo ""<a href='index2.php?page="".$i.""'>"".$i.""</a> ""; }; }; ?>"
"167","bad","if(isset($_POST['submit'])) { $bool = true; $gender=$_POST['gender']; } if(($bool == true) { $bool1=true; $connection = mysql_connect(""localhost"",""root"",""Sakthi""); if (!$connection) { die('Could not connect: ' . mysql_error()); } mysql_select_db(""nursingcarein"",$connection); if (isset($_GET[""page""])) { $page = $_GET[""page""]; } else { $page=1; }; $start_from = ($page-1) * 3; $gender1=$gender; $profession1=$profession; $state1=$state; /**** Here gender value doesnt update when click the next page i think we have a error in this query ****/ $sql = ""SELECT id,description,name FROM nursereg WHERE gender='$gender1' LIMIT $start_from, 3""; $rs_result = mysql_query ($sql,$connection); echo ""<table> <tr><td>Image</td><td>Description</td></tr>""; while($row=mysql_fetch_array($rs_result)) { echo"" <tr>""; echo""<td>""; echo ""<img src='image1.php?id="".$row['id'].""'>""; echo""</td>""; echo""<td>""; echo $row['name']; echo""</td>""; echo""<td>""; echo $row['description']; echo""</td>""; echo""</tr>""; }; echo""</table>""; $sql = ""SELECT COUNT(Name) FROM nursereg""; $rs_result = mysql_query($sql,$connection); $row = mysql_fetch_row($rs_result); $total_records = $row[0]; $total_pages = ceil($total_records / 5); for ($i=1; $i<=$total_pages; $i++) { $pageno = $i; echo ""<a href='index2.php?page="".$i.""'>"".$i.""</a> ""; }; }; ?>"
"168","bad","<?php session_start(); ?> <?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php if(isset($_POST)) { //form validation vars $formok = true; $errors = array(); //sumbission data $ipaddress = $_SERVER['REMOTE_ADDR']; $date = date('Y-m-d'); $time = date('H:i:s'); $timestamp = $date . "" "" . $time; //form data $firstname = mysql_prep($_POST['firstname']); $lastname = mysql_prep($_POST['lastname']); $dinner = mysql_prep($_POST['dinner']); $reqsong = mysql_prep($_POST['reqsong']); $email = mysql_prep($_POST['email']); $rsvp = mysql_prep($_POST['rsvp']); $message = mysql_prep($_POST['message']); //what we need to return back to our form $returndata = array( 'posted_form_data' => array( 'firstname' => $firstname, 'lastname' => $lastname, 'dinner' => $dinner, 'reqsong' => $reqsong, 'email' => $email, 'rsvp' => $rsvp, 'message' => $message ), 'form_ok' => $formok, 'errors' => $errors );<?php session_start(); ?> <div id=""contact-form"" class=""clearfix""> <?php //init variables $cf = array(); $sr = false; if(isset($_SESSION['cf_returndata'])){ $cf = $_SESSION['cf_returndata']; $sr = true; } ?> <ul id=""errors"" class=""<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>""> <li id=""info"">There were some problems with your form submission:</li> <?php if(isset($cf['errors']) && count($cf['errors']) > 0) : foreach($cf['errors'] as $error) : ?> <li><?php echo $error ?></li> <?php endforeach; endif; ?> </ul> <?php if($cf['posted_form_data']['rsvp'] == ""Will Attend""): ?> <p id=""success"" class=""<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>"">Thank you for your RSVP! <br> You will receive an email with additional information soon. <br><br> If your invitation was addressed to more than one person, please enter their information and submit again. <br><br> We look forward to seeing you soon!</p> <?php endif; ?> <?php if($cf['posted_form_data']['rsvp'] == ""Will Not Attend""): ?> <p id=""success"" class=""<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>"">Too bad you can't make it.</p> <?php endif; ?> <form method=""post"" action=""submit.php""> <input type=""text"" id=""firstname"" name=""firstname"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['firstname'] : '' ?>"" placeholder=""First Name"" required autofocus /> <input type=""text"" id=""lastname"" name=""lastname"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['lastname'] : '' ?>"" placeholder=""Last Name"" required autofocus /> <input type=""email"" id=""email"" name=""email"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['email'] : '' ?>"" placeholder=""Email Address"" required /> <select id=""rsvp"" name=""rsvp""> <option value=""Will Attend"">Will Attend</option> <option value=""Will Not Attend"">Will Not Attend</option> </select> <select id=""dinner"" name=""dinner""> <option value=""select"">Dinner Selection</option> <option value=""Chicken"" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['dinner'] == 'Chicken') ? ""selected='selected'"" : '' ?>>Chicken</option> <option value=""Pork"" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['dinner'] == 'Pork Fillet') ? ""selected='selected'"" : '' ?>>Pork</option> </select> <input type=""reqsong"" id=""reqsong"" name=""reqsong"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['reqsong'] : '' ?>"" placeholder=""Request a Song to be Played!""/> <textarea id=""message"" name=""message"" placeholder=""Leave us a message if you like! If you have any allergies or dietary needs, please indicate them here.""><?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['message'] : '' ?></textarea> <span id=""loading""></span> <input type=""submit"" value=""Submit"" id=""submit-button"" /> </form> <?php unset($_SESSION['cf_returndata']); ?> </div>"
"169","bad","<?php session_start(); ?> <?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php if(isset($_POST)) { //form validation vars $formok = true; $errors = array(); //sumbission data $ipaddress = $_SERVER['REMOTE_ADDR']; $date = date('Y-m-d'); $time = date('H:i:s'); $timestamp = $date . "" "" . $time; //form data $firstname = mysql_prep($_POST['firstname']); $lastname = mysql_prep($_POST['lastname']); $dinner = mysql_prep($_POST['dinner']); $reqsong = mysql_prep($_POST['reqsong']); $email = mysql_prep($_POST['email']); $rsvp = mysql_prep($_POST['rsvp']); $message = mysql_prep($_POST['message']); //what we need to return back to our form $returndata = array( 'posted_form_data' => array( 'firstname' => $firstname, 'lastname' => $lastname, 'dinner' => $dinner, 'reqsong' => $reqsong, 'email' => $email, 'rsvp' => $rsvp, 'message' => $message ), 'form_ok' => $formok, 'errors' => $errors );<?php session_start(); ?> <div id=""contact-form"" class=""clearfix""> <?php //init variables $cf = array(); $sr = false; if(isset($_SESSION['cf_returndata'])){ $cf = $_SESSION['cf_returndata']; $sr = true; } ?> <ul id=""errors"" class=""<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>""> <li id=""info"">There were some problems with your form submission:</li> <?php if(isset($cf['errors']) && count($cf['errors']) > 0) : foreach($cf['errors'] as $error) : ?> <li><?php echo $error ?></li> <?php endforeach; endif; ?> </ul> <?php if($cf['posted_form_data']['rsvp'] == ""Will Attend""): ?> <p id=""success"" class=""<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>"">Thank you for your RSVP! <br> You will receive an email with additional information soon. <br><br> If your invitation was addressed to more than one person, please enter their information and submit again. <br><br> We look forward to seeing you soon!</p> <?php endif; ?> <?php if($cf['posted_form_data']['rsvp'] == ""Will Not Attend""): ?> <p id=""success"" class=""<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>"">Too bad you can't make it.</p> <?php endif; ?> <form method=""post"" action=""submit.php""> <input type=""text"" id=""firstname"" name=""firstname"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['firstname'] : '' ?>"" placeholder=""First Name"" required autofocus /> <input type=""text"" id=""lastname"" name=""lastname"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['lastname'] : '' ?>"" placeholder=""Last Name"" required autofocus /> <input type=""email"" id=""email"" name=""email"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['email'] : '' ?>"" placeholder=""Email Address"" required /> <select id=""rsvp"" name=""rsvp""> <option value=""Will Attend"">Will Attend</option> <option value=""Will Not Attend"">Will Not Attend</option> </select> <select id=""dinner"" name=""dinner""> <option value=""select"">Dinner Selection</option> <option value=""Chicken"" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['dinner'] == 'Chicken') ? ""selected='selected'"" : '' ?>>Chicken</option> <option value=""Pork"" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['dinner'] == 'Pork Fillet') ? ""selected='selected'"" : '' ?>>Pork</option> </select> <input type=""reqsong"" id=""reqsong"" name=""reqsong"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['reqsong'] : '' ?>"" placeholder=""Request a Song to be Played!""/> <textarea id=""message"" name=""message"" placeholder=""Leave us a message if you like! If you have any allergies or dietary needs, please indicate them here.""><?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['message'] : '' ?></textarea> <span id=""loading""></span> <input type=""submit"" value=""Submit"" id=""submit-button"" /> </form> <?php unset($_SESSION['cf_returndata']); ?> </div>"
"170","bad","<?php session_start(); ?> <?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php if(isset($_POST)) { //form validation vars $formok = true; $errors = array(); //sumbission data $ipaddress = $_SERVER['REMOTE_ADDR']; $date = date('Y-m-d'); $time = date('H:i:s'); $timestamp = $date . "" "" . $time; //form data $firstname = mysql_prep($_POST['firstname']); $lastname = mysql_prep($_POST['lastname']); $dinner = mysql_prep($_POST['dinner']); $reqsong = mysql_prep($_POST['reqsong']); $email = mysql_prep($_POST['email']); $rsvp = mysql_prep($_POST['rsvp']); $message = mysql_prep($_POST['message']); //what we need to return back to our form $returndata = array( 'posted_form_data' => array( 'firstname' => $firstname, 'lastname' => $lastname, 'dinner' => $dinner, 'reqsong' => $reqsong, 'email' => $email, 'rsvp' => $rsvp, 'message' => $message ), 'form_ok' => $formok, 'errors' => $errors );<?php session_start(); ?> <div id=""contact-form"" class=""clearfix""> <?php //init variables $cf = array(); $sr = false; if(isset($_SESSION['cf_returndata'])){ $cf = $_SESSION['cf_returndata']; $sr = true; } ?> <ul id=""errors"" class=""<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>""> <li id=""info"">There were some problems with your form submission:</li> <?php if(isset($cf['errors']) && count($cf['errors']) > 0) : foreach($cf['errors'] as $error) : ?> <li><?php echo $error ?></li> <?php endforeach; endif; ?> </ul> <?php if($cf['posted_form_data']['rsvp'] == ""Will Attend""): ?> <p id=""success"" class=""<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>"">Thank you for your RSVP! <br> You will receive an email with additional information soon. <br><br> If your invitation was addressed to more than one person, please enter their information and submit again. <br><br> We look forward to seeing you soon!</p> <?php endif; ?> <?php if($cf['posted_form_data']['rsvp'] == ""Will Not Attend""): ?> <p id=""success"" class=""<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>"">Too bad you can't make it.</p> <?php endif; ?> <form method=""post"" action=""submit.php""> <input type=""text"" id=""firstname"" name=""firstname"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['firstname'] : '' ?>"" placeholder=""First Name"" required autofocus /> <input type=""text"" id=""lastname"" name=""lastname"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['lastname'] : '' ?>"" placeholder=""Last Name"" required autofocus /> <input type=""email"" id=""email"" name=""email"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['email'] : '' ?>"" placeholder=""Email Address"" required /> <select id=""rsvp"" name=""rsvp""> <option value=""Will Attend"">Will Attend</option> <option value=""Will Not Attend"">Will Not Attend</option> </select> <select id=""dinner"" name=""dinner""> <option value=""select"">Dinner Selection</option> <option value=""Chicken"" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['dinner'] == 'Chicken') ? ""selected='selected'"" : '' ?>>Chicken</option> <option value=""Pork"" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['dinner'] == 'Pork Fillet') ? ""selected='selected'"" : '' ?>>Pork</option> </select> <input type=""reqsong"" id=""reqsong"" name=""reqsong"" value=""<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['reqsong'] : '' ?>"" placeholder=""Request a Song to be Played!""/> <textarea id=""message"" name=""message"" placeholder=""Leave us a message if you like! If you have any allergies or dietary needs, please indicate them here.""><?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['message'] : '' ?></textarea> <span id=""loading""></span> <input type=""submit"" value=""Submit"" id=""submit-button"" /> </form> <?php unset($_SESSION['cf_returndata']); ?> </div>"
"171","bad","<?PHP $uname = """"; $pword = """"; $errorMessage = """"; $num_rows = 0; function quote_smart($value, $handle) { if (get_magic_quotes_gpc()) { $value = stripslashes($value); } if (!is_numeric($value)) { $value = ""'"" . mysql_real_escape_string($value, $handle) . ""'""; } return $value; } if ($_SERVER['REQUEST_METHOD'] == 'POST'){ $uname = $_POST['username']; $pword = $_POST['password']; $uname = htmlspecialchars($uname); $pword = htmlspecialchars($pword); $uLength = strlen($uname); $pLength = strlen($pword); if ($uLength >= 10 && $uLength <= 20) { $errorMessage = """"; } else { $errorMessage = $errorMessage . ""Username must be between 10 and 20 characters"" . ""<BR>""; } if ($pLength >= 8 && $pLength <= 16) { $errorMessage = """"; } else { $errorMessage = $errorMessage . ""Password must be between 8 and 16 characters"" . ""<BR>""; } if ($errorMessage == """") { $user_name = ""root""; $pass_word = """"; $database = ""user authentication""; $server = ""127.0.0.1""; $db_handle = mysql_connect($server, $user_name, $pass_word); $db_found = mysql_select_db($database, $db_handle); if ($db_found) { $uname = quote_smart($uname, $db_handle); $pword = quote_smart($pword, $db_handle); $SQL = ""SELECT * FROM login WHERE USERNAME = '"".$uname.""'""; $result = mysql_query($SQL)or die(mysql_error()); $num_rows = mysql_num_rows($result); if ($num_rows > 0) { $errorMessage = ""Username already taken""; } else { $SQL = ""INSERT INTO login (USERNAME, PASSWORD) VALUES ('{$uname}', MD5('{$pword}'))""; $result = mysql_query($SQL); mysql_close($db_handle); //================================================================================= // START THE SESSION AND PUT SOMETHING INTO THE SESSION VARIABLE CALLED login // SEND USER TO A DIFFERENT PAGE AFTER SIGN UP //================================================================================= session_start(); $_SESSION['login'] = ""1""; header (""Location: page1.php""); } } else { $errorMessage = ""Database Not Found""; } } } ?> <html> <head> <title>Basic Login Script</title> </head> <body> <FORM NAME =""form1"" METHOD =""POST"" ACTION =""signup.php""> Username: <INPUT TYPE = 'TEXT' Name ='username' value=""<?PHP print $uname;?>"" maxlength=""20""> Password: <INPUT TYPE = 'TEXT' Name ='password' value=""<?PHP print $pword;?>"" maxlength=""16""> <P> <INPUT TYPE = ""Submit"" Name = ""Submit1"" VALUE = ""Register""> </FORM> <P> <?PHP print $errorMessage;?> </body> </html>"
"172","bad","<?PHP $uname = """"; $pword = """"; $errorMessage = """"; $num_rows = 0; function quote_smart($value, $handle) { if (get_magic_quotes_gpc()) { $value = stripslashes($value); } if (!is_numeric($value)) { $value = ""'"" . mysql_real_escape_string($value, $handle) . ""'""; } return $value; } if ($_SERVER['REQUEST_METHOD'] == 'POST'){ $uname = $_POST['username']; $pword = $_POST['password']; $uname = htmlspecialchars($uname); $pword = htmlspecialchars($pword); $uLength = strlen($uname); $pLength = strlen($pword); if ($uLength >= 10 && $uLength <= 20) { $errorMessage = """"; } else { $errorMessage = $errorMessage . ""Username must be between 10 and 20 characters"" . ""<BR>""; } if ($pLength >= 8 && $pLength <= 16) { $errorMessage = """"; } else { $errorMessage = $errorMessage . ""Password must be between 8 and 16 characters"" . ""<BR>""; } if ($errorMessage == """") { $user_name = ""root""; $pass_word = """"; $database = ""user authentication""; $server = ""127.0.0.1""; $db_handle = mysql_connect($server, $user_name, $pass_word); $db_found = mysql_select_db($database, $db_handle); if ($db_found) { $uname = quote_smart($uname, $db_handle); $pword = quote_smart($pword, $db_handle); $SQL = ""SELECT * FROM login WHERE USERNAME = '"".$uname.""'""; $result = mysql_query($SQL)or die(mysql_error()); $num_rows = mysql_num_rows($result); if ($num_rows > 0) { $errorMessage = ""Username already taken""; } else { $SQL = ""INSERT INTO login (USERNAME, PASSWORD) VALUES ('{$uname}', MD5('{$pword}'))""; $result = mysql_query($SQL); mysql_close($db_handle); //================================================================================= // START THE SESSION AND PUT SOMETHING INTO THE SESSION VARIABLE CALLED login // SEND USER TO A DIFFERENT PAGE AFTER SIGN UP //================================================================================= session_start(); $_SESSION['login'] = ""1""; header (""Location: page1.php""); } } else { $errorMessage = ""Database Not Found""; } } } ?> <html> <head> <title>Basic Login Script</title> </head> <body> <FORM NAME =""form1"" METHOD =""POST"" ACTION =""signup.php""> Username: <INPUT TYPE = 'TEXT' Name ='username' value=""<?PHP print $uname;?>"" maxlength=""20""> Password: <INPUT TYPE = 'TEXT' Name ='password' value=""<?PHP print $pword;?>"" maxlength=""16""> <P> <INPUT TYPE = ""Submit"" Name = ""Submit1"" VALUE = ""Register""> </FORM> <P> <?PHP print $errorMessage;?> </body> </html>"
"173","bad","<?PHP $uname = """"; $pword = """"; $errorMessage = """"; $num_rows = 0; function quote_smart($value, $handle) { if (get_magic_quotes_gpc()) { $value = stripslashes($value); } if (!is_numeric($value)) { $value = ""'"" . mysql_real_escape_string($value, $handle) . ""'""; } return $value; } if ($_SERVER['REQUEST_METHOD'] == 'POST'){ $uname = $_POST['username']; $pword = $_POST['password']; $uname = htmlspecialchars($uname); $pword = htmlspecialchars($pword); $uLength = strlen($uname); $pLength = strlen($pword); if ($uLength >= 10 && $uLength <= 20) { $errorMessage = """"; } else { $errorMessage = $errorMessage . ""Username must be between 10 and 20 characters"" . ""<BR>""; } if ($pLength >= 8 && $pLength <= 16) { $errorMessage = """"; } else { $errorMessage = $errorMessage . ""Password must be between 8 and 16 characters"" . ""<BR>""; } if ($errorMessage == """") { $user_name = ""root""; $pass_word = """"; $database = ""user authentication""; $server = ""127.0.0.1""; $db_handle = mysql_connect($server, $user_name, $pass_word); $db_found = mysql_select_db($database, $db_handle); if ($db_found) { $uname = quote_smart($uname, $db_handle); $pword = quote_smart($pword, $db_handle); $SQL = ""SELECT * FROM login WHERE USERNAME = '"".$uname.""'""; $result = mysql_query($SQL)or die(mysql_error()); $num_rows = mysql_num_rows($result); if ($num_rows > 0) { $errorMessage = ""Username already taken""; } else { $SQL = ""INSERT INTO login (USERNAME, PASSWORD) VALUES ('{$uname}', MD5('{$pword}'))""; $result = mysql_query($SQL); mysql_close($db_handle); //================================================================================= // START THE SESSION AND PUT SOMETHING INTO THE SESSION VARIABLE CALLED login // SEND USER TO A DIFFERENT PAGE AFTER SIGN UP //================================================================================= session_start(); $_SESSION['login'] = ""1""; header (""Location: page1.php""); } } else { $errorMessage = ""Database Not Found""; } } } ?> <html> <head> <title>Basic Login Script</title> </head> <body> <FORM NAME =""form1"" METHOD =""POST"" ACTION =""signup.php""> Username: <INPUT TYPE = 'TEXT' Name ='username' value=""<?PHP print $uname;?>"" maxlength=""20""> Password: <INPUT TYPE = 'TEXT' Name ='password' value=""<?PHP print $pword;?>"" maxlength=""16""> <P> <INPUT TYPE = ""Submit"" Name = ""Submit1"" VALUE = ""Register""> </FORM> <P> <?PHP print $errorMessage;?> </body> </html>"
"174","bad","if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } else { $actual; $comment; $con; foreach($_POST['value'] as $country => $value1 ){ foreach($value1 as $goal => $value2){ //value => [""matrix""] foreach($value2 as $matrix => $value3){ //value => string $country ."" "". $goal."" "" .$matrix. "" "" . $value3.""<br/>""; if($matrix == ""actual""){ $actual = $value3; }else if($matrix==""comment""){ $comment=$value3; } } $sql=""SELECT target FROM target where ini_id = '$ini' and country_id='$country' and metric_id='$goal'""; $result=mysql_query($sql); $target = mysqli_fetch_array($result); insert($actual,$target['target'],$country.$ini.$goal ,$comment,$con);"
"175","bad","if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } else { $actual; $comment; $con; foreach($_POST['value'] as $country => $value1 ){ foreach($value1 as $goal => $value2){ //value => [""matrix""] foreach($value2 as $matrix => $value3){ //value => string $country ."" "". $goal."" "" .$matrix. "" "" . $value3.""<br/>""; if($matrix == ""actual""){ $actual = $value3; }else if($matrix==""comment""){ $comment=$value3; } } $sql=""SELECT target FROM target where ini_id = '$ini' and country_id='$country' and metric_id='$goal'""; $result=mysql_query($sql); $target = mysqli_fetch_array($result); insert($actual,$target['target'],$country.$ini.$goal ,$comment,$con);"
"176","bad","<?php include_once 'include.php'; include_once 'header.php'; //$dbhandle = mysql_connect($hostname, $DBUser, $DBPasswd) // or die(""Unable to connect to MySQL""); //echo ""Connected to MySQL<br>""; $DBsubmit=""INSERT INTO User (fname, lname, email, password, institution, expertise) VALUES('$_POST['fname']', '$_POST['lname']', '$_POST['email']', '$_POST['password']', '$_POST['institution']', '$_POST['expertise']')""; $result=mysql_query($DBsubmit) //echo ""1 record added""; // close connection mysql_close(); ?>"
"177","bad","<?php include_once 'include.php'; include_once 'header.php'; //$dbhandle = mysql_connect($hostname, $DBUser, $DBPasswd) // or die(""Unable to connect to MySQL""); //echo ""Connected to MySQL<br>""; $DBsubmit=""INSERT INTO User (fname, lname, email, password, institution, expertise) VALUES('$_POST['fname']', '$_POST['lname']', '$_POST['email']', '$_POST['password']', '$_POST['institution']', '$_POST['expertise']')""; $result=mysql_query($DBsubmit) //echo ""1 record added""; // close connection mysql_close(); ?>"
"178","bad","| serial | | name | | email | | phone | | location | | profession | | source | ----------------------------------------------------------------------------------------------------------------------------- | 1 | | Mr first | | a@example.com | | 123456780 | | India | | Designer | | From X | | 2 | | Mr second | | b@example.com | | 123456781 | | US | | Designer | | From Y | | 3 | | Mr third | | c@example.com | | 123456782 | | US | | Engineer | | From X | | 4 | | Mr fourth | | d@example.com | | 123456783 | | US | | Disigner | | From Z | | 5 | | Mr fifth | | e@example.com | | 123456784 | | India | | Engineer | | From Y | | 6 | | Mr sixth | | f@example.com | | 123456785 | | UK | | Designer | | From X | | 7 | | Mr seventh | | g@example.com | | 123456786 | | India | | Designer | | From X |<form method=""post"" action=""search.php""> <select name=""location""> <option value="""" selected=""selected"">-any-</option> <option value=""UK"">UK</option> <option value=""India"">India</option> <option value=""US"">US</option> </select> <select name=""source""> <option value="""" selected=""selected"">-any-</option> <option value=""From X"">From X</option> <option value=""From Y"">From Y</option> <option value=""From Z"">From Z</option> </select> <select name=""profession""> <option value="""" selected=""selected"">-any-</option> <option value=""Designer"">Designer</option> <option value=""Engineer"">Engineer</option> </select> <input type=""submit"" value=""submit""> </form><?php mysql_connect(""localhost"",""root"",""""); mysql_select_db(""alldata""); if(isset($_POST['submit'])) { $source=$_POST['source']; $profession=$_POST['profession']; $location=$_POST['location']; } ?> <?php $conn = mysql_connect (""localhost"", ""root"", """") or die ('I cannot connect to the database because: ' . mysql_error()); $selected = mysql_select_db (""alldata"") or die (""Could not select database because: "" . mysql_error()); if(isset($_POST['submit'])) { $source=$_POST['source']; $profession=$_POST['profession']; $location=$_POST['location']; } $where = ''; if(isset($location) && !empty($location)){ $where .= ""location ='$location' AND ""; } if(isset($profession) && !empty($profession)){ $where .= ""profession ='$profession' AND ""; } if(isset($source) && !empty($source)){ $where .= ""source ='$source' AND ""; } $where = substr($where, 0, (strlen($where) - 4)); $where = ($where != '') ? ""WHERE $where"":''; $sql= ""select * from data $where""; $result = mysql_query($sql,$conn)or die (mysql_error()); if (mysql_num_rows($result)==0){ echo ""No Match Found""; }else{ while ($row = mysql_fetch_array($result)){ echo """" .$row['name']."" "" .$row['email']."" "".$row[""phone""]."" "".$row[""source""]."" "".$row[""profession""]."" "".$row[""location""].""<br>""; echo ""<br>""; echo ""---------------------------------------------------------------------"".""<br>""; } } mysql_close(); ?>$sql = ""select * from data where location = '"".$_POST['location'].""' AND profession = '"". $_POST['profession'] .""' AND source = '"". $_POST['source'] .""'"";"
"179","good","if(isset($_REQUEST['createTranslationSet']) && (!empty($id)) ) { $connect = new mysqli($dbhost, $dbuser, $dbpass, $dbname); $mysqli->autocommit(false); $mysqli = $connect->prepare(""INSERT INTO `translation-ids`(`ID`) VALUES (NULL)""); $mysqli->execute(); $l10id = $mysqli->insert_id; $mysqli = $connect->prepare(""UPDATE places SET places.translationID = ? WHERE places.id = ?""); $mysqli->bind_param('ii', $l10id, $id); $mysqli->execute(); $mysqli = $connect->prepare(""SELECT * FROM places WHERE places.id = ?""); $mysqli->bind_param('i', $id); $mysqli->execute(); $mysqli->fetch(); echo ($translationID);"
"180","good","if(isset($_REQUEST['createTranslationSet']) && (!empty($id)) ) { $connect = new mysqli($dbhost, $dbuser, $dbpass, $dbname); $mysqli->autocommit(false); $mysqli = $connect->prepare(""INSERT INTO `translation-ids`(`ID`) VALUES (NULL)""); $mysqli->execute(); $l10id = $mysqli->insert_id; $mysqli = $connect->prepare(""UPDATE places SET places.translationID = ? WHERE places.id = ?""); $mysqli->bind_param('ii', $l10id, $id); $mysqli->execute(); $mysqli = $connect->prepare(""SELECT * FROM places WHERE places.id = ?""); $mysqli->bind_param('i', $id); $mysqli->execute(); $mysqli->fetch(); echo ($translationID);"
"181","good","try { $db = getConnection(); $stmt = $db->prepare($sql); $stmt->bindParam(""id"", $id); $stmt->execute(); $lecturer = $stmt->fetchAll(PDO::FETCH_OBJ); $db = null; if (!isset($_GET['callback'])) { echo json_encode($lecturer); } else { echo $_GET['callback'] . '(' . json_encode($lecturer) . ');'; } } catch(PDOException $e) { echo '{""error"":{""text"":'. $e->getMessage() .'}}'; } }try { $db = getConnection(); $stmt = $db->prepare($sql); $stmt->bindParam(""id"", $id); $stmt->execute(); $lecturer = $stmt->fetchObject(); $db = null; if (!isset($_GET['callback'])) { echo json_encode($lecturer); } else { echo $_GET['callback'] . '(' . json_encode($lecturer) . ');'; } } catch(PDOException $e) { echo '{""error"":{""text"":'. $e->getMessage() .'}}'; } }routes:{ """":""list"", ""list"":""list"", ""modules/:id"":""moduleDetails"", ""modules/:id/students"":""moduleStudents"", ""modules/:id/lecturers"":""moduleLecturers"", ""modules/:id/lecturers/:id/lecturer"":""lecturerDetails"" },lecturerDetails:function (id) { var lecturer = new Lecturer({id:id}); var self = this; module.lecturers.lecturer.fetch({ success:function (data) { self.changePage(new LecturerView({model:data})); } }); },urlRoot:""../api/lecturers"", initialize:function () { this.lecturers = new lecturersCollection(); this.lecturers.url = '../api/modules/' + this.id + '/lecturers'; }model:Lecturers, url:""../api/lecturers"",urlRoot:""../api/lecturer"",initialize:function () { this.template = _.template(tpl.get('lecturer-details')); }, render:function (eventName) { $(this.el).html(this.template(this.model.toJSON())); return this; }"
"182","good","try { $db = getConnection(); $stmt = $db->prepare($sql); $stmt->bindParam(""id"", $id); $stmt->execute(); $lecturer = $stmt->fetchAll(PDO::FETCH_OBJ); $db = null; if (!isset($_GET['callback'])) { echo json_encode($lecturer); } else { echo $_GET['callback'] . '(' . json_encode($lecturer) . ');'; } } catch(PDOException $e) { echo '{""error"":{""text"":'. $e->getMessage() .'}}'; } }try { $db = getConnection(); $stmt = $db->prepare($sql); $stmt->bindParam(""id"", $id); $stmt->execute(); $lecturer = $stmt->fetchObject(); $db = null; if (!isset($_GET['callback'])) { echo json_encode($lecturer); } else { echo $_GET['callback'] . '(' . json_encode($lecturer) . ');'; } } catch(PDOException $e) { echo '{""error"":{""text"":'. $e->getMessage() .'}}'; } }routes:{ """":""list"", ""list"":""list"", ""modules/:id"":""moduleDetails"", ""modules/:id/students"":""moduleStudents"", ""modules/:id/lecturers"":""moduleLecturers"", ""modules/:id/lecturers/:id/lecturer"":""lecturerDetails"" },lecturerDetails:function (id) { var lecturer = new Lecturer({id:id}); var self = this; module.lecturers.lecturer.fetch({ success:function (data) { self.changePage(new LecturerView({model:data})); } }); },urlRoot:""../api/lecturers"", initialize:function () { this.lecturers = new lecturersCollection(); this.lecturers.url = '../api/modules/' + this.id + '/lecturers'; }model:Lecturers, url:""../api/lecturers"",urlRoot:""../api/lecturer"",initialize:function () { this.template = _.template(tpl.get('lecturer-details')); }, render:function (eventName) { $(this.el).html(this.template(this.model.toJSON())); return this; }"
"183","good","try { $db = getConnection(); $stmt = $db->prepare($sql); $stmt->bindParam(""id"", $id); $stmt->execute(); $lecturer = $stmt->fetchAll(PDO::FETCH_OBJ); $db = null; if (!isset($_GET['callback'])) { echo json_encode($lecturer); } else { echo $_GET['callback'] . '(' . json_encode($lecturer) . ');'; } } catch(PDOException $e) { echo '{""error"":{""text"":'. $e->getMessage() .'}}'; } }try { $db = getConnection(); $stmt = $db->prepare($sql); $stmt->bindParam(""id"", $id); $stmt->execute(); $lecturer = $stmt->fetchObject(); $db = null; if (!isset($_GET['callback'])) { echo json_encode($lecturer); } else { echo $_GET['callback'] . '(' . json_encode($lecturer) . ');'; } } catch(PDOException $e) { echo '{""error"":{""text"":'. $e->getMessage() .'}}'; } }routes:{ """":""list"", ""list"":""list"", ""modules/:id"":""moduleDetails"", ""modules/:id/students"":""moduleStudents"", ""modules/:id/lecturers"":""moduleLecturers"", ""modules/:id/lecturers/:id/lecturer"":""lecturerDetails"" },lecturerDetails:function (id) { var lecturer = new Lecturer({id:id}); var self = this; module.lecturers.lecturer.fetch({ success:function (data) { self.changePage(new LecturerView({model:data})); } }); },urlRoot:""../api/lecturers"", initialize:function () { this.lecturers = new lecturersCollection(); this.lecturers.url = '../api/modules/' + this.id + '/lecturers'; }model:Lecturers, url:""../api/lecturers"",urlRoot:""../api/lecturer"",initialize:function () { this.template = _.template(tpl.get('lecturer-details')); }, render:function (eventName) { $(this.el).html(this.template(this.model.toJSON())); return this; }"
"184","bad","<?php $sqBill= mysql_query(""SELECT * FROM bill WHERE idUser = '$_SESSION[idSelected]'"", $con); while($row = mysql_fetch_array($sqBill)) { $company = $row['company']; $bill = $row['bill']; $date = $row['date']; echo '<div><label><b>' . $company . '</b></label><input type=""text"" value=""' . htmlspecialchars($bill) . ' op ' . htmlspecialchars($date) . '"" disabled></div>'; } ?>"
"185","bad","<?php $sqBill= mysql_query(""SELECT * FROM bill WHERE idUser = '$_SESSION[idSelected]'"", $con); while($row = mysql_fetch_array($sqBill)) { $company = $row['company']; $bill = $row['bill']; $date = $row['date']; echo '<div><label><b>' . $company . '</b></label><input type=""text"" value=""' . htmlspecialchars($bill) . ' op ' . htmlspecialchars($date) . '"" disabled></div>'; } ?>"
"186","bad","<?php $sqBill= mysql_query(""SELECT * FROM bill WHERE idUser = '$_SESSION[idSelected]'"", $con); while($row = mysql_fetch_array($sqBill)) { $company = $row['company']; $bill = $row['bill']; $date = $row['date']; echo '<div><label><b>' . $company . '</b></label><input type=""text"" value=""' . htmlspecialchars($bill) . ' op ' . htmlspecialchars($date) . '"" disabled></div>'; } ?>"
"187","bad","<?php if(isset($_GET['e'])){ // CONNECT TO THE DATABASE include_once(""php_includes/connect_to_mysqli.php""); // GATHER THE POSTED EMAIL INTO LOCAL VARIABLES AND SANITIZE $email = mysqli_real_escape_string($db_conx, $_GET['e']); $sql = ""SELECT * FROM useroptions WHERE email='$email' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $numrows = mysqli_num_rows($query); while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){ $id = $row[""id""]; $u = $row[""username""]; $q1 = $row[""question""]; $q2 = $row[""question2""]; $a1 = $row[""answer""]; $a2 = $row[""answer2""]; } if ($q1 == """" || $q2 == """"){ header (""location: messages.php?emsg=forget&u="".$u); exit(); } } ?> <?php // AJAX CALLS THIS CODE TO EXECUTE if(isset($_POST[""pa1""])){ include_once(""php_includes/connect_to_mysqli.php""); $e = mysqli_real_escape_string($db_conx, $_POST['em']); $pa1= $_POST['pa1']; $pa2= $_POST['pa2']; $sql = ""SELECT * FROM useroptions WHERE email='$e' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $numrows = mysqli_num_rows($query); while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){ $id = $row[""id""]; $a1 = $row[""answer""]; $a2 = $row[""answer2""]; } if ($pa1 == $a1 && $pa2 == $a2 && $e == $email ){ $sql = ""SELECT id, username FROM user WHERE email='$e' AND activated='1' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $numrows = mysqli_num_rows($query); if($numrows > 0){ while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){ $id = $row[""id""]; $u = $row[""username""]; } $emailcut = substr($e, 0, 4); $randNum = rand(10000,99999); $tempPass = ""$emailcut$randNum""; $hashTempPass = md5($tempPass); $sql = ""UPDATE useroptions SET temp_pass='$hashTempPass' WHERE username='$u' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $to = ""$e""; $from = ""auto_responder@yousite.com""; $headers =""From: $from\n""; $headers .= ""MIME-Version: 1.0\n""; $headers .= ""Content-type: text/html; charset=iso-8859-1 \n""; $subject =""yoursite Temporary Password""; $msg = '<h2>Hello '.$u.'</h2><p> Email with activation link</p>'; if(mail($to,$subject,$msg,$headers)) { echo ""success""; exit(); } else { echo ""email_send_failed""; exit(); } } } else { echo ""no_exist""; } exit(); } ?> <!DOCTYPE html> <html> <head> <meta charset=""UTF-8""> <title>Security Answer-</title> <link rel=""icon"" href=""favicon.ico"" type=""image/x-icon""> <link rel=""stylesheet"" href=""css/styles.css""> <style type=""text/css""> #securityform{ margin-top:24px; } #securityform > div { margin-top: 12px; } #securityform > input { width: 250px; padding: 3px; background: #F3F9DD; } #anssubmitbtn { font-size:15px; padding: 10px; } </style> <script src=""js/main.js""></script> <script src=""js/ajax.js""></script> <script> function emptyElement(x){ _(x).innerHTML = """"; } function ajaxObj( meth, url ) { var x = new XMLHttpRequest(); x.open( meth, url, true ); x.setRequestHeader(""Content-type"", ""application/x-www-form-urlencoded""); return x; } function ajaxReturn(x){ if(x.readyState == 4 && x.status == 200){ return true; } } function forgotpasscon(){ var em = _(""email"").value; var pa1 = _(""ans1"").value; var pa2 = _(""ans2"").value; if(em == """" || pa1 == """" || pa2 == """"){ _(""status"").innerHTML = ""Answer all security questions""; } else { _(""anssubmitbtn"").style.display = ""none""; _(""status"").innerHTML = 'please wait ...'; var ajax = ajaxObj(""POST"", ""testconfirm.php""); ajax.onreadystatechange = function() { if(ajaxReturn(ajax) == true) { var response = ajax.responseText; if(ajax.responseText == ""success""){ _(""securityform"").innerHTML = '<h3>Step 2. Check your email inbox in a few minutes</h3><p>You can close this window or tab if you like.</p>'; } else if(ajax.responseText == ""no_exist""){ _(""status"").innerHTML = ""Sorry wrong answers""; } else if(ajax.responseText == ""email_send_failed""){ _(""status"").innerHTML = ""Mail function failed to execute""; } else { _(""status"").innerHTML = ""An unknown error occurred""+ajax.responseText; _(""anssubmitbtn"").style.display = ""block""; } } } ajax.send(""em=""+em+""&pa1=""+pa1+""&pa2=""+pa2); } } </script> </head> <body> <?php include_once(""template_pageTop.php""); ?> <div id=""pageMiddle""> <h3>Step : 2</h3> <h4>Please answer the following security questions!!</h4> <form id=""securityform"" onsubmit=""return false;""> <div>Question 1:</div> <p><?php echo $q1; ?></p> <input name=""ans1"" id=""ans1"" type=""text"" onfocus=""_('status').innerHTML='';"" maxlength=""100""> <br/><br/> <div>Question 2:</div> <p><?php echo $q2; ?></p> <input name=""ans2"" id=""ans2"" type=""text"" onfocus=""_('status').innerHTML='';"" maxlength=""100""> <br /><br /> <input name=""email"" id=""email"" type=""hidden"" value=""<?php echo $email; ?>"" /> <button id=""anssubmitbtn"" onclick=""forgotpasscon()"">Submit</button> <p id=""status""></p> </form> </div> <?php include_once(""template_pageBottom.php""); ?> </body> </html>"
"188","bad","<?php if(isset($_GET['e'])){ // CONNECT TO THE DATABASE include_once(""php_includes/connect_to_mysqli.php""); // GATHER THE POSTED EMAIL INTO LOCAL VARIABLES AND SANITIZE $email = mysqli_real_escape_string($db_conx, $_GET['e']); $sql = ""SELECT * FROM useroptions WHERE email='$email' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $numrows = mysqli_num_rows($query); while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){ $id = $row[""id""]; $u = $row[""username""]; $q1 = $row[""question""]; $q2 = $row[""question2""]; $a1 = $row[""answer""]; $a2 = $row[""answer2""]; } if ($q1 == """" || $q2 == """"){ header (""location: messages.php?emsg=forget&u="".$u); exit(); } } ?> <?php // AJAX CALLS THIS CODE TO EXECUTE if(isset($_POST[""pa1""])){ include_once(""php_includes/connect_to_mysqli.php""); $e = mysqli_real_escape_string($db_conx, $_POST['em']); $pa1= $_POST['pa1']; $pa2= $_POST['pa2']; $sql = ""SELECT * FROM useroptions WHERE email='$e' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $numrows = mysqli_num_rows($query); while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){ $id = $row[""id""]; $a1 = $row[""answer""]; $a2 = $row[""answer2""]; } if ($pa1 == $a1 && $pa2 == $a2 && $e == $email ){ $sql = ""SELECT id, username FROM user WHERE email='$e' AND activated='1' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $numrows = mysqli_num_rows($query); if($numrows > 0){ while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){ $id = $row[""id""]; $u = $row[""username""]; } $emailcut = substr($e, 0, 4); $randNum = rand(10000,99999); $tempPass = ""$emailcut$randNum""; $hashTempPass = md5($tempPass); $sql = ""UPDATE useroptions SET temp_pass='$hashTempPass' WHERE username='$u' LIMIT 1""; $query = mysqli_query($db_conx, $sql); $to = ""$e""; $from = ""auto_responder@yousite.com""; $headers =""From: $from\n""; $headers .= ""MIME-Version: 1.0\n""; $headers .= ""Content-type: text/html; charset=iso-8859-1 \n""; $subject =""yoursite Temporary Password""; $msg = '<h2>Hello '.$u.'</h2><p> Email with activation link</p>'; if(mail($to,$subject,$msg,$headers)) { echo ""success""; exit(); } else { echo ""email_send_failed""; exit(); } } } else { echo ""no_exist""; } exit(); } ?> <!DOCTYPE html> <html> <head> <meta charset=""UTF-8""> <title>Security Answer-</title> <link rel=""icon"" href=""favicon.ico"" type=""image/x-icon""> <link rel=""stylesheet"" href=""css/styles.css""> <style type=""text/css""> #securityform{ margin-top:24px; } #securityform > div { margin-top: 12px; } #securityform > input { width: 250px; padding: 3px; background: #F3F9DD; } #anssubmitbtn { font-size:15px; padding: 10px; } </style> <script src=""js/main.js""></script> <script src=""js/ajax.js""></script> <script> function emptyElement(x){ _(x).innerHTML = """"; } function ajaxObj( meth, url ) { var x = new XMLHttpRequest(); x.open( meth, url, true ); x.setRequestHeader(""Content-type"", ""application/x-www-form-urlencoded""); return x; } function ajaxReturn(x){ if(x.readyState == 4 && x.status == 200){ return true; } } function forgotpasscon(){ var em = _(""email"").value; var pa1 = _(""ans1"").value; var pa2 = _(""ans2"").value; if(em == """" || pa1 == """" || pa2 == """"){ _(""status"").innerHTML = ""Answer all security questions""; } else { _(""anssubmitbtn"").style.display = ""none""; _(""status"").innerHTML = 'please wait ...'; var ajax = ajaxObj(""POST"", ""testconfirm.php""); ajax.onreadystatechange = function() { if(ajaxReturn(ajax) == true) { var response = ajax.responseText; if(ajax.responseText == ""success""){ _(""securityform"").innerHTML = '<h3>Step 2. Check your email inbox in a few minutes</h3><p>You can close this window or tab if you like.</p>'; } else if(ajax.responseText == ""no_exist""){ _(""status"").innerHTML = ""Sorry wrong answers""; } else if(ajax.responseText == ""email_send_failed""){ _(""status"").innerHTML = ""Mail function failed to execute""; } else { _(""status"").innerHTML = ""An unknown error occurred""+ajax.responseText; _(""anssubmitbtn"").style.display = ""block""; } } } ajax.send(""em=""+em+""&pa1=""+pa1+""&pa2=""+pa2); } } </script> </head> <body> <?php include_once(""template_pageTop.php""); ?> <div id=""pageMiddle""> <h3>Step : 2</h3> <h4>Please answer the following security questions!!</h4> <form id=""securityform"" onsubmit=""return false;""> <div>Question 1:</div> <p><?php echo $q1; ?></p> <input name=""ans1"" id=""ans1"" type=""text"" onfocus=""_('status').innerHTML='';"" maxlength=""100""> <br/><br/> <div>Question 2:</div> <p><?php echo $q2; ?></p> <input name=""ans2"" id=""ans2"" type=""text"" onfocus=""_('status').innerHTML='';"" maxlength=""100""> <br /><br /> <input name=""email"" id=""email"" type=""hidden"" value=""<?php echo $email; ?>"" /> <button id=""anssubmitbtn"" onclick=""forgotpasscon()"">Submit</button> <p id=""status""></p> </form> </div> <?php include_once(""template_pageBottom.php""); ?> </body> </html>"
"189","bad","<html> <?php include(""db.php""); if ((($_POST['email'])) and (($_POST['password'])) and (($_POST['name'])) and (($_POST['password2'])) and (($_POST['name'])) and (($_POST['address'])) and (($_POST['city'])) and (($_POST['state']))) { echo""<h1>variables are set</h1>""; $con=mysql_connect(""localhost"", ""useradmin"", ""FNEpsTa6qvmRjBBf"", ""userdata"") or die(""failed to connect""); if ($con->connect_error) { die('Connect Error (' . $con->connect_errno . ') '. $con->connect_error); } //Prevent SQL injections $name = mysql_real_escape_string($_POST['name']); $email = mysql_real_escape_string($_POST['email']); $address = mysql_real_escape_string($_POST['address']); $city = mysql_real_escape_string($_POST['city']); $state=mysql_real_escape_string($_POST['state']); $password = mysql_real_escape_string($_POST['password']); $password2 = mysql_real_escape_string($_POST['password2']); //Get MD5 hash of password $password = md5($_POST['password']); $query=""SELECT email FROM users WHERE email = '"".$email.""'""; $query2=""INSERT INTO users (name, email, address, city, state, password) VALUES ('$name', '$email', '$address', '$city', '$state', '$password');""; //Check to see if email exists $sql = mysql_query($con, $query2); $rows=(mysql_num_rows($sql)); if($rows>0) { die (""email taken.""); } if($password<>$password2) { die (""passwords do not match""); } $sql = mysql_query($con, $query2); if($sql){ header('location:welcome.php'); } } ?> <html> <center> <form action=""register.php"" method=""POST""> <table> <tr><td>Name: </td><td><input name=""name"" type=""text"" /></td></tr> <tr><td>Email:</td><td> <input name=""email"" type=""text"" /></td></tr> <tr><td>Address: </td><td><input name=""address"" type=""text"" /></td></tr> <tr><td>City: </td><td><input name=""city"" type=""text"" /></td></tr> <tr><td>State: </td><td><select name=""state""> <option value="""" selected=""state"">Select a State</option> <option value=""AL"">Alabama</option> <option value=""AK"">Alaska</option> <option value=""AZ"">Arizona</option> <option value=""AR"">Arkansas</option> <option value=""CA"">California</option> <option value=""CO"">Colorado</option> <option value=""CT"">Connecticut</option> <option value=""DE"">Delaware</option> <option value=""DC"">District Of Columbia</option> <option value=""FL"">Florida</option> <option value=""GA"">Georgia</option> <option value=""HI"">Hawaii</option> <option value=""ID"">Idaho</option> <option value=""IL"">Illinois</option> <option value=""IN"">Indiana</option> <option value=""IA"">Iowa</option> <option value=""KS"">Kansas</option> <option value=""KY"">Kentucky</option> <option value=""LA"">Louisiana</option> <option value=""ME"">Maine</option> <option value=""MD"">Maryland</option> <option value=""MA"">Massachusetts</option> <option value=""MI"">Michigan</option> <option value=""MN"">Minnesota</option> <option value=""MS"">Mississippi</option> <option value=""MO"">Missouri</option> <option value=""MT"">Montana</option> <option value=""NE"">Nebraska</option> <option value=""NV"">Nevada</option> <option value=""NH"">New Hampshire</option> <option value=""NJ"">New Jersey</option> <option value=""NM"">New Mexico</option> <option value=""NY"">New York</option> <option value=""NC"">North Carolina</option> <option value=""ND"">North Dakota</option> <option value=""OH"">Ohio</option> <option value=""OK"">Oklahoma</option> <option value=""OR"">Oregon</option> <option value=""PA"">Pennsylvania</option> <option value=""RI"">Rhode Island</option> <option value=""SC"">South Carolina</option> <option value=""SD"">South Dakota</option> <option value=""TN"">Tennessee</option> <option value=""TX"">Texas</option> <option value=""UT"">Utah</option> <option value=""VT"">Vermont</option> <option value=""VA"">Virginia</option> <option value=""WA"">Washington</option> <option value=""WV"">West Virginia</option> <option value=""WI"">Wisconsin</option> <option value=""WY"">Wyoming</option> </select></td></tr> <tr><td>Password: </td><td><input type=""password"" name=""password"" /></td></tr> <tr><td>Confirm Password: </td><td><input type=""password"" name=""password2"" /></td></tr> <tr><td><input type=""submit"" value=""Submit"" /></td></tr> </table> </form></center> </html>"
"190","bad","<?php $sql = ""SELECT TeamName, TeamID FROM tblTeam""; $result = mysql_query($sql); $player_id = $_GET['id']; $current_team = mysql_query(""SELECT tblteam.TeamID, tblteam.TeamName, tblplayer.PlayerID, tblplayer.PlayerTeam, tblplayer.PlayerName FROM tblplayer INNER JOIN tblteam ON tblplayer.PlayerTeam = tblteam.TeamID WHERE PlayerID = $player_id LIMIT 1 ""); $my_row = mysql_fetch_array($current_team); ?> <select name=""TeamName""> <option selected value=""<?php echo $my_row['TeamID']; ?>""> <?php echo $my_row['TeamName']; ?> </option> <?php while ($row = mysql_fetch_array($result)) { $team_name= $row[""TeamName""]; $team_id = $row[""TeamID""]; echo ""<option value=\""$team_id\"">$team_name</option>""; } echo ""</select>""; ?>"
"191","bad","<?php $sql = ""SELECT TeamName, TeamID FROM tblTeam""; $result = mysql_query($sql); $player_id = $_GET['id']; $current_team = mysql_query(""SELECT tblteam.TeamID, tblteam.TeamName, tblplayer.PlayerID, tblplayer.PlayerTeam, tblplayer.PlayerName FROM tblplayer INNER JOIN tblteam ON tblplayer.PlayerTeam = tblteam.TeamID WHERE PlayerID = $player_id LIMIT 1 ""); $my_row = mysql_fetch_array($current_team); ?> <select name=""TeamName""> <option selected value=""<?php echo $my_row['TeamID']; ?>""> <?php echo $my_row['TeamName']; ?> </option> <?php while ($row = mysql_fetch_array($result)) { $team_name= $row[""TeamName""]; $team_id = $row[""TeamID""]; echo ""<option value=\""$team_id\"">$team_name</option>""; } echo ""</select>""; ?>"
"192","bad","<?php if( isset($_POST) ){ //form validation vars $formok = true; $errors = array(); //sumbission data $ipaddress = $_SERVER['REMOTE_ADDR']; // //form data // //Services if(isset($_POST['services'])) { $services = $_POST['services']; } else { $services = array( 'Neck' => NULL, 'Back' => NULL, 'Other' => NULL, ); } $firstname = $_POST['firstname']; $lastname = $_POST['lastname']; $email = $_POST['email']; $telephone = $_POST['telephone']; $TelephoneSanitized = preg_replace(""/[^0-9]/"", """", $telephone); //format phone as number only //if phone number does not start with 1, and the length is less than 11 characters, add the 1 to the beginning if ((substr($TelephoneSanitized, 0, 1) != '1') && (strlen($TelephoneSanitized) < 11)) { $TelephoneSanitized = ""1"".$TelephoneSanitized; } //$state = strip_tags($_POST['state']); $location = $_POST['location']; $message = $_POST['message']; $leadsource = $_POST['leadsource']; $refId = $_POST['refId']; $isconsult = $_POST['isconsult']; //Third Party Emails if(isset($_POST['receiveThirdPtyEmails'])) { $receiveThirdPtyEmails = strip_tags($_POST['receiveThirdPtyEmails']); } else { $receiveThirdPtyEmails = NULL; } // //validation // //validate location has been set if($location == 0){ $formok = false; $errors[] = ""Please select your nearest location""; } //validate name is not empty if(empty($firstname)){ $formok = false; $errors[] = ""Please enter your first name""; } if(empty($lastname)){ $formok = false; $errors[] = ""Please enter your last name""; } //validate email address is not empty if(empty($email)){ $formok = false; $errors[] = ""Please enter your email address""; //validate email address is valid }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){ $formok = false; $errors[] = ""You have not entered a valid email address""; } //validate phone is not empty if(empty($telephone)){ $formok = false; $errors[] = ""Please enter your phone number""; } //validate phone is at least 10 characters elseif(strlen($TelephoneSanitized) < 10){ $formok = false; $errors[] = ""Your phone number must be at least 10 characters""; } //what we need to return back to our form $returndata = array( 'posted_form_data' => array( 'services' => $services, 'firstname' => $firstname, 'lastname' => $lastname, 'email' => $email, 'telephone' => $telephone, //'state' => $state, 'location' => $location, 'message' => $message ), 'form_ok' => $formok, 'errors' => $errors, ); //if this is not an ajax request if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){ //set session variables session_start(); $_SESSION['cf_returndata'] = $returndata; //redirect back to form header('location: ' . $_SERVER['HTTP_REFERER']); } // //send to web service if all is ok // if($formok){ //build query string $fields = array('services' => $services, 'location' => $location, 'firstname' => $firstname, 'lastname' => $lastname, 'email' => $email, 'emailconfirm' => $email, 'phone' => $TelephoneSanitized, 'comments' => $message, 'refid' => $refId, 'leadsource' => $leadsource, 'isconsult' => $isconsult, 'receiveThirdPtyEmails' => $receiveThirdPtyEmails); $url = ""http://fake.aspx?"" . http_build_query($fields, '', ""&""); $url = preg_replace('/%5B[a-zA-Z]+%5D/', '', $url); $curl_handle = curl_init($url); curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true); $results = curl_exec($curl_handle); curl_close($curl_handle); } // //save data to mysql if all is ok PDO // if($formok){ // Connecting to the MySQL server $host=""fakehost-on the same server as form""; $user_name=""fakeuser""; $pwd=""fakepass""; $database_name=""fakedb""; $services = implode(',',array_filter($services)); // change array to string date_default_timezone_set('America/New_York'); $date = date('m/d/Y h:i:s a', time()); $date = date(""Y-m-d H:i:s"",strtotime($date)); // mysql try { //connect to db $conn = new PDO(""mysql:host=$host;dbname=$database_name"", $user_name, $pwd); //set error handling $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); //prepare statement $q = $conn->prepare(""INSERT INTO leads (ip_address, lead_time, location, first_name, last_name, email_address, telephone, comments, services, receiveThirdPtyEmails, leadsource, refid) VALUES (:ip_address, :lead_time, :location, :first_name, :last_name, :email_address, :telephone, :comments, :services, :receiveThirdPtyEmails, :leadsource, :refid)""); //execute statement $q->execute(array( ':ip_address'=>$ipaddress, ':lead_time'=>$date, ':location'=>$location, ':first_name'=>$firstname, ':last_name'=>$lastname, ':email_address'=>$email, ':telephone'=>$TelephoneSanitized, ':comments'=>$message, ':services'=>$services, ':receiveThirdPtyEmails'=>$receiveThirdPtyEmails, ':leadsource'=>$leadsource, ':refid'=>$refId)); } catch(PDOException $e) { $error_code = $e->getMessage(); // Specify the error code $error_type = ""SQL Insert Failed""; require_once(""resources/error-mailer.php""); // Include the error mailer script } # close the connection $conn = null; } }"
"193","bad","<?php if( isset($_POST) ){ //form validation vars $formok = true; $errors = array(); //sumbission data $ipaddress = $_SERVER['REMOTE_ADDR']; // //form data // //Services if(isset($_POST['services'])) { $services = $_POST['services']; } else { $services = array( 'Neck' => NULL, 'Back' => NULL, 'Other' => NULL, ); } $firstname = $_POST['firstname']; $lastname = $_POST['lastname']; $email = $_POST['email']; $telephone = $_POST['telephone']; $TelephoneSanitized = preg_replace(""/[^0-9]/"", """", $telephone); //format phone as number only //if phone number does not start with 1, and the length is less than 11 characters, add the 1 to the beginning if ((substr($TelephoneSanitized, 0, 1) != '1') && (strlen($TelephoneSanitized) < 11)) { $TelephoneSanitized = ""1"".$TelephoneSanitized; } //$state = strip_tags($_POST['state']); $location = $_POST['location']; $message = $_POST['message']; $leadsource = $_POST['leadsource']; $refId = $_POST['refId']; $isconsult = $_POST['isconsult']; //Third Party Emails if(isset($_POST['receiveThirdPtyEmails'])) { $receiveThirdPtyEmails = strip_tags($_POST['receiveThirdPtyEmails']); } else { $receiveThirdPtyEmails = NULL; } // //validation // //validate location has been set if($location == 0){ $formok = false; $errors[] = ""Please select your nearest location""; } //validate name is not empty if(empty($firstname)){ $formok = false; $errors[] = ""Please enter your first name""; } if(empty($lastname)){ $formok = false; $errors[] = ""Please enter your last name""; } //validate email address is not empty if(empty($email)){ $formok = false; $errors[] = ""Please enter your email address""; //validate email address is valid }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){ $formok = false; $errors[] = ""You have not entered a valid email address""; } //validate phone is not empty if(empty($telephone)){ $formok = false; $errors[] = ""Please enter your phone number""; } //validate phone is at least 10 characters elseif(strlen($TelephoneSanitized) < 10){ $formok = false; $errors[] = ""Your phone number must be at least 10 characters""; } //what we need to return back to our form $returndata = array( 'posted_form_data' => array( 'services' => $services, 'firstname' => $firstname, 'lastname' => $lastname, 'email' => $email, 'telephone' => $telephone, //'state' => $state, 'location' => $location, 'message' => $message ), 'form_ok' => $formok, 'errors' => $errors, ); //if this is not an ajax request if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){ //set session variables session_start(); $_SESSION['cf_returndata'] = $returndata; //redirect back to form header('location: ' . $_SERVER['HTTP_REFERER']); } // //send to web service if all is ok // if($formok){ //build query string $fields = array('services' => $services, 'location' => $location, 'firstname' => $firstname, 'lastname' => $lastname, 'email' => $email, 'emailconfirm' => $email, 'phone' => $TelephoneSanitized, 'comments' => $message, 'refid' => $refId, 'leadsource' => $leadsource, 'isconsult' => $isconsult, 'receiveThirdPtyEmails' => $receiveThirdPtyEmails); $url = ""http://fake.aspx?"" . http_build_query($fields, '', ""&""); $url = preg_replace('/%5B[a-zA-Z]+%5D/', '', $url); $curl_handle = curl_init($url); curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true); $results = curl_exec($curl_handle); curl_close($curl_handle); } // //save data to mysql if all is ok PDO // if($formok){ // Connecting to the MySQL server $host=""fakehost-on the same server as form""; $user_name=""fakeuser""; $pwd=""fakepass""; $database_name=""fakedb""; $services = implode(',',array_filter($services)); // change array to string date_default_timezone_set('America/New_York'); $date = date('m/d/Y h:i:s a', time()); $date = date(""Y-m-d H:i:s"",strtotime($date)); // mysql try { //connect to db $conn = new PDO(""mysql:host=$host;dbname=$database_name"", $user_name, $pwd); //set error handling $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); //prepare statement $q = $conn->prepare(""INSERT INTO leads (ip_address, lead_time, location, first_name, last_name, email_address, telephone, comments, services, receiveThirdPtyEmails, leadsource, refid) VALUES (:ip_address, :lead_time, :location, :first_name, :last_name, :email_address, :telephone, :comments, :services, :receiveThirdPtyEmails, :leadsource, :refid)""); //execute statement $q->execute(array( ':ip_address'=>$ipaddress, ':lead_time'=>$date, ':location'=>$location, ':first_name'=>$firstname, ':last_name'=>$lastname, ':email_address'=>$email, ':telephone'=>$TelephoneSanitized, ':comments'=>$message, ':services'=>$services, ':receiveThirdPtyEmails'=>$receiveThirdPtyEmails, ':leadsource'=>$leadsource, ':refid'=>$refId)); } catch(PDOException $e) { $error_code = $e->getMessage(); // Specify the error code $error_type = ""SQL Insert Failed""; require_once(""resources/error-mailer.php""); // Include the error mailer script } # close the connection $conn = null; } }"
"194","bad","<?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php $email = $_POST['Email']; $hashed_password = md5($_POST['password']); if (isset($_POST['submit'])) { // Form has been submitted. if ($_POST['Email'] == """") { $error = ""Email address is required""; } elseif (!(filter_var($_POST['Email'], FILTER_VALIDATE_EMAIL))) { $error = ""Invalid email address""; } elseif ($_POST['password'] == """") { $error = ""Type in your password""; } elseif (strlen($_POST['password']) < 8) { $error = ""Minimum password length is 8""; } elseif { $query = ""SELECT id, email ""; $query .= ""FROM customers ""; $query .= ""WHERE email = '{$email}' ""; $query .= ""AND hashed_password = '{$hashed_password}' ""; $query .= ""LIMIT 1""; $result_set = mysql_query($query); redirect_to(""account.php""); } else { echo ""error""; } } ?> <!-- signup box --> <div id=""box_sign""> <div class=""container""> <div class=""span12 box_wrapper""> <div class=""span12 box""> <div> <div class=""head""> <h4>Sign In</h4><br /> <div class=""text-error""> <?php echo $error; ?><br /> <p class=""text-success""><strong><?php echo $success; ?></strong></p> </div> </div> <div class=""form""> <form action=""sign-in.php"" method=""POST""> <input type=""text"" id=""Email"" name=""Email"" placeholder=""Email""/> <input type=""password"" id=""password"" name=""password"" placeholder=""Password""/> <div class=""right""> <a href=""reset.html"">Forgot password?</a> </div> <input type=""submit"" name=""submit"" class=""btn"" value=""Sign In""/> </form> </div> </div> </div> <p class=""already"">Don't have an account? <a href=""signin.html"">Sign up</a></p> </div> </div> </div>"
"195","bad","<?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php $email = $_POST['Email']; $hashed_password = md5($_POST['password']); if (isset($_POST['submit'])) { // Form has been submitted. if ($_POST['Email'] == """") { $error = ""Email address is required""; } elseif (!(filter_var($_POST['Email'], FILTER_VALIDATE_EMAIL))) { $error = ""Invalid email address""; } elseif ($_POST['password'] == """") { $error = ""Type in your password""; } elseif (strlen($_POST['password']) < 8) { $error = ""Minimum password length is 8""; } elseif { $query = ""SELECT id, email ""; $query .= ""FROM customers ""; $query .= ""WHERE email = '{$email}' ""; $query .= ""AND hashed_password = '{$hashed_password}' ""; $query .= ""LIMIT 1""; $result_set = mysql_query($query); redirect_to(""account.php""); } else { echo ""error""; } } ?> <!-- signup box --> <div id=""box_sign""> <div class=""container""> <div class=""span12 box_wrapper""> <div class=""span12 box""> <div> <div class=""head""> <h4>Sign In</h4><br /> <div class=""text-error""> <?php echo $error; ?><br /> <p class=""text-success""><strong><?php echo $success; ?></strong></p> </div> </div> <div class=""form""> <form action=""sign-in.php"" method=""POST""> <input type=""text"" id=""Email"" name=""Email"" placeholder=""Email""/> <input type=""password"" id=""password"" name=""password"" placeholder=""Password""/> <div class=""right""> <a href=""reset.html"">Forgot password?</a> </div> <input type=""submit"" name=""submit"" class=""btn"" value=""Sign In""/> </form> </div> </div> </div> <p class=""already"">Don't have an account? <a href=""signin.html"">Sign up</a></p> </div> </div> </div>"
"196","bad","<?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php $email = $_POST['Email']; $hashed_password = md5($_POST['password']); if (isset($_POST['submit'])) { // Form has been submitted. if ($_POST['Email'] == """") { $error = ""Email address is required""; } elseif (!(filter_var($_POST['Email'], FILTER_VALIDATE_EMAIL))) { $error = ""Invalid email address""; } elseif ($_POST['password'] == """") { $error = ""Type in your password""; } elseif (strlen($_POST['password']) < 8) { $error = ""Minimum password length is 8""; } elseif { $query = ""SELECT id, email ""; $query .= ""FROM customers ""; $query .= ""WHERE email = '{$email}' ""; $query .= ""AND hashed_password = '{$hashed_password}' ""; $query .= ""LIMIT 1""; $result_set = mysql_query($query); redirect_to(""account.php""); } else { echo ""error""; } } ?> <!-- signup box --> <div id=""box_sign""> <div class=""container""> <div class=""span12 box_wrapper""> <div class=""span12 box""> <div> <div class=""head""> <h4>Sign In</h4><br /> <div class=""text-error""> <?php echo $error; ?><br /> <p class=""text-success""><strong><?php echo $success; ?></strong></p> </div> </div> <div class=""form""> <form action=""sign-in.php"" method=""POST""> <input type=""text"" id=""Email"" name=""Email"" placeholder=""Email""/> <input type=""password"" id=""password"" name=""password"" placeholder=""Password""/> <div class=""right""> <a href=""reset.html"">Forgot password?</a> </div> <input type=""submit"" name=""submit"" class=""btn"" value=""Sign In""/> </form> </div> </div> </div> <p class=""already"">Don't have an account? <a href=""signin.html"">Sign up</a></p> </div> </div> </div>"
"197","bad","<?php require_once(""includes/connection.php""); ?> <?php require_once(""includes/functions.php""); ?> <?php $email = $_POST['Email']; $hashed_password = md5($_POST['password']); if (isset($_POST['submit'])) { // Form has been submitted. if ($_POST['Email'] == """") { $error = ""Email address is required""; } elseif (!(filter_var($_POST['Email'], FILTER_VALIDATE_EMAIL))) { $error = ""Invalid email address""; } elseif ($_POST['password'] == """") { $error = ""Type in your password""; } elseif (strlen($_POST['password']) < 8) { $error = ""Minimum password length is 8""; } elseif { $query = ""SELECT id, email ""; $query .= ""FROM customers ""; $query .= ""WHERE email = '{$email}' ""; $query .= ""AND hashed_password = '{$hashed_password}' ""; $query .= ""LIMIT 1""; $result_set = mysql_query($query); redirect_to(""account.php""); } else { echo ""error""; } } ?> <!-- signup box --> <div id=""box_sign""> <div class=""container""> <div class=""span12 box_wrapper""> <div class=""span12 box""> <div> <div class=""head""> <h4>Sign In</h4><br /> <div class=""text-error""> <?php echo $error; ?><br /> <p class=""text-success""><strong><?php echo $success; ?></strong></p> </div> </div> <div class=""form""> <form action=""sign-in.php"" method=""POST""> <input type=""text"" id=""Email"" name=""Email"" placeholder=""Email""/> <input type=""password"" id=""password"" name=""password"" placeholder=""Password""/> <div class=""right""> <a href=""reset.html"">Forgot password?</a> </div> <input type=""submit"" name=""submit"" class=""btn"" value=""Sign In""/> </form> </div> </div> </div> <p class=""already"">Don't have an account? <a href=""signin.html"">Sign up</a></p> </div> </div> </div>"
"198","good","<form id=""classifiedsForm"" enctype=""multipart/form-data"" action=""{$self}"" method=""post"" autocomplete=""off""> <fieldset> <label>Basic Details</label> <section> <label for=""headline"">Headline</label> <div><input type=""text"" id=""headline"" name=""headline"" required title=""A headline for your ad""> </div> </section> <section><label for=""img"">Add an image<br><span>Image should be 300x300px and jpg or png. Don't worry. We do the curvy corners thing.</span></label> <div> <input type=""file"" id=""img"" name=""img""> </div> </section> <section> <label for=""description"">Description</label> <div><input type=""text"" id=""description"" name=""description"" required title=""A description for your ad""> </div> </section> <section> <label for=""contact"">Contact</label> <div><input type=""text"" id=""contact"" name=""contact"" required title=""A contact email address""> </div> </section> <section> <label for=""category"">Category</label> <div> <select name=""category"" id=""country""> <optgroup label=""Category""> {foreach item=c from=$categories} <option name=""category"" value=""{$c.name}"">{$c.name}</option> {/foreach} </optgroup> </select> </div> </section> <section> <label for=""buySell"">Sign up to newsletter?</label> <div> <input type=""radio"" id=""yes_radio"" name=""buySell"" value=""1""><label>Buy</label> <input type=""radio"" id=""no_radio"" name=""buySell"" value=""0""><label>Sell</label> </div> </section> <section> <div> <button name=""submit"" class=""submit"" value=""update"" type=""submit"">Update</button> </div> </section> </fieldset> </form>include '../common.php'; session_start(); $userID = $_SESSION['email']['id']; if(empty($_SESSION['email'])) { header(""Location: ../login.php""); die(""Redirecting to login.php""); } $title = 'Your Profile'; //CATEGORIES QUERY try { $sql = ""SELECT * FROM `categories` ORDER BY `name` ASC""; $result = $pdo->query($sql); } catch (PDOException $e) { $error = 'Error fetching classifieds: ' . $e->getMessage(); include '../includes/error.html.php'; exit(); } foreach ($result as $row) { $categories[] = array( 'id' => $row['id'], 'name' => $row['name']); } if ($_SERVER['REQUEST_METHOD'] == ""POST""){ try { $sql = ""INSERT INTO `classifieds` SET `headline` = :headline, `description` = :description, `contact` = :contact, `buySell` = :buySell, `category` = :category, `user_id` = $userID""; $s = $pdo->prepare($sql); $s->bindValue(':headline', $_POST['headline']); $s->bindValue(':description', $_POST['description']); $s->bindValue(':contact', $_POST['contact']); $s->bindValue(':buySell', $_POST['buySell']); $s->bindValue(':category',$_POST['category']); $s->bindValue(':userID', $userID); $s->execute(); } catch (PDOException $e) { $error = 'Error adding advert.'; include '../includes/error.html.php'; exit(); } } $smarty->assign('title', $title); $smarty->assign('categories', $categories); $smarty->assign('userID', $userID); $smarty->display('add-classifieds.tpl');CREATE TABLE `classifieds` ( `id` int(11) NOT NULL AUTO_INCREMENT, `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `headline` varchar(255) NOT NULL, `img` varchar(255) DEFAULT NULL, `description` varchar(255) NOT NULL, `contact` varchar(255) NOT NULL, `buySell` int(1) NOT NULL, `category` varchar(255) NOT NULL, `user_id` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `user_id` (`user_id`) ) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=latin1;"
"199","good","<html> <body> <?php $host = 'localhost'; $user = 'users'; $pw = ''; $db = '#######'; $connect = mysql_connect($host,$user,$pw) or die (""Could not connect.""); mysql_select_db($db); $sql = mysql_query(""INSERT INTO users VALUES ('','l','l','l','l','l','l')""); if(mysql_query($sql)){ print ""Item added successfully.<br/>""; } else{ print ""Item addition failed.<br/>""; } ?> </body> </html>users"
"200","bad","$query = $_GET['query']; $sql =""SELECT f_name, l_name FROM student WHERE (f_name ILIKE '%$query%' OR l_name ILIKE '%$query%'); $result = pg_query($con, $sql); while ($row = pg_fetch_array($result)) { $names[] = array('f_name' => $row[0], 'l_name' => $row[1]); } $name_list = array(); $name_list['success'] = true; $name_list['names'] = $names; $name_list['totalCount'] = count( $name_list['names'] ); echo json_encode($name_list); Ext.define(""Post"", { extend: 'Ext.data.Model', proxy: { type: 'ajax', url: 'app/search.php', reader: { type: 'json', root: 'names', autoLoad: true, totalProperty: 'totalCount' } }, fields: ['f_name','l_name' , { name : 'display', convert : function(v, rec) { return rec.get('f_name') + ',' + rec.get('l_name'); } } ] });"
"201","bad","$query = $_GET['query']; $sql =""SELECT f_name, l_name FROM student WHERE (f_name ILIKE '%$query%' OR l_name ILIKE '%$query%'); $result = pg_query($con, $sql); while ($row = pg_fetch_array($result)) { $names[] = array('f_name' => $row[0], 'l_name' => $row[1]); } $name_list = array(); $name_list['success'] = true; $name_list['names'] = $names; $name_list['totalCount'] = count( $name_list['names'] ); echo json_encode($name_list); Ext.define(""Post"", { extend: 'Ext.data.Model', proxy: { type: 'ajax', url: 'app/search.php', reader: { type: 'json', root: 'names', autoLoad: true, totalProperty: 'totalCount' } }, fields: ['f_name','l_name' , { name : 'display', convert : function(v, rec) { return rec.get('f_name') + ',' + rec.get('l_name'); } } ] });"
"202","bad","$query = $_GET['query']; $sql =""SELECT f_name, l_name FROM student WHERE (f_name ILIKE '%$query%' OR l_name ILIKE '%$query%'); $result = pg_query($con, $sql); while ($row = pg_fetch_array($result)) { $names[] = array('f_name' => $row[0], 'l_name' => $row[1]); } $name_list = array(); $name_list['success'] = true; $name_list['names'] = $names; $name_list['totalCount'] = count( $name_list['names'] ); echo json_encode($name_list); Ext.define(""Post"", { extend: 'Ext.data.Model', proxy: { type: 'ajax', url: 'app/search.php', reader: { type: 'json', root: 'names', autoLoad: true, totalProperty: 'totalCount' } }, fields: ['f_name','l_name' , { name : 'display', convert : function(v, rec) { return rec.get('f_name') + ',' + rec.get('l_name'); } } ] });"
"203","bad","<?php $data = A string format data; $con=""host=localhost dbname=database user=postgres password=great""; $dbcon= pg_connect($con); $sql=""INSERT INTO polygons(geometry) VALUES (ST_GeomFromText(('$data'))""; $result= pg_query($dbcon,$pgsql); ?>$data"
"204","bad","<?php $data = A string format data; $con=""host=localhost dbname=database user=postgres password=great""; $dbcon= pg_connect($con); $sql=""INSERT INTO polygons(geometry) VALUES (ST_GeomFromText(('$data'))""; $result= pg_query($dbcon,$pgsql); ?>$data"
"205","bad","<td class=""hours"" colspan=""2""> <?php $hour3 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 4 ORDER BY e.emp_id ASC""); while($time3 = mysql_fetch_array($hour3)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time3['timestart'])); $ending = date(""g:ia"", strtotime($time3['timeend'])); if ($time3['work'] == '1') { if ($time3['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time3['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time3['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time3['work'] == '0') { if ($time3['work_type'] == '1') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time3['work_type'] == '2') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time3['work_type'] == '3') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time3['work_type'] == '4') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time3['work_type'] == '0') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour4 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 5 ORDER BY e.emp_id ASC""); while($time4 = mysql_fetch_array($hour4)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time4['timestart'])); $ending = date(""g:ia"", strtotime($time4['timeend'])); if ($time4['work'] == '1') { if ($time4['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time4['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time4['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time4['work'] == '0') { if ($time4['work_type'] == '1') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time4['work_type'] == '2') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time4['work_type'] == '3') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time4['work_type'] == '4') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time4['work_type'] == '0') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour5 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 6 ORDER BY e.emp_id ASC""); while($time5 = mysql_fetch_array($hour5)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time5['timestart'])); $ending = date(""g:ia"", strtotime($time5['timeend'])); if ($time5['work'] == '1') { if ($time5['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time5['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time5['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time5['work'] == '0') { if ($time5['work_type'] == '1') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time5['work_type'] == '2') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time5['work_type'] == '3') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time5['work_type'] == '4') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time5['work_type'] == '0') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour6 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 7), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time6 = mysql_fetch_array($hour6)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time6['timestart'])); $ending = date(""g:ia"", strtotime($time6['timeend'])); if ($time6['work'] == '1') { if ($time6['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time6['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time6['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time6['work'] == '0') { if ($time6['work_type'] == '1') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time6['work_type'] == '2') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time6['work_type'] == '3') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time6['work_type'] == '4') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time6['work_type'] == '0') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour0 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 1), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time0 = mysql_fetch_array($hour0)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time0['timestart'])); $ending = date(""g:ia"", strtotime($time0['timeend'])); if ($time0['work'] == '1') { if ($time0['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time0['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time0['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time0['work'] == '0') { if ($time0['work_type'] == '1') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time0['work_type'] == '2') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time0['work_type'] == '3') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time0['work_type'] == '4') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time0['work_type'] == '0') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour1 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 2), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time1 = mysql_fetch_array($hour1)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time1['timestart'])); $ending = date(""g:ia"", strtotime($time1['timeend'])); if ($time1['work'] == '1') { if ($time1['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time1['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time1['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time1['work'] == '0') { if ($time1['work_type'] == '1') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time1['work_type'] == '2') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time1['work_type'] == '3') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time1['work_type'] == '4') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time1['work_type'] == '0') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hoursboth"" colspan=""2""> <?php $hour2 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 3), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time2 = mysql_fetch_array($hour2)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time2['timestart'])); $ending = date(""g:ia"", strtotime($time2['timeend'])); if ($time2['work'] == '1') { if ($time2['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time2['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time2['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time2['work'] == '0') { if ($time2['work_type'] == '1') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time2['work_type'] == '2') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time2['work_type'] == '3') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time2['work_type'] == '4') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time2['work_type'] == '0') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td>"
"206","bad","<td class=""hours"" colspan=""2""> <?php $hour3 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 4 ORDER BY e.emp_id ASC""); while($time3 = mysql_fetch_array($hour3)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time3['timestart'])); $ending = date(""g:ia"", strtotime($time3['timeend'])); if ($time3['work'] == '1') { if ($time3['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time3['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time3['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time3['work'] == '0') { if ($time3['work_type'] == '1') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time3['work_type'] == '2') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time3['work_type'] == '3') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time3['work_type'] == '4') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time3['work_type'] == '0') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour4 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 5 ORDER BY e.emp_id ASC""); while($time4 = mysql_fetch_array($hour4)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time4['timestart'])); $ending = date(""g:ia"", strtotime($time4['timeend'])); if ($time4['work'] == '1') { if ($time4['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time4['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time4['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time4['work'] == '0') { if ($time4['work_type'] == '1') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time4['work_type'] == '2') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time4['work_type'] == '3') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time4['work_type'] == '4') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time4['work_type'] == '0') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour5 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 6 ORDER BY e.emp_id ASC""); while($time5 = mysql_fetch_array($hour5)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time5['timestart'])); $ending = date(""g:ia"", strtotime($time5['timeend'])); if ($time5['work'] == '1') { if ($time5['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time5['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time5['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time5['work'] == '0') { if ($time5['work_type'] == '1') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time5['work_type'] == '2') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time5['work_type'] == '3') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time5['work_type'] == '4') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time5['work_type'] == '0') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour6 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 7), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time6 = mysql_fetch_array($hour6)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time6['timestart'])); $ending = date(""g:ia"", strtotime($time6['timeend'])); if ($time6['work'] == '1') { if ($time6['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time6['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time6['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time6['work'] == '0') { if ($time6['work_type'] == '1') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time6['work_type'] == '2') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time6['work_type'] == '3') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time6['work_type'] == '4') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time6['work_type'] == '0') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour0 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 1), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time0 = mysql_fetch_array($hour0)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time0['timestart'])); $ending = date(""g:ia"", strtotime($time0['timeend'])); if ($time0['work'] == '1') { if ($time0['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time0['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time0['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time0['work'] == '0') { if ($time0['work_type'] == '1') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time0['work_type'] == '2') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time0['work_type'] == '3') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time0['work_type'] == '4') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time0['work_type'] == '0') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour1 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 2), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time1 = mysql_fetch_array($hour1)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time1['timestart'])); $ending = date(""g:ia"", strtotime($time1['timeend'])); if ($time1['work'] == '1') { if ($time1['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time1['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time1['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time1['work'] == '0') { if ($time1['work_type'] == '1') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time1['work_type'] == '2') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time1['work_type'] == '3') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time1['work_type'] == '4') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time1['work_type'] == '0') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hoursboth"" colspan=""2""> <?php $hour2 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 3), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time2 = mysql_fetch_array($hour2)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time2['timestart'])); $ending = date(""g:ia"", strtotime($time2['timeend'])); if ($time2['work'] == '1') { if ($time2['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time2['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time2['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time2['work'] == '0') { if ($time2['work_type'] == '1') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time2['work_type'] == '2') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time2['work_type'] == '3') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time2['work_type'] == '4') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time2['work_type'] == '0') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td>"
"207","bad","<td class=""hours"" colspan=""2""> <?php $hour3 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 4 ORDER BY e.emp_id ASC""); while($time3 = mysql_fetch_array($hour3)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time3['timestart'])); $ending = date(""g:ia"", strtotime($time3['timeend'])); if ($time3['work'] == '1') { if ($time3['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time3['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time3['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time3['work'] == '0') { if ($time3['work_type'] == '1') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time3['work_type'] == '2') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time3['work_type'] == '3') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time3['work_type'] == '4') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time3['work_type'] == '0') { if ($time3['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour4 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 5 ORDER BY e.emp_id ASC""); while($time4 = mysql_fetch_array($hour4)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time4['timestart'])); $ending = date(""g:ia"", strtotime($time4['timeend'])); if ($time4['work'] == '1') { if ($time4['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time4['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time4['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time4['work'] == '0') { if ($time4['work_type'] == '1') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time4['work_type'] == '2') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time4['work_type'] == '3') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time4['work_type'] == '4') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time4['work_type'] == '0') { if ($time4['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour5 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DAYOFWEEK(h.date) = 6 ORDER BY e.emp_id ASC""); while($time5 = mysql_fetch_array($hour5)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time5['timestart'])); $ending = date(""g:ia"", strtotime($time5['timeend'])); if ($time5['work'] == '1') { if ($time5['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time5['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time5['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time5['work'] == '0') { if ($time5['work_type'] == '1') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time5['work_type'] == '2') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time5['work_type'] == '3') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time5['work_type'] == '4') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time5['work_type'] == '0') { if ($time5['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour6 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 7), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time6 = mysql_fetch_array($hour6)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time6['timestart'])); $ending = date(""g:ia"", strtotime($time6['timeend'])); if ($time6['work'] == '1') { if ($time6['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time6['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time6['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time6['work'] == '0') { if ($time6['work_type'] == '1') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time6['work_type'] == '2') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time6['work_type'] == '3') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time6['work_type'] == '4') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time6['work_type'] == '0') { if ($time6['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour0 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 1), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time0 = mysql_fetch_array($hour0)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time0['timestart'])); $ending = date(""g:ia"", strtotime($time0['timeend'])); if ($time0['work'] == '1') { if ($time0['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time0['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time0['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time0['work'] == '0') { if ($time0['work_type'] == '1') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time0['work_type'] == '2') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time0['work_type'] == '3') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time0['work_type'] == '4') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time0['work_type'] == '0') { if ($time0['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hours"" colspan=""2""> <?php $hour1 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 2), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time1 = mysql_fetch_array($hour1)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time1['timestart'])); $ending = date(""g:ia"", strtotime($time1['timeend'])); if ($time1['work'] == '1') { if ($time1['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time1['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time1['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time1['work'] == '0') { if ($time1['work_type'] == '1') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time1['work_type'] == '2') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time1['work_type'] == '3') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time1['work_type'] == '4') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time1['work_type'] == '0') { if ($time1['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td> <td class=""hoursboth"" colspan=""2""> <?php $hour2 = mysql_query(""SELECT h.* FROM hours AS h, employees AS e WHERE h.s_id = '"" .$s_id. ""' AND e.u_id = h.u_id AND DATE_ADD((DAYOFWEEK(h.date) = 3), INTERVAL 7 DAY) ORDER BY e.emp_id ASC""); while($time2 = mysql_fetch_array($hour2)) { ?> <div class=""hours""> <?php $starting = date(""g:ia"", strtotime($time2['timestart'])); $ending = date(""g:ia"", strtotime($time2['timeend'])); if ($time2['work'] == '1') { if ($time2['why_off'] == '1') {echo ""<div class='off'>OFF [R]</div>"";} elseif ($time2['why_off'] == '2') {echo ""<div class='off'>OFF [ML]</div>"";} elseif ($time2['why_off'] == '0') {echo ""<div class='off'>OFF</div>"";} } elseif ($time2['work'] == '0') { if ($time2['work_type'] == '1') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TL]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TL]</div>"";} } elseif ($time2['work_type'] == '2') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[SF]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[SF]</div>"";} } elseif ($time2['work_type'] == '3') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[-/+]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[-/+]</div>"";} } elseif ($time2['work_type'] == '4') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close<br>[TR]</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""<br>[TR]</div>"";} } elseif ($time2['work_type'] == '0') { if ($time2['timeend'] == '23:00:00') {echo ""<div class='working_w'>"".$starting."" - Close</div>"";} else {echo ""<div class='working_w'>"".$starting."" - "".$ending.""</div>"";} } }?> </div> <?php } ?> </td>"
"208","bad","funds_transfer_backend.phpsession_start(); if(!isset($_SESSION['myusername'])) { header(""Location: ../index.html""); die(); } include(""../connect.php""); $myusername = $_SESSION['myusername']; $sql=""SELECT client_id FROM `client` WHERE username='$myusername'""; $result=mysqli_query($conn, $sql); while ($row=mysqli_fetch_row($result)){ $id = $row['0']; } $index_num = $_POST['index_num']; $to_account_num = $_POST['recipient']; $amount = $_POST['amount']; if ($amount == '' || $to_account_num == '' || $index_num == -1){ //echo ""Please complete the form!""; $response = -1; } else { // check account number exist $query2 = ""SELECT 1 FROM account WHERE id='$to_account_num' LIMIT 1""; if (mysqli_num_rows(mysqli_query($conn, $query2))!=1) { //echo ""Recipient account number is invalid!""; $response = -2; } else { $query2 = ""SELECT client.name, client.email FROM account JOIN client USING (client_id) WHERE account.id = '$to_account_num' LIMIT 1""; $result=mysqli_query($conn, $query2); while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) { $name = $row['name']; $email = $row['email']; } $response = 1; } } // check account num else bracket $display = array('response' => $response, 'name' => $name); echo json_encode($display);'name' => $name#stagefunds_transfer.php<script type=""text/javascript""> function update() { var two = $('#index_num').val(); var three = $('#recipient_box').val(); var five = $('#amount_box').val(); $.post(""funds_transfer_backend.php"", { index_num : two, recipient : three, amount : five },function(data){ if (data.response==-1) { $('#stage').show().html(""Please complete the form!""); } $('#stage').delay(2000).fadeOut(); },""json""); } </script> ...other code goes here <div id=""stage"" style=""background-color:#FF6666; padding-left:20px; color: white;""></div> <div id=""confirm"" style=""background-color:#FF7800; padding-left:20px; color: white;""></div>method=""post"""
"209","bad","funds_transfer_backend.phpsession_start(); if(!isset($_SESSION['myusername'])) { header(""Location: ../index.html""); die(); } include(""../connect.php""); $myusername = $_SESSION['myusername']; $sql=""SELECT client_id FROM `client` WHERE username='$myusername'""; $result=mysqli_query($conn, $sql); while ($row=mysqli_fetch_row($result)){ $id = $row['0']; } $index_num = $_POST['index_num']; $to_account_num = $_POST['recipient']; $amount = $_POST['amount']; if ($amount == '' || $to_account_num == '' || $index_num == -1){ //echo ""Please complete the form!""; $response = -1; } else { // check account number exist $query2 = ""SELECT 1 FROM account WHERE id='$to_account_num' LIMIT 1""; if (mysqli_num_rows(mysqli_query($conn, $query2))!=1) { //echo ""Recipient account number is invalid!""; $response = -2; } else { $query2 = ""SELECT client.name, client.email FROM account JOIN client USING (client_id) WHERE account.id = '$to_account_num' LIMIT 1""; $result=mysqli_query($conn, $query2); while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) { $name = $row['name']; $email = $row['email']; } $response = 1; } } // check account num else bracket $display = array('response' => $response, 'name' => $name); echo json_encode($display);'name' => $name#stagefunds_transfer.php<script type=""text/javascript""> function update() { var two = $('#index_num').val(); var three = $('#recipient_box').val(); var five = $('#amount_box').val(); $.post(""funds_transfer_backend.php"", { index_num : two, recipient : three, amount : five },function(data){ if (data.response==-1) { $('#stage').show().html(""Please complete the form!""); } $('#stage').delay(2000).fadeOut(); },""json""); } </script> ...other code goes here <div id=""stage"" style=""background-color:#FF6666; padding-left:20px; color: white;""></div> <div id=""confirm"" style=""background-color:#FF7800; padding-left:20px; color: white;""></div>method=""post"""
"210","bad","<form action='' method='POST'> <table cellspacing='0' cellpadding='0'> <tr> <td valign='top'> <input type='text' name='Username' id='Username' placeholder='Enter your username.'> </td> <td valign='top'> <input type='submit' name='Submit' id='SubmitRegister' value=''> </td> </tr> </table> <font style='font-size:13px;color:#aaa;'>3-20 alphanumeric characters - no spaces</font> </form>$Username = secure($_POST['Username']); $Submit = secure($_POST['Submit']);if ($Submit) { echo ""Test""; }function secure($value) { $value = mysql_real_escape_string(strip_tags(stripslashes($value))); return $value; }"
"211","bad","<form action='' method='POST'> <table cellspacing='0' cellpadding='0'> <tr> <td valign='top'> <input type='text' name='Username' id='Username' placeholder='Enter your username.'> </td> <td valign='top'> <input type='submit' name='Submit' id='SubmitRegister' value=''> </td> </tr> </table> <font style='font-size:13px;color:#aaa;'>3-20 alphanumeric characters - no spaces</font> </form>$Username = secure($_POST['Username']); $Submit = secure($_POST['Submit']);if ($Submit) { echo ""Test""; }function secure($value) { $value = mysql_real_escape_string(strip_tags(stripslashes($value))); return $value; }"
"212","good","$field = $_POST['dropdownlistname'];<form name=""searchForm"" action=""newCustomerSearchform.php"" method=""post""> <label><span></span> <input type=""text"" name=""searchDB"" /></label> <button type=""submit"" name=""btnSearch"" value=""Search"" id=""btnSearch"" onclick=""this.form.action"">Search</button></label> <?php echo '<select name=""customers"">'; foreach ($_SESSION['names'] as $option => $value) { echo '<option value='.$value['ID'].'>'.$value['First_Name'].' '.$value['Surname'].'</option>'; } echo '</select>'; $test = $_POST['customers']; echo $test; </form><?php include 'newCustomer.php'; connect('final'); $searchtext = $_POST['searchDB']; $searchtext = htmlspecialchars($searchtext); // stop HTML charkacters $searchtext = mysql_real_escape_string($searchtext); //stop SQL injection $query = ""SELECT * FROM customer WHERE First_Name LIKE '%$searchtext%'""; $data = mysql_query($query) or die(mysql_error()); $Customers = array(); $colNames = array(); while($row = mysql_fetch_assoc($data)){// puts data from database into array, loops until no more $Customers[] = $row; } $anymatches = mysql_num_rows($data); //checks if the querys returned any results if ($anymatches != 0) { $_SESSION['names']=$Customers; $colNames = array_keys(reset($Customers)); } if ($anymatches == 0) { echo ""Sorry, but we can not find an entry to match your query<br><br>""; } header(""location: newCustomer.php""); ?>"
"213","bad","""false"" or ""true""<?php include ""connectionToDb.php""; $nome_utente=$_GET['nome_utente']; $queryUserAvailable = ""SELECT * FROM utente where nome_utente='$nome_utente'""; $rsUserAvailable = connetti($queryUserAvailable); if(mysql_num_rows($rsUserAvailable) == 0){ $valid=true; } else{ $valid=false; } echo json_encode($valid); ?><?php function connetti($SQL){ $conn = mysql_connect(""localhost"", ""root"", """"); //(online this data are obviously different) $db = mysql_select_db(""dbName"",$conn); $risultato = mysql_query($SQL,$conn) or die(""Query non valida: "" . mysql_error()); return ($risultato); } ?>"
"214","bad","""false"" or ""true""<?php include ""connectionToDb.php""; $nome_utente=$_GET['nome_utente']; $queryUserAvailable = ""SELECT * FROM utente where nome_utente='$nome_utente'""; $rsUserAvailable = connetti($queryUserAvailable); if(mysql_num_rows($rsUserAvailable) == 0){ $valid=true; } else{ $valid=false; } echo json_encode($valid); ?><?php function connetti($SQL){ $conn = mysql_connect(""localhost"", ""root"", """"); //(online this data are obviously different) $db = mysql_select_db(""dbName"",$conn); $risultato = mysql_query($SQL,$conn) or die(""Query non valida: "" . mysql_error()); return ($risultato); } ?>"
"215","bad","""false"" or ""true""<?php include ""connectionToDb.php""; $nome_utente=$_GET['nome_utente']; $queryUserAvailable = ""SELECT * FROM utente where nome_utente='$nome_utente'""; $rsUserAvailable = connetti($queryUserAvailable); if(mysql_num_rows($rsUserAvailable) == 0){ $valid=true; } else{ $valid=false; } echo json_encode($valid); ?><?php function connetti($SQL){ $conn = mysql_connect(""localhost"", ""root"", """"); //(online this data are obviously different) $db = mysql_select_db(""dbName"",$conn); $risultato = mysql_query($SQL,$conn) or die(""Query non valida: "" . mysql_error()); return ($risultato); } ?>"
"216","bad","PHPPHPSQLSELECT * FROM `table_name` WHERE `column1` = 0560' '"" ""SQL$a_query = ""SELECT * FROM `"".$table_name.""` WHERE `"".$column_name.""` = `"".$store_num.""`""; $a_query = ""SELECT * FROM `table_name` WHERE `column1` = `0560`"";SQLSTATE[42S22]: Column not found: 1054 Unknown column '0560' in 'where clause'"
"217","bad","PHPPHPSQLSELECT * FROM `table_name` WHERE `column1` = 0560' '"" ""SQL$a_query = ""SELECT * FROM `"".$table_name.""` WHERE `"".$column_name.""` = `"".$store_num.""`""; $a_query = ""SELECT * FROM `table_name` WHERE `column1` = `0560`"";SQLSTATE[42S22]: Column not found: 1054 Unknown column '0560' in 'where clause'"
"218","bad","<?php function renderForm($nome, $desc, $error) { $nome = htmlspecialchars($_POST['nome']); $desc = htmlspecialchars($_POST['desc']); ?> <!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.01//EN"" ""http://www.w3.org/TR/html4/strict.dtd""> <html> <head> <title>New Record</title> </head> <body> <?php if ($error != '') { echo '<div style=""padding:4px; border:1px solid red; color:red;"">'.$error.'</div>'; } ?> <form action="""" method=""post""> <div> <strong>Nome: *</strong> <input type=""text"" name=""nome"" /><br/> <strong>Desc: *</strong> <input type=""text"" name=""desc"" /><br/> <p>* required</p> <input type=""submit"" name=""submit"" value=""Submit""> </div> </form> </body> </html> <?php } include(""../../config.php""); if (isset($_POST['submit'])) { $nome = htmlspecialchars($_POST['nome']); $desc = htmlspecialchars($_POST['desc']); if ($nome == '' || $desc== '') { $error = 'ERROR: Please fill in all required fields!'; renderForm($nome, $desc, $error); } else { mysql_query(""INSERT forum_boards SET nome='$nome', desc='$desc'"") or die(mysql_error()); } } else { renderForm('','',''); } ?>"
"219","bad","<?php function renderForm($nome, $desc, $error) { $nome = htmlspecialchars($_POST['nome']); $desc = htmlspecialchars($_POST['desc']); ?> <!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.01//EN"" ""http://www.w3.org/TR/html4/strict.dtd""> <html> <head> <title>New Record</title> </head> <body> <?php if ($error != '') { echo '<div style=""padding:4px; border:1px solid red; color:red;"">'.$error.'</div>'; } ?> <form action="""" method=""post""> <div> <strong>Nome: *</strong> <input type=""text"" name=""nome"" /><br/> <strong>Desc: *</strong> <input type=""text"" name=""desc"" /><br/> <p>* required</p> <input type=""submit"" name=""submit"" value=""Submit""> </div> </form> </body> </html> <?php } include(""../../config.php""); if (isset($_POST['submit'])) { $nome = htmlspecialchars($_POST['nome']); $desc = htmlspecialchars($_POST['desc']); if ($nome == '' || $desc== '') { $error = 'ERROR: Please fill in all required fields!'; renderForm($nome, $desc, $error); } else { mysql_query(""INSERT forum_boards SET nome='$nome', desc='$desc'"") or die(mysql_error()); } } else { renderForm('','',''); } ?>"
"220","good","<form action=""update.php"" method=""post""> <input type=""hidden"" name=""id"" value=""""/> <input type=""text"" name=""name"" value=""""/> <input type=""text"" name=""age"" value=""""/> <input type=""hidden"" name=""id"" value=""""/> <input type=""text"" name=""name"" value=""""/> <input type=""text"" name=""age"" value=""""/> <input type=""submit"" value=""submit"" name=""submit"" /> </form>// Create statement object $stmt = $db->stmt_init(); if (isset($_POST['submit'])) { // Create a prepared statement if($stmt->prepare(""UPDATE contact SET (name, age) VALUES (?, ?)"")) { // Bind your variables to replace the ?s $stmt->bind_param('si', $name, $age); $returnedData = $_POST['data']; for($i=0;$i<count($returnedData);$i+=3){ $id = $returnedData[$i]['id'] $name = $returnedData[$i+1]['name']; $age = $returnedData[$i+2]['age']; $stmt->execute(); } // Close statement object $stmt->close(); }"
"221","bad","function change_profile_image($user_id, $file_temp, $file_extn) { $file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn; move_uploaded_file($file_temp, $file_path); mysql_query(""UPDATE `users` SET `profile` = '"" . mysql_real_escape_string($file_path) . ""' WHERE `user_id` = "" . (int)$user_id); } function mail_users($subject, $body) { $query = mysql_query(""SELECT `email`, `first_name` FROM `users` WHERE `allow_email` = 1""); while (($row = mysql_fetch_assoc($query)) !== false) { email($row['email'], $subject, ""Hello "" . $row['first_name'] . "",\n\n"" . $body); } } function login($username, $password) { $user_id = user_id_from_username($username); $username = sanitize($username); $username = $_SESSION['username']; $password = md5($password); return (mysql_result(mysql_query(""SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'""), 0) == 1) ? $user_id : false; }$category=$_POST['category']; $sub_category=$_POST['sub_category']; $topic_data=$_POST['topic_data']; $posted=date(""h:i:s d/m/Y""); //create date time $sql=""INSERT INTO `topics`(category, sub_category, topic_data, posted_by, posted)VALUES('$category', '$sub_category', '$topic_data', '"" . $_SESSION['username'] . ""', '$posted')""; $result=mysql_query($sql); if($result){ header(""Location: topics.php""); exit();"
"222","bad","function change_profile_image($user_id, $file_temp, $file_extn) { $file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn; move_uploaded_file($file_temp, $file_path); mysql_query(""UPDATE `users` SET `profile` = '"" . mysql_real_escape_string($file_path) . ""' WHERE `user_id` = "" . (int)$user_id); } function mail_users($subject, $body) { $query = mysql_query(""SELECT `email`, `first_name` FROM `users` WHERE `allow_email` = 1""); while (($row = mysql_fetch_assoc($query)) !== false) { email($row['email'], $subject, ""Hello "" . $row['first_name'] . "",\n\n"" . $body); } } function login($username, $password) { $user_id = user_id_from_username($username); $username = sanitize($username); $username = $_SESSION['username']; $password = md5($password); return (mysql_result(mysql_query(""SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'""), 0) == 1) ? $user_id : false; }$category=$_POST['category']; $sub_category=$_POST['sub_category']; $topic_data=$_POST['topic_data']; $posted=date(""h:i:s d/m/Y""); //create date time $sql=""INSERT INTO `topics`(category, sub_category, topic_data, posted_by, posted)VALUES('$category', '$sub_category', '$topic_data', '"" . $_SESSION['username'] . ""', '$posted')""; $result=mysql_query($sql); if($result){ header(""Location: topics.php""); exit();"
"223","bad","<html> <body> <form action='' method='POST' name=''> Name: <input type='text' name='name' value='' /> Price: <input type='text' name='price' value='' /> <input type='submit' name='submit' value='validate' /> </form> <?php if (isset($_POST['submit'])){ $name=$_POST['name']; $price=$_POST['price']; $sql=""INSERT INTO tbl VALUES('','""$name""','""$price""')""; // and so on } ?> </form> </body> </html>"
"224","bad","<html> <body> <form action='' method='POST' name=''> Name: <input type='text' name='name' value='' /> Price: <input type='text' name='price' value='' /> <input type='submit' name='submit' value='validate' /> </form> <?php if (isset($_POST['submit'])){ $name=$_POST['name']; $price=$_POST['price']; $sql=""INSERT INTO tbl VALUES('','""$name""','""$price""')""; // and so on } ?> </form> </body> </html>"
"225","bad","<html> <body> <form action='' method='POST' name=''> Name: <input type='text' name='name' value='' /> Price: <input type='text' name='price' value='' /> <input type='submit' name='submit' value='validate' /> </form> <?php if (isset($_POST['submit'])){ $name=$_POST['name']; $price=$_POST['price']; $sql=""INSERT INTO tbl VALUES('','""$name""','""$price""')""; // and so on } ?> </form> </body> </html>"
"226","good","Parse error: syntax error, unexpected '{' in .... on line 22 Parse error: syntax error, unexpected T_REQUIRE_ONCE in ....on line 24 Parse error: syntax error, unexpected T_VARIABLE in ....on line 26 <?php if (!empty($_POST['var1'])&&!empty($_POST['var2']) &&!empty($_POST['var3'])&&isset($_POST['var4'], $_POST['var5'], $_POST['var6']) { require_once 'connect.inc.php'; $query = ""INSERT INTO tablename (var1, var2, var3, var4, var5, var6) VALUES (?,?,?,?,?,?)""; $stmt = mysqli_prepare($link, $query); mysqli_stmt_bind_param($stmt, ""ssssss"", $var1, $var2, $var3, $var4, $var5, $var6); $var1 = $_POST['var1']; $var2 = $_POST['var2']; $var3 = $_POST['var3']; $var4 = $_POST['var4']; $var5 = $_POST['var5']; $var6 = $_POST['var6']; mysqli_stmt_execute($stmt); if (mysqli_stmt_affected_rows($stmt)==1); mysqli_stmt_close($stmt); $result = mysqli_query($link, $query); if ($result) { echo 'Thank you for your submission.'; } else { echo 'We were unable to process your information.'.mysqli_error($link).' Please ensure all required fields were filled out.'; } mysqli_close($link); } } ?>"
"227","good","$userp = $sql->prepare(""SELECT user, passwd FROM users WHERE user = :username AND passwd = :password LIMIT 1""); $userp->execute(array( 'username' => $username, 'password' => $passwd ));"
"228","good","$userp = $sql->prepare(""SELECT user, passwd FROM users WHERE user = :username AND passwd = :password LIMIT 1""); $userp->execute(array( 'username' => $username, 'password' => $passwd ));"
"229","good","$userp = $sql->prepare(""SELECT user, passwd FROM users WHERE user = :username AND passwd = :password LIMIT 1""); $userp->execute(array( 'username' => $username, 'password' => $passwd ));"
"230","bad","<?php include('connect.php'); $id = $_GET[id]; $query = mysql_query(""SELECT id FROM searchengine WHERE id='$id' ""); while($row = mysql_fetch_array($query)) { $pageurl = ""$row['pageurl']""; $pagecontent = ""$row['pagecontent']""; } echo ""$id ""; echo "" <h2> <b>Details</b></h2> <br/> $pageurl <br/> $pagecontent""; ?>"
"231","bad","<?php include('connect.php'); $id = $_GET[id]; $query = mysql_query(""SELECT id FROM searchengine WHERE id='$id' ""); while($row = mysql_fetch_array($query)) { $pageurl = ""$row['pageurl']""; $pagecontent = ""$row['pagecontent']""; } echo ""$id ""; echo "" <h2> <b>Details</b></h2> <br/> $pageurl <br/> $pagecontent""; ?>"
"232","bad","private function searchUsers() { if (isset($_REQUEST['term'])) { $params = array( ':searchQ' => $_REQUEST['term'] . '%' ); $sql = ""SELECT distinct username as suggest, user_id FROM login_users WHERE username LIKE :searchQ OR name LIKE :searchQ OR user_id LIKE :searchQ ORDER BY username LIMIT 0, 5""; $stmt = parent::query($sql, $params); if ( $stmt->rowCount() > 0 ) { while($suggest = $stmt->fetch(PDO::FETCH_ASSOC)) { $data[] = array( 'label' => $suggest['name'] . '(' . $suggest['user_id'] . ')', 'value' => $suggest['user_id'] ); } echo json_encode($data); flush(); exit(); } } }<script> $(function () { jQuery.ajaxSetup({ beforeSend: function() { $('#loader').show(); }, complete: function(){ $('#loader').hide(); }, success: function() {} }); $('#search-input').autocomplete({ source:'classes/add_user.class.php', minLength:3, select: function(event, ui) { AutoCompleteSelectHandler(event, ui) } }); function AutoCompleteSelectHandler(event, ui) { var selectedObj = ui.item; window.location.href = 'users.php?uid=' + selectedObj.value; } }); /* Disable autocomplete */ var flag = 1; function disAutoComplete(obj){ if(flag){ obj.setAttribute(""autocomplete"",""off""); flag = 0; } obj.focus(); } </script><form method=""post"" id=""search-users-form"" action=""classes/add_user.class.php"" class=""pull-right""> <div class=""control-group""> <div class=""controls""> <div class=""input-prepend""> <button id=""add_new_user_btn"" class=""btn""><?php _e('Add new user'); ?></button> <input type=""number"" class=""input-mini"" min=""0"" id=""showUsers"" name=""showUsers"" placeholder=""<?php _e('Show'); ?>"" value=""<?php echo !empty($_SESSION['jigowatt']['users_page_limit']) ? $_SESSION['jigowatt']['users_page_limit'] : 10; ?>""> <span class=""add-on""> <label for=""search-input""><a href=""#"" data-rel=""tooltip-bottom"" title=""<?php _e('Search by Username, Name, or ID!'); ?>""><i class=""icon-search""></i></a></label> </span> <input name=""search-input"" type=""text"" style=""margin:0"" class=""span2"" id=""search-input"" onclick=""disAutoComplete(this);"" placeholder=""<?php _e('User search'); ?>""> <!-- <input class=""span2"" style=""margin:0"" id=""username-search"" type=""text"" name=""searchUsers"" placeholder=""<?php _e('User search'); ?>""> --> </div> </div> </div> </form>parent::query"
"233","bad","private function searchUsers() { if (isset($_REQUEST['term'])) { $params = array( ':searchQ' => $_REQUEST['term'] . '%' ); $sql = ""SELECT distinct username as suggest, user_id FROM login_users WHERE username LIKE :searchQ OR name LIKE :searchQ OR user_id LIKE :searchQ ORDER BY username LIMIT 0, 5""; $stmt = parent::query($sql, $params); if ( $stmt->rowCount() > 0 ) { while($suggest = $stmt->fetch(PDO::FETCH_ASSOC)) { $data[] = array( 'label' => $suggest['name'] . '(' . $suggest['user_id'] . ')', 'value' => $suggest['user_id'] ); } echo json_encode($data); flush(); exit(); } } }<script> $(function () { jQuery.ajaxSetup({ beforeSend: function() { $('#loader').show(); }, complete: function(){ $('#loader').hide(); }, success: function() {} }); $('#search-input').autocomplete({ source:'classes/add_user.class.php', minLength:3, select: function(event, ui) { AutoCompleteSelectHandler(event, ui) } }); function AutoCompleteSelectHandler(event, ui) { var selectedObj = ui.item; window.location.href = 'users.php?uid=' + selectedObj.value; } }); /* Disable autocomplete */ var flag = 1; function disAutoComplete(obj){ if(flag){ obj.setAttribute(""autocomplete"",""off""); flag = 0; } obj.focus(); } </script><form method=""post"" id=""search-users-form"" action=""classes/add_user.class.php"" class=""pull-right""> <div class=""control-group""> <div class=""controls""> <div class=""input-prepend""> <button id=""add_new_user_btn"" class=""btn""><?php _e('Add new user'); ?></button> <input type=""number"" class=""input-mini"" min=""0"" id=""showUsers"" name=""showUsers"" placeholder=""<?php _e('Show'); ?>"" value=""<?php echo !empty($_SESSION['jigowatt']['users_page_limit']) ? $_SESSION['jigowatt']['users_page_limit'] : 10; ?>""> <span class=""add-on""> <label for=""search-input""><a href=""#"" data-rel=""tooltip-bottom"" title=""<?php _e('Search by Username, Name, or ID!'); ?>""><i class=""icon-search""></i></a></label> </span> <input name=""search-input"" type=""text"" style=""margin:0"" class=""span2"" id=""search-input"" onclick=""disAutoComplete(this);"" placeholder=""<?php _e('User search'); ?>""> <!-- <input class=""span2"" style=""margin:0"" id=""username-search"" type=""text"" name=""searchUsers"" placeholder=""<?php _e('User search'); ?>""> --> </div> </div> </div> </form>parent::query"
"234","bad","private function searchUsers() { if (isset($_REQUEST['term'])) { $params = array( ':searchQ' => $_REQUEST['term'] . '%' ); $sql = ""SELECT distinct username as suggest, user_id FROM login_users WHERE username LIKE :searchQ OR name LIKE :searchQ OR user_id LIKE :searchQ ORDER BY username LIMIT 0, 5""; $stmt = parent::query($sql, $params); if ( $stmt->rowCount() > 0 ) { while($suggest = $stmt->fetch(PDO::FETCH_ASSOC)) { $data[] = array( 'label' => $suggest['name'] . '(' . $suggest['user_id'] . ')', 'value' => $suggest['user_id'] ); } echo json_encode($data); flush(); exit(); } } }<script> $(function () { jQuery.ajaxSetup({ beforeSend: function() { $('#loader').show(); }, complete: function(){ $('#loader').hide(); }, success: function() {} }); $('#search-input').autocomplete({ source:'classes/add_user.class.php', minLength:3, select: function(event, ui) { AutoCompleteSelectHandler(event, ui) } }); function AutoCompleteSelectHandler(event, ui) { var selectedObj = ui.item; window.location.href = 'users.php?uid=' + selectedObj.value; } }); /* Disable autocomplete */ var flag = 1; function disAutoComplete(obj){ if(flag){ obj.setAttribute(""autocomplete"",""off""); flag = 0; } obj.focus(); } </script><form method=""post"" id=""search-users-form"" action=""classes/add_user.class.php"" class=""pull-right""> <div class=""control-group""> <div class=""controls""> <div class=""input-prepend""> <button id=""add_new_user_btn"" class=""btn""><?php _e('Add new user'); ?></button> <input type=""number"" class=""input-mini"" min=""0"" id=""showUsers"" name=""showUsers"" placeholder=""<?php _e('Show'); ?>"" value=""<?php echo !empty($_SESSION['jigowatt']['users_page_limit']) ? $_SESSION['jigowatt']['users_page_limit'] : 10; ?>""> <span class=""add-on""> <label for=""search-input""><a href=""#"" data-rel=""tooltip-bottom"" title=""<?php _e('Search by Username, Name, or ID!'); ?>""><i class=""icon-search""></i></a></label> </span> <input name=""search-input"" type=""text"" style=""margin:0"" class=""span2"" id=""search-input"" onclick=""disAutoComplete(this);"" placeholder=""<?php _e('User search'); ?>""> <!-- <input class=""span2"" style=""margin:0"" id=""username-search"" type=""text"" name=""searchUsers"" placeholder=""<?php _e('User search'); ?>""> --> </div> </div> </div> </form>parent::query"
"235","bad","<?php // Create connection` $con=mysql_connect(""exemple.com"",""user"",""password""); mysql_select_db(""database""); // receive data from app's http request $name=$_POST[""name""]; $people=$_POST[""people""]; $club=$_POST[""club""]; $day=$_POST[""day""]; $sql=""INSERT INTO users (name, people, club, day) VALUES ($name, $people, $club, $day)""); mysql_query($con,$sql); mysql_close($con);"
"236","bad","<?php // Create connection` $con=mysql_connect(""exemple.com"",""user"",""password""); mysql_select_db(""database""); // receive data from app's http request $name=$_POST[""name""]; $people=$_POST[""people""]; $club=$_POST[""club""]; $day=$_POST[""day""]; $sql=""INSERT INTO users (name, people, club, day) VALUES ($name, $people, $club, $day)""); mysql_query($con,$sql); mysql_close($con);"
"237","bad","**FORM** <form onSubmit=""check_cat_to_save();return false;""> ..... </form> function check_cat_to_save(){ $.ajax({ type:'POST', url:'edit_cat.php', data:""cat_name=""+$('#cat_name').val()+""&cat_id=""+$('#cat_id').val()+""&cat_desc=""+$('#cat_desc').val()+""&cat_publish=""+$('#cat_publish').val(), success:function(response){ if(response=='6'){$('#error').css({'color':'red','display':'block'}).html('Category already exists!')} else if(response=='7'){$('#error').css({'color':'#0c0','display':'block'}).html('Sucessfully edited category!')} else if(response=='8'){$('#error').css({'color':'red','display':'block'}).html('OOPS Something went wrong!')} else if(response=='9'){$('#error').css({'color':'red','display':'block'}).html('Please Fill all the feilds!')} else {$('#error').css({'color':'red','display':'block'}).html('Please Fill all the feilds!')} } }); };<?php $cat_id = mysql_real_escape_string($_POST[""cat_id""] ); $cat_name = mysql_real_escape_string($_POST[""cat_name""] ); $cat_desc = mysql_real_escape_string($_POST[""cat_desc""] ); $cat_publish = mysql_real_escape_string($_POST[""cat_publish""] ); if(!empty($cat_name) && !empty($cat_desc)){ $cat_check_name = ""SELECT * from categories WHERE cat_name = '$cat_name' and cat_id <> '$cat_id' ""; $result_check_name = mysql_query($cat_check_name); $num_rows_all = mysql_num_rows($result_check_name); if($num_rows_all>0) { echo '6'; exit(); } //if categories are not out of number else { $sql = ""UPDATE categories SET cat_name = '{$cat_name}', cat_description = '{$cat_desc}', active = '{$cat_publish}' WHERE cat_id = {$cat_id} ""; $result_set = mysql_query($sql); if($result_set) echo '7'; else echo '8'; } } else echo '9'; ?>"
"238","good","**FORM** <form onSubmit=""check_cat_to_save();return false;""> ..... </form> function check_cat_to_save(){ $.ajax({ type:'POST', url:'edit_cat.php', data:""cat_name=""+$('#cat_name').val()+""&cat_id=""+$('#cat_id').val()+""&cat_desc=""+$('#cat_desc').val()+""&cat_publish=""+$('#cat_publish').val(), success:function(response){ if(response=='6'){$('#error').css({'color':'red','display':'block'}).html('Category already exists!')} else if(response=='7'){$('#error').css({'color':'#0c0','display':'block'}).html('Sucessfully edited category!')} else if(response=='8'){$('#error').css({'color':'red','display':'block'}).html('OOPS Something went wrong!')} else if(response=='9'){$('#error').css({'color':'red','display':'block'}).html('Please Fill all the feilds!')} else {$('#error').css({'color':'red','display':'block'}).html('Please Fill all the feilds!')} } }); };<?php $cat_id = mysql_real_escape_string($_POST[""cat_id""] ); $cat_name = mysql_real_escape_string($_POST[""cat_name""] ); $cat_desc = mysql_real_escape_string($_POST[""cat_desc""] ); $cat_publish = mysql_real_escape_string($_POST[""cat_publish""] ); if(!empty($cat_name) && !empty($cat_desc)){ $cat_check_name = ""SELECT * from categories WHERE cat_name = '$cat_name' and cat_id <> '$cat_id' ""; $result_check_name = mysql_query($cat_check_name); $num_rows_all = mysql_num_rows($result_check_name); if($num_rows_all>0) { echo '6'; exit(); } //if categories are not out of number else { $sql = ""UPDATE categories SET cat_name = '{$cat_name}', cat_description = '{$cat_desc}', active = '{$cat_publish}' WHERE cat_id = {$cat_id} ""; $result_set = mysql_query($sql); if($result_set) echo '7'; else echo '8'; } } else echo '9'; ?>"
"239","bad","**FORM** <form onSubmit=""check_cat_to_save();return false;""> ..... </form> function check_cat_to_save(){ $.ajax({ type:'POST', url:'edit_cat.php', data:""cat_name=""+$('#cat_name').val()+""&cat_id=""+$('#cat_id').val()+""&cat_desc=""+$('#cat_desc').val()+""&cat_publish=""+$('#cat_publish').val(), success:function(response){ if(response=='6'){$('#error').css({'color':'red','display':'block'}).html('Category already exists!')} else if(response=='7'){$('#error').css({'color':'#0c0','display':'block'}).html('Sucessfully edited category!')} else if(response=='8'){$('#error').css({'color':'red','display':'block'}).html('OOPS Something went wrong!')} else if(response=='9'){$('#error').css({'color':'red','display':'block'}).html('Please Fill all the feilds!')} else {$('#error').css({'color':'red','display':'block'}).html('Please Fill all the feilds!')} } }); };<?php $cat_id = mysql_real_escape_string($_POST[""cat_id""] ); $cat_name = mysql_real_escape_string($_POST[""cat_name""] ); $cat_desc = mysql_real_escape_string($_POST[""cat_desc""] ); $cat_publish = mysql_real_escape_string($_POST[""cat_publish""] ); if(!empty($cat_name) && !empty($cat_desc)){ $cat_check_name = ""SELECT * from categories WHERE cat_name = '$cat_name' and cat_id <> '$cat_id' ""; $result_check_name = mysql_query($cat_check_name); $num_rows_all = mysql_num_rows($result_check_name); if($num_rows_all>0) { echo '6'; exit(); } //if categories are not out of number else { $sql = ""UPDATE categories SET cat_name = '{$cat_name}', cat_description = '{$cat_desc}', active = '{$cat_publish}' WHERE cat_id = {$cat_id} ""; $result_set = mysql_query($sql); if($result_set) echo '7'; else echo '8'; } } else echo '9'; ?>"
"240","bad","<?php $q=$_GET[""q""]; $con = mysqli_connect('localhost','root','12345678','test'); if (!$con) { die('Could not connect: ' . mysqli_error($con)); } mysqli_select_db($con,""test""); $sql=""SELECT * FROM example5 WHERE time = '"".$q.""'""; $result = mysqli_query($con,$sql); $result_array = array(); while($row = mysqli_fetch_array($result)) { $result_array[] = array($row['time'], $row['data']); } echo json_encode($result_array); mysqli_close($con); ?> <!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""> <html> <head> <script language=""javascript""> var items =[]; function run(){ $.getJSON('getdata.php', function(data) { $.each(data, function(key, val) { items.push('<li id=""' + key + '"">' + val + '</li>'); }); $('<ul/>', { 'class': 'my-new-list', html: items.join('') }).appendTo('body'); }); } function retrieveResults2(str){ $.ajax({ dataType: ""json"", url: ""getdata.php"", data: data, success: run }); } function retrieveResults(str){ jQuery.ajax({ type: 'GET', url: ""getdata.php"", data: { q: str, }, success: function(data, textStatus, jqXHR) { var json = $.parseJSON(data); $.each(json, function(index, value) { items.push(value); // Not sure if it is correct, you might need to do some changes, but this is for the global idea } } error: function(jqXHR, textStatus, errorThrown) { console.log('An error occurred:'+errorThrown); } }); } window.onload = retrieveResults2(1); </script> </head> <body> <form> <select name=""users""> <option value="""">Select Time:</option> <option value=""1"">1</option> <option value=""2"">2</option> <option value=""3"">3</option> <option value=""4"">4</option> <option value=""4"">5</option> <option value=""4"">6</option> <option value=""4"">7</option> </select> </form> <script type=""text/javascript""> document.write(items); </script> </body> </html>"
"241","bad","<?php $q=$_GET[""q""]; $con = mysqli_connect('localhost','root','12345678','test'); if (!$con) { die('Could not connect: ' . mysqli_error($con)); } mysqli_select_db($con,""test""); $sql=""SELECT * FROM example5 WHERE time = '"".$q.""'""; $result = mysqli_query($con,$sql); $result_array = array(); while($row = mysqli_fetch_array($result)) { $result_array[] = array($row['time'], $row['data']); } echo json_encode($result_array); mysqli_close($con); ?> <!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""> <html> <head> <script language=""javascript""> var items =[]; function run(){ $.getJSON('getdata.php', function(data) { $.each(data, function(key, val) { items.push('<li id=""' + key + '"">' + val + '</li>'); }); $('<ul/>', { 'class': 'my-new-list', html: items.join('') }).appendTo('body'); }); } function retrieveResults2(str){ $.ajax({ dataType: ""json"", url: ""getdata.php"", data: data, success: run }); } function retrieveResults(str){ jQuery.ajax({ type: 'GET', url: ""getdata.php"", data: { q: str, }, success: function(data, textStatus, jqXHR) { var json = $.parseJSON(data); $.each(json, function(index, value) { items.push(value); // Not sure if it is correct, you might need to do some changes, but this is for the global idea } } error: function(jqXHR, textStatus, errorThrown) { console.log('An error occurred:'+errorThrown); } }); } window.onload = retrieveResults2(1); </script> </head> <body> <form> <select name=""users""> <option value="""">Select Time:</option> <option value=""1"">1</option> <option value=""2"">2</option> <option value=""3"">3</option> <option value=""4"">4</option> <option value=""4"">5</option> <option value=""4"">6</option> <option value=""4"">7</option> </select> </form> <script type=""text/javascript""> document.write(items); </script> </body> </html>"
"242","bad","<?php //session start// session_start(); //Connect to the server and database// $con=mysqli_connect(""127.0.0.1"",""root"","""",""mia""); //Generate the sql statement for retrieval of customer details// $customerdetails=""SELECT Name, BusinessName, Address, Postcode, TelNo, Email FROM customer WHERE CustomerID = "" . $_SESSION['CustomerID'] . """"; //execute the 'Customer details retrieve' sql statement// $result= mysqli_query($con, $customerdetails); while ($row = mysqli_fetch_array($result)) { $Name='' . $row['Name'] . ''; $BusinessName=$row['BusinessName']; $Addresss=$row['Address']; $Postcode=$row['Postcode']; $TelNo=$row['TelNo']; $Email=$row['Email']; } //Write the web page// echo ""<!Doctype html> <html> <head> <title> Edit Details </title> </head> <body> <h1>Edit Details</h1> <p>Please change values below where apropriate</p> <form name='input' action='../php/update_customer.php' method='post'> Name: <input type='string' name='Name' value="" . $Name .""/> </br> Business Name: <input type='text' name='BusinessName' value="" . $BusinessName .""/> </br> Address: <input type='text' name='Address' value="" . $Addresss .""/> </br> Post Code: <input type='text' name='Postcode' value="" . $Postcode .""/> </br> Telephone No: <input type='text' name='TelNo' value="" . $TelNo .""/> </br> Email Address: <input type='text' name='Email' value="" . $Email .""/> </br> <input type='submit' value='Update'/> </form> <p>"" . $Name . ""</p> <p>"" . $_SESSION['CustomerID'] . ""</p> </body> </html>""; ?>"
"243","bad","<?php //session start// session_start(); //Connect to the server and database// $con=mysqli_connect(""127.0.0.1"",""root"","""",""mia""); //Generate the sql statement for retrieval of customer details// $customerdetails=""SELECT Name, BusinessName, Address, Postcode, TelNo, Email FROM customer WHERE CustomerID = "" . $_SESSION['CustomerID'] . """"; //execute the 'Customer details retrieve' sql statement// $result= mysqli_query($con, $customerdetails); while ($row = mysqli_fetch_array($result)) { $Name='' . $row['Name'] . ''; $BusinessName=$row['BusinessName']; $Addresss=$row['Address']; $Postcode=$row['Postcode']; $TelNo=$row['TelNo']; $Email=$row['Email']; } //Write the web page// echo ""<!Doctype html> <html> <head> <title> Edit Details </title> </head> <body> <h1>Edit Details</h1> <p>Please change values below where apropriate</p> <form name='input' action='../php/update_customer.php' method='post'> Name: <input type='string' name='Name' value="" . $Name .""/> </br> Business Name: <input type='text' name='BusinessName' value="" . $BusinessName .""/> </br> Address: <input type='text' name='Address' value="" . $Addresss .""/> </br> Post Code: <input type='text' name='Postcode' value="" . $Postcode .""/> </br> Telephone No: <input type='text' name='TelNo' value="" . $TelNo .""/> </br> Email Address: <input type='text' name='Email' value="" . $Email .""/> </br> <input type='submit' value='Update'/> </form> <p>"" . $Name . ""</p> <p>"" . $_SESSION['CustomerID'] . ""</p> </body> </html>""; ?>"
"244","bad","<?php include_once(""db.php""); session_start(); ?> <?php $user = $_POST['name']; $pass = $_POST['pwd']; $sql=""SELECT count(*) from phplogin WHERE(username='$user' and password='$pass')""; $query = mysql_query($sql); $result = mysql_fetch_array($query); if($result[0]>0){ $_SESSION['username']=$user; echo ""Successful login!""; echo ""<br /> Welcome "" .$_SESSION['username']. ""!""; echo ""<br /><a href='signupform.php' > SignUp </a>""; echo ""<br /><a href='signinform.php' > SignIn </a>""; echo ""<br /><a href='logout.php' > LogOut </a>""; } else{ echo ""Login failed!""; echo ""<br /><a href='signupform.php' > SignUp </a>""; echo ""<br /><a href='signinform.php' > SignIn </a>""; } ?><?php include_once(""db.php""); ?> <?php session_start(); #starts the session session_unset(); #removes all variables in the session session_destroy(); # destroys the session if(!$_SESSION['username']) echo ""Succesfully logged out""; else echo ""Error occurred""; ?>"
"245","bad","$i=1; $query=mysql_query(""insert into tablename set Reg_no = '"".$common->html_protect($_REQUEST['reg_num']).""' while(fieldcount<=10) { echo "",""; echo field.$i='"".$common->html_protect($_REQUEST[$field.$i]) .""' } "");"
"246","bad","function cart(){ echo ""<table table border='1' cellpadding='10'>""; foreach($_SESSION as $name`` => $value){ if ($value>0){ if(substr($name, 0, 5)=='cart_'){ $id = substr($name, 5, (strlen($name)-5)); $get = mysql_query('SELECT prod_id, prod_name, prod_price FROM products WHERE prod_id='.mysql_real_escape_string((int)$id)); while ($get_row = mysql_fetch_assoc($get)){ $sub = $get_row['prod_price']*$value; echo ""<tr><th>Product Name</th> <th>Quantity</th> <th>Price</th> <th>Total</th> <th>Increase</th> <th>Decrease</th> <th>Remove</th></tr>""; echo '<td>'.$get_row['prod_name'].'</td>'; echo '<td>'.$value.'</td>'; echo '<td>'.' PhP'.number_format($get_row['prod_price'], 2).'</td>'; echo '<td>'.' PhP'.number_format($sub, 2).'</td>'; echo '<td>'.'<a href=""cart.php?remove='.$id.'"">[-]</a>'.'</td>'; echo '<td>'.'<a href=""cart.php?add='.$id.'"">[+]</a>'.'</td>'; echo '<td>'.'<a href=""cart.php?delete='.$id.'"">[Delete]</a></td>'; } } $total += $sub; } } if($total==0){ echo ""Your cart is empty.""; } else{ echo 'Total: PhP'.number_format($total, 2); }"
"247","bad","function cart(){ echo ""<table table border='1' cellpadding='10'>""; foreach($_SESSION as $name`` => $value){ if ($value>0){ if(substr($name, 0, 5)=='cart_'){ $id = substr($name, 5, (strlen($name)-5)); $get = mysql_query('SELECT prod_id, prod_name, prod_price FROM products WHERE prod_id='.mysql_real_escape_string((int)$id)); while ($get_row = mysql_fetch_assoc($get)){ $sub = $get_row['prod_price']*$value; echo ""<tr><th>Product Name</th> <th>Quantity</th> <th>Price</th> <th>Total</th> <th>Increase</th> <th>Decrease</th> <th>Remove</th></tr>""; echo '<td>'.$get_row['prod_name'].'</td>'; echo '<td>'.$value.'</td>'; echo '<td>'.' PhP'.number_format($get_row['prod_price'], 2).'</td>'; echo '<td>'.' PhP'.number_format($sub, 2).'</td>'; echo '<td>'.'<a href=""cart.php?remove='.$id.'"">[-]</a>'.'</td>'; echo '<td>'.'<a href=""cart.php?add='.$id.'"">[+]</a>'.'</td>'; echo '<td>'.'<a href=""cart.php?delete='.$id.'"">[Delete]</a></td>'; } } $total += $sub; } } if($total==0){ echo ""Your cart is empty.""; } else{ echo 'Total: PhP'.number_format($total, 2); }"
"248","bad","<html> <head> <title>Testing Query</title> <script type=""text/javascript"" src=""script/client.js""></script> </head> <body> select the desired ! <div> <p> <input type = ""button"" id = ""requestedSTD"" value = ""Get All Student"" onclick = ""GetAllStudents();""/></p> <p> <input type = ""button"" id = ""requestedSTD"" value = ""Get Student By ID"" onclick = ""GetStudentByID(2);""/></p> </div> </body> </html>function GetAllStudents() { var formRequest = new FormData(); formRequest.append('getStudent', ""getAllStudent""); var xhr = new XMLHttpRequest(); xhr.addEventListener(""load"", uploadComplete, false); xhr.open(""GET"", 'StudentService/getAllStudent.php'); xhr.send(formRequest); } function GetStudentByID(id) { var formRequest = new FormData(); formRequest.append('sid', id); var xhr = new XMLHttpRequest(); xhr.addEventListener(""load"", uploadComplete, false); xhr.open(""POST"", 'StudentService/getStudentByID.php'); xhr.send(formRequest); } function uploadComplete(evt) { console.log(evt.target.responseText); }<?php require_once '../ConnectionManager.php'; $response = array(); $db = ConnectionManager::getInstance(); $result = mysql_query(""SELECT * FROM student"") or die(mysql_error()); if(mysql_num_rows($result) >0) { $response[""student""] = array(); while($roe = mysql_fetch_array($result)) { $student = array(); $student[""ID""] = $row[""ID""]; $student[""Index""] = $row[""Index""]; $student[""Name""] = $row[""Name""]; array_push($response[""student""], $student); } $response[""success""] = 1; echo json_encode($response); } else { $response[""success""] = 0; $response[""message""] = ""No students found!!""; echo json_encode($response); } ?><?php require_once '../ConnectionManager.php'; $response = array(); $db = connectionManager::getInstance(); if(isset($_POST[""sid""])) { $id = $_POST[""sid""]; $result = mysql_query(""SELECT * FROM student WHERE ID = $id""); if(!empty($result)) { if(mysql_num_row($result) >0) { $row = mysql_fetch_array($result); $student = array(); $student[""ID""] = $row[""ID""]; $student[""Index""] = $row[""Index""]; $student[""Name""] = $row[""Name""]; $response [""success""] = 1; $response[""$student""] = array(); array_push($reponse[""student""], $student); echo json_encode($response); } else { $response[""success""] = 0; $response[""message""] = ""No Student found with this ID!!""; echo json_encode($response); } } else { $response[""success""] = 0; $response[""message""] = ""No Student found with this ID!!""; echo json_encode($response); } } else { $response[""success""] = 0; $response[""message""] = ""Required feild(s) is missing!!""; echo json_encode($response); } ?><?php require_once 'Connection.php'; class ConnectionManager { static $connection = null; public static function getInstance() { if(ConnectionManager::$connection == null); ConnectionManager::$connection = new Connection; return ConnectionManager::$connection; } private function __construct() { } private function __clone() { } } ?><?php class Connection { function __construct() { $this->connect(); } function __destruct() { $this->close(); } function connect() { require_once __DIR__ . '/db_config.php'; $connection = mysql_connect(SERVER, USER, PASSWORD) or die(mysql_error()); $dbConnect = mysql_select_db(DATABASE) or die(mysl_error()); return $connection; } function close() { mysql_close(); } } ?><?php define('USER', ""***""); define('PASSWORD', ""***""); define('DATABASE', ""studentservice""); define('SERVER', ""localhost""); ?>GET http://localhost/studentservice/StudentService/getAllStudent.php 200 OK 20ms client.js (line 9) <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0054</td><td bgcolor='#eeeeec' align='right'>708704</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0057</td><td bgcolor='#eeeeec' align='right'>709072</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0057</td><td bgcolor='#eeeeec' align='right'>709216</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0059</td><td bgcolor='#eeeeec' align='right'>709360</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> {""student"":[],""Array"":null,""success"":1}"
"249","bad","<html> <head> <title>Testing Query</title> <script type=""text/javascript"" src=""script/client.js""></script> </head> <body> select the desired ! <div> <p> <input type = ""button"" id = ""requestedSTD"" value = ""Get All Student"" onclick = ""GetAllStudents();""/></p> <p> <input type = ""button"" id = ""requestedSTD"" value = ""Get Student By ID"" onclick = ""GetStudentByID(2);""/></p> </div> </body> </html>function GetAllStudents() { var formRequest = new FormData(); formRequest.append('getStudent', ""getAllStudent""); var xhr = new XMLHttpRequest(); xhr.addEventListener(""load"", uploadComplete, false); xhr.open(""GET"", 'StudentService/getAllStudent.php'); xhr.send(formRequest); } function GetStudentByID(id) { var formRequest = new FormData(); formRequest.append('sid', id); var xhr = new XMLHttpRequest(); xhr.addEventListener(""load"", uploadComplete, false); xhr.open(""POST"", 'StudentService/getStudentByID.php'); xhr.send(formRequest); } function uploadComplete(evt) { console.log(evt.target.responseText); }<?php require_once '../ConnectionManager.php'; $response = array(); $db = ConnectionManager::getInstance(); $result = mysql_query(""SELECT * FROM student"") or die(mysql_error()); if(mysql_num_rows($result) >0) { $response[""student""] = array(); while($roe = mysql_fetch_array($result)) { $student = array(); $student[""ID""] = $row[""ID""]; $student[""Index""] = $row[""Index""]; $student[""Name""] = $row[""Name""]; array_push($response[""student""], $student); } $response[""success""] = 1; echo json_encode($response); } else { $response[""success""] = 0; $response[""message""] = ""No students found!!""; echo json_encode($response); } ?><?php require_once '../ConnectionManager.php'; $response = array(); $db = connectionManager::getInstance(); if(isset($_POST[""sid""])) { $id = $_POST[""sid""]; $result = mysql_query(""SELECT * FROM student WHERE ID = $id""); if(!empty($result)) { if(mysql_num_row($result) >0) { $row = mysql_fetch_array($result); $student = array(); $student[""ID""] = $row[""ID""]; $student[""Index""] = $row[""Index""]; $student[""Name""] = $row[""Name""]; $response [""success""] = 1; $response[""$student""] = array(); array_push($reponse[""student""], $student); echo json_encode($response); } else { $response[""success""] = 0; $response[""message""] = ""No Student found with this ID!!""; echo json_encode($response); } } else { $response[""success""] = 0; $response[""message""] = ""No Student found with this ID!!""; echo json_encode($response); } } else { $response[""success""] = 0; $response[""message""] = ""Required feild(s) is missing!!""; echo json_encode($response); } ?><?php require_once 'Connection.php'; class ConnectionManager { static $connection = null; public static function getInstance() { if(ConnectionManager::$connection == null); ConnectionManager::$connection = new Connection; return ConnectionManager::$connection; } private function __construct() { } private function __clone() { } } ?><?php class Connection { function __construct() { $this->connect(); } function __destruct() { $this->close(); } function connect() { require_once __DIR__ . '/db_config.php'; $connection = mysql_connect(SERVER, USER, PASSWORD) or die(mysql_error()); $dbConnect = mysql_select_db(DATABASE) or die(mysl_error()); return $connection; } function close() { mysql_close(); } } ?><?php define('USER', ""***""); define('PASSWORD', ""***""); define('DATABASE', ""studentservice""); define('SERVER', ""localhost""); ?>GET http://localhost/studentservice/StudentService/getAllStudent.php 200 OK 20ms client.js (line 9) <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0054</td><td bgcolor='#eeeeec' align='right'>708704</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0057</td><td bgcolor='#eeeeec' align='right'>709072</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0057</td><td bgcolor='#eeeeec' align='right'>709216</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> <br /> <font size='1'><table class='xdebug-error xe-warning' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan=""5""><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: array_push() expects parameter 1 to be array, null given in C:\wamp\www\studentservice\StudentService\getAllStudent.php on line <i>18</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0018</td><td bgcolor='#eeeeec' align='right'>677800</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0059</td><td bgcolor='#eeeeec' align='right'>709360</td><td bgcolor='#eeeeec'><a href='http://www.php.net/array_push' target='_new'>array_push</a> ( )</td><td title='C:\wamp\www\studentservice\StudentService\getAllStudent.php' bgcolor='#eeeeec'>..\getAllStudent.php<b>:</b>18</td></tr> </table></font> {""student"":[],""Array"":null,""success"":1}"
"250","bad","<input type=""text"" id=""user_name"" /> <input type=""password"" id=""user_password"" /> <input type=""text"" id=""user_surname"" /> <input type=""email"" id=""user_email"" /> <input type=""text"" id=""user_phone"" /> <input type=""text"" id=""user_address"" /> <input type=""text"" id=""user_pin"" /> <input type=""submit"" value=""Submit"" />$query=""INSERT INTO register VALUES ( user_name = '$user_name', user_password = '$pass', user_surname = '$surname', user_email = '$email', user_phone = '$phone', user_address = '$address', user_pin = '$pin') ""; $result = mysql_query($query,$con); if($result) { echo ""Details updated successfully""; }"
"251","bad","<input type=""text"" id=""user_name"" /> <input type=""password"" id=""user_password"" /> <input type=""text"" id=""user_surname"" /> <input type=""email"" id=""user_email"" /> <input type=""text"" id=""user_phone"" /> <input type=""text"" id=""user_address"" /> <input type=""text"" id=""user_pin"" /> <input type=""submit"" value=""Submit"" />$query=""INSERT INTO register VALUES ( user_name = '$user_name', user_password = '$pass', user_surname = '$surname', user_email = '$email', user_phone = '$phone', user_address = '$address', user_pin = '$pin') ""; $result = mysql_query($query,$con); if($result) { echo ""Details updated successfully""; }"
"252","bad","mem_id | pid | content 0 | 1 | All the content is here 0 | 2 | All the content is here 0 | 3 | All the content is heremem_id$id0mem_id$con=mysqli_connect(""localhost"",""*****"",""******"",""*****""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } $result = mysqli_query($con,""SELECT * FROM user_friends WHERE mem_id = '$_SESSION[SESS_MEMBER_ID]' LIMIT 1""); while($row = mysqli_fetch_array($result)) { $friends = $row['fid']; }"
"253","bad","mem_id | pid | content 0 | 1 | All the content is here 0 | 2 | All the content is here 0 | 3 | All the content is heremem_id$id0mem_id$con=mysqli_connect(""localhost"",""*****"",""******"",""*****""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } $result = mysqli_query($con,""SELECT * FROM user_friends WHERE mem_id = '$_SESSION[SESS_MEMBER_ID]' LIMIT 1""); while($row = mysqli_fetch_array($result)) { $friends = $row['fid']; }"
"254","bad","sumUntung Budi S. S.Komwhere idPertanyaan = '1' AND idDsn = ""ID of the currently login user""<?php $sql = ""select sum(pilihan) from tbl_tampung where (idPertanyaan) = '1' AND (idDsn)= '<?php echo $_SESSION[""user""]' ?> ""; $q = mysql_query($sql); $row = mysql_fetch_array($q); echo 'Jumlah dari pertanyaan : ' . $row[0]; ?>"
"255","bad","sumUntung Budi S. S.Komwhere idPertanyaan = '1' AND idDsn = ""ID of the currently login user""<?php $sql = ""select sum(pilihan) from tbl_tampung where (idPertanyaan) = '1' AND (idDsn)= '<?php echo $_SESSION[""user""]' ?> ""; $q = mysql_query($sql); $row = mysql_fetch_array($q); echo 'Jumlah dari pertanyaan : ' . $row[0]; ?>"
"256","bad","sumUntung Budi S. S.Komwhere idPertanyaan = '1' AND idDsn = ""ID of the currently login user""<?php $sql = ""select sum(pilihan) from tbl_tampung where (idPertanyaan) = '1' AND (idDsn)= '<?php echo $_SESSION[""user""]' ?> ""; $q = mysql_query($sql); $row = mysql_fetch_array($q); echo 'Jumlah dari pertanyaan : ' . $row[0]; ?>"
"257","good","<?php try { $name = $_GET['name']; try { $stmt = $dbh->prepare(""INSERT INTO person (idperson, name, map) VALUES (21, :name, null)""); //$stmt->bindParam(':name', $name); $stmt->bindParam(':name', $name, PDO::PARAM_STR); if ( $stmt->execute() ){ echo ""worked!""; } else { echo ""not working""; } } catch(Exception $ee){ echo 'Error : '.$ee->getMessage().'<br />'; echo 'N° : '.$ee->getCode(); } } catch(Exception $e) { echo 'Error : '.$e->getMessage().'<br />'; echo 'N° : '.$e->getCode(); } ?>//this works $stmt = $dbh->prepare(""SELECT name FROM person WHERE idperson=1""); $stmt->execute(); while($lines = $stmt->fetch(PDO::FETCH_OBJ)){ echo $lines->name.'<br />'; }CREATE TABLE person ( idperson integer NOT NULL, name character varying(50), map bytea, CONSTRAINT person_pkey PRIMARY KEY (idperson) )"
"258","good","<?php try { $name = $_GET['name']; try { $stmt = $dbh->prepare(""INSERT INTO person (idperson, name, map) VALUES (21, :name, null)""); //$stmt->bindParam(':name', $name); $stmt->bindParam(':name', $name, PDO::PARAM_STR); if ( $stmt->execute() ){ echo ""worked!""; } else { echo ""not working""; } } catch(Exception $ee){ echo 'Error : '.$ee->getMessage().'<br />'; echo 'N° : '.$ee->getCode(); } } catch(Exception $e) { echo 'Error : '.$e->getMessage().'<br />'; echo 'N° : '.$e->getCode(); } ?>//this works $stmt = $dbh->prepare(""SELECT name FROM person WHERE idperson=1""); $stmt->execute(); while($lines = $stmt->fetch(PDO::FETCH_OBJ)){ echo $lines->name.'<br />'; }CREATE TABLE person ( idperson integer NOT NULL, name character varying(50), map bytea, CONSTRAINT person_pkey PRIMARY KEY (idperson) )"
"259","bad","<?php session_start(); ob_start(); $host=""localhost""; // Host name $username=""root""; // Mysql username $password=""password""; // Mysql password $db_name=""lecturer""; // Database name $tbl_name=""members""; // Table name // Connect to server and select databse. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Define $myusername and $mypassword $myid=$_POST['myid']; $mypassword=$_POST['mypassword']; // To protect MySQL injection (more detail about MySQL injection) $myid = stripslashes($myid); $mypassword = stripslashes($mypassword); $myid = mysql_real_escape_string($myid); $mypassword = mysql_real_escape_string($mypassword); $sql=""SELECT * FROM $tbl_name WHERE ID='$myid' and password='$mypassword' LIMIT 1 ""; $result=mysql_query($sql); // Mysql_num_row is counting table row $count=mysql_num_rows($result); // If result matched $myusername and $mypassword, table row must be 1 row if($count==1){ // Register $myusername, $mypassword and redirect to file ""login_success.php"" $_session['myid'] = 'myid'; $_session['mypassword'] = 'mypassword'; $info = mysql_fetch_array($result); if($info['id'] == 0){ header(""location: webpage.php""); } else if ($info['id'] == 100) { header(""location: lecturer_user.php?myid=$myid""); } else if ($info['id'] == 102) { header(""location: lecturer_user.php""); } else { echo ""Wrong Username or Password""; header (""refresh:5; url=main_login.php""); } } ob_end_flush(); ?> <html> <body> <table> <th><a href=""main_login.php?pressed=back"">Back</a></th> </table> </body> </html><?php session_start(); echo ""<a href=\""drop.php?myid="".$_SESSION['myid'].""\"">drop</a>""; ?><html> <head></head> <body> <?php $conn = mysql_connect('localhost','root','password'); mysql_select_db('lecturer'); $myid = $_GET[""myid""]; $query = 'SELECT persons.ID , persons.FirstName , user_subject.subject FROM persons INNER JOIN user_subject ON persons.ID = user_subject.ID WHERE persons.ID = '.$myid.' ORDER BY user_subject.subject'; $result = mysql_query($query) or die(mysql_error()); ?> <table width=""400"" border=""0"" align=""center"" cellspacing=""1"" cellpadding=""0""> <tr> <td><form name=""form1"" method=""post"" action=""""> <table width=""400"" border=""0"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <td bgcolor=""#FFFFFF"">&nbsp;</td> <td colspan=""4"" bgcolor=""#FFFFFF""><strong>Drop subject</strong> </td> </tr> <tr> <td align=""center"" bgcolor=""#FFFFFF"">#</td> <td align=""center"" bgcolor=""#FFFFFF""><strong>ID</strong></td> <td align=""center"" bgcolor=""#FFFFFF""><strong>Subject</strong></td> </tr> <?php while($row = mysql_fetch_assoc($result)) { ?> <tr> <td align=""center"" bgcolor=""#FFFFFF""><input type=""checkbox"" name=""data[]"" value=""<?php echo $row['ID'];?>"" /></td> <td bgcolor=""#FFFFFF""> <?php echo $row['ID']; ?> </td> <td bgcolor=""#FFFFFF""> <?php echo $row['subject']; ?> </td> </tr> <?php } ?> <tr> <td colspan=""3"" align=""left"" bgcolor=""#FFFFFF""><input type=""submit"" value=""Delete Checked Rows"" /></td> <td colspan=""2"" align=""right"" bgcolor=""#FFFFFF""><a href=""user_subject.php?pressed=subject"">Back</a></td> </tr> <?php if(isset($_POST['data'])) { $del_query = ""DELETE FROM user_subject WHERE ID IN (""; foreach($_POST['data'] as $data) { $del_query .= ""'"" . (int) $data . ""',""; } $del_query .= ""'')""; mysql_query($del_query) or die(mysql_error()); header(""Location:"" . $_SERVER['PHP_SELF']); } mysql_close() ?> </table> </form> </tr> </table> </body> </html>"
"260","bad","<?php session_start(); ob_start(); $host=""localhost""; // Host name $username=""root""; // Mysql username $password=""password""; // Mysql password $db_name=""lecturer""; // Database name $tbl_name=""members""; // Table name // Connect to server and select databse. mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); mysql_select_db(""$db_name"")or die(""cannot select DB""); // Define $myusername and $mypassword $myid=$_POST['myid']; $mypassword=$_POST['mypassword']; // To protect MySQL injection (more detail about MySQL injection) $myid = stripslashes($myid); $mypassword = stripslashes($mypassword); $myid = mysql_real_escape_string($myid); $mypassword = mysql_real_escape_string($mypassword); $sql=""SELECT * FROM $tbl_name WHERE ID='$myid' and password='$mypassword' LIMIT 1 ""; $result=mysql_query($sql); // Mysql_num_row is counting table row $count=mysql_num_rows($result); // If result matched $myusername and $mypassword, table row must be 1 row if($count==1){ // Register $myusername, $mypassword and redirect to file ""login_success.php"" $_session['myid'] = 'myid'; $_session['mypassword'] = 'mypassword'; $info = mysql_fetch_array($result); if($info['id'] == 0){ header(""location: webpage.php""); } else if ($info['id'] == 100) { header(""location: lecturer_user.php?myid=$myid""); } else if ($info['id'] == 102) { header(""location: lecturer_user.php""); } else { echo ""Wrong Username or Password""; header (""refresh:5; url=main_login.php""); } } ob_end_flush(); ?> <html> <body> <table> <th><a href=""main_login.php?pressed=back"">Back</a></th> </table> </body> </html><?php session_start(); echo ""<a href=\""drop.php?myid="".$_SESSION['myid'].""\"">drop</a>""; ?><html> <head></head> <body> <?php $conn = mysql_connect('localhost','root','password'); mysql_select_db('lecturer'); $myid = $_GET[""myid""]; $query = 'SELECT persons.ID , persons.FirstName , user_subject.subject FROM persons INNER JOIN user_subject ON persons.ID = user_subject.ID WHERE persons.ID = '.$myid.' ORDER BY user_subject.subject'; $result = mysql_query($query) or die(mysql_error()); ?> <table width=""400"" border=""0"" align=""center"" cellspacing=""1"" cellpadding=""0""> <tr> <td><form name=""form1"" method=""post"" action=""""> <table width=""400"" border=""0"" cellpadding=""3"" cellspacing=""1"" bgcolor=""#CCCCCC""> <tr> <td bgcolor=""#FFFFFF"">&nbsp;</td> <td colspan=""4"" bgcolor=""#FFFFFF""><strong>Drop subject</strong> </td> </tr> <tr> <td align=""center"" bgcolor=""#FFFFFF"">#</td> <td align=""center"" bgcolor=""#FFFFFF""><strong>ID</strong></td> <td align=""center"" bgcolor=""#FFFFFF""><strong>Subject</strong></td> </tr> <?php while($row = mysql_fetch_assoc($result)) { ?> <tr> <td align=""center"" bgcolor=""#FFFFFF""><input type=""checkbox"" name=""data[]"" value=""<?php echo $row['ID'];?>"" /></td> <td bgcolor=""#FFFFFF""> <?php echo $row['ID']; ?> </td> <td bgcolor=""#FFFFFF""> <?php echo $row['subject']; ?> </td> </tr> <?php } ?> <tr> <td colspan=""3"" align=""left"" bgcolor=""#FFFFFF""><input type=""submit"" value=""Delete Checked Rows"" /></td> <td colspan=""2"" align=""right"" bgcolor=""#FFFFFF""><a href=""user_subject.php?pressed=subject"">Back</a></td> </tr> <?php if(isset($_POST['data'])) { $del_query = ""DELETE FROM user_subject WHERE ID IN (""; foreach($_POST['data'] as $data) { $del_query .= ""'"" . (int) $data . ""',""; } $del_query .= ""'')""; mysql_query($del_query) or die(mysql_error()); header(""Location:"" . $_SERVER['PHP_SELF']); } mysql_close() ?> </table> </form> </tr> </table> </body> </html>"
"261","bad","<?php $dbname=""Jr""; // Indique o nome do banco de dados que será aberto $user=""root""; // Indique o nome do usuário que tem acesso $password=""""; // Indique a senha do usuário if(!(mysql_connect(""localhost"",$user,$password))) { echo ""Não foi possível estabelecer uma conexão com o gerenciador MySQL. Favor Contactar o Administrador.""; } else { //echo ""Conectado!!!"".""<br>""; } if (mysql_select_db($dbname)) { //echo ""DB selecionado!""; } $grava_titulo = $_POST['titulo']; $grava_mensagem = $_POST['mensagem']; $grava_tags = $_POST['tags']; $sql_gravar = mysql_query(""INSERT INTO posts (titulo, mensagem, tags) value ('$grava_titulo', '$grava_mensagem', '$grava_tags')""); if($sql_gravar) { echo""<br>""; echo ""A sua mensagem foi enviada com sucesso!"".""<br>""; echo ""Obrigado por participar!""; }else { echo ""Desculpe, erro ao enviar!""; } ?><!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=iso-8859-1"" /> <title>SOBRE</title> </head> <?php include ""css.php""; ?> <body> <div id=""fundo_paginas""> <div id=""geral_paginas""> <?php include ""menu.php""; ?> <div id=""conteudo""> <div id=""titulo_pagina""> <p>Posts</p> </div><!--titulo_pagina--> <form id=""form1"" name=""form1"" method=""post"" action=""""> <table width=""327"" border=""0""> <tr> <th width=""80"" scope=""row""><div align=""left"">Titulo</div></th> <td width=""237""><label> <input name=""titulo"" type=""text"" id=""form"" size=""35"" maxlength=""100"" /> </label></td> </tr> <tr> <th scope=""row""><div align=""left"">Mensagem</div></th> <td><label> <textarea name=""mensagem"" cols=""40"" rows=""6"" id=""form""></textarea> </label></td> </tr> <tr> <th scope=""row""><div align=""left"">Tags</div></th> <td><label> <input name=""tags"" type=""text"" id=""form"" size=""35"" /> </label></td> </tr> <tr> <th scope=""row"">&nbsp;</th> <td>&nbsp;</td> </tr> <tr> <th scope=""row"">&nbsp;</th> <td><label> <input type=""submit"" name=""Submit"" value="" Enviar "" /> </label></td> </tr> </table> </form> <center> <?php include ""conexao/conexao.php""; ?> </center> </div><!--conteudo--> <div style=""clear:both""> </div><!-- geral_paginas --> </div><!--fundo_paginas--> </body> </html>"
"262","bad","<?php $dbname=""Jr""; // Indique o nome do banco de dados que será aberto $user=""root""; // Indique o nome do usuário que tem acesso $password=""""; // Indique a senha do usuário if(!(mysql_connect(""localhost"",$user,$password))) { echo ""Não foi possível estabelecer uma conexão com o gerenciador MySQL. Favor Contactar o Administrador.""; } else { //echo ""Conectado!!!"".""<br>""; } if (mysql_select_db($dbname)) { //echo ""DB selecionado!""; } $grava_titulo = $_POST['titulo']; $grava_mensagem = $_POST['mensagem']; $grava_tags = $_POST['tags']; $sql_gravar = mysql_query(""INSERT INTO posts (titulo, mensagem, tags) value ('$grava_titulo', '$grava_mensagem', '$grava_tags')""); if($sql_gravar) { echo""<br>""; echo ""A sua mensagem foi enviada com sucesso!"".""<br>""; echo ""Obrigado por participar!""; }else { echo ""Desculpe, erro ao enviar!""; } ?><!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=iso-8859-1"" /> <title>SOBRE</title> </head> <?php include ""css.php""; ?> <body> <div id=""fundo_paginas""> <div id=""geral_paginas""> <?php include ""menu.php""; ?> <div id=""conteudo""> <div id=""titulo_pagina""> <p>Posts</p> </div><!--titulo_pagina--> <form id=""form1"" name=""form1"" method=""post"" action=""""> <table width=""327"" border=""0""> <tr> <th width=""80"" scope=""row""><div align=""left"">Titulo</div></th> <td width=""237""><label> <input name=""titulo"" type=""text"" id=""form"" size=""35"" maxlength=""100"" /> </label></td> </tr> <tr> <th scope=""row""><div align=""left"">Mensagem</div></th> <td><label> <textarea name=""mensagem"" cols=""40"" rows=""6"" id=""form""></textarea> </label></td> </tr> <tr> <th scope=""row""><div align=""left"">Tags</div></th> <td><label> <input name=""tags"" type=""text"" id=""form"" size=""35"" /> </label></td> </tr> <tr> <th scope=""row"">&nbsp;</th> <td>&nbsp;</td> </tr> <tr> <th scope=""row"">&nbsp;</th> <td><label> <input type=""submit"" name=""Submit"" value="" Enviar "" /> </label></td> </tr> </table> </form> <center> <?php include ""conexao/conexao.php""; ?> </center> </div><!--conteudo--> <div style=""clear:both""> </div><!-- geral_paginas --> </div><!--fundo_paginas--> </body> </html>"
"263","bad","var grid = new Ext.grid.EditorGridPanel({ id: 'maingrid', store: store, cm: cm, width: 785.5, anchor: '100%', height: 700, frame: true, loadMask: true, waitMsg: 'Loading...', clicksToEdit: 2, tbar: [ '->', { text: 'Add', iconCls: 'add', id: 'b_add', disabled: true, handler : function(){ var Put = grid.getStore().recordType; var p = new Put({ action_take: 'add', is_active: '', allowBlank: false }); Ext.getCmp('b_save').enable(); Ext.getCmp('b_cancel').enable(); grid.stopEditing(); store.insert(0, p); grid.startEditing(0, 1); } },'-',{ text: 'Save', iconCls: 'save', id: 'b_save', disabled: true, handler : function(){ var objectStore = Ext.getCmp(""maingrid"").getStore(); var objectModified = objectStore.getModifiedRecords(); var customer_id = Ext.getCmp(""maingrid"").getStore().baseParams['customer_id']; var objectData = new Array(); var dont_include; if(objectModified.length > 0) { for(var i = 0; i < objectModified.length; i++) { dont_include = false; if(objectModified[i].data.id && ( (objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '') || (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '') || (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '') ) ) { Ext.Msg.show({ title: 'Warning', msg: ""Input value required."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); return; } else//no id, means new record { //all fields are not filled-in, just do nothing if((objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '')&& (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '')&& (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '')) { //boolean flag to determine whether to include this in submission dont_include = true; } //either one field is not filled-in prompt to fill in all fields else if((objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '')|| (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '')|| (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '')) { Ext.Msg.show({ title: 'Warning', msg: ""Input value required."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); return; } } //the data for submission if(!dont_include) { objectData.push({ firstname: objectModified[i].data.firstname, lastname: objectModified[i].data.lastname, email_address: objectModified[i].data.email_address, id: objectModified[i].data.id, customer_id: customer_id }); } } // console.log(objectData) // return; //check if data to submit is not empty if(objectData.length < 1)//empty { Ext.Msg.show({ title: 'Warning', msg: ""No records to be saved"", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); Ext.getCmp('maingrid').getStore().reload(); return; } // return; Ext.Msg.wait('Saving Records...'); Ext.Ajax.request({ timeout:900000, params: {objdata: Ext.encode(objectData)}, url: '/index.php/SaveContent', success: function(resp){ var response = Ext.decode(resp.responseText); Ext.Msg.hide(); if(response.success == true){ Ext.Msg.show({ title: ""Information"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.INFO, fn: function(btn){ Ext.getCmp('maingrid').getStore().reload(); Ext.getCmp('b_save').disable(); Ext.getCmp('b_cancel').disable(); } }); }else{ Ext.Msg.show({ title: ""Warning"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.WARNING }); } }, failure: function(resp){ Ext.Msg.hide(); Ext.Msg.show({ title: ""Warning1"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.WARNING }); } }); } else{ Ext.Msg.show({ title: 'Warning', msg: ""No changes made."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); } } },'-', { text: 'Cancel', iconCls: 'cancel', id: 'b_cancel', disabled: true, handler : function(){ var store = Ext.getCmp('maingrid').getStore(); var modified = store.getModifiedRecords(); if (modified.length) { Ext.MessageBox.confirm('Cancel', 'There are records not yet saved. Are you sure you want to cancel the changes?', function(btnId) { if (btnId == 'yes') { store.reload(); Ext.getCmp('b_save').disable(); Ext.getCmp('b_cancel').disable(); } }); } } } ], bbar: pager }); public function executeSaveContent(sfWebRequest $request){ $save_data = json_decode($request->getParameter(""objdata"")); $count_array = count($save_data); $id_insession = $_SESSION['employee_id']; if($count_array > 0){ foreach($save_data as $k => $v){ $id = strip_tags($v->id); $firstname = preg_replace(""/\s+/"", "" "", $v->firstname); $firstname = ltrim(addslashes(strip_tags($firstname))); $firstname = rtrim($firstname); $lastname = preg_replace(""/\s+/"", "" "", $v->lastname); $lastname = ltrim(addslashes(strip_tags($lastname))); $lastname = rtrim($lastname); $email_address = preg_replace(""/\s+/"", "" "", $v->email_address); $email_address = ltrim(addslashes(strip_tags($email_address))); $email_adsress = rtrim($email_address); $customer_id = $v->customer_id; $action = ''; //strip_tags($v->action); if(empty($id)) { $action='add'; } else { $action='edit'; } if(!empty($firstname)||($lastname)||($email_address)){ $sql_check = ""select firstname,lastname,email_address from customer_saver ""; if($action == ""edit""){ $sql_check .= "" where firstname = '$firstname' and id not in ($id)""; } if($action == ""add""){ $sql_check .= "" where firstname = '$firstname' ""; } } $setpath = _appContract::SchemaChange('contract_arbill'); $this->conn->execute($setpath); $result_check = $this->conn->fetchAll($sql_check); foreach($result_check as $v){ $fetch_firstname = $this->formatString($v['firstname']); $fetch_lastname = $this->formatString($v['lastname']); $fetch_email_address= $v['email_address']; } $result_check_count = count($result_check); if($action == ""edit""){ if($result_check_count == 0){ $sql = ""update customer_saver set firstname = '$firstname', lastname = '$lastname', email_address = '$email_address' where id = $id""; } else{ $resp['success'] = false; $resp['msg'] = ""Duplicate entry found. <br> First name: <b>"".$firstname.""</b> Last name: <b>"".$lastname.""</b> Email Address: <b>"".$email_address.""</b>""; die(json_encode($resp)); } } elseif($action == ""add""){ if(empty($id) && $result_check_count == 0){ $sql = ""insert into customer_saver (firstname, lastname, email_address,customer_id) values ('$firstname', '$lastname', '$email_address', $customer_id)""; } else{ $resp['success'] = false; $resp['msg'] = ""Duplicate entry found. <br> First Name: <b>"".$firstname.""</b> Last Name: <b>"".$lastname.""</b> Email Address: <b>"".$email_address.""</b>""; die(json_encode($resp)); } } try{ $this->conn->execute($setpath); $this->conn->execute($sql); }catch(Exception $e){ die($e->getMessage()); } } $resp['success'] = true; $resp['msg'] = ""Successfully saved the record.""; die(json_encode($resp)); }"
"264","bad","var grid = new Ext.grid.EditorGridPanel({ id: 'maingrid', store: store, cm: cm, width: 785.5, anchor: '100%', height: 700, frame: true, loadMask: true, waitMsg: 'Loading...', clicksToEdit: 2, tbar: [ '->', { text: 'Add', iconCls: 'add', id: 'b_add', disabled: true, handler : function(){ var Put = grid.getStore().recordType; var p = new Put({ action_take: 'add', is_active: '', allowBlank: false }); Ext.getCmp('b_save').enable(); Ext.getCmp('b_cancel').enable(); grid.stopEditing(); store.insert(0, p); grid.startEditing(0, 1); } },'-',{ text: 'Save', iconCls: 'save', id: 'b_save', disabled: true, handler : function(){ var objectStore = Ext.getCmp(""maingrid"").getStore(); var objectModified = objectStore.getModifiedRecords(); var customer_id = Ext.getCmp(""maingrid"").getStore().baseParams['customer_id']; var objectData = new Array(); var dont_include; if(objectModified.length > 0) { for(var i = 0; i < objectModified.length; i++) { dont_include = false; if(objectModified[i].data.id && ( (objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '') || (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '') || (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '') ) ) { Ext.Msg.show({ title: 'Warning', msg: ""Input value required."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); return; } else//no id, means new record { //all fields are not filled-in, just do nothing if((objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '')&& (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '')&& (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '')) { //boolean flag to determine whether to include this in submission dont_include = true; } //either one field is not filled-in prompt to fill in all fields else if((objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '')|| (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '')|| (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '')) { Ext.Msg.show({ title: 'Warning', msg: ""Input value required."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); return; } } //the data for submission if(!dont_include) { objectData.push({ firstname: objectModified[i].data.firstname, lastname: objectModified[i].data.lastname, email_address: objectModified[i].data.email_address, id: objectModified[i].data.id, customer_id: customer_id }); } } // console.log(objectData) // return; //check if data to submit is not empty if(objectData.length < 1)//empty { Ext.Msg.show({ title: 'Warning', msg: ""No records to be saved"", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); Ext.getCmp('maingrid').getStore().reload(); return; } // return; Ext.Msg.wait('Saving Records...'); Ext.Ajax.request({ timeout:900000, params: {objdata: Ext.encode(objectData)}, url: '/index.php/SaveContent', success: function(resp){ var response = Ext.decode(resp.responseText); Ext.Msg.hide(); if(response.success == true){ Ext.Msg.show({ title: ""Information"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.INFO, fn: function(btn){ Ext.getCmp('maingrid').getStore().reload(); Ext.getCmp('b_save').disable(); Ext.getCmp('b_cancel').disable(); } }); }else{ Ext.Msg.show({ title: ""Warning"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.WARNING }); } }, failure: function(resp){ Ext.Msg.hide(); Ext.Msg.show({ title: ""Warning1"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.WARNING }); } }); } else{ Ext.Msg.show({ title: 'Warning', msg: ""No changes made."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); } } },'-', { text: 'Cancel', iconCls: 'cancel', id: 'b_cancel', disabled: true, handler : function(){ var store = Ext.getCmp('maingrid').getStore(); var modified = store.getModifiedRecords(); if (modified.length) { Ext.MessageBox.confirm('Cancel', 'There are records not yet saved. Are you sure you want to cancel the changes?', function(btnId) { if (btnId == 'yes') { store.reload(); Ext.getCmp('b_save').disable(); Ext.getCmp('b_cancel').disable(); } }); } } } ], bbar: pager }); public function executeSaveContent(sfWebRequest $request){ $save_data = json_decode($request->getParameter(""objdata"")); $count_array = count($save_data); $id_insession = $_SESSION['employee_id']; if($count_array > 0){ foreach($save_data as $k => $v){ $id = strip_tags($v->id); $firstname = preg_replace(""/\s+/"", "" "", $v->firstname); $firstname = ltrim(addslashes(strip_tags($firstname))); $firstname = rtrim($firstname); $lastname = preg_replace(""/\s+/"", "" "", $v->lastname); $lastname = ltrim(addslashes(strip_tags($lastname))); $lastname = rtrim($lastname); $email_address = preg_replace(""/\s+/"", "" "", $v->email_address); $email_address = ltrim(addslashes(strip_tags($email_address))); $email_adsress = rtrim($email_address); $customer_id = $v->customer_id; $action = ''; //strip_tags($v->action); if(empty($id)) { $action='add'; } else { $action='edit'; } if(!empty($firstname)||($lastname)||($email_address)){ $sql_check = ""select firstname,lastname,email_address from customer_saver ""; if($action == ""edit""){ $sql_check .= "" where firstname = '$firstname' and id not in ($id)""; } if($action == ""add""){ $sql_check .= "" where firstname = '$firstname' ""; } } $setpath = _appContract::SchemaChange('contract_arbill'); $this->conn->execute($setpath); $result_check = $this->conn->fetchAll($sql_check); foreach($result_check as $v){ $fetch_firstname = $this->formatString($v['firstname']); $fetch_lastname = $this->formatString($v['lastname']); $fetch_email_address= $v['email_address']; } $result_check_count = count($result_check); if($action == ""edit""){ if($result_check_count == 0){ $sql = ""update customer_saver set firstname = '$firstname', lastname = '$lastname', email_address = '$email_address' where id = $id""; } else{ $resp['success'] = false; $resp['msg'] = ""Duplicate entry found. <br> First name: <b>"".$firstname.""</b> Last name: <b>"".$lastname.""</b> Email Address: <b>"".$email_address.""</b>""; die(json_encode($resp)); } } elseif($action == ""add""){ if(empty($id) && $result_check_count == 0){ $sql = ""insert into customer_saver (firstname, lastname, email_address,customer_id) values ('$firstname', '$lastname', '$email_address', $customer_id)""; } else{ $resp['success'] = false; $resp['msg'] = ""Duplicate entry found. <br> First Name: <b>"".$firstname.""</b> Last Name: <b>"".$lastname.""</b> Email Address: <b>"".$email_address.""</b>""; die(json_encode($resp)); } } try{ $this->conn->execute($setpath); $this->conn->execute($sql); }catch(Exception $e){ die($e->getMessage()); } } $resp['success'] = true; $resp['msg'] = ""Successfully saved the record.""; die(json_encode($resp)); }"
"265","bad","var grid = new Ext.grid.EditorGridPanel({ id: 'maingrid', store: store, cm: cm, width: 785.5, anchor: '100%', height: 700, frame: true, loadMask: true, waitMsg: 'Loading...', clicksToEdit: 2, tbar: [ '->', { text: 'Add', iconCls: 'add', id: 'b_add', disabled: true, handler : function(){ var Put = grid.getStore().recordType; var p = new Put({ action_take: 'add', is_active: '', allowBlank: false }); Ext.getCmp('b_save').enable(); Ext.getCmp('b_cancel').enable(); grid.stopEditing(); store.insert(0, p); grid.startEditing(0, 1); } },'-',{ text: 'Save', iconCls: 'save', id: 'b_save', disabled: true, handler : function(){ var objectStore = Ext.getCmp(""maingrid"").getStore(); var objectModified = objectStore.getModifiedRecords(); var customer_id = Ext.getCmp(""maingrid"").getStore().baseParams['customer_id']; var objectData = new Array(); var dont_include; if(objectModified.length > 0) { for(var i = 0; i < objectModified.length; i++) { dont_include = false; if(objectModified[i].data.id && ( (objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '') || (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '') || (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '') ) ) { Ext.Msg.show({ title: 'Warning', msg: ""Input value required."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); return; } else//no id, means new record { //all fields are not filled-in, just do nothing if((objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '')&& (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '')&& (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '')) { //boolean flag to determine whether to include this in submission dont_include = true; } //either one field is not filled-in prompt to fill in all fields else if((objectModified[i].data.firstname == undefined || objectModified[i].data.firstname == null|| objectModified[i].data.firstname == '')|| (objectModified[i].data.lastname == undefined || objectModified[i].data.lastname == null|| objectModified[i].data.lastname == '')|| (objectModified[i].data.email_address == undefined || objectModified[i].data.email_address == null|| objectModified[i].data.email_address == '')) { Ext.Msg.show({ title: 'Warning', msg: ""Input value required."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); return; } } //the data for submission if(!dont_include) { objectData.push({ firstname: objectModified[i].data.firstname, lastname: objectModified[i].data.lastname, email_address: objectModified[i].data.email_address, id: objectModified[i].data.id, customer_id: customer_id }); } } // console.log(objectData) // return; //check if data to submit is not empty if(objectData.length < 1)//empty { Ext.Msg.show({ title: 'Warning', msg: ""No records to be saved"", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); Ext.getCmp('maingrid').getStore().reload(); return; } // return; Ext.Msg.wait('Saving Records...'); Ext.Ajax.request({ timeout:900000, params: {objdata: Ext.encode(objectData)}, url: '/index.php/SaveContent', success: function(resp){ var response = Ext.decode(resp.responseText); Ext.Msg.hide(); if(response.success == true){ Ext.Msg.show({ title: ""Information"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.INFO, fn: function(btn){ Ext.getCmp('maingrid').getStore().reload(); Ext.getCmp('b_save').disable(); Ext.getCmp('b_cancel').disable(); } }); }else{ Ext.Msg.show({ title: ""Warning"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.WARNING }); } }, failure: function(resp){ Ext.Msg.hide(); Ext.Msg.show({ title: ""Warning1"", msg: response.msg, buttons: Ext.Msg.OK, icon: Ext.Msg.WARNING }); } }); } else{ Ext.Msg.show({ title: 'Warning', msg: ""No changes made."", icon: Ext.Msg.WARNING, buttons: Ext.Msg.OK }); } } },'-', { text: 'Cancel', iconCls: 'cancel', id: 'b_cancel', disabled: true, handler : function(){ var store = Ext.getCmp('maingrid').getStore(); var modified = store.getModifiedRecords(); if (modified.length) { Ext.MessageBox.confirm('Cancel', 'There are records not yet saved. Are you sure you want to cancel the changes?', function(btnId) { if (btnId == 'yes') { store.reload(); Ext.getCmp('b_save').disable(); Ext.getCmp('b_cancel').disable(); } }); } } } ], bbar: pager }); public function executeSaveContent(sfWebRequest $request){ $save_data = json_decode($request->getParameter(""objdata"")); $count_array = count($save_data); $id_insession = $_SESSION['employee_id']; if($count_array > 0){ foreach($save_data as $k => $v){ $id = strip_tags($v->id); $firstname = preg_replace(""/\s+/"", "" "", $v->firstname); $firstname = ltrim(addslashes(strip_tags($firstname))); $firstname = rtrim($firstname); $lastname = preg_replace(""/\s+/"", "" "", $v->lastname); $lastname = ltrim(addslashes(strip_tags($lastname))); $lastname = rtrim($lastname); $email_address = preg_replace(""/\s+/"", "" "", $v->email_address); $email_address = ltrim(addslashes(strip_tags($email_address))); $email_adsress = rtrim($email_address); $customer_id = $v->customer_id; $action = ''; //strip_tags($v->action); if(empty($id)) { $action='add'; } else { $action='edit'; } if(!empty($firstname)||($lastname)||($email_address)){ $sql_check = ""select firstname,lastname,email_address from customer_saver ""; if($action == ""edit""){ $sql_check .= "" where firstname = '$firstname' and id not in ($id)""; } if($action == ""add""){ $sql_check .= "" where firstname = '$firstname' ""; } } $setpath = _appContract::SchemaChange('contract_arbill'); $this->conn->execute($setpath); $result_check = $this->conn->fetchAll($sql_check); foreach($result_check as $v){ $fetch_firstname = $this->formatString($v['firstname']); $fetch_lastname = $this->formatString($v['lastname']); $fetch_email_address= $v['email_address']; } $result_check_count = count($result_check); if($action == ""edit""){ if($result_check_count == 0){ $sql = ""update customer_saver set firstname = '$firstname', lastname = '$lastname', email_address = '$email_address' where id = $id""; } else{ $resp['success'] = false; $resp['msg'] = ""Duplicate entry found. <br> First name: <b>"".$firstname.""</b> Last name: <b>"".$lastname.""</b> Email Address: <b>"".$email_address.""</b>""; die(json_encode($resp)); } } elseif($action == ""add""){ if(empty($id) && $result_check_count == 0){ $sql = ""insert into customer_saver (firstname, lastname, email_address,customer_id) values ('$firstname', '$lastname', '$email_address', $customer_id)""; } else{ $resp['success'] = false; $resp['msg'] = ""Duplicate entry found. <br> First Name: <b>"".$firstname.""</b> Last Name: <b>"".$lastname.""</b> Email Address: <b>"".$email_address.""</b>""; die(json_encode($resp)); } } try{ $this->conn->execute($setpath); $this->conn->execute($sql); }catch(Exception $e){ die($e->getMessage()); } } $resp['success'] = true; $resp['msg'] = ""Successfully saved the record.""; die(json_encode($resp)); }"
"266","bad","<?php if ( isset( $_POST['submit'] ) ) { $email = $_POST['email']; $name = $_POST['name']; $comment = $_POST['comment']; if($email && $name ) { if($comment) { $connect = mysql_connect(""dragon.kent.ac.uk"", ""repo"", ""3tpyril""); mysql_select_db(""repo""); $query = mysql_query(""INSERT into comments(comment, name,email, newsitemId) VALUES ('$email', '$name','$comment',':newsitemId'=> $_POST[newsitemId])""); echo '<script type=""text/javascript"">alert(""Your blog post has been added"");</script>'; } else { echo '<script type=""text/javascript"">alert(""Please provide some details"");</script>'; } } else { echo '<script type=""text/javascript"">alert(""All fields required"");</script>'; } } ?>"
"267","bad","<?php if ( isset( $_POST['submit'] ) ) { $email = $_POST['email']; $name = $_POST['name']; $comment = $_POST['comment']; if($email && $name ) { if($comment) { $connect = mysql_connect(""dragon.kent.ac.uk"", ""repo"", ""3tpyril""); mysql_select_db(""repo""); $query = mysql_query(""INSERT into comments(comment, name,email, newsitemId) VALUES ('$email', '$name','$comment',':newsitemId'=> $_POST[newsitemId])""); echo '<script type=""text/javascript"">alert(""Your blog post has been added"");</script>'; } else { echo '<script type=""text/javascript"">alert(""Please provide some details"");</script>'; } } else { echo '<script type=""text/javascript"">alert(""All fields required"");</script>'; } } ?>"
"268","bad","+----+-------------+ | Id | Value | +----+-------------+ | 1 | title | +----+-------------+ | 2 | description | +----+-------------+ | 3 | email | +----+-------------+ | 4 | keywords | +----+-------------+include('../../include/config.php'); if($_POST['settings']){ $title=$_POST['title']; $description=$_POST['description']; $email=$_POST['email']; $keywords=$_POST['keywords']; $test=$db->query(""UPDATE `settings` SET `value` = '$title' WHERE `id` =1, SET `value` = '$description' WHERE `id` =2,SET `value` = '$email' WHERE `id` =3, SET `value` = '$keywords' WHERE `id` =4;""); if($test){ echo ""good""; }else{ echo ""bad""; } }"
"269","bad","+----+-------------+ | Id | Value | +----+-------------+ | 1 | title | +----+-------------+ | 2 | description | +----+-------------+ | 3 | email | +----+-------------+ | 4 | keywords | +----+-------------+include('../../include/config.php'); if($_POST['settings']){ $title=$_POST['title']; $description=$_POST['description']; $email=$_POST['email']; $keywords=$_POST['keywords']; $test=$db->query(""UPDATE `settings` SET `value` = '$title' WHERE `id` =1, SET `value` = '$description' WHERE `id` =2,SET `value` = '$email' WHERE `id` =3, SET `value` = '$keywords' WHERE `id` =4;""); if($test){ echo ""good""; }else{ echo ""bad""; } }"
"270","bad","+----+-------------+ | Id | Value | +----+-------------+ | 1 | title | +----+-------------+ | 2 | description | +----+-------------+ | 3 | email | +----+-------------+ | 4 | keywords | +----+-------------+include('../../include/config.php'); if($_POST['settings']){ $title=$_POST['title']; $description=$_POST['description']; $email=$_POST['email']; $keywords=$_POST['keywords']; $test=$db->query(""UPDATE `settings` SET `value` = '$title' WHERE `id` =1, SET `value` = '$description' WHERE `id` =2,SET `value` = '$email' WHERE `id` =3, SET `value` = '$keywords' WHERE `id` =4;""); if($test){ echo ""good""; }else{ echo ""bad""; } }"
"271","good","<script type=""text/javascript""> function selecthotel(str) { if (window.XMLHttpRequest) { xmlhttp=new XMLHttpRequest(); }else { xmlhttp=new ActiveXObject(""Microsoft.XMLHTTP""); } xmlhttp.onreadystatechange=function() { if (xmlhttp.readyState==4 && xmlhttp.status==200) { document.getElementById(""hotelselection"").innerHTML=xmlhttp.responseText; } } if(str == 0) { str = 0; } xmlhttp.open(""GET"",""includes/ajaxlocationsearch.php?location=""+str+""&language=<?php echo $language; ?>"",true); xmlhttp.send(); } </script>$language = $_GET[""language""]; $location = $_GET['location']; if($location == ""0"") { $result = mysql_query(""Select * from eshop_articles where category='/WEBSITE/SEARCHENGINE/HOTELS' order by appearance"",$link_id); }else { $result = mysql_query(""Select * from eshop_articles where category='/WEBSITE/SEARCHENGINE/HOTELS' and short_description='$location' order by appearance"",$link_id); } ?> <option value=""0""><?php $a = $language.""_choose_hotel""; echo ${$a}; ?></option> <?php while($row = mysql_fetch_assoc($result)) { ?> <option value=""<?php echo $row['appearance']; ?>""><?php echo $row['title']; ?></option> <?php } ?>"
"272","bad","`include_once('../includes/connection.php');` // Query that retrieves events $con = ""SELECT * FROM evenement WHERE approved = 'no' ORDER BY id""; $result = mysqli_query($connection, $con); if($con){ $registry = mysqli_affected_rows($connection); if($registry > 0){ echo ' <h1 align=""center"">Events pending approval</h1> <br><table width=""100%"" align=""center"" border=""0"" border-spacing=""2px"" cellspacing=""1"" cellpadding=""1""> <form action=""approveReject.php"" method=""post"" > <tr bgcolor=""#3333FF"" style=""color:white; font-family:Tahoma, Geneva, sans-serif; font-size:15px""""> <th align=""center""><strong>Title</strong></th> <th align=""center""><strong>Details</strong></th> <th align=""center""><strong>Category</strong></th> <th align=""center""><strong>Start</strong></th> <th align=""center""><strong>End</strong></th> <th align=""center""><strong>All Day event?</strong></th> <th align=""center""><strong>Approved</strong></th> </tr>'; $color = ""1""; while($registry = mysqli_fetch_array($result, MYSQLI_ASSOC)){ if($color==1){ echo '<tr bgcolor=""#F8F8F8"" font-family:Tahoma, Geneva, sans-serif; font-size:15px"">'; $color=""2""; } else { echo '<tr bgcolor=""#dcdcdc"" font-family:Tahoma, Geneva, sans-serif; font-size:15px"">'; $color=""1""; } echo ' <form action="""" method=""post""> <input type=""hidden"" value=""'.$registry['id'].'"" name=""id[]"" id=""id""> <th div align=""center"">'.$registry['title'].' <td div align=""center"">'.$registry['details'].' <td div align=""center"">'.$registry['category'].' <td div align=""center"">'.$registry['start'].' <td div align=""center"">'.$registry['end'].' <td div align=""center""><select name=""allDay[]"" id=""allDay""> <option value=""0"">Select option</option> <option value=""1"">Yes</option> <option value=""2"">No</option> </select> <td div align=""center""><select name=""ap_re[]"" id=""ap_re""> <option value=""0"">Select option</option> <option value=""1"">Yes</option> <option value=""2"">No</option> </select> </tr>'; } ?> <td><input type=""submit"" name=""button"" id=""button"" value=""Submit"" style=""height:1.8em; width:7.3em;"" /></td> <?php echo '</form> '; echo ' </form> </table>'; } }else{ echo '<h1>There are no new requests to be approved</h1>'; } if(isset($_POST['Submit'])){ if($_POST['allDay'] == 'Yes'){ $allDay = 'true'; }else{ $allDay = 'false'; } $ap_re = $_POST['ap_re']; $i = 0; foreach($_POST['id'] as $id){ $udpate_qry = ""UPDATE evenement SET allDay='"".$allDay.""', approved='"".$ap_re.""', WHERE id='"".$id.""'""; $result_udpate_qry = mysqli_query($connection, $update_qry); $i++; } }"
"273","bad","$query = ""SELECT `to`, `from`, rank, gender, picture, title, msg FROM kaoscraft_pm WHERE `to` = '$username1' ORDER BY msg_id DESC""; $data = mysqli_query($dbc, $query); $gender = $row['gender']; while ($row = mysqli_fetch_array($data)) { $_SESSION['reply'] = $row['from']; $username2 = $_SESSION['reply']; echo '<div class=""viewpost"">'; echo '<div class=""vpside"">'; if(!empty($row['picture'])) { echo '<img class=""pictest"" src=""' . MM_UPLOADPATH . $row['picture'] . '"" alt=""' . MM_UPLOADPATH . 'nopic.png' . '"" />'; } if(!empty($row['from'])) { echo '<p>From:<br />' . $row['from'] . '</p>'; echo '<a href=""reply.php"">Reply</a>'; } if (isset($_POST['submit'])) { $username2 = $_SESSION['reply']; // Grab the profile data from the POST $msg = mysqli_real_escape_string($dbc, strip_tags( trim($_POST['msg']))); $title = mysqli_real_escape_string($dbc, trim($_POST['title'])); $to = $username2; // Update the post data in the database if (!empty($msg) && !empty($title)) { // Only set the picture column if there is a new picture $query = ""INSERT INTO kaoscraft_pm (`from`, `to`, `rank`, `gender`, `picture`, `msg_date`, `title`, `msg`) VALUES ('$username', '$to', '$rank', '$gender', '$picture', NOW(), '$title', '$msg')""; mysqli_query($dbc, $query);"
"274","bad","$query = ""SELECT `to`, `from`, rank, gender, picture, title, msg FROM kaoscraft_pm WHERE `to` = '$username1' ORDER BY msg_id DESC""; $data = mysqli_query($dbc, $query); $gender = $row['gender']; while ($row = mysqli_fetch_array($data)) { $_SESSION['reply'] = $row['from']; $username2 = $_SESSION['reply']; echo '<div class=""viewpost"">'; echo '<div class=""vpside"">'; if(!empty($row['picture'])) { echo '<img class=""pictest"" src=""' . MM_UPLOADPATH . $row['picture'] . '"" alt=""' . MM_UPLOADPATH . 'nopic.png' . '"" />'; } if(!empty($row['from'])) { echo '<p>From:<br />' . $row['from'] . '</p>'; echo '<a href=""reply.php"">Reply</a>'; } if (isset($_POST['submit'])) { $username2 = $_SESSION['reply']; // Grab the profile data from the POST $msg = mysqli_real_escape_string($dbc, strip_tags( trim($_POST['msg']))); $title = mysqli_real_escape_string($dbc, trim($_POST['title'])); $to = $username2; // Update the post data in the database if (!empty($msg) && !empty($title)) { // Only set the picture column if there is a new picture $query = ""INSERT INTO kaoscraft_pm (`from`, `to`, `rank`, `gender`, `picture`, `msg_date`, `title`, `msg`) VALUES ('$username', '$to', '$rank', '$gender', '$picture', NOW(), '$title', '$msg')""; mysqli_query($dbc, $query);"
"275","bad","$query = ""SELECT `to`, `from`, rank, gender, picture, title, msg FROM kaoscraft_pm WHERE `to` = '$username1' ORDER BY msg_id DESC""; $data = mysqli_query($dbc, $query); $gender = $row['gender']; while ($row = mysqli_fetch_array($data)) { $_SESSION['reply'] = $row['from']; $username2 = $_SESSION['reply']; echo '<div class=""viewpost"">'; echo '<div class=""vpside"">'; if(!empty($row['picture'])) { echo '<img class=""pictest"" src=""' . MM_UPLOADPATH . $row['picture'] . '"" alt=""' . MM_UPLOADPATH . 'nopic.png' . '"" />'; } if(!empty($row['from'])) { echo '<p>From:<br />' . $row['from'] . '</p>'; echo '<a href=""reply.php"">Reply</a>'; } if (isset($_POST['submit'])) { $username2 = $_SESSION['reply']; // Grab the profile data from the POST $msg = mysqli_real_escape_string($dbc, strip_tags( trim($_POST['msg']))); $title = mysqli_real_escape_string($dbc, trim($_POST['title'])); $to = $username2; // Update the post data in the database if (!empty($msg) && !empty($title)) { // Only set the picture column if there is a new picture $query = ""INSERT INTO kaoscraft_pm (`from`, `to`, `rank`, `gender`, `picture`, `msg_date`, `title`, `msg`) VALUES ('$username', '$to', '$rank', '$gender', '$picture', NOW(), '$title', '$msg')""; mysqli_query($dbc, $query);"
"276","bad","<?php if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($rootWord != """") { $tag = ""janaan""; $imbuhan = array(); // Imbuhan Kata Nama $result_awalan_ke = awalan_ke($rootWord, $tag); $imbuhan[1] = array('imbuhan' => $result_awalan_ke[0], 'pos' => $result_awalan_ke[2]); $resultDummy = mysql_query(""SELECT * FROM tabletruefalse WHERE rootWord ='$result_awalan_ke[0]'""); $exist = mysql_fetch_array($resultDummy, MYSQL_BOTH); if ($exist) { echo '<tr><td>'.$result_awalan_ke[1] .' : '. $result_awalan_ke[0] . '</td><td>'. $result_awalan_ke[2].'</td><td>&nbsp&nbsp&nbsp&nbsp<input type=""checkbox"" name=""imbuhan[]"" value=""1"" /></td></tr></br>'; } $result_awalan_pe = awalan_pe($rootWord, $tag); $imbuhan[2] = array('imbuhan' => $result_awalan_pe[0], 'pos' => $result_awalan_pe[2]); $resultDummy = mysql_query(""SELECT * FROM tabletruefalse WHERE rootWord ='$result_awalan_pe[0]'""); $exist = mysql_fetch_array($resultDummy, MYSQL_BOTH); if ($exist) { echo '<tr><td>'.$result_awalan_pe[1] .' : '. $result_awalan_pe[0] . '</td><td>'. $result_awalan_pe[2].'</td><td>&nbsp&nbsp&nbsp&nbsp<input type=""checkbox"" name=""imbuhan[]"" value=""2"" /></td></tr></br>'; } ?><?php if(isset($_POST['imbuhan'])){ foreach($_POST['imbuhan'] as $value){ $insert = mysql_query(""INSERT INTO tablebyuser(rootWord, posWord) VALUES ('$value[imbuhan]', '$value[pos]')""); } } ?>"
"277","bad","<?php if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($rootWord != """") { $tag = ""janaan""; $imbuhan = array(); // Imbuhan Kata Nama $result_awalan_ke = awalan_ke($rootWord, $tag); $imbuhan[1] = array('imbuhan' => $result_awalan_ke[0], 'pos' => $result_awalan_ke[2]); $resultDummy = mysql_query(""SELECT * FROM tabletruefalse WHERE rootWord ='$result_awalan_ke[0]'""); $exist = mysql_fetch_array($resultDummy, MYSQL_BOTH); if ($exist) { echo '<tr><td>'.$result_awalan_ke[1] .' : '. $result_awalan_ke[0] . '</td><td>'. $result_awalan_ke[2].'</td><td>&nbsp&nbsp&nbsp&nbsp<input type=""checkbox"" name=""imbuhan[]"" value=""1"" /></td></tr></br>'; } $result_awalan_pe = awalan_pe($rootWord, $tag); $imbuhan[2] = array('imbuhan' => $result_awalan_pe[0], 'pos' => $result_awalan_pe[2]); $resultDummy = mysql_query(""SELECT * FROM tabletruefalse WHERE rootWord ='$result_awalan_pe[0]'""); $exist = mysql_fetch_array($resultDummy, MYSQL_BOTH); if ($exist) { echo '<tr><td>'.$result_awalan_pe[1] .' : '. $result_awalan_pe[0] . '</td><td>'. $result_awalan_pe[2].'</td><td>&nbsp&nbsp&nbsp&nbsp<input type=""checkbox"" name=""imbuhan[]"" value=""2"" /></td></tr></br>'; } ?><?php if(isset($_POST['imbuhan'])){ foreach($_POST['imbuhan'] as $value){ $insert = mysql_query(""INSERT INTO tablebyuser(rootWord, posWord) VALUES ('$value[imbuhan]', '$value[pos]')""); } } ?>"
"278","bad","<form id=""registerForm""> <div id=""register-thankyou"" style=""display: none;""> Thank you. </div> <div id=""register-form""> <p class=""mandatory"" style=""color:#A00;font-weight:700;"">* indicates Required</p> <div data-role=""fieldcontain"" class=""text-field""> <label for=""fullname"">Full Name*:</label> <input type=""text"" name=""fullname"" value="""" placeholder="""" class=""required"" id=""fullname"" /> </div> <div data-role=""fieldcontain"" class=""text-field""> <label for=""email"">Email Address*:</label> <input type=""email"" name=""email"" value="""" placeholder="""" class=""required"" id=""email"" /> </div> <div data-role=""fieldcontain""> <input type=""submit"" value=""Register !!!"" /> </div> </div> </form>register.js$('#registerForm').submit(function() { var url = 'http://my-domain.com/register.php'; var postData = $(this).serialize(); var $fname = $('#fullname').val(); var $email = $('#email').val(); if ($fname == """" && $email == """") { alert('Please fill in all the fields.'); } else { //submit the form $.ajax({ type: ""POST"", url: url, crossDomain: true, cache: false, async:true, data: postData, success: function (data) { console.log(data); alert(data); $('#register-thankyou').show(); $('#register-form').hide(); }, error: function(){ console.log(data); alert('There was an error while registering. Please, Try again later!'); } }); //$.ajax } return false; });register.phpinclude 'config.php'; header('Access-Control-Allow-Origin: *'); $con = mysql_connect($dbhost, $dbuser, $dbpass) or die (""Could not connect: "" . mysql_error()); mysql_select_db($dbname, $con); $full_name = mysql_real_escape_string($_POST[""fullname""]); $email = mysql_real_escape_string($_POST[""email""]); $sql = ""INSERT INTO register (fullName,email) ""; $sql .= ""VALUES ('$full_name', '$email')""; if (!mysql_query($sql, $con)) { die('Error: ' . mysql_error()); } else { echo ""Registered record added""; } mysql_close($con);localhostheader('Access-Control-Allow-Origin: *')crossDomain: true"
"279","bad","<form id=""registerForm""> <div id=""register-thankyou"" style=""display: none;""> Thank you. </div> <div id=""register-form""> <p class=""mandatory"" style=""color:#A00;font-weight:700;"">* indicates Required</p> <div data-role=""fieldcontain"" class=""text-field""> <label for=""fullname"">Full Name*:</label> <input type=""text"" name=""fullname"" value="""" placeholder="""" class=""required"" id=""fullname"" /> </div> <div data-role=""fieldcontain"" class=""text-field""> <label for=""email"">Email Address*:</label> <input type=""email"" name=""email"" value="""" placeholder="""" class=""required"" id=""email"" /> </div> <div data-role=""fieldcontain""> <input type=""submit"" value=""Register !!!"" /> </div> </div> </form>register.js$('#registerForm').submit(function() { var url = 'http://my-domain.com/register.php'; var postData = $(this).serialize(); var $fname = $('#fullname').val(); var $email = $('#email').val(); if ($fname == """" && $email == """") { alert('Please fill in all the fields.'); } else { //submit the form $.ajax({ type: ""POST"", url: url, crossDomain: true, cache: false, async:true, data: postData, success: function (data) { console.log(data); alert(data); $('#register-thankyou').show(); $('#register-form').hide(); }, error: function(){ console.log(data); alert('There was an error while registering. Please, Try again later!'); } }); //$.ajax } return false; });register.phpinclude 'config.php'; header('Access-Control-Allow-Origin: *'); $con = mysql_connect($dbhost, $dbuser, $dbpass) or die (""Could not connect: "" . mysql_error()); mysql_select_db($dbname, $con); $full_name = mysql_real_escape_string($_POST[""fullname""]); $email = mysql_real_escape_string($_POST[""email""]); $sql = ""INSERT INTO register (fullName,email) ""; $sql .= ""VALUES ('$full_name', '$email')""; if (!mysql_query($sql, $con)) { die('Error: ' . mysql_error()); } else { echo ""Registered record added""; } mysql_close($con);localhostheader('Access-Control-Allow-Origin: *')crossDomain: true"
"280","bad","if($okay == TRUE){ $dbc = mysql_connect(""localhost"", ""mysql_user"", ""mysql_password"") or die(""Could not connect: "" . mysql_error()); mysql_select_db('coursework_network', $dbc); $query = ""SELECT * FROM signup WHERE username = '"" . $username . ""' AND password='"" .$password . ""'""; if ($result = mysql_query($query, $dbc)) {// Run the query. while ($row = mysql_fetch_array($result)) { $okay = TRUE; } } else { $okay = FALSE; } } if ($okay) { session_start(); $_SESSION['username'] = $username; header('Location: loginhandler.php'); exit(); } else { $onError = ""Invalid username and/or password""; }"
"281","bad","if($okay == TRUE){ $dbc = mysql_connect(""localhost"", ""mysql_user"", ""mysql_password"") or die(""Could not connect: "" . mysql_error()); mysql_select_db('coursework_network', $dbc); $query = ""SELECT * FROM signup WHERE username = '"" . $username . ""' AND password='"" .$password . ""'""; if ($result = mysql_query($query, $dbc)) {// Run the query. while ($row = mysql_fetch_array($result)) { $okay = TRUE; } } else { $okay = FALSE; } } if ($okay) { session_start(); $_SESSION['username'] = $username; header('Location: loginhandler.php'); exit(); } else { $onError = ""Invalid username and/or password""; }"
"282","bad","UPDATE options SET option1='$_POST[option1]', option2='$_POST[option2]', option3='$_POST[option3]', WHERE... "";echo ""<input type=checkbox name=option1 value="" "" /> ""; echo ""<input type=checkbox name=option2 value="" "" /> ""; echo ""<input type=checkbox name=option2 value="" "" /> "";"
"283","bad","table userinfo(email, password) table food(name,brand,type,location,expiration, OwnerEmail) table loggedin(session_id,email)if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""login"")) { session_start(); $userid = $_POST['email']; $_SESSION[$userid] = $userid; $_SESSON[$userid + '-id'] = $userid + $id; $user=session_id(); date_default_timezone_set('EST'); $hour = date(""h"") + 1; $date = date(""l jS \of F Y $hour:i:s A""); $insertSQL = sprintf(""INSERT INTO loggedin (session_id, email) VALUES (%s, %s)"", GetSQLValueString($user, ""text""), GetSQLValueString($_POST['email'], ""text"")); mysql_select_db($database_localhost, $localhost); $Result1 = mysql_query($insertSQL, $localhost) or die(mysql_error()); $insertGoTo = ""dashboard.php?""; if (isset($_SERVER['QUERY_STRING'])) { $insertGoTo .= (strpos($insertGoTo, '?')) ? ""&"" : ""?""; $insertGoTo .= $_SERVER['QUERY_STRING']; } header(sprintf(""Location: %s"", $insertGoTo)); } ?> <?php $loginFormAction = $_SERVER['PHP_SELF']; if (isset($_GET['accesscheck'])) { $_SESSION['PrevUrl'] = $_GET['accesscheck']; } if (isset($_POST['email'])) { $loginUsername=$_POST['email']; $password=$_POST['password']; $MM_fldUserAuthorization = """"; $MM_redirectLoginSuccess = ""dashboard.php""; $MM_redirectLoginFailed = ""login.php""; $MM_redirecttoReferrer = false; mysql_select_db($database_localhost, $localhost); $LoginRS__query=sprintf(""SELECT email, password FROM userinfo WHERE email=%s AND password=%s"", GetSQLValueString($loginUsername, ""text""), GetSQLValueString($password, ""text"")); $LoginRS = mysql_query($LoginRS__query, $localhost) or die(mysql_error()); $loginFoundUser = mysql_num_rows($LoginRS); if ($loginFoundUser) { $loginStrGroup = """"; if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();} //declare two session variables and assign them $_SESSION['MM_Username'] = $loginUsername; $_SESSION['MM_UserGroup'] = $loginStrGroup; if (isset($_SESSION['PrevUrl']) && false) { $MM_redirectLoginSuccess = $_SESSION['PrevUrl']; } header(""Location: "" . $MM_redirectLoginSuccess ); } else { header(""Location: "". $MM_redirectLoginFailed ); } } ?><?php require_once('Connections/localhost.php'); ?> <?php if(!isset($_SESSION)){ session_start(); mysql_select_db($database_localhost, $localhost); $index = 0; mysql_select_db($database_localhost, $localhost); $log = mysql_query(""SELECT email FROM loggedin"") or die(mysql_error()); while($cols = mysql_fetch_array($log)){ $value = $cols['email']; $email[$index] = $value; $index++; } $user=session_id(); $login = ""UPDATE loggedin SET session_id='$user' WHERE email='$value'""; $Result1 = mysql_query($login, $localhost) or die(mysql_error()); }<?php $sql1=mysql_query(""SELECT email from loggedin WHERE session_id='$user'""); $sess=mysql_fetch_array($sql1); $newValue=$sess['email']; $sql2= mysql_query(""SELECT * FROM food WHERE OwnerEmail='$newValue'""); ?> <div class=""table-responsive""> <!--<div id=""box3"" class=""box"">--> <h2 class=""sub-header"">All Foods</h2> <table class=""table table-striped""> <thead> <tr> <th>Food Name</th> <th>Brand Name</th> <th>Food Group</th> <th>Location</th> <th>Expiration Date</th> </tr> </thead> <tbody> <?php $currentYear=date(""Y""); $currentMonth=date(""m""); $currentDay=date(""d""); while($rows = mysql_fetch_array($sql2)) { $class=''; $year=substr($rows['ExpirationDate'],6,4); $month=substr($rows['ExpirationDate'],3,2); $day=substr($rows['ExpirationDate'],0,2); if($year==$currentYear){ if($month==$currentMonth){ if(($day - $currentDay) <= 3){ $class='expBad'; } } } ?> <tr> <td><b><?php echo $rows['Name'], $_SESSION['user'] ?></td> <td><b><?php echo $rows['Brand'] ?></td> <td><b><?php echo $rows['Type'] ?></td> <td><b><?php echo $rows['Container'] ?></td> <td><b><?php echo ""<span class=\""$class\"">"".$rows['ExpirationDate'].""</span>"" ?></td> </tr> <?php } ?>"
"284","bad","table userinfo(email, password) table food(name,brand,type,location,expiration, OwnerEmail) table loggedin(session_id,email)if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""login"")) { session_start(); $userid = $_POST['email']; $_SESSION[$userid] = $userid; $_SESSON[$userid + '-id'] = $userid + $id; $user=session_id(); date_default_timezone_set('EST'); $hour = date(""h"") + 1; $date = date(""l jS \of F Y $hour:i:s A""); $insertSQL = sprintf(""INSERT INTO loggedin (session_id, email) VALUES (%s, %s)"", GetSQLValueString($user, ""text""), GetSQLValueString($_POST['email'], ""text"")); mysql_select_db($database_localhost, $localhost); $Result1 = mysql_query($insertSQL, $localhost) or die(mysql_error()); $insertGoTo = ""dashboard.php?""; if (isset($_SERVER['QUERY_STRING'])) { $insertGoTo .= (strpos($insertGoTo, '?')) ? ""&"" : ""?""; $insertGoTo .= $_SERVER['QUERY_STRING']; } header(sprintf(""Location: %s"", $insertGoTo)); } ?> <?php $loginFormAction = $_SERVER['PHP_SELF']; if (isset($_GET['accesscheck'])) { $_SESSION['PrevUrl'] = $_GET['accesscheck']; } if (isset($_POST['email'])) { $loginUsername=$_POST['email']; $password=$_POST['password']; $MM_fldUserAuthorization = """"; $MM_redirectLoginSuccess = ""dashboard.php""; $MM_redirectLoginFailed = ""login.php""; $MM_redirecttoReferrer = false; mysql_select_db($database_localhost, $localhost); $LoginRS__query=sprintf(""SELECT email, password FROM userinfo WHERE email=%s AND password=%s"", GetSQLValueString($loginUsername, ""text""), GetSQLValueString($password, ""text"")); $LoginRS = mysql_query($LoginRS__query, $localhost) or die(mysql_error()); $loginFoundUser = mysql_num_rows($LoginRS); if ($loginFoundUser) { $loginStrGroup = """"; if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();} //declare two session variables and assign them $_SESSION['MM_Username'] = $loginUsername; $_SESSION['MM_UserGroup'] = $loginStrGroup; if (isset($_SESSION['PrevUrl']) && false) { $MM_redirectLoginSuccess = $_SESSION['PrevUrl']; } header(""Location: "" . $MM_redirectLoginSuccess ); } else { header(""Location: "". $MM_redirectLoginFailed ); } } ?><?php require_once('Connections/localhost.php'); ?> <?php if(!isset($_SESSION)){ session_start(); mysql_select_db($database_localhost, $localhost); $index = 0; mysql_select_db($database_localhost, $localhost); $log = mysql_query(""SELECT email FROM loggedin"") or die(mysql_error()); while($cols = mysql_fetch_array($log)){ $value = $cols['email']; $email[$index] = $value; $index++; } $user=session_id(); $login = ""UPDATE loggedin SET session_id='$user' WHERE email='$value'""; $Result1 = mysql_query($login, $localhost) or die(mysql_error()); }<?php $sql1=mysql_query(""SELECT email from loggedin WHERE session_id='$user'""); $sess=mysql_fetch_array($sql1); $newValue=$sess['email']; $sql2= mysql_query(""SELECT * FROM food WHERE OwnerEmail='$newValue'""); ?> <div class=""table-responsive""> <!--<div id=""box3"" class=""box"">--> <h2 class=""sub-header"">All Foods</h2> <table class=""table table-striped""> <thead> <tr> <th>Food Name</th> <th>Brand Name</th> <th>Food Group</th> <th>Location</th> <th>Expiration Date</th> </tr> </thead> <tbody> <?php $currentYear=date(""Y""); $currentMonth=date(""m""); $currentDay=date(""d""); while($rows = mysql_fetch_array($sql2)) { $class=''; $year=substr($rows['ExpirationDate'],6,4); $month=substr($rows['ExpirationDate'],3,2); $day=substr($rows['ExpirationDate'],0,2); if($year==$currentYear){ if($month==$currentMonth){ if(($day - $currentDay) <= 3){ $class='expBad'; } } } ?> <tr> <td><b><?php echo $rows['Name'], $_SESSION['user'] ?></td> <td><b><?php echo $rows['Brand'] ?></td> <td><b><?php echo $rows['Type'] ?></td> <td><b><?php echo $rows['Container'] ?></td> <td><b><?php echo ""<span class=\""$class\"">"".$rows['ExpirationDate'].""</span>"" ?></td> </tr> <?php } ?>"
"285","bad","$stmt = $pdo_conn->prepare(""SELECT * from customer where phone = :phone ""); $stmt->execute(array(':phone' => $res)); $records = $stmt->fetchAll(PDO::FETCH_ASSOC);00000 00 00 00$res00000000000"
"286","bad","$stmt = $pdo_conn->prepare(""SELECT * from customer where phone = :phone ""); $stmt->execute(array(':phone' => $res)); $records = $stmt->fetchAll(PDO::FETCH_ASSOC);00000 00 00 00$res00000000000"
"287","bad","$stmt = $pdo_conn->prepare(""SELECT * from customer where phone = :phone ""); $stmt->execute(array(':phone' => $res)); $records = $stmt->fetchAll(PDO::FETCH_ASSOC);00000 00 00 00$res00000000000"
"288","bad","<?PHP $mysql_host = ""mysql2.000webhost.com""; $mysql_database = ""*********""; $mysql_user = ""********""; $mysql_password = ""**********""; $dbcon = mysql_connect($mysql_host,$mysql_user,$mysql_password,$mysql_database); if (!$dbcon) { die('error connecting to database'); } echo ('You have connected successfully'); ?> <?PHP if (isset($_POST['submitted'])) { include('connect_mysql.php'); $fname = $_POST['fname']; $lname = $_POST['lname']; $sqlinsert = ""INSERT INTO people (firstname, lastname) VALUES ('$fname', '$lname')""; if (!mysql_query($dbcon, $sqlinsert)) { die('error inserting new record'); } // end of nested if statement $newrecord = ""1 record added to the database""; } ?> <html> <head> <title>Insert Data into DB</title> </head> <body> <h1>Insert Data into DB</h1> <form method=""post"" action=""insert-data.php""> <input type=""hidden"" name=""submitted"" value=""true"" /> <fieldset> <legend>New People</legend> <label>First Name: <input type=""text"" name=""fname"" /></label> <label>Last Name: <input type=""text"" name=""lname"" /></label> </fieldset> <br /> <input type=""submit"" value=""add new person"" /> </form> <?PHP echo $newrecord ?> </body> </html>"
"289","bad","mysqli_query($con,""INSERT INTO info (admin_email,admin_pass,admin_user,website_name) VALUES ($admin_email,$admin_pass,$admin_user,$website_name)"");"
"290","bad","mysqli_query($con,""INSERT INTO info (admin_email,admin_pass,admin_user,website_name) VALUES ($admin_email,$admin_pass,$admin_user,$website_name)"");"
"291","bad","<script language=""javascript"" type=""text/javascript""> function getXMLHTTP() { //function to return the xml http object var xmlhttp=false; try{ xmlhttp=new XMLHttpRequest(); } catch(e) { try{ xmlhttp= new ActiveXObject(""Microsoft.XMLHTTP""); } catch(e){ try{ xmlhttp = new ActiveXObject(""Msxml2.XMLHTTP""); } catch(e1){ xmlhttp=false; } } } return xmlhttp; } function getState(cate_id) { var strURL=""findsect.php?country=""+cate_id; var req = getXMLHTTP(); if (req) { req.onreadystatechange = function() { if (req.readyState == 4) { // only if ""OK"" if (req.status == 200) { document.getElementById('statediv').innerHTML=req.responseText; } else { alert(""Problem while using XMLHTTP:\n"" + req.statusText); } } } req.open(""GET"", strURL, true); req.send(null); } } </script> <html> <head> <title></title> <style type=""text/css""> .input-short { width: 25% } </style> </head> <?php $country=$_GET['country']; $con = mysql_connect('localhost','root',''); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db('my'); $query=""SELECT * FROM gallery_section WHERE related='$country'""; $result=mysql_query($query); ?> <select class=""input-short"" name=""Section"" onchange=""getCity(<?php echo $country?>,this.value)""> <option>Select Section</option> <?php while ($row=mysql_fetch_array($result)) { ?> <option value=""<?php echo $row['title']?>""><?php echo $row['title']?></option> <?php } ?> </select> </html>"
"292","bad","<script language=""javascript"" type=""text/javascript""> function getXMLHTTP() { //function to return the xml http object var xmlhttp=false; try{ xmlhttp=new XMLHttpRequest(); } catch(e) { try{ xmlhttp= new ActiveXObject(""Microsoft.XMLHTTP""); } catch(e){ try{ xmlhttp = new ActiveXObject(""Msxml2.XMLHTTP""); } catch(e1){ xmlhttp=false; } } } return xmlhttp; } function getState(cate_id) { var strURL=""findsect.php?country=""+cate_id; var req = getXMLHTTP(); if (req) { req.onreadystatechange = function() { if (req.readyState == 4) { // only if ""OK"" if (req.status == 200) { document.getElementById('statediv').innerHTML=req.responseText; } else { alert(""Problem while using XMLHTTP:\n"" + req.statusText); } } } req.open(""GET"", strURL, true); req.send(null); } } </script> <html> <head> <title></title> <style type=""text/css""> .input-short { width: 25% } </style> </head> <?php $country=$_GET['country']; $con = mysql_connect('localhost','root',''); if (!$con) { die('Could not connect: ' . mysql_error()); } mysql_select_db('my'); $query=""SELECT * FROM gallery_section WHERE related='$country'""; $result=mysql_query($query); ?> <select class=""input-short"" name=""Section"" onchange=""getCity(<?php echo $country?>,this.value)""> <option>Select Section</option> <?php while ($row=mysql_fetch_array($result)) { ?> <option value=""<?php echo $row['title']?>""><?php echo $row['title']?></option> <?php } ?> </select> </html>"
"293","bad","<div class=""box""> <form action=""login.php"" id=""loginForm"" method=""post""> <p> User ID : <input type =""text"" name=""userID""> </p> <p> Password : <input type =""password"" name=""password""> </p> <p> <input type=""submit"" value=""Login""> </p> </form> </div><?php session_start(); require_once('session.php'); require_once('pdoDB.class.php'); $db = pdoDB::getConnection(); $session = Session::getInstance(); $userID = $_POST['userID']; $password = $_POST['password']; if($userID == '') { echo ('Please Enter Your Username'); } $userSQL = ""SELECT * FROM user WHERE userid =: '$userID' AND password =: '$password'""; $query = $db->prepare($userSQL); $query->execute (array ($userID,$password)); $result = $query->fetchObject(); if (empty($result)) { echo ('Not Logged In!'); } else { echo('Logged In'); header('location:phptesting.php'); } ?><?php class pdoDB { private static $dbConnection = null; private function __construct() { } private function __clone() { } public static function getConnection() { if ( !self::$dbConnection ) { try { self::$dbConnection = new PDO( ""sqlite:/file.sqlite""); self::$dbConnection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); } catch( PDOException $e ) { echo $e->getMessage(); } } return self::$dbConnection; } } ?><?php Class Session { private static $getInstance; private function __construct(){ session_start(); } public static function getInstance() { if (!isset(self::$getInstance)) { self::$getInstance = new Session(); } return self::$getInstance; } public function setProperty($key,$val) { $_SESSION[$key] = $val; } public function getProperty($key) { $returnValue = """"; if(isset($_SESSION[$key])) { $returnValue = $_SESSION[$key]; } return $returnValue; } } ?>"
"294","bad","____________________________________________________________________________ | Select All | Quantity | Name & Description | Remarks | ____________________________________________________________________________ | [] | 2 | BallPen | text field here | ______________________________________________________________________________ | [] | 10 | Pencil | text field here | ____________________________________________________________________________if(isset($_POST['faculty'])){ $faculty = $_POST['faculty']; $query = mysql_query(""SELECT * FROM are A, are_item AI WHERE AI.Reque = '$faculty' AND A.Reque = '$faculty' AND A.are_no = AI.are_no""); $row = mysql_fetch_array($query); $are_no = $row[""are_no""]; $query = mysql_query(""SELECT * FROM user_info WHERE id = '$faculty'""); while($row = mysql_fetch_array($query)){ $firstname = $row['firstname']; $middle = $row['middlename']; $last = $row['lastname']; $name = $firstname . "" "" .$middle . "" "" . $last; } echo"" Item(s) ownned by "" . $name ; echo '<table class=""table text-center"" style=""border-collapse:collapse"">'; echo ""<thead>""; echo""<th align = 'center'><font size='1'>Select All</font><input type='checkbox' id='selectall' onClick='selectAll(this)'/></th>""; echo ""<th align = 'center'>Quantity</th>""; echo ""<th align = 'center'>Unit</th>""; echo ""<th align = 'center'>Name & Description</th>""; echo ""<th align = 'center'>PR No.</th>""; echo ""<th align = 'center'>Date Acquired</th>""; echo ""<th align = 'center'>Property Number</th>""; echo ""<th align = 'center'>Number of items</th>""; echo ""</thead>""; echo ""<tbody>""; $query = mysql_query(""SELECT * FROM tblitems I, are_item AI ,tblpur P WHERE AI.are_no = '$are_no' AND I.itemid = AI.itemid AND I.pr_no = P.pr_no""); $k = 1; while($row = mysql_fetch_array($query)){ $item_id = $row[""itemid""]; $check = 'check' . $k; $quantity = $row[""quantity""]; $unit = $row[""unit""]; $description = $row[""description""]; $purchase_no = $row[""pr_no""]; $property = $row[""property_no""]; $date_acquired = $row[""date_acquired""]; $stat = $row[""stat""]; if($stat == '1'){ } else { echo ""<tr>""; ?> <td><input name=""check[]"" type=""checkbox"" value = ""<?php echo $row['itemid']; ?>""></td> <?php echo ""<td align = 'center'>$quantity</td>""; echo ""<td align = 'center'>$unit</td>""; echo ""<td align = 'center'>$description</td>""; echo ""<td align = 'center'>$purchase_no</td>""; echo ""<td align='center'>$property</td>""; echo ""<td align='center'>$date_acquired</td>""; ?> <td align=""center""><input type=""text"" name = ""<?php echo $noof; ?>"" maxlength=5 ></td> <?php echo ""</tr>""; } } echo ""</tbody>""; echo ""</table>""; $k++; } ?>"
"295","bad","____________________________________________________________________________ | Select All | Quantity | Name & Description | Remarks | ____________________________________________________________________________ | [] | 2 | BallPen | text field here | ______________________________________________________________________________ | [] | 10 | Pencil | text field here | ____________________________________________________________________________if(isset($_POST['faculty'])){ $faculty = $_POST['faculty']; $query = mysql_query(""SELECT * FROM are A, are_item AI WHERE AI.Reque = '$faculty' AND A.Reque = '$faculty' AND A.are_no = AI.are_no""); $row = mysql_fetch_array($query); $are_no = $row[""are_no""]; $query = mysql_query(""SELECT * FROM user_info WHERE id = '$faculty'""); while($row = mysql_fetch_array($query)){ $firstname = $row['firstname']; $middle = $row['middlename']; $last = $row['lastname']; $name = $firstname . "" "" .$middle . "" "" . $last; } echo"" Item(s) ownned by "" . $name ; echo '<table class=""table text-center"" style=""border-collapse:collapse"">'; echo ""<thead>""; echo""<th align = 'center'><font size='1'>Select All</font><input type='checkbox' id='selectall' onClick='selectAll(this)'/></th>""; echo ""<th align = 'center'>Quantity</th>""; echo ""<th align = 'center'>Unit</th>""; echo ""<th align = 'center'>Name & Description</th>""; echo ""<th align = 'center'>PR No.</th>""; echo ""<th align = 'center'>Date Acquired</th>""; echo ""<th align = 'center'>Property Number</th>""; echo ""<th align = 'center'>Number of items</th>""; echo ""</thead>""; echo ""<tbody>""; $query = mysql_query(""SELECT * FROM tblitems I, are_item AI ,tblpur P WHERE AI.are_no = '$are_no' AND I.itemid = AI.itemid AND I.pr_no = P.pr_no""); $k = 1; while($row = mysql_fetch_array($query)){ $item_id = $row[""itemid""]; $check = 'check' . $k; $quantity = $row[""quantity""]; $unit = $row[""unit""]; $description = $row[""description""]; $purchase_no = $row[""pr_no""]; $property = $row[""property_no""]; $date_acquired = $row[""date_acquired""]; $stat = $row[""stat""]; if($stat == '1'){ } else { echo ""<tr>""; ?> <td><input name=""check[]"" type=""checkbox"" value = ""<?php echo $row['itemid']; ?>""></td> <?php echo ""<td align = 'center'>$quantity</td>""; echo ""<td align = 'center'>$unit</td>""; echo ""<td align = 'center'>$description</td>""; echo ""<td align = 'center'>$purchase_no</td>""; echo ""<td align='center'>$property</td>""; echo ""<td align='center'>$date_acquired</td>""; ?> <td align=""center""><input type=""text"" name = ""<?php echo $noof; ?>"" maxlength=5 ></td> <?php echo ""</tr>""; } } echo ""</tbody>""; echo ""</table>""; $k++; } ?>"
"296","bad","____________________________________________________________________________ | Select All | Quantity | Name & Description | Remarks | ____________________________________________________________________________ | [] | 2 | BallPen | text field here | ______________________________________________________________________________ | [] | 10 | Pencil | text field here | ____________________________________________________________________________if(isset($_POST['faculty'])){ $faculty = $_POST['faculty']; $query = mysql_query(""SELECT * FROM are A, are_item AI WHERE AI.Reque = '$faculty' AND A.Reque = '$faculty' AND A.are_no = AI.are_no""); $row = mysql_fetch_array($query); $are_no = $row[""are_no""]; $query = mysql_query(""SELECT * FROM user_info WHERE id = '$faculty'""); while($row = mysql_fetch_array($query)){ $firstname = $row['firstname']; $middle = $row['middlename']; $last = $row['lastname']; $name = $firstname . "" "" .$middle . "" "" . $last; } echo"" Item(s) ownned by "" . $name ; echo '<table class=""table text-center"" style=""border-collapse:collapse"">'; echo ""<thead>""; echo""<th align = 'center'><font size='1'>Select All</font><input type='checkbox' id='selectall' onClick='selectAll(this)'/></th>""; echo ""<th align = 'center'>Quantity</th>""; echo ""<th align = 'center'>Unit</th>""; echo ""<th align = 'center'>Name & Description</th>""; echo ""<th align = 'center'>PR No.</th>""; echo ""<th align = 'center'>Date Acquired</th>""; echo ""<th align = 'center'>Property Number</th>""; echo ""<th align = 'center'>Number of items</th>""; echo ""</thead>""; echo ""<tbody>""; $query = mysql_query(""SELECT * FROM tblitems I, are_item AI ,tblpur P WHERE AI.are_no = '$are_no' AND I.itemid = AI.itemid AND I.pr_no = P.pr_no""); $k = 1; while($row = mysql_fetch_array($query)){ $item_id = $row[""itemid""]; $check = 'check' . $k; $quantity = $row[""quantity""]; $unit = $row[""unit""]; $description = $row[""description""]; $purchase_no = $row[""pr_no""]; $property = $row[""property_no""]; $date_acquired = $row[""date_acquired""]; $stat = $row[""stat""]; if($stat == '1'){ } else { echo ""<tr>""; ?> <td><input name=""check[]"" type=""checkbox"" value = ""<?php echo $row['itemid']; ?>""></td> <?php echo ""<td align = 'center'>$quantity</td>""; echo ""<td align = 'center'>$unit</td>""; echo ""<td align = 'center'>$description</td>""; echo ""<td align = 'center'>$purchase_no</td>""; echo ""<td align='center'>$property</td>""; echo ""<td align='center'>$date_acquired</td>""; ?> <td align=""center""><input type=""text"" name = ""<?php echo $noof; ?>"" maxlength=5 ></td> <?php echo ""</tr>""; } } echo ""</tbody>""; echo ""</table>""; $k++; } ?>"
"297","bad","if (isset($_POST['username']) && isset($_POST['password'])) { $username = $_POST['username']; $password = $_POST['password']; echo $username; echo $password; // include db connect class require_once __DIR__ . '/db_connect.php'; // connecting to db $db = new DB_CONNECT(); // mysql checking row $result = mysql_query(""SELECT * FROM user WHERE username = '$username' AND password = '$password'"")or die(mysql_error()); // check if row exist or not if ($result == true) { // row exist in database $response[""success""] = 1; $response[""message""] = ""Login successfully.""; // echoing JSON response echo json_encode($response); } else { // row not exist $response[""success""] = 0; $response[""message""] = ""Oops! An error occurred.""; // echoing JSON response echo json_encode($response); } } else { // required field is missing $response[""success""] = 0; $response[""message""] = ""Required field(s) is missing""; // echoing JSON response echo json_encode($response); } class NewSignup extends AsyncTask<String, String, String> { /** * Creating product * */ protected String doInBackground(String... args) { // Building Parameters List<NameValuePair> params = new ArrayList<NameValuePair>(); params.add(new BasicNameValuePair(""username"", username_editTextString)); params.add(new BasicNameValuePair(""password"", password_editTextString)); // getting JSON Object // Note that create product url accepts POST method json = jsonParser.makeHttpRequest(url_create_login, ""POST"", params); // check log cat fro response Log.i(""Create Response"", json.toString()); // check for success tag try { int success = json.getInt(TAG_SUCCESS); if (success == 1) { // successfully login Intent i = new Intent(getApplicationContext(), Next.class); startActivity(i); // closing this screen finish(); } else { // failed to login } } catch (JSONException e) { e.printStackTrace(); } return null; }"
"298","bad","if (isset($_POST['username']) && isset($_POST['password'])) { $username = $_POST['username']; $password = $_POST['password']; echo $username; echo $password; // include db connect class require_once __DIR__ . '/db_connect.php'; // connecting to db $db = new DB_CONNECT(); // mysql checking row $result = mysql_query(""SELECT * FROM user WHERE username = '$username' AND password = '$password'"")or die(mysql_error()); // check if row exist or not if ($result == true) { // row exist in database $response[""success""] = 1; $response[""message""] = ""Login successfully.""; // echoing JSON response echo json_encode($response); } else { // row not exist $response[""success""] = 0; $response[""message""] = ""Oops! An error occurred.""; // echoing JSON response echo json_encode($response); } } else { // required field is missing $response[""success""] = 0; $response[""message""] = ""Required field(s) is missing""; // echoing JSON response echo json_encode($response); } class NewSignup extends AsyncTask<String, String, String> { /** * Creating product * */ protected String doInBackground(String... args) { // Building Parameters List<NameValuePair> params = new ArrayList<NameValuePair>(); params.add(new BasicNameValuePair(""username"", username_editTextString)); params.add(new BasicNameValuePair(""password"", password_editTextString)); // getting JSON Object // Note that create product url accepts POST method json = jsonParser.makeHttpRequest(url_create_login, ""POST"", params); // check log cat fro response Log.i(""Create Response"", json.toString()); // check for success tag try { int success = json.getInt(TAG_SUCCESS); if (success == 1) { // successfully login Intent i = new Intent(getApplicationContext(), Next.class); startActivity(i); // closing this screen finish(); } else { // failed to login } } catch (JSONException e) { e.printStackTrace(); } return null; }"
"299","bad","<input type=""hidden"" name=""addedit"" value="""" /> <input type=""submit"" value=""Update City"" name=""Update_City""align=""center""style=""background:#e5f9bb; cursor:pointer; cursor:hand;"" /> if (isset($_POST['Update_City'])){ //stuff $SQL = ""UPDATE city SET.....etc }"
"300","bad","<input type=""hidden"" name=""addedit"" value="""" /> <input type=""submit"" value=""Update City"" name=""Update_City""align=""center""style=""background:#e5f9bb; cursor:pointer; cursor:hand;"" /> if (isset($_POST['Update_City'])){ //stuff $SQL = ""UPDATE city SET.....etc }"
"301","bad","<form action=""db_connect.php"" method=""post""> <input type=""text"" name=""username"" placeholder=""Username"" /> <input type=""password"" name=""password"" placeholder=""Password"" /> <input type=""submit"" value=""Login"" class=""customButton"" /> </form> <?php $username = $_POST['username']; $password = $_POST['password']; $con = new mysqli_connect(""localhost"",""user"",""password"",""database""); $query = mysqli_query($con,""SELECT * FROM members WHERE username='"".$username.""' AND password='"".$password.""'""); if (mysqli_num_rows($query) != 0){ $_SESSION['logged_in'] = true; header('Location: index.php'); }else{ echo ""Access denied""; } ?>"
"302","bad","<form action=""db_connect.php"" method=""post""> <input type=""text"" name=""username"" placeholder=""Username"" /> <input type=""password"" name=""password"" placeholder=""Password"" /> <input type=""submit"" value=""Login"" class=""customButton"" /> </form> <?php $username = $_POST['username']; $password = $_POST['password']; $con = new mysqli_connect(""localhost"",""user"",""password"",""database""); $query = mysqli_query($con,""SELECT * FROM members WHERE username='"".$username.""' AND password='"".$password.""'""); if (mysqli_num_rows($query) != 0){ $_SESSION['logged_in'] = true; header('Location: index.php'); }else{ echo ""Access denied""; } ?>"
"303","bad","<form action=""db_connect.php"" method=""post""> <input type=""text"" name=""username"" placeholder=""Username"" /> <input type=""password"" name=""password"" placeholder=""Password"" /> <input type=""submit"" value=""Login"" class=""customButton"" /> </form> <?php $username = $_POST['username']; $password = $_POST['password']; $con = new mysqli_connect(""localhost"",""user"",""password"",""database""); $query = mysqli_query($con,""SELECT * FROM members WHERE username='"".$username.""' AND password='"".$password.""'""); if (mysqli_num_rows($query) != 0){ $_SESSION['logged_in'] = true; header('Location: index.php'); }else{ echo ""Access denied""; } ?>"
"304","bad","<body> <?php //connecting to database $server = 'localhost'; $username = 'root'; $password = 'infosys'; $database = 'project'; mysql_connect($server,$username,$password) or die(mysql_error()); mysql_select_db($database) or die(mysql_error()); //dropdown list to retrieve sentence $sql = ""SELECT words FROM sentence""; $result = mysql_query($sql); echo ""<select name ='dropdownlist'>""; while ($row = mysql_fetch_array($result)) { echo ""<option value='"" . $row['words'] .""'>"" . $row['words'] .""</option>""; } echo ""</select>""; ?> <form method=""post"" action=""remove.php""> <input type=""submit"" value=""Remove"" /> </form> <a href=""index.php"" >View list</a> </body><?php $server = 'localhost'; $username = 'root'; $password = 'infosys'; $database = 'project'; mysql_connect($server,$username,$password) or die(mysql_error()); mysql_select_db($database) or die(mysql_error()); $dropdownlist1 = $_POST['dropdownlist']; $dropdownlist2 = $dropdownlist1.value; if(isset($_GET['id'])) { $mysql_query(""DELETE FROM 'words' WHERE id = $dropdownlist2""); header(""location: index.php""); exit(); } ?>"
"305","bad","table_nameid(primary key) name ip 1 a 192.168.0.1,192.168.0.5,171.87.65 //separated by comma's 2 b 192.168.0.1,175.172.2.6,164.77.42name a<textarea rows=""4"" cols=""40"" name=""ip[]""></textarea> name b<textarea rows=""4"" cols=""40"" name=""ip[]""></textarea> <input type=""submit"" />if(isset($_POST['submit'])) { $ip_details = $_POST['ip']; $values = array( array('id' => '""1""', 'name' => '""a""', ip => '""'.$ip_details[0].'""'), array('id' => '""2""','name' => '""b""', ip => '""'.$ip_details[1].'""'), ); $columns = implode(', ', array_keys($values[0])); foreach($values as $value) { $value = implode(', ', $value); $statement = ""INSERT INTO `center_listt` (id,name,ip) VALUES ($value)""; $res=mysql_query($statement); echo ""success""; } }namewarning: array_push expects parameter 1 to be array integer given"
"306","bad","table_nameid(primary key) name ip 1 a 192.168.0.1,192.168.0.5,171.87.65 //separated by comma's 2 b 192.168.0.1,175.172.2.6,164.77.42name a<textarea rows=""4"" cols=""40"" name=""ip[]""></textarea> name b<textarea rows=""4"" cols=""40"" name=""ip[]""></textarea> <input type=""submit"" />if(isset($_POST['submit'])) { $ip_details = $_POST['ip']; $values = array( array('id' => '""1""', 'name' => '""a""', ip => '""'.$ip_details[0].'""'), array('id' => '""2""','name' => '""b""', ip => '""'.$ip_details[1].'""'), ); $columns = implode(', ', array_keys($values[0])); foreach($values as $value) { $value = implode(', ', $value); $statement = ""INSERT INTO `center_listt` (id,name,ip) VALUES ($value)""; $res=mysql_query($statement); echo ""success""; } }namewarning: array_push expects parameter 1 to be array integer given"
"307","bad","table_nameid(primary key) name ip 1 a 192.168.0.1,192.168.0.5,171.87.65 //separated by comma's 2 b 192.168.0.1,175.172.2.6,164.77.42name a<textarea rows=""4"" cols=""40"" name=""ip[]""></textarea> name b<textarea rows=""4"" cols=""40"" name=""ip[]""></textarea> <input type=""submit"" />if(isset($_POST['submit'])) { $ip_details = $_POST['ip']; $values = array( array('id' => '""1""', 'name' => '""a""', ip => '""'.$ip_details[0].'""'), array('id' => '""2""','name' => '""b""', ip => '""'.$ip_details[1].'""'), ); $columns = implode(', ', array_keys($values[0])); foreach($values as $value) { $value = implode(', ', $value); $statement = ""INSERT INTO `center_listt` (id,name,ip) VALUES ($value)""; $res=mysql_query($statement); echo ""success""; } }namewarning: array_push expects parameter 1 to be array integer given"
"308","bad","<?php //if save was clicked if(isset($_POST['saveit'])) { $tmodnameid = $_POST['tmodnameid']; $tmodnameid = mysqli_real_escape_string($dbc, $tmodnameid); $quizpercent = $_POST['quizpercent']; $quizpercent = mysqli_real_escape_string($dbc, $quizpercent); mysqli_query($dbc, ""UPDATE training_quizs set tmoduleid='$tmodnameid', quiz_passingpercent='$quizpercent' WHERE quizid='$quid'""); //lets delete all questions and answers since we are re-saving them $q = mysqli_query($dbc, ""SELECT qarowid FROM training_quizs_questions WHERE quizid='$quid'""); while($qqr = mysqli_fetch_array($q)) { $qarowid = $qqr['qarowid']; mysqli_query($dbc, ""DELETE from training_quizs_answers WHERE qarowid='$qarowid'""); } mysqli_query($dbc, ""DELETE from training_quizs_questions WHERE quizid='$quid'""); $n = 0; $newquestion = $_POST['newquestion']; foreach($newquestion as $aquestion) { mysqli_query($dbc, ""INSERT into training_quizs_questions(quizid, qquestion) VALUES('$quid','$aquestion')""); $questionrowid = mysqli_insert_id($dbc); //lets save each of this questions answers //save first potential answer for this question $answera = $_POST['answera'][$n]; $isanswera =''; $isanswera = trim($_POST['isanswera'][$n]); if(!empty($isanswera)) { $isanswera ='yes'; $firstsql = mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answera','$isanswera')""); }else{ $isanswera = ''; $firstsql = mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answera',' ')""); } //save second potential answer for this question $answerb = $_POST['answerb'][$n]; $isanswerb=''; $isanswerb = trim($_POST['isanswerb'][$n]); if(!empty($isanswerb)) { $isanswerb ='yes'; mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerb','$isanswerb')""); }else{ $isanswerb = ''; mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerb',' ')""); } //save third potential answer for this question $answerc = $_POST['answerc'][$n]; $isanswerc = trim($_POST['isanswerc'][$n]); if(!empty($isanswerc)) { $isanswerc ='yes'; mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerc','$isanswerc')""); }else{ $isanswerc = ''; mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerc',' ')""); } //save fourth potential answer for this question $answerd = $_POST['answerd'][$n]; $isanswerd = trim($_POST['isanswerd'][$n]); if(!empty($isanswerd)) { mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerd','yes')""); }else{ mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerd',' ')""); } //save fifth potential answer for this question $answere = $_POST['answere'][$n]; $isanswere = trim($_POST['isanswere'][$n]); if(!empty($isanswere)) { mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answere','yes')""); }else{ mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answere',' ')""); } //save sixth potential answer for this question $answerf = $_POST['answerf'][$n]; $isanswerf = trim($_POST['isanswerf'][$n]); if(!empty($isanswerf)) { mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerf','yes')""); }else{ mysqli_query($dbc, ""INSERT into training_quizs_answers(qarowid, answer, isanswer) VALUES('$questionrowid','$answerf',' ')""); } $n++; } //get rid of any blank rows that were created mysqli_query($dbc, ""DELETE from training_quizs_answers WHERE answer=''""); echo ""<div class='alert alert-success'> <h4>Success!</h4> You successfully setup a new quiz from the training module. </div>""; } //lets get the questions $qsql = mysqli_query($dbc, ""SELECT * FROM training_quizs WHERE quizid='$quid' LIMIT 1""); $qsqlrow = mysqli_fetch_array($qsql); extract($qsqlrow); $quiz_createdon = date('m/d/Y', strtotime($quiz_createdon)); ?> <form method='POST' action='' enctype='multipart/form-data' name='form1' id='form1'> <div class=""row-form clearfix""> <div class=""span4""> Training Module Name <select name='tmodnameid'> <?php //lets select all training modules that have not quiz yet $atlistsql = mysqli_query($dbc, ""SELECT tmoduleid, tmodule_name FROM training_modules WHERE tmoduleid='$tmoduleid' LIMIT 1""); $atlistrow = mysqli_fetch_array($atlistsql); $tmoduleid = $atlistrow['tmoduleid']; $tmodule_name = $atlistrow['tmodule_name']; echo ""<option value='$tmoduleid'>$tmodule_name</option>""; $tlistsql = mysqli_query($dbc, ""SELECT tmoduleid, tmodule_name FROM training_modules WHERE tmoduleid !='$tmoduleid' ORDER by tmodule_name desc""); while($tlistrow = mysqli_fetch_array($tlistsql)) { $tmoduleid = $tlistrow['tmoduleid']; $tmodule_name = stripslashes($tlistrow['tmodule_name']); echo ""<option value='$tmoduleid'>$tmodule_name</option>""; } ?> </select> </div> <div class=""span2""> Percent needing to pass<br /> <input type='text' name='quizpercent' style='width:50px' maxlength='3' value='<?php echo ""$quiz_passingpercent"";?>'></strong>%</strong> </div> </div> <div class=""row-form clearfix""> <?php $question_num = 1; //lets list all the questions $qsql = mysqli_query($dbc, ""SELECT * FROM training_quizs_questions WHERE quizid='$quid' ORDER BY qarowid asc""); while($qrow = mysqli_fetch_array($qsql)) { extract($qrow); $qquestion = stripslashes($qquestion); echo ""<strong>$question_num)</strong><br /><textarea name='newquestion[]'>$qquestion</textarea><br /> <br /><strong>Question $question_num Potential Answers</strong><br />""; //lets get all the potential answers $numpotentialanswers = 0; $letter = 'a'; $displayletter = 'A'; $qaaql = mysqli_query($dbc, ""SELECT * FROM training_quizs_answers WHERE qarowid='$qarowid' ORDER by answerrow ASC""); while($qarow = mysqli_fetch_array($qaaql)) { extract($qarow); $answer = stripslashes($answer); $numpotentialanswers++; if($isanswer =='yes') { $checked ='checked'; } else { $checked =''; } $answerletter[] = ""answer$letter""; $isanswerletter[] = ""isanswer$letter""; ?> <div style='float:left; padding-right:4px'> <?php echo ""$displayletter"";?>) <input type='text' <?php echo ""name='answer"" . $letter. ""[]'""; ?> value='<?php echo ""$answer"";?>' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswer<?php echo ""$letter"";?>[]' value='yes' <?php echo ""$checked"";?>> </div><div style='clear:both'></div> <?php $letter++; $displayletter++; } //lets display the additional potential answer rows if($numpotentialanswers == 1) { echo ""<div style='float:left; padding-right:4px'> B) <input type='text' name='answerb[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerb[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> C) <input type='text' name='answerc[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerc[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> D) <input type='text' name='answerd[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerd[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> E) <input type='text' name='answere[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswere[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> F) <input type='text' name='answerf[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerf[]' value='yes'> </div><div style='clear:both'></div>""; } if($numpotentialanswers == 2) { echo ""<div style='float:left; padding-right:4px'> C) <input type='text' name='answerc[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerc[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> D) <input type='text' name='answerd[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerd[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> E) <input type='text' name='answere[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswere[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> F) <input type='text' name='answerf[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerf[]' value='yes'> </div><div style='clear:both'></div> ""; } if($numpotentialanswers == 3) { echo ""<div style='float:left; padding-right:4px'> D) <input type='text' name='answerd[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerd[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> E) <input type='text' name='answere[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswere[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> F) <input type='text' name='answerf[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerf[]' value='yes'> </div><div style='clear:both'></div> ""; } if($numpotentialanswers == 4) { echo ""<div style='float:left; padding-right:4px'> E) <input type='text' name='answere[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswere[]' value='yes'> </div><div style='clear:both'></div> <div style='float:left; padding-right:4px'> F) <input type='text' name='answerf[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerf[]' value='yes'> </div><div style='clear:both'></div> ""; } if($numpotentialanswers == 5) { echo ""<div style='float:left; padding-right:4px'> F) <input type='text' name='answerf[]' style='width:400px'><br /><br /> </div> <div style='float:left'> is answer <input type='checkbox' name='isanswerf[]' value='yes'> </div><div style='clear:both'></div> ""; } $question_num++; } ?> <br /> <input type=""button"" onclick=""addInput()"" name=""add"" value=""Add Question"" /><br /> <div id='text'></div> </div> <div class=""footer tar""> <input type='submit' name='saveit' value='Save' is='submit' class='btn'></form> </div> </div>"
"309","bad","<?php function show_entrys($all){ $connectSQL = mysqli_connect(""localhost"", ""root"", ""Timur"", ""eventdb""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } foreach ($all as $one){ $Eid = $one['event_id']; $Tid = $one['time_id']; $dtA = $one['endtime']; $dtB = date('Y-m-d H:i:s'); $date1 = strtotime(""7 February 2008""); $date2 = strtotime(""8 February 2008""); SQL QUERY QUESRION: can i make a innerjoin query with the following query? : ""select starttime, endtime from time where id = $ ""if($date2 > $date1){ $sql = $connectSQL->query(""SELECT name, description, genre_id, photo FROM eventWHER id=$Eid"");} else { echo"" no events in the future ""; } } while($row= mysqli_fetch_array($sql,MYSQLI_ASSOC)){ $events[] = $row; } foreach ($events as $one){ echo $one['name']; echo $one['description']; echo $one['genre_id']; echo $one['photo']; } mysqli_close($connectSQL); }"
"310","bad","<?php function show_entrys($all){ $connectSQL = mysqli_connect(""localhost"", ""root"", ""Timur"", ""eventdb""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } foreach ($all as $one){ $Eid = $one['event_id']; $Tid = $one['time_id']; $dtA = $one['endtime']; $dtB = date('Y-m-d H:i:s'); $date1 = strtotime(""7 February 2008""); $date2 = strtotime(""8 February 2008""); SQL QUERY QUESRION: can i make a innerjoin query with the following query? : ""select starttime, endtime from time where id = $ ""if($date2 > $date1){ $sql = $connectSQL->query(""SELECT name, description, genre_id, photo FROM eventWHER id=$Eid"");} else { echo"" no events in the future ""; } } while($row= mysqli_fetch_array($sql,MYSQLI_ASSOC)){ $events[] = $row; } foreach ($events as $one){ echo $one['name']; echo $one['description']; echo $one['genre_id']; echo $one['photo']; } mysqli_close($connectSQL); }"
"311","bad","<?php $query=mysqli_query($con,""SELECT * FROM POSTS where `post_status`= 1 order by `post_date` DESC""); while($data = mysqli_fetch_array($query)) { $ID=$data['post_id']; echo""<tr>""; echo""<td>"".$ID .""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"".""on "".$data['post_date'] .""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"".$data['post_title'].""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"" .htmlspecialchars_decode($data['post_body']).""<br/>"".""</td>""; echo""</tr>""; echo""<tr>""; echo""<td rowspan=1>"".""<input type=\""submit\"" value=\""Approve\"" name=\""$ID\"">"".""</td>""; echo""</tr>""; echo ""<tr>""; echo ""<td colspan=4>"".""<hr/>"".""</td>""; echo""</tr>""; if(isset($_POST['Approve'])) { $a=$ID; $query2 = mysqli_query($con, ""UPDATE POSTS SET post_status = '2' WHERE post_id='$a'""); } } ?>"
"312","bad","<?php $query=mysqli_query($con,""SELECT * FROM POSTS where `post_status`= 1 order by `post_date` DESC""); while($data = mysqli_fetch_array($query)) { $ID=$data['post_id']; echo""<tr>""; echo""<td>"".$ID .""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"".""on "".$data['post_date'] .""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"".$data['post_title'].""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"" .htmlspecialchars_decode($data['post_body']).""<br/>"".""</td>""; echo""</tr>""; echo""<tr>""; echo""<td rowspan=1>"".""<input type=\""submit\"" value=\""Approve\"" name=\""$ID\"">"".""</td>""; echo""</tr>""; echo ""<tr>""; echo ""<td colspan=4>"".""<hr/>"".""</td>""; echo""</tr>""; if(isset($_POST['Approve'])) { $a=$ID; $query2 = mysqli_query($con, ""UPDATE POSTS SET post_status = '2' WHERE post_id='$a'""); } } ?>"
"313","bad","<?php $query=mysqli_query($con,""SELECT * FROM POSTS where `post_status`= 1 order by `post_date` DESC""); while($data = mysqli_fetch_array($query)) { $ID=$data['post_id']; echo""<tr>""; echo""<td>"".$ID .""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"".""on "".$data['post_date'] .""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"".$data['post_title'].""</td>""; echo""</tr>""; echo""<tr>""; echo""<td>"" .htmlspecialchars_decode($data['post_body']).""<br/>"".""</td>""; echo""</tr>""; echo""<tr>""; echo""<td rowspan=1>"".""<input type=\""submit\"" value=\""Approve\"" name=\""$ID\"">"".""</td>""; echo""</tr>""; echo ""<tr>""; echo ""<td colspan=4>"".""<hr/>"".""</td>""; echo""</tr>""; if(isset($_POST['Approve'])) { $a=$ID; $query2 = mysqli_query($con, ""UPDATE POSTS SET post_status = '2' WHERE post_id='$a'""); } } ?>"
"314","bad","<?php $meta_description = ""Ingrese a su cuenta para poder realizar diferentes operaciones""; $page_title = ""Login - Estudio Benintendi""; include(""includes/header.php"") ?> <form method=""post"" action=""""> <fieldset> <legend>Ingrese los siguientes datos para logearse</legend> <div id=""resultado""></div> <label>Nombre de usuario</label> <div class=""input-control text"" data-role=""input-control""> <input type=""text"" id=""username"" placeholder=""Ingrese su nombre de usuario..."" required /> <button class=""btn-clear"" tabindex=""-1"" type=""button""></button> </div> <label>Contraseña</label> <div class=""input-control password"" data-role=""input-control""> <input type=""password"" id=""password"" placeholder=""Ingrese su contraseña..."" autofocus required /> <button class=""btn-reveal"" tabindex=""-1"" type=""button""></button> </div> <div class=""input-control checkbox"" data-role=""input-control""> <label> <input type=""checkbox"" checked> <span class=""check""></span> Recordarme </label> </div> <p><button id=""submit"">Enviar</button></p> </fieldset> </form> <?php include(""includes/footer.php"") ?>$(document).ready( function(){ $(""#submit"").on(""click"", function(){ username = $(""#username"").val(); password = $(""#password"").val(); $.ajax({ url: ""/includes/validar_login.php"", type: ""POST"", data: {username:username, password:password}, done: function(resp){ if(resp == ""true"") { window.location = ""index.php""; } else { $(""#resultado"").html(resp); } } }); }); });<?php require_once(""config.php""); session_start(); $conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE) or die (""No se pudo conectar a la base de datos""); $username = $_POST[""username""]; $password = $_POST[""password""]; $sql = ""SELECT Nombre FROM usuarios WHERE Nombre='$username' AND Password='$password'""; $result = $conn->query($sql); if($result->num_rows == 1) { $_SESSION[""username""] = $username; echo ""true""; } else { echo ""false""; } $conn->close(); ?> </div> <!-- jQuery 2.1.1 --> <script src=""js/jquery/jquery.min.js""></script> <!-- jQuery UI --> <script src=""js/jquery/jquery.widget.min.js""></script> <!-- Cross-Browser plugin--> <script src=""js/jquery/jquery.mousewheel.min.js""></script> <!-- Metro jQuery customs --> <script src=""js/metro/metro.min.js""></script> <script src=""js/login.js""></script> </body> </html>"
"315","bad","<?php $meta_description = ""Ingrese a su cuenta para poder realizar diferentes operaciones""; $page_title = ""Login - Estudio Benintendi""; include(""includes/header.php"") ?> <form method=""post"" action=""""> <fieldset> <legend>Ingrese los siguientes datos para logearse</legend> <div id=""resultado""></div> <label>Nombre de usuario</label> <div class=""input-control text"" data-role=""input-control""> <input type=""text"" id=""username"" placeholder=""Ingrese su nombre de usuario..."" required /> <button class=""btn-clear"" tabindex=""-1"" type=""button""></button> </div> <label>Contraseña</label> <div class=""input-control password"" data-role=""input-control""> <input type=""password"" id=""password"" placeholder=""Ingrese su contraseña..."" autofocus required /> <button class=""btn-reveal"" tabindex=""-1"" type=""button""></button> </div> <div class=""input-control checkbox"" data-role=""input-control""> <label> <input type=""checkbox"" checked> <span class=""check""></span> Recordarme </label> </div> <p><button id=""submit"">Enviar</button></p> </fieldset> </form> <?php include(""includes/footer.php"") ?>$(document).ready( function(){ $(""#submit"").on(""click"", function(){ username = $(""#username"").val(); password = $(""#password"").val(); $.ajax({ url: ""/includes/validar_login.php"", type: ""POST"", data: {username:username, password:password}, done: function(resp){ if(resp == ""true"") { window.location = ""index.php""; } else { $(""#resultado"").html(resp); } } }); }); });<?php require_once(""config.php""); session_start(); $conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE) or die (""No se pudo conectar a la base de datos""); $username = $_POST[""username""]; $password = $_POST[""password""]; $sql = ""SELECT Nombre FROM usuarios WHERE Nombre='$username' AND Password='$password'""; $result = $conn->query($sql); if($result->num_rows == 1) { $_SESSION[""username""] = $username; echo ""true""; } else { echo ""false""; } $conn->close(); ?> </div> <!-- jQuery 2.1.1 --> <script src=""js/jquery/jquery.min.js""></script> <!-- jQuery UI --> <script src=""js/jquery/jquery.widget.min.js""></script> <!-- Cross-Browser plugin--> <script src=""js/jquery/jquery.mousewheel.min.js""></script> <!-- Metro jQuery customs --> <script src=""js/metro/metro.min.js""></script> <script src=""js/login.js""></script> </body> </html>"
"316","bad","<?php $meta_description = ""Ingrese a su cuenta para poder realizar diferentes operaciones""; $page_title = ""Login - Estudio Benintendi""; include(""includes/header.php"") ?> <form method=""post"" action=""""> <fieldset> <legend>Ingrese los siguientes datos para logearse</legend> <div id=""resultado""></div> <label>Nombre de usuario</label> <div class=""input-control text"" data-role=""input-control""> <input type=""text"" id=""username"" placeholder=""Ingrese su nombre de usuario..."" required /> <button class=""btn-clear"" tabindex=""-1"" type=""button""></button> </div> <label>Contraseña</label> <div class=""input-control password"" data-role=""input-control""> <input type=""password"" id=""password"" placeholder=""Ingrese su contraseña..."" autofocus required /> <button class=""btn-reveal"" tabindex=""-1"" type=""button""></button> </div> <div class=""input-control checkbox"" data-role=""input-control""> <label> <input type=""checkbox"" checked> <span class=""check""></span> Recordarme </label> </div> <p><button id=""submit"">Enviar</button></p> </fieldset> </form> <?php include(""includes/footer.php"") ?>$(document).ready( function(){ $(""#submit"").on(""click"", function(){ username = $(""#username"").val(); password = $(""#password"").val(); $.ajax({ url: ""/includes/validar_login.php"", type: ""POST"", data: {username:username, password:password}, done: function(resp){ if(resp == ""true"") { window.location = ""index.php""; } else { $(""#resultado"").html(resp); } } }); }); });<?php require_once(""config.php""); session_start(); $conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE) or die (""No se pudo conectar a la base de datos""); $username = $_POST[""username""]; $password = $_POST[""password""]; $sql = ""SELECT Nombre FROM usuarios WHERE Nombre='$username' AND Password='$password'""; $result = $conn->query($sql); if($result->num_rows == 1) { $_SESSION[""username""] = $username; echo ""true""; } else { echo ""false""; } $conn->close(); ?> </div> <!-- jQuery 2.1.1 --> <script src=""js/jquery/jquery.min.js""></script> <!-- jQuery UI --> <script src=""js/jquery/jquery.widget.min.js""></script> <!-- Cross-Browser plugin--> <script src=""js/jquery/jquery.mousewheel.min.js""></script> <!-- Metro jQuery customs --> <script src=""js/metro/metro.min.js""></script> <script src=""js/login.js""></script> </body> </html>"
"317","bad","<?php session_start(); $transport = mysqli_connect(""localhost"", ""user"", ""pw"", ""db_name""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } ?> <?php $raw_date = $_POST['appt_date']; $date = date(""Y-m-d"", strtotime($raw_date)); if ($raw_date == '') { echo ""Please go back and pick a date""; exit; } $sql = ""SELECT * FROM appointments WHERE date = '"".$date.""' ORDER BY appttime""; $result = mysqli_query($transport, $sql); $i=0; echo ""<h2 align='center'>Schedule for $raw_date</h2>""; echo ""<table border='2' style='width: 100%; margin: auto; border-width: 1px'><tr><th>Resident Name</th><th>APT #</th><th>Appt. Time</th><th>Location Phone</th><th>Location Name</th><th>Address</th><th>City</th><th>Zip</th><th>Bus or Car</th><th>Escort Name</th><th>Transfer</th><th>Comments</th><th>Dparting Times</th></tr>""; echo ""<form name='update_times' method='post' action='depart.php'>\n""; while($row = mysqli_fetch_array($result)) { echo ""<input type='hidden' name='id[$i]' value="" . $row['id'] . """"; echo ""<tr>""; echo ""<td align='center'>"" . $row['r_name'] . ""</td>""; echo ""<td align='center'>"" . $row['room'] . ""</td>""; echo ""<td align='center'>"" . date(""g:i A"", strtotime($row['appttime'])) . ""</td>""; echo ""<td align='center'>"" . $row['apptphone'] . ""</td>""; echo ""<td align='center'>"" . $row['l_name'] . ""</td>""; echo ""<td align='center'>"" . $row['address'] . ""</td>""; echo ""<td align='center'>"" . $row['city'] . ""</td>""; echo ""<td align='center'>"" . $row['zip'] . ""</td>""; echo ""<td align='center'>"" . $row['buscar'] . ""</td>""; echo ""<td align='center'>"" . $row['escort_name'] . ""</td>""; echo ""<td align='center'>"" . $row['transfer'] . ""</td>""; echo ""<td align='center'>"" . $row['comments'] . ""</td>""; echo ""<td align='center'><input name='out[$i]' style='width: 70px' type='text' value='"" . date(""g:i A"", strtotime($row['depart'])) . ""' /></td>""; echo ""</tr>""; ++$i; } echo ""<input type='submit' value='Set Depart Times'>""; echo ""</form>""; echo ""</table>""; $_SESSION['sessionVar'] = $raw_date; ?><?php session_start(); $transport = mysqli_connect('localhost', 'user', 'pw', 'db_name'); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } ?> <?php $size = count($_POST['out']); $i=0; while ($i < $size) { $departing = $_POST['out'][$i]; $departing = date(""H:i:s:u"",strtotime($departing)); $id = $_POST['id'][$i]; $sql = ""UPDATE transport.appointments SET depart = $departing WHERE id = $id""; mysqli_query($transport, $sql) or die (""Error in query: $sql""); echo ""Depart times updated!""; ++$i; } mysql_close($transport); ?>"
"318","bad","<?php session_start(); $transport = mysqli_connect(""localhost"", ""user"", ""pw"", ""db_name""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } ?> <?php $raw_date = $_POST['appt_date']; $date = date(""Y-m-d"", strtotime($raw_date)); if ($raw_date == '') { echo ""Please go back and pick a date""; exit; } $sql = ""SELECT * FROM appointments WHERE date = '"".$date.""' ORDER BY appttime""; $result = mysqli_query($transport, $sql); $i=0; echo ""<h2 align='center'>Schedule for $raw_date</h2>""; echo ""<table border='2' style='width: 100%; margin: auto; border-width: 1px'><tr><th>Resident Name</th><th>APT #</th><th>Appt. Time</th><th>Location Phone</th><th>Location Name</th><th>Address</th><th>City</th><th>Zip</th><th>Bus or Car</th><th>Escort Name</th><th>Transfer</th><th>Comments</th><th>Dparting Times</th></tr>""; echo ""<form name='update_times' method='post' action='depart.php'>\n""; while($row = mysqli_fetch_array($result)) { echo ""<input type='hidden' name='id[$i]' value="" . $row['id'] . """"; echo ""<tr>""; echo ""<td align='center'>"" . $row['r_name'] . ""</td>""; echo ""<td align='center'>"" . $row['room'] . ""</td>""; echo ""<td align='center'>"" . date(""g:i A"", strtotime($row['appttime'])) . ""</td>""; echo ""<td align='center'>"" . $row['apptphone'] . ""</td>""; echo ""<td align='center'>"" . $row['l_name'] . ""</td>""; echo ""<td align='center'>"" . $row['address'] . ""</td>""; echo ""<td align='center'>"" . $row['city'] . ""</td>""; echo ""<td align='center'>"" . $row['zip'] . ""</td>""; echo ""<td align='center'>"" . $row['buscar'] . ""</td>""; echo ""<td align='center'>"" . $row['escort_name'] . ""</td>""; echo ""<td align='center'>"" . $row['transfer'] . ""</td>""; echo ""<td align='center'>"" . $row['comments'] . ""</td>""; echo ""<td align='center'><input name='out[$i]' style='width: 70px' type='text' value='"" . date(""g:i A"", strtotime($row['depart'])) . ""' /></td>""; echo ""</tr>""; ++$i; } echo ""<input type='submit' value='Set Depart Times'>""; echo ""</form>""; echo ""</table>""; $_SESSION['sessionVar'] = $raw_date; ?><?php session_start(); $transport = mysqli_connect('localhost', 'user', 'pw', 'db_name'); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } ?> <?php $size = count($_POST['out']); $i=0; while ($i < $size) { $departing = $_POST['out'][$i]; $departing = date(""H:i:s:u"",strtotime($departing)); $id = $_POST['id'][$i]; $sql = ""UPDATE transport.appointments SET depart = $departing WHERE id = $id""; mysqli_query($transport, $sql) or die (""Error in query: $sql""); echo ""Depart times updated!""; ++$i; } mysql_close($transport); ?>"
"319","bad","<?php session_start(); $transport = mysqli_connect(""localhost"", ""user"", ""pw"", ""db_name""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } ?> <?php $raw_date = $_POST['appt_date']; $date = date(""Y-m-d"", strtotime($raw_date)); if ($raw_date == '') { echo ""Please go back and pick a date""; exit; } $sql = ""SELECT * FROM appointments WHERE date = '"".$date.""' ORDER BY appttime""; $result = mysqli_query($transport, $sql); $i=0; echo ""<h2 align='center'>Schedule for $raw_date</h2>""; echo ""<table border='2' style='width: 100%; margin: auto; border-width: 1px'><tr><th>Resident Name</th><th>APT #</th><th>Appt. Time</th><th>Location Phone</th><th>Location Name</th><th>Address</th><th>City</th><th>Zip</th><th>Bus or Car</th><th>Escort Name</th><th>Transfer</th><th>Comments</th><th>Dparting Times</th></tr>""; echo ""<form name='update_times' method='post' action='depart.php'>\n""; while($row = mysqli_fetch_array($result)) { echo ""<input type='hidden' name='id[$i]' value="" . $row['id'] . """"; echo ""<tr>""; echo ""<td align='center'>"" . $row['r_name'] . ""</td>""; echo ""<td align='center'>"" . $row['room'] . ""</td>""; echo ""<td align='center'>"" . date(""g:i A"", strtotime($row['appttime'])) . ""</td>""; echo ""<td align='center'>"" . $row['apptphone'] . ""</td>""; echo ""<td align='center'>"" . $row['l_name'] . ""</td>""; echo ""<td align='center'>"" . $row['address'] . ""</td>""; echo ""<td align='center'>"" . $row['city'] . ""</td>""; echo ""<td align='center'>"" . $row['zip'] . ""</td>""; echo ""<td align='center'>"" . $row['buscar'] . ""</td>""; echo ""<td align='center'>"" . $row['escort_name'] . ""</td>""; echo ""<td align='center'>"" . $row['transfer'] . ""</td>""; echo ""<td align='center'>"" . $row['comments'] . ""</td>""; echo ""<td align='center'><input name='out[$i]' style='width: 70px' type='text' value='"" . date(""g:i A"", strtotime($row['depart'])) . ""' /></td>""; echo ""</tr>""; ++$i; } echo ""<input type='submit' value='Set Depart Times'>""; echo ""</form>""; echo ""</table>""; $_SESSION['sessionVar'] = $raw_date; ?><?php session_start(); $transport = mysqli_connect('localhost', 'user', 'pw', 'db_name'); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } ?> <?php $size = count($_POST['out']); $i=0; while ($i < $size) { $departing = $_POST['out'][$i]; $departing = date(""H:i:s:u"",strtotime($departing)); $id = $_POST['id'][$i]; $sql = ""UPDATE transport.appointments SET depart = $departing WHERE id = $id""; mysqli_query($transport, $sql) or die (""Error in query: $sql""); echo ""Depart times updated!""; ++$i; } mysql_close($transport); ?>"
"320","good",".php?where=name&what=bob.php?where=type$what=clothesif(isset($_POST['where'])){ $where = $_POST['where']; } if(isset($_POST['what'])){ $what= $_POST['what']; }function retrieveData($db, $where, $what){ $getData = $db->prepare(""SELECT name, type, stuff FROM tbl WHERE :where = :what""); $getData->bindParam(':what',$what); $getData->bindParam(':where',$where); $getData->execute(); .............. }'WHERE name = bob"""
"321","good",".php?where=name&what=bob.php?where=type$what=clothesif(isset($_POST['where'])){ $where = $_POST['where']; } if(isset($_POST['what'])){ $what= $_POST['what']; }function retrieveData($db, $where, $what){ $getData = $db->prepare(""SELECT name, type, stuff FROM tbl WHERE :where = :what""); $getData->bindParam(':what',$what); $getData->bindParam(':where',$where); $getData->execute(); .............. }'WHERE name = bob"""
"322","bad","$query_args = array( 's' => mysql_real_escape_string( $_GET['s'] ), 'post_type' => 'publicacion', 'meta_key' => 'meta-box-fp' ); if( $_GET['autor'] != '' ) { $query_args['tax_query'] = array( array( 'taxonomy' => 'autores', 'field' => 'slug', 'terms' => mysql_real_escape_string( $_GET['autor'] ) ) ); } if( trim( $_GET['fini'] ) != '' || trim( $_GET['ffin'] ) != '' ) { $query_args['meta_query'] = array ( array( 'key' => 'meta-box-fp', 'value' => array( mysql_real_escape_string( $_GET['fini'] ) . '-00-00', mysql_real_escape_string( $_GET['ffin'] ) . '-00-00' ), 'type' => 'DATE', 'compare' => 'BETWEEN' ) ); } if( isset( $_GET['ord_by'] ) ) { $ordby = mysql_real_escape_string( $_GET['ord_by'] ) == 'year' ? 'meta_value' : mysql_real_escape_string( $_GET['ord_by'] ); $query_args['orderby'] = $ordby;//mysql_escape_string( $_GET['ord_by'] ); $query_args['order'] = 'DESC';//mysql_escape_string( $_GET['ord'] ); } $query = new WP_Query( $query_args );"
"323","bad","$query_args = array( 's' => mysql_real_escape_string( $_GET['s'] ), 'post_type' => 'publicacion', 'meta_key' => 'meta-box-fp' ); if( $_GET['autor'] != '' ) { $query_args['tax_query'] = array( array( 'taxonomy' => 'autores', 'field' => 'slug', 'terms' => mysql_real_escape_string( $_GET['autor'] ) ) ); } if( trim( $_GET['fini'] ) != '' || trim( $_GET['ffin'] ) != '' ) { $query_args['meta_query'] = array ( array( 'key' => 'meta-box-fp', 'value' => array( mysql_real_escape_string( $_GET['fini'] ) . '-00-00', mysql_real_escape_string( $_GET['ffin'] ) . '-00-00' ), 'type' => 'DATE', 'compare' => 'BETWEEN' ) ); } if( isset( $_GET['ord_by'] ) ) { $ordby = mysql_real_escape_string( $_GET['ord_by'] ) == 'year' ? 'meta_value' : mysql_real_escape_string( $_GET['ord_by'] ); $query_args['orderby'] = $ordby;//mysql_escape_string( $_GET['ord_by'] ); $query_args['order'] = 'DESC';//mysql_escape_string( $_GET['ord'] ); } $query = new WP_Query( $query_args );"
"324","bad","require '../dbconnect.php'; session_start(); $username_input = $_POST['username_input']; $password_input = $_POST['password_input']; $sql = ""SELECT id, username, password, salt FROM users WHERE username = '$username_input' LIMIT 0, 30""; $query = mysqli_query($dbcon, $sql); printf(""Error: %s\n"", mysqli_error($dbcon)); exit(); $row = mysqli_fetch_row($query); $user_number = $row[0]; $username = $row[1]; $password = $row[2]; $salt = $row[3];"
"325","bad","require '../dbconnect.php'; session_start(); $username_input = $_POST['username_input']; $password_input = $_POST['password_input']; $sql = ""SELECT id, username, password, salt FROM users WHERE username = '$username_input' LIMIT 0, 30""; $query = mysqli_query($dbcon, $sql); printf(""Error: %s\n"", mysqli_error($dbcon)); exit(); $row = mysqli_fetch_row($query); $user_number = $row[0]; $username = $row[1]; $password = $row[2]; $salt = $row[3];"
"326","bad","require '../dbconnect.php'; session_start(); $username_input = $_POST['username_input']; $password_input = $_POST['password_input']; $sql = ""SELECT id, username, password, salt FROM users WHERE username = '$username_input' LIMIT 0, 30""; $query = mysqli_query($dbcon, $sql); printf(""Error: %s\n"", mysqli_error($dbcon)); exit(); $row = mysqli_fetch_row($query); $user_number = $row[0]; $username = $row[1]; $password = $row[2]; $salt = $row[3];"
"327","good","<?php $q = $_GET['q']; $con = mysqli_connect('localhost','user','password','my_db'); if (!$con) { die('Could not connect: ' . mysqli_error($con)); } $stmt=$con->prepare(""SELECT * FROM Contacts WHERE firstGroup=? OR secondGroup=? OR thirdGroup=?""); $stmt->bind_param(""sss"", $q, $q, $q); if($stmt->execute()){ $stmt->bind_result($name, $code); while ($stmt->fetch()) { printf (""%s (%s)\n"", $name, $code); } }else{ echo ""Didn't work""; }"
"328","good","<?php $q = $_GET['q']; $con = mysqli_connect('localhost','user','password','my_db'); if (!$con) { die('Could not connect: ' . mysqli_error($con)); } $stmt=$con->prepare(""SELECT * FROM Contacts WHERE firstGroup=? OR secondGroup=? OR thirdGroup=?""); $stmt->bind_param(""sss"", $q, $q, $q); if($stmt->execute()){ $stmt->bind_result($name, $code); while ($stmt->fetch()) { printf (""%s (%s)\n"", $name, $code); } }else{ echo ""Didn't work""; }"
"329","good","<?php $q = $_GET['q']; $con = mysqli_connect('localhost','user','password','my_db'); if (!$con) { die('Could not connect: ' . mysqli_error($con)); } $stmt=$con->prepare(""SELECT * FROM Contacts WHERE firstGroup=? OR secondGroup=? OR thirdGroup=?""); $stmt->bind_param(""sss"", $q, $q, $q); if($stmt->execute()){ $stmt->bind_result($name, $code); while ($stmt->fetch()) { printf (""%s (%s)\n"", $name, $code); } }else{ echo ""Didn't work""; }"
"330","bad","<?php // Error reporting: error_reporting(E_ALL^E_NOTICE); include ""connect.php""; include ""comment.class.php""; $comments = array(); $result = mysql_query(""SELECT * FROM comments ORDER BY id ASC""); while($row = mysql_fetch_assoc($result)) { $comments[] = new Comment($row); } ?> <!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <meta http-equiv=""X-UA-Compatible"" content=""IE=edge,chrome=1""> <title>Bausatz</title> <meta name="""" content=""""> <link rel=""stylesheet"" href=""css/normalize.css""> <link rel=""stylesheet"" href=""css/main.css""> <script src=""js/modernizr-2.7.1.min.js""></script> <style type=""text/css""></style> <link href='http://fonts.googleapis.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'> </head> <body> <header> <div class=""logo""> <span class=""col"">ON THE </span>W<span class=""col"">OODWAY</span> </div> <nav> <a href=""travels.html"">TRAVELS</a> <a href=""blog.html"">BLOG</a> <a href=""me.html"">ME</a> </nav> </header> <div class=""main""> <div class=""contentwrapper""> <div class=""entry""> </div> <div class=""comment""> <div id=""each""> <?php foreach($comments as $c){ echo $c->markup(); } ?> </div> <div id=""addCommentContainer""> <p>Add a Comment</p> <form id=""addCommentForm"" method=""post"" action=""""> <div> <label for=""name"">Your Name</label> <input type=""text"" name=""name"" id=""name"" /> <label for=""email"">Your Email</label> <input type=""text"" name=""email"" id=""email"" /> <label for=""body"">Comment Body</label> <textarea name=""body"" id=""body"" cols=""20"" rows=""5""></textarea> <input type=""submit"" id=""submit"" value=""Submit"" > </div> </form> </div> </div> </div> </div> <div class=""unten""> <nav> <a href=""#"">contact</a> <a href=""#"">copyright</a> </nav> </div> <script src=""//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js""></script> <script>window.jQuery || document.write('<script src=""js/jquery-1.9.1.min.js""> <\/script>')</script> <script type=""text/javascript"" src=""js/comment.js""></script> </body> </html>$(document).ready(function(){ var working = false; $('#addCommentForm').submit(function(e){ e.preventDefault(); if(working) return false; working = true; $('#submit').val('Working..'); $('span.error').remove(); /* Sending the form fileds to submit.php: */ $.post('submit.php',$(this).serialize(),function(msg){ working = false; $('#submit').val('Submit'); if(msg.status){ $(msg.html).hide().insertBefore('#addCommentContainer').slideDown(); $('#body').val(''); } else { $.each(msg.errors,function(k,v){ $('label[for='+k+']').append('<span class=""error"">'+v+'</span>'); }); } },'json'); }); });<?php class Comment { private $data = array(); public function __construct($row) { /* / The constructor */ $this->data = $row; } public function markup() { /* / This method outputs the XHTML markup of the comment */ // Setting up an alias, so we don't have to write $this->data every time: $d = &$this->data; $link_open = ''; $link_close = ''; // Converting the time to a UNIX timestamp: $d['dt'] = strtotime($d['dt']); return ' <div class=""comment""> <div class=""name"">'.$link_open.$d['name'].$link_close.'</div> <div class=""date"" title=""Added at '.date('H:i \o\n d M Y',$d['dt']).'"">'.date('d M Y',$d['dt']).'</div> <p>'.$d['body'].'</p> </div> '; } public static function validate(&$arr) { /* / This method is used to validate the data sent via AJAX. / / It return true/false depending on whether the data is valid, and populates / the $arr array passed as a paremter (notice the ampersand above) with / either the valid input data, or the error messages. */ $errors = array(); $data = array(); // Using the filter_input function introduced in PHP 5.2.0 if(!($data['email'] = filter_input(INPUT_POST,'email',FILTER_VALIDATE_EMAIL))) { $email = ''; } // Using the filter with a custom callback function: if(!($data['body'] = filter_input(INPUT_POST,'body',FILTER_CALLBACK,array('options'=>'Comment::validate_text'))) ) { $errors['body'] = 'Please enter a comment body.'; } if(!($data['name'] = filter_input(INPUT_POST,'name',FILTER_CALLBACK,array('options'=>'Comment::validate_text')))) { $errors['name'] = 'Please enter a name.'; } if(!empty($errors)){ // If there are errors, copy the $errors array to $arr: $arr = $errors; return false; } foreach($data as $k=>$v){ $arr[$k] = mysql_real_escape_string($v); } $arr['email'] = strtolower(trim($arr['email'])); return true; } private static function validate_text($str) { if(mb_strlen($str,'utf8')<1) return false; $str = nl2br(htmlspecialchars($str)); $str = str_replace(array(chr(10),chr(13)),'',$str); return $str; } } ?><?php error_reporting(E_ALL^E_NOTICE); include ""connect.php""; include ""comment.class.php""; $arr = array(); $validates = Comment::validate($arr); if($validates) { mysql_query("" INSERT INTO comments(name,url,email,body) VALUES ( '"".$arr['name'].""', '"".$arr['url'].""', '"".$arr['email'].""', '"".$arr['body'].""' )""); $arr['dt'] = date('r',time()); $arr['id'] = mysql_insert_id(); $arr = array_map('stripslashes',$arr); $insertedComment = new Comment($arr); echo json_encode(array('status'=>1,'html'=>$insertedComment->markup())); } else { echo '{""status"":0,""errors"":'.json_encode($arr).'}'; } ?><?php $db_host = '*****'; $db_user = '*****'; $db_pass = '*****'; $db_database = '*****'; $link = @mysql_connect($db_host,$db_user,$db_pass) or die('Unable to establish a DB connection'); mysql_query(""SET NAMES 'utf8'""); mysql_select_db($db_database,$link); ?>"
"331","bad","<?php // Error reporting: error_reporting(E_ALL^E_NOTICE); include ""connect.php""; include ""comment.class.php""; $comments = array(); $result = mysql_query(""SELECT * FROM comments ORDER BY id ASC""); while($row = mysql_fetch_assoc($result)) { $comments[] = new Comment($row); } ?> <!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <meta http-equiv=""X-UA-Compatible"" content=""IE=edge,chrome=1""> <title>Bausatz</title> <meta name="""" content=""""> <link rel=""stylesheet"" href=""css/normalize.css""> <link rel=""stylesheet"" href=""css/main.css""> <script src=""js/modernizr-2.7.1.min.js""></script> <style type=""text/css""></style> <link href='http://fonts.googleapis.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'> </head> <body> <header> <div class=""logo""> <span class=""col"">ON THE </span>W<span class=""col"">OODWAY</span> </div> <nav> <a href=""travels.html"">TRAVELS</a> <a href=""blog.html"">BLOG</a> <a href=""me.html"">ME</a> </nav> </header> <div class=""main""> <div class=""contentwrapper""> <div class=""entry""> </div> <div class=""comment""> <div id=""each""> <?php foreach($comments as $c){ echo $c->markup(); } ?> </div> <div id=""addCommentContainer""> <p>Add a Comment</p> <form id=""addCommentForm"" method=""post"" action=""""> <div> <label for=""name"">Your Name</label> <input type=""text"" name=""name"" id=""name"" /> <label for=""email"">Your Email</label> <input type=""text"" name=""email"" id=""email"" /> <label for=""body"">Comment Body</label> <textarea name=""body"" id=""body"" cols=""20"" rows=""5""></textarea> <input type=""submit"" id=""submit"" value=""Submit"" > </div> </form> </div> </div> </div> </div> <div class=""unten""> <nav> <a href=""#"">contact</a> <a href=""#"">copyright</a> </nav> </div> <script src=""//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js""></script> <script>window.jQuery || document.write('<script src=""js/jquery-1.9.1.min.js""> <\/script>')</script> <script type=""text/javascript"" src=""js/comment.js""></script> </body> </html>$(document).ready(function(){ var working = false; $('#addCommentForm').submit(function(e){ e.preventDefault(); if(working) return false; working = true; $('#submit').val('Working..'); $('span.error').remove(); /* Sending the form fileds to submit.php: */ $.post('submit.php',$(this).serialize(),function(msg){ working = false; $('#submit').val('Submit'); if(msg.status){ $(msg.html).hide().insertBefore('#addCommentContainer').slideDown(); $('#body').val(''); } else { $.each(msg.errors,function(k,v){ $('label[for='+k+']').append('<span class=""error"">'+v+'</span>'); }); } },'json'); }); });<?php class Comment { private $data = array(); public function __construct($row) { /* / The constructor */ $this->data = $row; } public function markup() { /* / This method outputs the XHTML markup of the comment */ // Setting up an alias, so we don't have to write $this->data every time: $d = &$this->data; $link_open = ''; $link_close = ''; // Converting the time to a UNIX timestamp: $d['dt'] = strtotime($d['dt']); return ' <div class=""comment""> <div class=""name"">'.$link_open.$d['name'].$link_close.'</div> <div class=""date"" title=""Added at '.date('H:i \o\n d M Y',$d['dt']).'"">'.date('d M Y',$d['dt']).'</div> <p>'.$d['body'].'</p> </div> '; } public static function validate(&$arr) { /* / This method is used to validate the data sent via AJAX. / / It return true/false depending on whether the data is valid, and populates / the $arr array passed as a paremter (notice the ampersand above) with / either the valid input data, or the error messages. */ $errors = array(); $data = array(); // Using the filter_input function introduced in PHP 5.2.0 if(!($data['email'] = filter_input(INPUT_POST,'email',FILTER_VALIDATE_EMAIL))) { $email = ''; } // Using the filter with a custom callback function: if(!($data['body'] = filter_input(INPUT_POST,'body',FILTER_CALLBACK,array('options'=>'Comment::validate_text'))) ) { $errors['body'] = 'Please enter a comment body.'; } if(!($data['name'] = filter_input(INPUT_POST,'name',FILTER_CALLBACK,array('options'=>'Comment::validate_text')))) { $errors['name'] = 'Please enter a name.'; } if(!empty($errors)){ // If there are errors, copy the $errors array to $arr: $arr = $errors; return false; } foreach($data as $k=>$v){ $arr[$k] = mysql_real_escape_string($v); } $arr['email'] = strtolower(trim($arr['email'])); return true; } private static function validate_text($str) { if(mb_strlen($str,'utf8')<1) return false; $str = nl2br(htmlspecialchars($str)); $str = str_replace(array(chr(10),chr(13)),'',$str); return $str; } } ?><?php error_reporting(E_ALL^E_NOTICE); include ""connect.php""; include ""comment.class.php""; $arr = array(); $validates = Comment::validate($arr); if($validates) { mysql_query("" INSERT INTO comments(name,url,email,body) VALUES ( '"".$arr['name'].""', '"".$arr['url'].""', '"".$arr['email'].""', '"".$arr['body'].""' )""); $arr['dt'] = date('r',time()); $arr['id'] = mysql_insert_id(); $arr = array_map('stripslashes',$arr); $insertedComment = new Comment($arr); echo json_encode(array('status'=>1,'html'=>$insertedComment->markup())); } else { echo '{""status"":0,""errors"":'.json_encode($arr).'}'; } ?><?php $db_host = '*****'; $db_user = '*****'; $db_pass = '*****'; $db_database = '*****'; $link = @mysql_connect($db_host,$db_user,$db_pass) or die('Unable to establish a DB connection'); mysql_query(""SET NAMES 'utf8'""); mysql_select_db($db_database,$link); ?>"
"332","bad","<?php // Error reporting: error_reporting(E_ALL^E_NOTICE); include ""connect.php""; include ""comment.class.php""; $comments = array(); $result = mysql_query(""SELECT * FROM comments ORDER BY id ASC""); while($row = mysql_fetch_assoc($result)) { $comments[] = new Comment($row); } ?> <!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <meta http-equiv=""X-UA-Compatible"" content=""IE=edge,chrome=1""> <title>Bausatz</title> <meta name="""" content=""""> <link rel=""stylesheet"" href=""css/normalize.css""> <link rel=""stylesheet"" href=""css/main.css""> <script src=""js/modernizr-2.7.1.min.js""></script> <style type=""text/css""></style> <link href='http://fonts.googleapis.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'> </head> <body> <header> <div class=""logo""> <span class=""col"">ON THE </span>W<span class=""col"">OODWAY</span> </div> <nav> <a href=""travels.html"">TRAVELS</a> <a href=""blog.html"">BLOG</a> <a href=""me.html"">ME</a> </nav> </header> <div class=""main""> <div class=""contentwrapper""> <div class=""entry""> </div> <div class=""comment""> <div id=""each""> <?php foreach($comments as $c){ echo $c->markup(); } ?> </div> <div id=""addCommentContainer""> <p>Add a Comment</p> <form id=""addCommentForm"" method=""post"" action=""""> <div> <label for=""name"">Your Name</label> <input type=""text"" name=""name"" id=""name"" /> <label for=""email"">Your Email</label> <input type=""text"" name=""email"" id=""email"" /> <label for=""body"">Comment Body</label> <textarea name=""body"" id=""body"" cols=""20"" rows=""5""></textarea> <input type=""submit"" id=""submit"" value=""Submit"" > </div> </form> </div> </div> </div> </div> <div class=""unten""> <nav> <a href=""#"">contact</a> <a href=""#"">copyright</a> </nav> </div> <script src=""//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js""></script> <script>window.jQuery || document.write('<script src=""js/jquery-1.9.1.min.js""> <\/script>')</script> <script type=""text/javascript"" src=""js/comment.js""></script> </body> </html>$(document).ready(function(){ var working = false; $('#addCommentForm').submit(function(e){ e.preventDefault(); if(working) return false; working = true; $('#submit').val('Working..'); $('span.error').remove(); /* Sending the form fileds to submit.php: */ $.post('submit.php',$(this).serialize(),function(msg){ working = false; $('#submit').val('Submit'); if(msg.status){ $(msg.html).hide().insertBefore('#addCommentContainer').slideDown(); $('#body').val(''); } else { $.each(msg.errors,function(k,v){ $('label[for='+k+']').append('<span class=""error"">'+v+'</span>'); }); } },'json'); }); });<?php class Comment { private $data = array(); public function __construct($row) { /* / The constructor */ $this->data = $row; } public function markup() { /* / This method outputs the XHTML markup of the comment */ // Setting up an alias, so we don't have to write $this->data every time: $d = &$this->data; $link_open = ''; $link_close = ''; // Converting the time to a UNIX timestamp: $d['dt'] = strtotime($d['dt']); return ' <div class=""comment""> <div class=""name"">'.$link_open.$d['name'].$link_close.'</div> <div class=""date"" title=""Added at '.date('H:i \o\n d M Y',$d['dt']).'"">'.date('d M Y',$d['dt']).'</div> <p>'.$d['body'].'</p> </div> '; } public static function validate(&$arr) { /* / This method is used to validate the data sent via AJAX. / / It return true/false depending on whether the data is valid, and populates / the $arr array passed as a paremter (notice the ampersand above) with / either the valid input data, or the error messages. */ $errors = array(); $data = array(); // Using the filter_input function introduced in PHP 5.2.0 if(!($data['email'] = filter_input(INPUT_POST,'email',FILTER_VALIDATE_EMAIL))) { $email = ''; } // Using the filter with a custom callback function: if(!($data['body'] = filter_input(INPUT_POST,'body',FILTER_CALLBACK,array('options'=>'Comment::validate_text'))) ) { $errors['body'] = 'Please enter a comment body.'; } if(!($data['name'] = filter_input(INPUT_POST,'name',FILTER_CALLBACK,array('options'=>'Comment::validate_text')))) { $errors['name'] = 'Please enter a name.'; } if(!empty($errors)){ // If there are errors, copy the $errors array to $arr: $arr = $errors; return false; } foreach($data as $k=>$v){ $arr[$k] = mysql_real_escape_string($v); } $arr['email'] = strtolower(trim($arr['email'])); return true; } private static function validate_text($str) { if(mb_strlen($str,'utf8')<1) return false; $str = nl2br(htmlspecialchars($str)); $str = str_replace(array(chr(10),chr(13)),'',$str); return $str; } } ?><?php error_reporting(E_ALL^E_NOTICE); include ""connect.php""; include ""comment.class.php""; $arr = array(); $validates = Comment::validate($arr); if($validates) { mysql_query("" INSERT INTO comments(name,url,email,body) VALUES ( '"".$arr['name'].""', '"".$arr['url'].""', '"".$arr['email'].""', '"".$arr['body'].""' )""); $arr['dt'] = date('r',time()); $arr['id'] = mysql_insert_id(); $arr = array_map('stripslashes',$arr); $insertedComment = new Comment($arr); echo json_encode(array('status'=>1,'html'=>$insertedComment->markup())); } else { echo '{""status"":0,""errors"":'.json_encode($arr).'}'; } ?><?php $db_host = '*****'; $db_user = '*****'; $db_pass = '*****'; $db_database = '*****'; $link = @mysql_connect($db_host,$db_user,$db_pass) or die('Unable to establish a DB connection'); mysql_query(""SET NAMES 'utf8'""); mysql_select_db($db_database,$link); ?>"
"333","bad","<?php $state= ""CA""; $country= ""US""; require(""phpsqlajax_dbinfo.php""); // Opens a connection to a mySQL server $connection=mysql_connect (localhost, $username, $password); if (!$connection) { die('Not connected : ' . mysql_error()); } // Set the active mySQL database $db_selected = mysql_select_db($database, $connection); if (!$db_selected) { die ('Can\'t use db : ' . mysql_error()); } $sql1 = ""SELECT avg(lat), avg(lng) FROM marker WHERE country='$country' && state='$state'""; $res1 = mysql_query($sql1); $row1 = mysql_fetch_array($res1); $alat = $row1[0]; $alng = $row1[1]; ?> <!DOCTYPE html > <head> <meta name=""viewport"" content=""initial-scale=1.0, user-scalable=no"" /> <meta http-equiv=""content-type"" content=""text/html; charset=UTF-8""/> <title>PHP/MySQL & Google Maps Example</title> <script type=""text/javascript"" src=""http://maps.googleapis.com/maps/api/js""></script> <script type=""text/javascript""> //<![CDATA[ var customIcons = { free: { icon: '/images/blue.png' }, paid: { icon: '/images/red.png' } }; function load() { var map = new google.maps.Map(document.getElementById(""map""), { center: new google.maps.LatLng(<? echo $alat; ?>, <? echo $alng; ?>), zoom: 6, mapTypeId: 'roadmap' }); var infoWindow = new google.maps.InfoWindow(); // Change this depending on the name of your PHP file downloadUrl(""phpsqlajax_genxml.php"", function(data) { var xml = data.responseXML; var markers = xml.documentElement.getElementsByTagName(""marker""); for (var i = 0; i < markers.length; i++) { var name = markers[i].getAttribute(""name""); var address = markers[i].getAttribute(""address""); var type = markers[i].getAttribute(""type""); var point = new google.maps.LatLng( parseFloat(markers[i].getAttribute(""lat"")), parseFloat(markers[i].getAttribute(""lng""))); var html = ""<b>"" + name + ""</b> <br/>"" + address; var icon = eval('customIcons'+'.'+type) || {}; var marker = new google.maps.Marker({ map: map, position: point, icon: icon.icon }); bindInfoWindow(marker, map, infoWindow, html); } }); } function bindInfoWindow(marker, map, infoWindow, html) { google.maps.event.addListener(marker, 'click', function() { infoWindow.setContent(html); infoWindow.open(map, marker); }); } function downloadUrl(url, callback) { var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest; request.onreadystatechange = function() { if (request.readyState == 4) { request.onreadystatechange = doNothing; callback(request, request.status); } }; request.open('GET', url, true); request.send(null); } function doNothing() {} //]]> </script> </head> <body onload=""load()""> <div align=""center""> <div id=""map"" style=""width: 1024px; height: 600px""></div> </div> </body> </html><?php require(""phpsqlajax_dbinfo.php""); // Start XML file, create parent node $dom = new DOMDocument(""1.0""); $node = $dom->createElement(""markers""); $parnode = $dom->appendChild($node); // Opens a connection to a MySQL server $connection=mysql_connect ('localhost', $username, $password); if (!$connection) { die('Not connected : ' . mysql_error());} // Set the active MySQL database $db_selected = mysql_select_db($database, $connection); if (!$db_selected) { die ('Can\'t use db : ' . mysql_error()); } // Select all the rows in the markers table $query = ""SELECT * FROM marker WHERE country='$country' && state='$state'""; $result = mysql_query($query); if (!$result) { die('Invalid query: ' . mysql_error()); } header(""Content-type: text/xml""); // Iterate through the rows, adding XML nodes for each while ($row = @mysql_fetch_assoc($result)){ // ADD TO XML DOCUMENT NODE $node = $dom->createElement(""marker""); $newnode = $parnode->appendChild($node); $newnode->setAttribute(""name"",$row['name']); $newnode->setAttribute(""address"", $row['address']); $newnode->setAttribute(""lat"", $row['lat']); $newnode->setAttribute(""lng"", $row['lng']); $newnode->setAttribute(""type"", $row['type']); } echo $dom->saveXML(); ?>"
"334","bad","<?php $state= ""CA""; $country= ""US""; require(""phpsqlajax_dbinfo.php""); // Opens a connection to a mySQL server $connection=mysql_connect (localhost, $username, $password); if (!$connection) { die('Not connected : ' . mysql_error()); } // Set the active mySQL database $db_selected = mysql_select_db($database, $connection); if (!$db_selected) { die ('Can\'t use db : ' . mysql_error()); } $sql1 = ""SELECT avg(lat), avg(lng) FROM marker WHERE country='$country' && state='$state'""; $res1 = mysql_query($sql1); $row1 = mysql_fetch_array($res1); $alat = $row1[0]; $alng = $row1[1]; ?> <!DOCTYPE html > <head> <meta name=""viewport"" content=""initial-scale=1.0, user-scalable=no"" /> <meta http-equiv=""content-type"" content=""text/html; charset=UTF-8""/> <title>PHP/MySQL & Google Maps Example</title> <script type=""text/javascript"" src=""http://maps.googleapis.com/maps/api/js""></script> <script type=""text/javascript""> //<![CDATA[ var customIcons = { free: { icon: '/images/blue.png' }, paid: { icon: '/images/red.png' } }; function load() { var map = new google.maps.Map(document.getElementById(""map""), { center: new google.maps.LatLng(<? echo $alat; ?>, <? echo $alng; ?>), zoom: 6, mapTypeId: 'roadmap' }); var infoWindow = new google.maps.InfoWindow(); // Change this depending on the name of your PHP file downloadUrl(""phpsqlajax_genxml.php"", function(data) { var xml = data.responseXML; var markers = xml.documentElement.getElementsByTagName(""marker""); for (var i = 0; i < markers.length; i++) { var name = markers[i].getAttribute(""name""); var address = markers[i].getAttribute(""address""); var type = markers[i].getAttribute(""type""); var point = new google.maps.LatLng( parseFloat(markers[i].getAttribute(""lat"")), parseFloat(markers[i].getAttribute(""lng""))); var html = ""<b>"" + name + ""</b> <br/>"" + address; var icon = eval('customIcons'+'.'+type) || {}; var marker = new google.maps.Marker({ map: map, position: point, icon: icon.icon }); bindInfoWindow(marker, map, infoWindow, html); } }); } function bindInfoWindow(marker, map, infoWindow, html) { google.maps.event.addListener(marker, 'click', function() { infoWindow.setContent(html); infoWindow.open(map, marker); }); } function downloadUrl(url, callback) { var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest; request.onreadystatechange = function() { if (request.readyState == 4) { request.onreadystatechange = doNothing; callback(request, request.status); } }; request.open('GET', url, true); request.send(null); } function doNothing() {} //]]> </script> </head> <body onload=""load()""> <div align=""center""> <div id=""map"" style=""width: 1024px; height: 600px""></div> </div> </body> </html><?php require(""phpsqlajax_dbinfo.php""); // Start XML file, create parent node $dom = new DOMDocument(""1.0""); $node = $dom->createElement(""markers""); $parnode = $dom->appendChild($node); // Opens a connection to a MySQL server $connection=mysql_connect ('localhost', $username, $password); if (!$connection) { die('Not connected : ' . mysql_error());} // Set the active MySQL database $db_selected = mysql_select_db($database, $connection); if (!$db_selected) { die ('Can\'t use db : ' . mysql_error()); } // Select all the rows in the markers table $query = ""SELECT * FROM marker WHERE country='$country' && state='$state'""; $result = mysql_query($query); if (!$result) { die('Invalid query: ' . mysql_error()); } header(""Content-type: text/xml""); // Iterate through the rows, adding XML nodes for each while ($row = @mysql_fetch_assoc($result)){ // ADD TO XML DOCUMENT NODE $node = $dom->createElement(""marker""); $newnode = $parnode->appendChild($node); $newnode->setAttribute(""name"",$row['name']); $newnode->setAttribute(""address"", $row['address']); $newnode->setAttribute(""lat"", $row['lat']); $newnode->setAttribute(""lng"", $row['lng']); $newnode->setAttribute(""type"", $row['type']); } echo $dom->saveXML(); ?>"
"335","bad","<?php $state= ""CA""; $country= ""US""; require(""phpsqlajax_dbinfo.php""); // Opens a connection to a mySQL server $connection=mysql_connect (localhost, $username, $password); if (!$connection) { die('Not connected : ' . mysql_error()); } // Set the active mySQL database $db_selected = mysql_select_db($database, $connection); if (!$db_selected) { die ('Can\'t use db : ' . mysql_error()); } $sql1 = ""SELECT avg(lat), avg(lng) FROM marker WHERE country='$country' && state='$state'""; $res1 = mysql_query($sql1); $row1 = mysql_fetch_array($res1); $alat = $row1[0]; $alng = $row1[1]; ?> <!DOCTYPE html > <head> <meta name=""viewport"" content=""initial-scale=1.0, user-scalable=no"" /> <meta http-equiv=""content-type"" content=""text/html; charset=UTF-8""/> <title>PHP/MySQL & Google Maps Example</title> <script type=""text/javascript"" src=""http://maps.googleapis.com/maps/api/js""></script> <script type=""text/javascript""> //<![CDATA[ var customIcons = { free: { icon: '/images/blue.png' }, paid: { icon: '/images/red.png' } }; function load() { var map = new google.maps.Map(document.getElementById(""map""), { center: new google.maps.LatLng(<? echo $alat; ?>, <? echo $alng; ?>), zoom: 6, mapTypeId: 'roadmap' }); var infoWindow = new google.maps.InfoWindow(); // Change this depending on the name of your PHP file downloadUrl(""phpsqlajax_genxml.php"", function(data) { var xml = data.responseXML; var markers = xml.documentElement.getElementsByTagName(""marker""); for (var i = 0; i < markers.length; i++) { var name = markers[i].getAttribute(""name""); var address = markers[i].getAttribute(""address""); var type = markers[i].getAttribute(""type""); var point = new google.maps.LatLng( parseFloat(markers[i].getAttribute(""lat"")), parseFloat(markers[i].getAttribute(""lng""))); var html = ""<b>"" + name + ""</b> <br/>"" + address; var icon = eval('customIcons'+'.'+type) || {}; var marker = new google.maps.Marker({ map: map, position: point, icon: icon.icon }); bindInfoWindow(marker, map, infoWindow, html); } }); } function bindInfoWindow(marker, map, infoWindow, html) { google.maps.event.addListener(marker, 'click', function() { infoWindow.setContent(html); infoWindow.open(map, marker); }); } function downloadUrl(url, callback) { var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest; request.onreadystatechange = function() { if (request.readyState == 4) { request.onreadystatechange = doNothing; callback(request, request.status); } }; request.open('GET', url, true); request.send(null); } function doNothing() {} //]]> </script> </head> <body onload=""load()""> <div align=""center""> <div id=""map"" style=""width: 1024px; height: 600px""></div> </div> </body> </html><?php require(""phpsqlajax_dbinfo.php""); // Start XML file, create parent node $dom = new DOMDocument(""1.0""); $node = $dom->createElement(""markers""); $parnode = $dom->appendChild($node); // Opens a connection to a MySQL server $connection=mysql_connect ('localhost', $username, $password); if (!$connection) { die('Not connected : ' . mysql_error());} // Set the active MySQL database $db_selected = mysql_select_db($database, $connection); if (!$db_selected) { die ('Can\'t use db : ' . mysql_error()); } // Select all the rows in the markers table $query = ""SELECT * FROM marker WHERE country='$country' && state='$state'""; $result = mysql_query($query); if (!$result) { die('Invalid query: ' . mysql_error()); } header(""Content-type: text/xml""); // Iterate through the rows, adding XML nodes for each while ($row = @mysql_fetch_assoc($result)){ // ADD TO XML DOCUMENT NODE $node = $dom->createElement(""marker""); $newnode = $parnode->appendChild($node); $newnode->setAttribute(""name"",$row['name']); $newnode->setAttribute(""address"", $row['address']); $newnode->setAttribute(""lat"", $row['lat']); $newnode->setAttribute(""lng"", $row['lng']); $newnode->setAttribute(""type"", $row['type']); } echo $dom->saveXML(); ?>"
"336","bad","<script language=""javascript""> function valid() { var a=document.form2.i1.value; var b=document.form2.pas.value; var c=document.form2.pas1.value; var d=document.form2.n1.value; var e=document.form2.a1.value; var f=document.form2.r1.value; var g=document.form2.pin1.value; var h=document.form2.phno1.value; var i=document.form2.u1.value; var j=document.form2.email1.value; if(a!=""y"") { alert(""Please accept the terms and conditions before registering.""); return false; } else if(d=="""") { alert(""Name required.""); return false; } else if(e=="""") { alert(""Age required.""); return false; } else if(e<18) { alert(""You have to be atleast 18 to register.""); return false; } else if(f="""") { alert(""Gender required.""); return false; } else if(g=="""" || isNan(g)) { alert(""Valid pincode required.""); return false; } else if(h==""""|| isNan(h)) { alert(""Valid phone number required.""); return false; } else if(i=="""") { alert(""Username required.""); return false; } else if(j=="""") { alert(""Email required.""); return false; } else if(b=="""" || c=="""") { alert(""Password required.""); return false; } else if(b!=c) { alert(""Please make sure the passwords are identical.""); return false; } return true; } </script><div id=""apDiv3""><input name=""reg1"" type=""submit"" id=""login-submit"" value=""Register"" onclick=""return valid()""/></div> <?php if(isset($_POST['reg1'])) { $name=$_POST['n1']; $age=$_POST['a1']; $gen=$_POST['r1']; $phno=$_POST['phno1']; $email=$_POST['email1']; $pin=$_POST['pin1']; $user=$_POST['u1']; $pas=$_POST['pass']; $pas1=$_POST['pass1']; $i=$_POST['i1']; $connection=mysqli_connect(""localhost"",""root"",""""); if (!$connection) { die(""Database connection failed: "" . mysqli_error($connection)); } $db_select = mysqli_select_db($connection, ""vinay""); if (!$db_select) { die(""Database selection failed: "" . mysqli_error($db_select)); } $q=""insert into reg values('0','$name','$age','$gen','$phno','$email','$pin','$user','$pas')""; mysqli_query($q) or die(mysqli_error($q)); if(mysqli_affected_rows()>0) { header(""location:index.php""); } } ?>"
"337","bad","<script language=""javascript""> function valid() { var a=document.form2.i1.value; var b=document.form2.pas.value; var c=document.form2.pas1.value; var d=document.form2.n1.value; var e=document.form2.a1.value; var f=document.form2.r1.value; var g=document.form2.pin1.value; var h=document.form2.phno1.value; var i=document.form2.u1.value; var j=document.form2.email1.value; if(a!=""y"") { alert(""Please accept the terms and conditions before registering.""); return false; } else if(d=="""") { alert(""Name required.""); return false; } else if(e=="""") { alert(""Age required.""); return false; } else if(e<18) { alert(""You have to be atleast 18 to register.""); return false; } else if(f="""") { alert(""Gender required.""); return false; } else if(g=="""" || isNan(g)) { alert(""Valid pincode required.""); return false; } else if(h==""""|| isNan(h)) { alert(""Valid phone number required.""); return false; } else if(i=="""") { alert(""Username required.""); return false; } else if(j=="""") { alert(""Email required.""); return false; } else if(b=="""" || c=="""") { alert(""Password required.""); return false; } else if(b!=c) { alert(""Please make sure the passwords are identical.""); return false; } return true; } </script><div id=""apDiv3""><input name=""reg1"" type=""submit"" id=""login-submit"" value=""Register"" onclick=""return valid()""/></div> <?php if(isset($_POST['reg1'])) { $name=$_POST['n1']; $age=$_POST['a1']; $gen=$_POST['r1']; $phno=$_POST['phno1']; $email=$_POST['email1']; $pin=$_POST['pin1']; $user=$_POST['u1']; $pas=$_POST['pass']; $pas1=$_POST['pass1']; $i=$_POST['i1']; $connection=mysqli_connect(""localhost"",""root"",""""); if (!$connection) { die(""Database connection failed: "" . mysqli_error($connection)); } $db_select = mysqli_select_db($connection, ""vinay""); if (!$db_select) { die(""Database selection failed: "" . mysqli_error($db_select)); } $q=""insert into reg values('0','$name','$age','$gen','$phno','$email','$pin','$user','$pas')""; mysqli_query($q) or die(mysqli_error($q)); if(mysqli_affected_rows()>0) { header(""location:index.php""); } } ?>"
"338","bad","<script language=""javascript""> function valid() { var a=document.form2.i1.value; var b=document.form2.pas.value; var c=document.form2.pas1.value; var d=document.form2.n1.value; var e=document.form2.a1.value; var f=document.form2.r1.value; var g=document.form2.pin1.value; var h=document.form2.phno1.value; var i=document.form2.u1.value; var j=document.form2.email1.value; if(a!=""y"") { alert(""Please accept the terms and conditions before registering.""); return false; } else if(d=="""") { alert(""Name required.""); return false; } else if(e=="""") { alert(""Age required.""); return false; } else if(e<18) { alert(""You have to be atleast 18 to register.""); return false; } else if(f="""") { alert(""Gender required.""); return false; } else if(g=="""" || isNan(g)) { alert(""Valid pincode required.""); return false; } else if(h==""""|| isNan(h)) { alert(""Valid phone number required.""); return false; } else if(i=="""") { alert(""Username required.""); return false; } else if(j=="""") { alert(""Email required.""); return false; } else if(b=="""" || c=="""") { alert(""Password required.""); return false; } else if(b!=c) { alert(""Please make sure the passwords are identical.""); return false; } return true; } </script><div id=""apDiv3""><input name=""reg1"" type=""submit"" id=""login-submit"" value=""Register"" onclick=""return valid()""/></div> <?php if(isset($_POST['reg1'])) { $name=$_POST['n1']; $age=$_POST['a1']; $gen=$_POST['r1']; $phno=$_POST['phno1']; $email=$_POST['email1']; $pin=$_POST['pin1']; $user=$_POST['u1']; $pas=$_POST['pass']; $pas1=$_POST['pass1']; $i=$_POST['i1']; $connection=mysqli_connect(""localhost"",""root"",""""); if (!$connection) { die(""Database connection failed: "" . mysqli_error($connection)); } $db_select = mysqli_select_db($connection, ""vinay""); if (!$db_select) { die(""Database selection failed: "" . mysqli_error($db_select)); } $q=""insert into reg values('0','$name','$age','$gen','$phno','$email','$pin','$user','$pas')""; mysqli_query($q) or die(mysqli_error($q)); if(mysqli_affected_rows()>0) { header(""location:index.php""); } } ?>"
"339","bad","<?php if(isset($_POST[""submit""])){ if(!empty($_POST['user']) && !empty($_POST['pass'])) { $user=$_POST['user']; $pass=$_POST['pass']; $con=mysql_connect('127.0.0.1:8889','root','root') or die(mysql_error()); mysql_select_db('user_registration') or die(""cannot select DB""); $query=mysql_query(""SELECT * FROM login WHERE username='"".$user.""' AND password='"".$pass.""'""); $numrows=mysql_num_rows($query); if($numrows!=0) { while($row=mysql_fetch_assoc($query)) { $dbusername=$row['username']; $dbpassword=$row['password']; } if($user == $dbusername && $pass == $dbpassword) { session_start(); $_SESSION['sess_user']=$user; header(""Location: member.php""); } } else { echo ""Invalid username or password!""; } } else { echo ""All fields are required!""; } } ?> <form action="""" method=""POST""> Username: <input type=""text"" name=""user""><br /> Password: <input type=""password"" name=""pass""><br /> <input type=""submit"" value=""Login"" name=""submit"" /> </form>"
"340","bad","<?php if(isset($_POST[""submit""])){ if(!empty($_POST['user']) && !empty($_POST['pass'])) { $user=$_POST['user']; $pass=$_POST['pass']; $con=mysql_connect('127.0.0.1:8889','root','root') or die(mysql_error()); mysql_select_db('user_registration') or die(""cannot select DB""); $query=mysql_query(""SELECT * FROM login WHERE username='"".$user.""' AND password='"".$pass.""'""); $numrows=mysql_num_rows($query); if($numrows!=0) { while($row=mysql_fetch_assoc($query)) { $dbusername=$row['username']; $dbpassword=$row['password']; } if($user == $dbusername && $pass == $dbpassword) { session_start(); $_SESSION['sess_user']=$user; header(""Location: member.php""); } } else { echo ""Invalid username or password!""; } } else { echo ""All fields are required!""; } } ?> <form action="""" method=""POST""> Username: <input type=""text"" name=""user""><br /> Password: <input type=""password"" name=""pass""><br /> <input type=""submit"" value=""Login"" name=""submit"" /> </form>"
"341","bad","<?php if(isset($_POST[""submit""])){ if(!empty($_POST['user']) && !empty($_POST['pass'])) { $user=$_POST['user']; $pass=$_POST['pass']; $con=mysql_connect('127.0.0.1:8889','root','root') or die(mysql_error()); mysql_select_db('user_registration') or die(""cannot select DB""); $query=mysql_query(""SELECT * FROM login WHERE username='"".$user.""' AND password='"".$pass.""'""); $numrows=mysql_num_rows($query); if($numrows!=0) { while($row=mysql_fetch_assoc($query)) { $dbusername=$row['username']; $dbpassword=$row['password']; } if($user == $dbusername && $pass == $dbpassword) { session_start(); $_SESSION['sess_user']=$user; header(""Location: member.php""); } } else { echo ""Invalid username or password!""; } } else { echo ""All fields are required!""; } } ?> <form action="""" method=""POST""> Username: <input type=""text"" name=""user""><br /> Password: <input type=""password"" name=""pass""><br /> <input type=""submit"" value=""Login"" name=""submit"" /> </form>"
"342","bad","<!doctype html> <html> <?php include(""layout/header.php""); include(""layout/layout.html""); /*content BEGIN*/ if (!empty($_SERVER['QUERY_STRING'])) { $page = $_SERVER['QUERY_STRING']; if(substr($page, -1) == '/') { $page = substr($page, 0, -1); } /*$page = basename($page);*/ if (!file_exists(""page/$page.php"")){ include(""layout/404.html""); } else{ include(""page/$page.php""); } } else { include(""page/home.php""); } /*content END*/ include(""layout/footer.html""); ?> </html>RewriteRule ^(.*)$ index.php?/$1 [L]<div class=""text""> <?php session_start(); if (!isset($_SESSION['login'])){ header(""Location: /admin/login""); } if(isset($_POST['submit']) && ($_POST['submit'])==""Post""){ if (!isset($_POST[""title""]) || (trim($_POST[""title""])=="""")){ echo ""Insert a title.""; } elseif(!isset($_POST[""post""]) || (trim($_POST[""post""])=="""")){ echo ""You forgot the post""; } elseif(!isset($_POST[""author""]) || (trim($_POST[""author""])=="""")){ echo ""Write your name""; } else{ $postTitle = $_POST[""title""]; $post = $_POST[""post""]; $postAuthor = $_POST[""author""]; include ""mysql.php""; $sql = new mysql(); $sql->connect(); $sql->insert(""post"",array($postTitle, $post, $postAuthor),""title,post,author""); echo ""Great Success!""; $sql->disc(); } } else{ ?> <form action=""<?php $_SERVER[""PHP_SELF""];?>"" method=""post""> <h2>New Post:</h2> Title: <br /> <input name=""title"" type=""text"" size=""64"" /> <br /> Text: <br /> <textarea name=""post"" cols=""80"" rows=""20""></textarea> <br /> Author: <br /> <input name=""author"" type=""text"" size=""32"" /> <br /> <input name=""submit"" type=""submit"" value=""Post"" /> </form> <?php } ?> </div><div class=""text""> <?php session_start(); if(isset($_SESSION['login'])){ header(""Location: /admin/panel""); } if(isset($_POST[""submit""]) && (trim($_POST[""submit""])==""Login"")){ if (!isset($_POST[""password""]) || (trim($_POST[""password""])=="""")){ echo ""Insert password""; } elseif (!isset($_POST[""username""]) || (trim($_POST[""username""])=="""")){ echo ""Insert your username""; } $username = trim(filter_var($_POST['username'], FILTER_SANITIZE_STRING)); $password = trim(filter_var($_POST['password'], FILTER_SANITIZE_STRING)); $password = sha1($password); include ""mysql.php""; $sql = new mysql(); $sql->connect(); $loginlist = $sql->query(""SELECT user_id FROM users WHERE username = '$username' AND password = '$password'""); if(mysql_num_rows($loginlist)==0){ echo ""Username/password wrong""; } else{ $userdata = $sql->extract($loginlist); $_SESSION[""login""] = $userdata->user_id; $sql->disc(); header(""Location: /admin/panel""); } } else{ ?> <h2>Admin panel login</h2> <form action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""post""> Username: <br> <input name=""username"" type=""text"" size=""16""> <br> Password: <br> <input name=""password"" type=""password"" size=""64""> <br> <input name=""submit"" type=""submit"" value=""Login""> <br> </form> <?php } ?> </div>""POST /index.php HTTP/1.1"" 200 2906"
"343","bad","<!doctype html> <html> <?php include(""layout/header.php""); include(""layout/layout.html""); /*content BEGIN*/ if (!empty($_SERVER['QUERY_STRING'])) { $page = $_SERVER['QUERY_STRING']; if(substr($page, -1) == '/') { $page = substr($page, 0, -1); } /*$page = basename($page);*/ if (!file_exists(""page/$page.php"")){ include(""layout/404.html""); } else{ include(""page/$page.php""); } } else { include(""page/home.php""); } /*content END*/ include(""layout/footer.html""); ?> </html>RewriteRule ^(.*)$ index.php?/$1 [L]<div class=""text""> <?php session_start(); if (!isset($_SESSION['login'])){ header(""Location: /admin/login""); } if(isset($_POST['submit']) && ($_POST['submit'])==""Post""){ if (!isset($_POST[""title""]) || (trim($_POST[""title""])=="""")){ echo ""Insert a title.""; } elseif(!isset($_POST[""post""]) || (trim($_POST[""post""])=="""")){ echo ""You forgot the post""; } elseif(!isset($_POST[""author""]) || (trim($_POST[""author""])=="""")){ echo ""Write your name""; } else{ $postTitle = $_POST[""title""]; $post = $_POST[""post""]; $postAuthor = $_POST[""author""]; include ""mysql.php""; $sql = new mysql(); $sql->connect(); $sql->insert(""post"",array($postTitle, $post, $postAuthor),""title,post,author""); echo ""Great Success!""; $sql->disc(); } } else{ ?> <form action=""<?php $_SERVER[""PHP_SELF""];?>"" method=""post""> <h2>New Post:</h2> Title: <br /> <input name=""title"" type=""text"" size=""64"" /> <br /> Text: <br /> <textarea name=""post"" cols=""80"" rows=""20""></textarea> <br /> Author: <br /> <input name=""author"" type=""text"" size=""32"" /> <br /> <input name=""submit"" type=""submit"" value=""Post"" /> </form> <?php } ?> </div><div class=""text""> <?php session_start(); if(isset($_SESSION['login'])){ header(""Location: /admin/panel""); } if(isset($_POST[""submit""]) && (trim($_POST[""submit""])==""Login"")){ if (!isset($_POST[""password""]) || (trim($_POST[""password""])=="""")){ echo ""Insert password""; } elseif (!isset($_POST[""username""]) || (trim($_POST[""username""])=="""")){ echo ""Insert your username""; } $username = trim(filter_var($_POST['username'], FILTER_SANITIZE_STRING)); $password = trim(filter_var($_POST['password'], FILTER_SANITIZE_STRING)); $password = sha1($password); include ""mysql.php""; $sql = new mysql(); $sql->connect(); $loginlist = $sql->query(""SELECT user_id FROM users WHERE username = '$username' AND password = '$password'""); if(mysql_num_rows($loginlist)==0){ echo ""Username/password wrong""; } else{ $userdata = $sql->extract($loginlist); $_SESSION[""login""] = $userdata->user_id; $sql->disc(); header(""Location: /admin/panel""); } } else{ ?> <h2>Admin panel login</h2> <form action=""<?php echo $_SERVER['PHP_SELF']; ?>"" method=""post""> Username: <br> <input name=""username"" type=""text"" size=""16""> <br> Password: <br> <input name=""password"" type=""password"" size=""64""> <br> <input name=""submit"" type=""submit"" value=""Login""> <br> </form> <?php } ?> </div>""POST /index.php HTTP/1.1"" 200 2906"
"344","good","function showWidth($) { // get the value of my 3 html select var width1 = document.getElementById('width1').value; var width2 = document.getElementById('width2').value; var width3 = document.getElementById('width3').value; if (width1!=""aucun"" && width2!=""aucun"" && width3!=""aucun"") { $.ajax({ ObjectName.ajaxurl, data: { action:'script_handle', width01 : width1, width02 : width2, width03 : width3 }, success:function(data) { // This outputs the result of the ajax request document.getElementById(""result"").innerHTML=console.log(data); }, error: function(errorThrown){ console.log(errorThrown); } }); } }function widthcalculate(){ if( isset($_REQUEST) ) { $width1 = $_REQUEST['width01']; $width2 = $_REQUEST['width02']; $width3 = $_REQUEST['width03']; // Let's take the data that was sent and do something with it global $wpdb; $where = ""'"".$width1.""' AND camber = '"".$width2.""' AND handrim = '"".$width3.""'""; $sql = $wpdb->get_results( ""SELECT result FROM mc_widthCalculatorResult WHERE wheel = "".$where."""" ); foreach ($sql as $element) { echo $element->result; } echo $result; //print_r($_REQUEST); } die(); } add_action( 'wp_ajax_script_handle', 'widthcalculate' ); // Hook for the WordPress Dashboard. add_action( 'wp_ajax_script_handle_nopriv', 'widthcalculate' ); // Hook for the user facing side of the site. function register_scripts() { wp_register_script( 'script-handle', $path_to_javascript_file, $dependencies, 'version', $in_footer = true ); wp_enqueue_script( 'script-handle' ); wp_localize_script( 'script-handle', 'ObjectName', array( 'ajaxurl' => admin_url( '/wp-admin/admin-ajax.php' ), 'parameter' => $whatever_you_want_to_pass ) ); } add_action( 'enqueue_scripts', 'register_scripts' );"
"345","bad","function showWidth($) { // get the value of my 3 html select var width1 = document.getElementById('width1').value; var width2 = document.getElementById('width2').value; var width3 = document.getElementById('width3').value; if (width1!=""aucun"" && width2!=""aucun"" && width3!=""aucun"") { $.ajax({ ObjectName.ajaxurl, data: { action:'script_handle', width01 : width1, width02 : width2, width03 : width3 }, success:function(data) { // This outputs the result of the ajax request document.getElementById(""result"").innerHTML=console.log(data); }, error: function(errorThrown){ console.log(errorThrown); } }); } }function widthcalculate(){ if( isset($_REQUEST) ) { $width1 = $_REQUEST['width01']; $width2 = $_REQUEST['width02']; $width3 = $_REQUEST['width03']; // Let's take the data that was sent and do something with it global $wpdb; $where = ""'"".$width1.""' AND camber = '"".$width2.""' AND handrim = '"".$width3.""'""; $sql = $wpdb->get_results( ""SELECT result FROM mc_widthCalculatorResult WHERE wheel = "".$where."""" ); foreach ($sql as $element) { echo $element->result; } echo $result; //print_r($_REQUEST); } die(); } add_action( 'wp_ajax_script_handle', 'widthcalculate' ); // Hook for the WordPress Dashboard. add_action( 'wp_ajax_script_handle_nopriv', 'widthcalculate' ); // Hook for the user facing side of the site. function register_scripts() { wp_register_script( 'script-handle', $path_to_javascript_file, $dependencies, 'version', $in_footer = true ); wp_enqueue_script( 'script-handle' ); wp_localize_script( 'script-handle', 'ObjectName', array( 'ajaxurl' => admin_url( '/wp-admin/admin-ajax.php' ), 'parameter' => $whatever_you_want_to_pass ) ); } add_action( 'enqueue_scripts', 'register_scripts' );"
"346","bad","function showWidth($) { // get the value of my 3 html select var width1 = document.getElementById('width1').value; var width2 = document.getElementById('width2').value; var width3 = document.getElementById('width3').value; if (width1!=""aucun"" && width2!=""aucun"" && width3!=""aucun"") { $.ajax({ ObjectName.ajaxurl, data: { action:'script_handle', width01 : width1, width02 : width2, width03 : width3 }, success:function(data) { // This outputs the result of the ajax request document.getElementById(""result"").innerHTML=console.log(data); }, error: function(errorThrown){ console.log(errorThrown); } }); } }function widthcalculate(){ if( isset($_REQUEST) ) { $width1 = $_REQUEST['width01']; $width2 = $_REQUEST['width02']; $width3 = $_REQUEST['width03']; // Let's take the data that was sent and do something with it global $wpdb; $where = ""'"".$width1.""' AND camber = '"".$width2.""' AND handrim = '"".$width3.""'""; $sql = $wpdb->get_results( ""SELECT result FROM mc_widthCalculatorResult WHERE wheel = "".$where."""" ); foreach ($sql as $element) { echo $element->result; } echo $result; //print_r($_REQUEST); } die(); } add_action( 'wp_ajax_script_handle', 'widthcalculate' ); // Hook for the WordPress Dashboard. add_action( 'wp_ajax_script_handle_nopriv', 'widthcalculate' ); // Hook for the user facing side of the site. function register_scripts() { wp_register_script( 'script-handle', $path_to_javascript_file, $dependencies, 'version', $in_footer = true ); wp_enqueue_script( 'script-handle' ); wp_localize_script( 'script-handle', 'ObjectName', array( 'ajaxurl' => admin_url( '/wp-admin/admin-ajax.php' ), 'parameter' => $whatever_you_want_to_pass ) ); } add_action( 'enqueue_scripts', 'register_scripts' );"
"347","bad","try { $stmt = $pdo->prepare(""UPDATE $page SET $section = :new_content WHERE $section = '$old_content'""); $stmt->execute(array( 'new_content' => $new_content )); $result = $stmt->fetchAll(); echo ""Database updated!""; } catch(PDOException $e) { echo 'ERROR UPDATING CONTENT: ' . $e->getMessage(); }"
"348","bad","try { $stmt = $pdo->prepare(""UPDATE $page SET $section = :new_content WHERE $section = '$old_content'""); $stmt->execute(array( 'new_content' => $new_content )); $result = $stmt->fetchAll(); echo ""Database updated!""; } catch(PDOException $e) { echo 'ERROR UPDATING CONTENT: ' . $e->getMessage(); }"
"349","bad","<form action=""process.php"" method=""post"" name=""form1"" id=""form1"" class=""register"" enctype=""multipart/form-data""> <fieldset class=""row1""> <legend>SECTION 1: MEMBER CONTACT DETAILS </legend> <p> <label>Title * </label> <select class=""title"" name=""title""> <option> </option> <option>Mr. </option> <option>Mrs. </option> <option>Miss. </option> <option>Ms. </option> </select> <label> </label> <input type=""hidden"" name=""date_of_joining"" value=""<?php echo date(""d.m.y"");?>""/> </p> <p> <label>First Name * </label> <input type=""text"" name=""first_name""/> <label> </label> <input type=""hidden"" name=""vendor_code"" value=""""/> </p> <p> <label>Last Name * </label> <input type=""text"" name=""last_name""/> <label>phone 1 </label> <input type=""text"" name=""phone1""/> </p> <p> <label>Date of Birth </label> <input placeholder=""mm-dd-yy"" type=""text"" name=""dob""/> <label>phone 2 </label> <input type=""text"" name=""phone2""/> </p> <p> <label>Address * </label> <input type=""text"" class=""long"" name=""address""/> <label>Mobile 1 * </label> <input type=""text"" name=""mobile1""/> </p> <p> <label>State/City * </label> <input type=""text"" class=""long"" name=""city""/> <label>Mobile 2 </label> <input type=""text"" name=""mobile2""/> </p> <p> <label>Post Code * </label> <input type=""text"" name=""postal_code""/> <label>Email 1 * </label> <input type=""text"" class=""long"" name=""email1""/> </p> <p> <label>Country * </label> <input type=""text"" name=""country""/> <label>Email 2 </label> <input type=""text"" class=""long"" name=""email2""/> </p> <p> </fieldset> <fieldset class=""row1""> <legend>SECTION 2: MEMBER ADDITIONAL DETAILS </legend> <p> <label>Company Name * </label> <input type=""text"" name=""company_name""/> <label>Company Details </label> <input placeholder=""Please mention"" type=""text"" name=""company_details""/> </p> <p> <label>Company Address * </label> <input type=""text"" class=""long"" name=""company_address""/> <label>Area of Product * </label> <input placeholder=""you deal into e.g. Womens Wear"" type=""text"" class=""long"" name=""area_of_products""/> </p> <p> <label>Website </label> <input value=""http://www."" type=""text"" name=""website""/> <label>Nationality </label> <input type=""text"" class=""long"" name=""nationality""/> </p> <p> <label>Country of Res. </label> <input type=""text"" name=""country_of_res""/> <label>Member Type </label> <input type=""text"" class=""long"" name=""member_type""/> </p> <p> <label>Identity Proof </label> <select name=""id_proof""> <option> </option> <option>Voter ID <option>Passport <option>Adhaar Card </option> </select> <input name=""file_idproof"" type=""file""/> </p> </fieldset> <fieldset class=""row4""> <p class=""agreement""> <input type=""checkbox"" value="""" name=""policies""/> <label>* I accept the <a href=""required/t&c.htm?KeepThis=true&TB_iframe=true&height=500&width=600"" class=""thickbox"" title=""Terms & Policies"">Terms and Policies</a></label> </p> </fieldset> <div><button name=""submit"" class=""button"">Register &raquo;</button></div> <input type=""hidden"" name=""MM_insert"" value=""form1"" /> </form><?php require_once('connections/formsqlconnection.php'); ?> <?php if (!function_exists(""GetSQLValueString"")) { function GetSQLValueString($theValue, $theType, $theDefinedValue = """", $theNotDefinedValue = """") { if (PHP_VERSION < 6) { $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue; } $theValue = function_exists(""mysql_real_escape_string"") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue); switch ($theType) { case ""text"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""long"": case ""int"": $theValue = ($theValue != """") ? intval($theValue) : ""NULL""; break; case ""double"": $theValue = ($theValue != """") ? doubleval($theValue) : ""NULL""; break; case ""date"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""defined"": $theValue = ($theValue != """") ? $theDefinedValue : $theNotDefinedValue; break; } return $theValue; } } $editFormAction = $_SERVER['PHP_SELF']; if (isset($_SERVER['QUERY_STRING'])) { $editFormAction .= ""?"" . htmlentities($_SERVER['QUERY_STRING']); } $w1=$_POST['city'][0]; $w2=$_POST['first_name'][0]; $w3=$_POST['last_name'][0]; $date = date(""dmy""); $vendor_code = ""VH"" + $w1 + $w2 + $w3 + $date; if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""form1"")) { $insertSQL = sprintf(""INSERT INTO vendor_details (vendor_code, date_of_joining, title, first_name, last_name, dob, address, city, postal_code, country, phone1, phone2, mobile1, mobile2, email1, email2, company_name, company_details, company_address, area_of_product, website, nationality, country_of_res, member_type, id_proof, file_idproof) VALUES ($vendor_code, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)"", GetSQLValueString($_POST['vendor_code'], ""text""), GetSQLValueString($_POST['date_of_joining'], ""text""), GetSQLValueString($_POST['title'], ""text""), GetSQLValueString($_POST['first_name'], ""text""), GetSQLValueString($_POST['last_name'], ""text""), GetSQLValueString($_POST['dob'], ""text""), GetSQLValueString($_POST['address'], ""text""), GetSQLValueString($_POST['city'], ""text""), GetSQLValueString($_POST['postal_code'], ""text""), GetSQLValueString($_POST['country'], ""text""), GetSQLValueString($_POST['phone1'], ""text""), GetSQLValueString($_POST['phone2'], ""text""), GetSQLValueString($_POST['mobile1'], ""text""), GetSQLValueString($_POST['mobile2'], ""text""), GetSQLValueString($_POST['email1'], ""text""), GetSQLValueString($_POST['email2'], ""text""), GetSQLValueString($_POST['company_name'], ""text""), GetSQLValueString($_POST['company_details'], ""text""), GetSQLValueString($_POST['company_address'], ""text""), GetSQLValueString($_POST['area_of_product'], ""text""), GetSQLValueString($_POST['website'], ""text""), GetSQLValueString($_POST['nationality'], ""text""), GetSQLValueString($_POST['country_of_res'], ""text""), GetSQLValueString($_POST['member_type'], ""text""), GetSQLValueString($_POST['id_proof'], ""text""), GetSQLValueString($_FILES['file_idproof'], ""text"")); mysql_select_db($database_formsqlconnection, $formsqlconnection); $Result1 = mysql_query($insertSQL, $formsqlconnection) or die(mysql_error()); $insertGoTo = ""confirm.php""; if (isset($_SERVER['QUERY_STRING'])) { $insertGoTo .= (strpos($insertGoTo, '?')) ? ""&"" : ""?""; $insertGoTo .= $_SERVER['QUERY_STRING']; } header(sprintf(""Location: %s"", $insertGoTo)); } ?>"
"350","bad","<form action=""process.php"" method=""post"" name=""form1"" id=""form1"" class=""register"" enctype=""multipart/form-data""> <fieldset class=""row1""> <legend>SECTION 1: MEMBER CONTACT DETAILS </legend> <p> <label>Title * </label> <select class=""title"" name=""title""> <option> </option> <option>Mr. </option> <option>Mrs. </option> <option>Miss. </option> <option>Ms. </option> </select> <label> </label> <input type=""hidden"" name=""date_of_joining"" value=""<?php echo date(""d.m.y"");?>""/> </p> <p> <label>First Name * </label> <input type=""text"" name=""first_name""/> <label> </label> <input type=""hidden"" name=""vendor_code"" value=""""/> </p> <p> <label>Last Name * </label> <input type=""text"" name=""last_name""/> <label>phone 1 </label> <input type=""text"" name=""phone1""/> </p> <p> <label>Date of Birth </label> <input placeholder=""mm-dd-yy"" type=""text"" name=""dob""/> <label>phone 2 </label> <input type=""text"" name=""phone2""/> </p> <p> <label>Address * </label> <input type=""text"" class=""long"" name=""address""/> <label>Mobile 1 * </label> <input type=""text"" name=""mobile1""/> </p> <p> <label>State/City * </label> <input type=""text"" class=""long"" name=""city""/> <label>Mobile 2 </label> <input type=""text"" name=""mobile2""/> </p> <p> <label>Post Code * </label> <input type=""text"" name=""postal_code""/> <label>Email 1 * </label> <input type=""text"" class=""long"" name=""email1""/> </p> <p> <label>Country * </label> <input type=""text"" name=""country""/> <label>Email 2 </label> <input type=""text"" class=""long"" name=""email2""/> </p> <p> </fieldset> <fieldset class=""row1""> <legend>SECTION 2: MEMBER ADDITIONAL DETAILS </legend> <p> <label>Company Name * </label> <input type=""text"" name=""company_name""/> <label>Company Details </label> <input placeholder=""Please mention"" type=""text"" name=""company_details""/> </p> <p> <label>Company Address * </label> <input type=""text"" class=""long"" name=""company_address""/> <label>Area of Product * </label> <input placeholder=""you deal into e.g. Womens Wear"" type=""text"" class=""long"" name=""area_of_products""/> </p> <p> <label>Website </label> <input value=""http://www."" type=""text"" name=""website""/> <label>Nationality </label> <input type=""text"" class=""long"" name=""nationality""/> </p> <p> <label>Country of Res. </label> <input type=""text"" name=""country_of_res""/> <label>Member Type </label> <input type=""text"" class=""long"" name=""member_type""/> </p> <p> <label>Identity Proof </label> <select name=""id_proof""> <option> </option> <option>Voter ID <option>Passport <option>Adhaar Card </option> </select> <input name=""file_idproof"" type=""file""/> </p> </fieldset> <fieldset class=""row4""> <p class=""agreement""> <input type=""checkbox"" value="""" name=""policies""/> <label>* I accept the <a href=""required/t&c.htm?KeepThis=true&TB_iframe=true&height=500&width=600"" class=""thickbox"" title=""Terms & Policies"">Terms and Policies</a></label> </p> </fieldset> <div><button name=""submit"" class=""button"">Register &raquo;</button></div> <input type=""hidden"" name=""MM_insert"" value=""form1"" /> </form><?php require_once('connections/formsqlconnection.php'); ?> <?php if (!function_exists(""GetSQLValueString"")) { function GetSQLValueString($theValue, $theType, $theDefinedValue = """", $theNotDefinedValue = """") { if (PHP_VERSION < 6) { $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue; } $theValue = function_exists(""mysql_real_escape_string"") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue); switch ($theType) { case ""text"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""long"": case ""int"": $theValue = ($theValue != """") ? intval($theValue) : ""NULL""; break; case ""double"": $theValue = ($theValue != """") ? doubleval($theValue) : ""NULL""; break; case ""date"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""defined"": $theValue = ($theValue != """") ? $theDefinedValue : $theNotDefinedValue; break; } return $theValue; } } $editFormAction = $_SERVER['PHP_SELF']; if (isset($_SERVER['QUERY_STRING'])) { $editFormAction .= ""?"" . htmlentities($_SERVER['QUERY_STRING']); } $w1=$_POST['city'][0]; $w2=$_POST['first_name'][0]; $w3=$_POST['last_name'][0]; $date = date(""dmy""); $vendor_code = ""VH"" + $w1 + $w2 + $w3 + $date; if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""form1"")) { $insertSQL = sprintf(""INSERT INTO vendor_details (vendor_code, date_of_joining, title, first_name, last_name, dob, address, city, postal_code, country, phone1, phone2, mobile1, mobile2, email1, email2, company_name, company_details, company_address, area_of_product, website, nationality, country_of_res, member_type, id_proof, file_idproof) VALUES ($vendor_code, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)"", GetSQLValueString($_POST['vendor_code'], ""text""), GetSQLValueString($_POST['date_of_joining'], ""text""), GetSQLValueString($_POST['title'], ""text""), GetSQLValueString($_POST['first_name'], ""text""), GetSQLValueString($_POST['last_name'], ""text""), GetSQLValueString($_POST['dob'], ""text""), GetSQLValueString($_POST['address'], ""text""), GetSQLValueString($_POST['city'], ""text""), GetSQLValueString($_POST['postal_code'], ""text""), GetSQLValueString($_POST['country'], ""text""), GetSQLValueString($_POST['phone1'], ""text""), GetSQLValueString($_POST['phone2'], ""text""), GetSQLValueString($_POST['mobile1'], ""text""), GetSQLValueString($_POST['mobile2'], ""text""), GetSQLValueString($_POST['email1'], ""text""), GetSQLValueString($_POST['email2'], ""text""), GetSQLValueString($_POST['company_name'], ""text""), GetSQLValueString($_POST['company_details'], ""text""), GetSQLValueString($_POST['company_address'], ""text""), GetSQLValueString($_POST['area_of_product'], ""text""), GetSQLValueString($_POST['website'], ""text""), GetSQLValueString($_POST['nationality'], ""text""), GetSQLValueString($_POST['country_of_res'], ""text""), GetSQLValueString($_POST['member_type'], ""text""), GetSQLValueString($_POST['id_proof'], ""text""), GetSQLValueString($_FILES['file_idproof'], ""text"")); mysql_select_db($database_formsqlconnection, $formsqlconnection); $Result1 = mysql_query($insertSQL, $formsqlconnection) or die(mysql_error()); $insertGoTo = ""confirm.php""; if (isset($_SERVER['QUERY_STRING'])) { $insertGoTo .= (strpos($insertGoTo, '?')) ? ""&"" : ""?""; $insertGoTo .= $_SERVER['QUERY_STRING']; } header(sprintf(""Location: %s"", $insertGoTo)); } ?>"
"351","bad","<form action=""process.php"" method=""post"" name=""form1"" id=""form1"" class=""register"" enctype=""multipart/form-data""> <fieldset class=""row1""> <legend>SECTION 1: MEMBER CONTACT DETAILS </legend> <p> <label>Title * </label> <select class=""title"" name=""title""> <option> </option> <option>Mr. </option> <option>Mrs. </option> <option>Miss. </option> <option>Ms. </option> </select> <label> </label> <input type=""hidden"" name=""date_of_joining"" value=""<?php echo date(""d.m.y"");?>""/> </p> <p> <label>First Name * </label> <input type=""text"" name=""first_name""/> <label> </label> <input type=""hidden"" name=""vendor_code"" value=""""/> </p> <p> <label>Last Name * </label> <input type=""text"" name=""last_name""/> <label>phone 1 </label> <input type=""text"" name=""phone1""/> </p> <p> <label>Date of Birth </label> <input placeholder=""mm-dd-yy"" type=""text"" name=""dob""/> <label>phone 2 </label> <input type=""text"" name=""phone2""/> </p> <p> <label>Address * </label> <input type=""text"" class=""long"" name=""address""/> <label>Mobile 1 * </label> <input type=""text"" name=""mobile1""/> </p> <p> <label>State/City * </label> <input type=""text"" class=""long"" name=""city""/> <label>Mobile 2 </label> <input type=""text"" name=""mobile2""/> </p> <p> <label>Post Code * </label> <input type=""text"" name=""postal_code""/> <label>Email 1 * </label> <input type=""text"" class=""long"" name=""email1""/> </p> <p> <label>Country * </label> <input type=""text"" name=""country""/> <label>Email 2 </label> <input type=""text"" class=""long"" name=""email2""/> </p> <p> </fieldset> <fieldset class=""row1""> <legend>SECTION 2: MEMBER ADDITIONAL DETAILS </legend> <p> <label>Company Name * </label> <input type=""text"" name=""company_name""/> <label>Company Details </label> <input placeholder=""Please mention"" type=""text"" name=""company_details""/> </p> <p> <label>Company Address * </label> <input type=""text"" class=""long"" name=""company_address""/> <label>Area of Product * </label> <input placeholder=""you deal into e.g. Womens Wear"" type=""text"" class=""long"" name=""area_of_products""/> </p> <p> <label>Website </label> <input value=""http://www."" type=""text"" name=""website""/> <label>Nationality </label> <input type=""text"" class=""long"" name=""nationality""/> </p> <p> <label>Country of Res. </label> <input type=""text"" name=""country_of_res""/> <label>Member Type </label> <input type=""text"" class=""long"" name=""member_type""/> </p> <p> <label>Identity Proof </label> <select name=""id_proof""> <option> </option> <option>Voter ID <option>Passport <option>Adhaar Card </option> </select> <input name=""file_idproof"" type=""file""/> </p> </fieldset> <fieldset class=""row4""> <p class=""agreement""> <input type=""checkbox"" value="""" name=""policies""/> <label>* I accept the <a href=""required/t&c.htm?KeepThis=true&TB_iframe=true&height=500&width=600"" class=""thickbox"" title=""Terms & Policies"">Terms and Policies</a></label> </p> </fieldset> <div><button name=""submit"" class=""button"">Register &raquo;</button></div> <input type=""hidden"" name=""MM_insert"" value=""form1"" /> </form><?php require_once('connections/formsqlconnection.php'); ?> <?php if (!function_exists(""GetSQLValueString"")) { function GetSQLValueString($theValue, $theType, $theDefinedValue = """", $theNotDefinedValue = """") { if (PHP_VERSION < 6) { $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue; } $theValue = function_exists(""mysql_real_escape_string"") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue); switch ($theType) { case ""text"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""long"": case ""int"": $theValue = ($theValue != """") ? intval($theValue) : ""NULL""; break; case ""double"": $theValue = ($theValue != """") ? doubleval($theValue) : ""NULL""; break; case ""date"": $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL""; break; case ""defined"": $theValue = ($theValue != """") ? $theDefinedValue : $theNotDefinedValue; break; } return $theValue; } } $editFormAction = $_SERVER['PHP_SELF']; if (isset($_SERVER['QUERY_STRING'])) { $editFormAction .= ""?"" . htmlentities($_SERVER['QUERY_STRING']); } $w1=$_POST['city'][0]; $w2=$_POST['first_name'][0]; $w3=$_POST['last_name'][0]; $date = date(""dmy""); $vendor_code = ""VH"" + $w1 + $w2 + $w3 + $date; if ((isset($_POST[""MM_insert""])) && ($_POST[""MM_insert""] == ""form1"")) { $insertSQL = sprintf(""INSERT INTO vendor_details (vendor_code, date_of_joining, title, first_name, last_name, dob, address, city, postal_code, country, phone1, phone2, mobile1, mobile2, email1, email2, company_name, company_details, company_address, area_of_product, website, nationality, country_of_res, member_type, id_proof, file_idproof) VALUES ($vendor_code, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)"", GetSQLValueString($_POST['vendor_code'], ""text""), GetSQLValueString($_POST['date_of_joining'], ""text""), GetSQLValueString($_POST['title'], ""text""), GetSQLValueString($_POST['first_name'], ""text""), GetSQLValueString($_POST['last_name'], ""text""), GetSQLValueString($_POST['dob'], ""text""), GetSQLValueString($_POST['address'], ""text""), GetSQLValueString($_POST['city'], ""text""), GetSQLValueString($_POST['postal_code'], ""text""), GetSQLValueString($_POST['country'], ""text""), GetSQLValueString($_POST['phone1'], ""text""), GetSQLValueString($_POST['phone2'], ""text""), GetSQLValueString($_POST['mobile1'], ""text""), GetSQLValueString($_POST['mobile2'], ""text""), GetSQLValueString($_POST['email1'], ""text""), GetSQLValueString($_POST['email2'], ""text""), GetSQLValueString($_POST['company_name'], ""text""), GetSQLValueString($_POST['company_details'], ""text""), GetSQLValueString($_POST['company_address'], ""text""), GetSQLValueString($_POST['area_of_product'], ""text""), GetSQLValueString($_POST['website'], ""text""), GetSQLValueString($_POST['nationality'], ""text""), GetSQLValueString($_POST['country_of_res'], ""text""), GetSQLValueString($_POST['member_type'], ""text""), GetSQLValueString($_POST['id_proof'], ""text""), GetSQLValueString($_FILES['file_idproof'], ""text"")); mysql_select_db($database_formsqlconnection, $formsqlconnection); $Result1 = mysql_query($insertSQL, $formsqlconnection) or die(mysql_error()); $insertGoTo = ""confirm.php""; if (isset($_SERVER['QUERY_STRING'])) { $insertGoTo .= (strpos($insertGoTo, '?')) ? ""&"" : ""?""; $insertGoTo .= $_SERVER['QUERY_STRING']; } header(sprintf(""Location: %s"", $insertGoTo)); } ?>"
"352","bad","<?php mysql_connect(""localhost"", ""root"", ""root"") or die(""Error connecting to database: "".mysql_error()); mysql_select_db(""stratacache"") or die(mysql_error()); if(isset($_GET['edit'])) { $id = $_GET['edit']; $result = mysql_query(""SELECT * FROM Test_Test_Wall_Sites""); $row = mysql_fetch_array($result); } if(isset($_POST['newName']) ) { $newName = $_POST['newName']; $id = $_POST['id']; mysql_query(""UPDATE Persons SET 'COL 1'='$newName' WHERE ID='$id'"") or die(""Could not Update"".mysql_error()); echo ""<meta http-equiv='refresh' content='0;url=index.php'>""; } ?> <form action=""edit_in.php"" method=""POST""> Name: <input type = ""text"" name=""newName""> <input type=""hidden"" name=""id"" value=""<?php echo $row[0]; ?>""> <input type=""submit"" value=""CHECK IN""> </form>"
"353","bad","<?php mysql_connect(""localhost"", ""root"", ""root"") or die(""Error connecting to database: "".mysql_error()); mysql_select_db(""stratacache"") or die(mysql_error()); if(isset($_GET['edit'])) { $id = $_GET['edit']; $result = mysql_query(""SELECT * FROM Test_Test_Wall_Sites""); $row = mysql_fetch_array($result); } if(isset($_POST['newName']) ) { $newName = $_POST['newName']; $id = $_POST['id']; mysql_query(""UPDATE Persons SET 'COL 1'='$newName' WHERE ID='$id'"") or die(""Could not Update"".mysql_error()); echo ""<meta http-equiv='refresh' content='0;url=index.php'>""; } ?> <form action=""edit_in.php"" method=""POST""> Name: <input type = ""text"" name=""newName""> <input type=""hidden"" name=""id"" value=""<?php echo $row[0]; ?>""> <input type=""submit"" value=""CHECK IN""> </form>"
"354","bad","<?php mysql_connect(""localhost"", ""root"", """"); mysql_select_db(""byp""); if(isset($_POST['submit'])){ $region=$_POST['region']; $country=$_POST['country']; $duration=$_POST['duration']; //define the index for the All option $optionAllValue = 0; //add here the option index value used for the 'All' option //define the where clause for the query //in order to avoid many conditions verifications, we start it as 1=1 $whereClause = ""1=1""; //now we check if the option selected for each field is not the value defined for the option 'All' //this is just an example, and the best would be to create a function to avoid the replication of code if($region != $optionAllValue) { $whereClause = $whereClause."" and region='$region'""; } if($country != $optionAllValue) { $whereClause = $whereClause."" and country='$country'""; } if($duration != $optionAllValue) { $whereClause = $whereClause."" and duration='$duration'""; } $query = ""select * from byp_tour where "".$whereClause; //original query select * from byp_tour where region='$region' and country='$country' and duration='$duration'"" $tour = mysql_query($query); $tourNum = mysql_num_rows($tour); if($tourNum >0){ while($result=mysql_fetch_array($tour)){ $tour_name = $result['tour_name']; $tour_detail = $result['tour_detail']; echo ""Tour Name: $tour_name""; echo ""<br />""; echo ""Tour Detail: $tour_detail""; echo ""<br />""; echo ""<br />""; echo ""<br />""; } } else{ echo ""No Tour Found""; echo ""<br />""; echo ""<br />""; } } ?> <!DOCTYPE html> <html> <head> <title>BYP Test</title> </head> <body> <form action=""searchtest1.php"" method=""post"" target=""_blank""> <div> <label>Region</label> <select id=""region"" name=""region""> <option value=""0"">All</option> <option value=""1"">South East Asia</option> <option value=""2"">Africa</option> <option value=""3"">Europe</option> <option value=""4"">America</option> <option value=""5"">Australia</option> </select> </div> <div> <label>Country</label> <select id=""country"" name=""country""> <option value=""0"">All</option> <option value=""1"">Cambodia</option> <option value=""2"">Thailand</option> <option value=""3"">Vietnam</option> <option value=""4"">Myanmar</option> <option value=""5"">Laos</option> <option value=""6"">Ethiopia</option> <option value=""7"">France</option> <option value=""8"">New York City</option> <option value=""9"">Melbourne</option> </select> </div> <div> <label>Duration</label> <select id=""duration"" name=""duration""> <option value=""0"">All</option> <option value=""1"">5 Days</option> <option value=""2"">10 Days</option> </select> </div> <input type=""submit"" name=""submit"" value=""submit"" /> </form> </body>"
"355","bad","<?php mysql_connect(""localhost"", ""root"", """"); mysql_select_db(""byp""); if(isset($_POST['submit'])){ $region=$_POST['region']; $country=$_POST['country']; $duration=$_POST['duration']; //define the index for the All option $optionAllValue = 0; //add here the option index value used for the 'All' option //define the where clause for the query //in order to avoid many conditions verifications, we start it as 1=1 $whereClause = ""1=1""; //now we check if the option selected for each field is not the value defined for the option 'All' //this is just an example, and the best would be to create a function to avoid the replication of code if($region != $optionAllValue) { $whereClause = $whereClause."" and region='$region'""; } if($country != $optionAllValue) { $whereClause = $whereClause."" and country='$country'""; } if($duration != $optionAllValue) { $whereClause = $whereClause."" and duration='$duration'""; } $query = ""select * from byp_tour where "".$whereClause; //original query select * from byp_tour where region='$region' and country='$country' and duration='$duration'"" $tour = mysql_query($query); $tourNum = mysql_num_rows($tour); if($tourNum >0){ while($result=mysql_fetch_array($tour)){ $tour_name = $result['tour_name']; $tour_detail = $result['tour_detail']; echo ""Tour Name: $tour_name""; echo ""<br />""; echo ""Tour Detail: $tour_detail""; echo ""<br />""; echo ""<br />""; echo ""<br />""; } } else{ echo ""No Tour Found""; echo ""<br />""; echo ""<br />""; } } ?> <!DOCTYPE html> <html> <head> <title>BYP Test</title> </head> <body> <form action=""searchtest1.php"" method=""post"" target=""_blank""> <div> <label>Region</label> <select id=""region"" name=""region""> <option value=""0"">All</option> <option value=""1"">South East Asia</option> <option value=""2"">Africa</option> <option value=""3"">Europe</option> <option value=""4"">America</option> <option value=""5"">Australia</option> </select> </div> <div> <label>Country</label> <select id=""country"" name=""country""> <option value=""0"">All</option> <option value=""1"">Cambodia</option> <option value=""2"">Thailand</option> <option value=""3"">Vietnam</option> <option value=""4"">Myanmar</option> <option value=""5"">Laos</option> <option value=""6"">Ethiopia</option> <option value=""7"">France</option> <option value=""8"">New York City</option> <option value=""9"">Melbourne</option> </select> </div> <div> <label>Duration</label> <select id=""duration"" name=""duration""> <option value=""0"">All</option> <option value=""1"">5 Days</option> <option value=""2"">10 Days</option> </select> </div> <input type=""submit"" name=""submit"" value=""submit"" /> </form> </body>"
"356","bad","<?php mysql_connect(""localhost"", ""root"", """"); mysql_select_db(""byp""); if(isset($_POST['submit'])){ $region=$_POST['region']; $country=$_POST['country']; $duration=$_POST['duration']; //define the index for the All option $optionAllValue = 0; //add here the option index value used for the 'All' option //define the where clause for the query //in order to avoid many conditions verifications, we start it as 1=1 $whereClause = ""1=1""; //now we check if the option selected for each field is not the value defined for the option 'All' //this is just an example, and the best would be to create a function to avoid the replication of code if($region != $optionAllValue) { $whereClause = $whereClause."" and region='$region'""; } if($country != $optionAllValue) { $whereClause = $whereClause."" and country='$country'""; } if($duration != $optionAllValue) { $whereClause = $whereClause."" and duration='$duration'""; } $query = ""select * from byp_tour where "".$whereClause; //original query select * from byp_tour where region='$region' and country='$country' and duration='$duration'"" $tour = mysql_query($query); $tourNum = mysql_num_rows($tour); if($tourNum >0){ while($result=mysql_fetch_array($tour)){ $tour_name = $result['tour_name']; $tour_detail = $result['tour_detail']; echo ""Tour Name: $tour_name""; echo ""<br />""; echo ""Tour Detail: $tour_detail""; echo ""<br />""; echo ""<br />""; echo ""<br />""; } } else{ echo ""No Tour Found""; echo ""<br />""; echo ""<br />""; } } ?> <!DOCTYPE html> <html> <head> <title>BYP Test</title> </head> <body> <form action=""searchtest1.php"" method=""post"" target=""_blank""> <div> <label>Region</label> <select id=""region"" name=""region""> <option value=""0"">All</option> <option value=""1"">South East Asia</option> <option value=""2"">Africa</option> <option value=""3"">Europe</option> <option value=""4"">America</option> <option value=""5"">Australia</option> </select> </div> <div> <label>Country</label> <select id=""country"" name=""country""> <option value=""0"">All</option> <option value=""1"">Cambodia</option> <option value=""2"">Thailand</option> <option value=""3"">Vietnam</option> <option value=""4"">Myanmar</option> <option value=""5"">Laos</option> <option value=""6"">Ethiopia</option> <option value=""7"">France</option> <option value=""8"">New York City</option> <option value=""9"">Melbourne</option> </select> </div> <div> <label>Duration</label> <select id=""duration"" name=""duration""> <option value=""0"">All</option> <option value=""1"">5 Days</option> <option value=""2"">10 Days</option> </select> </div> <input type=""submit"" name=""submit"" value=""submit"" /> </form> </body>"
"357","bad","url: <?php echo base_url() . 'user_m/getAdministrator'; ?>""<div class=""form-group""> <label>Denumirea intreprinderii:</label> <select class=""form-control marg-left-10"" id=""firm""> <?php if($all_firms): ?> <?php foreach($all_firms as $firm): ?> <option value=""<?php echo $firm['id_firm']; ?>""><?php echo $firm['name_firm']; ?></option> <?php endforeach; ?> <?php endif; ?> </select> </div> <div class=""form-group""> <label>Administrator</label> <select class=""form-control marg-left-10"" id=""admin""> </select> </div> public function getAdministrator() { $id_firm = $_POST['id_firm']; $this->load->database(); $sql = $this->db->query(""SELECT * FROM users,firms WHERE firms.id_firm = users.fk_firm and users.id = ""); while($row=mysql_fetch_array($sql)) { $id=$row['id']; $data=$row['name']; echo '<option value=""'.$id.'"">'.$data.'</option>'; } return $this; } $(document).ready(function() { $(""#firm"").change(function() { var id_firm=$(this).val(); var dataString = 'id_firm='+ id_firm; $.ajax ({ type: ""POST"", url: ""<?php echo base_url() . 'user_m/getAdministrator'; ?>"", data: dataString, cache: false, success: function(html) { $(""#admin"").html(html); } }); }); });"
"358","bad","url: <?php echo base_url() . 'user_m/getAdministrator'; ?>""<div class=""form-group""> <label>Denumirea intreprinderii:</label> <select class=""form-control marg-left-10"" id=""firm""> <?php if($all_firms): ?> <?php foreach($all_firms as $firm): ?> <option value=""<?php echo $firm['id_firm']; ?>""><?php echo $firm['name_firm']; ?></option> <?php endforeach; ?> <?php endif; ?> </select> </div> <div class=""form-group""> <label>Administrator</label> <select class=""form-control marg-left-10"" id=""admin""> </select> </div> public function getAdministrator() { $id_firm = $_POST['id_firm']; $this->load->database(); $sql = $this->db->query(""SELECT * FROM users,firms WHERE firms.id_firm = users.fk_firm and users.id = ""); while($row=mysql_fetch_array($sql)) { $id=$row['id']; $data=$row['name']; echo '<option value=""'.$id.'"">'.$data.'</option>'; } return $this; } $(document).ready(function() { $(""#firm"").change(function() { var id_firm=$(this).val(); var dataString = 'id_firm='+ id_firm; $.ajax ({ type: ""POST"", url: ""<?php echo base_url() . 'user_m/getAdministrator'; ?>"", data: dataString, cache: false, success: function(html) { $(""#admin"").html(html); } }); }); });"
"359","bad","url: <?php echo base_url() . 'user_m/getAdministrator'; ?>""<div class=""form-group""> <label>Denumirea intreprinderii:</label> <select class=""form-control marg-left-10"" id=""firm""> <?php if($all_firms): ?> <?php foreach($all_firms as $firm): ?> <option value=""<?php echo $firm['id_firm']; ?>""><?php echo $firm['name_firm']; ?></option> <?php endforeach; ?> <?php endif; ?> </select> </div> <div class=""form-group""> <label>Administrator</label> <select class=""form-control marg-left-10"" id=""admin""> </select> </div> public function getAdministrator() { $id_firm = $_POST['id_firm']; $this->load->database(); $sql = $this->db->query(""SELECT * FROM users,firms WHERE firms.id_firm = users.fk_firm and users.id = ""); while($row=mysql_fetch_array($sql)) { $id=$row['id']; $data=$row['name']; echo '<option value=""'.$id.'"">'.$data.'</option>'; } return $this; } $(document).ready(function() { $(""#firm"").change(function() { var id_firm=$(this).val(); var dataString = 'id_firm='+ id_firm; $.ajax ({ type: ""POST"", url: ""<?php echo base_url() . 'user_m/getAdministrator'; ?>"", data: dataString, cache: false, success: function(html) { $(""#admin"").html(html); } }); }); });"
"360","bad","<?php include_once('admin/dbcon.php'); if(isset($_POST[""submit""])==""Apply Now"") { //$resume=''; //$photos=''; $fullname = strip_tags($_POST[""fullname""]); $address = strip_tags($_POST[""address""]); $state = strip_tags($_POST[""state""]); $city = strip_tags($_POST[""city""]); $mobile = strip_tags($_POST[""mobile""]); $email = strip_tags($_POST[""email""]); $username=""xxxxxxx""; $apply_for = strip_tags($_POST[""apply_for""]); /*Resume file uploaded*/ $allowedExts = array(""pdf"", ""doc"", ""docx""); $extension = end(explode(""."", $_FILES[""up_resume""][""name""])); if ($_FILES[""up_resume""][""type""] == ""application/pdf"" || $_FILES[""up_resume""][""type""] == ""application/msword"" || $_FILES[""up_resume""][""type""] == ""application/vnd.openxmlformats-officedocument.wordprocessingml.document"") { $type =substr($_FILES[""up_resume""][""name""],strrpos($_FILES[""up_resume""][""name""], '.') + 1); $resume = ""Resume_"".time().""."".$type; move_uploaded_file($_FILES[""up_resume""][""tmp_name""], ""admin/upload/"".$resume); } else { header(""Location:apply-now.php?rm=Invalid file, Please upload your updated resume!!""); } /*Photo uploaded here*/ $allowedExts1 = array(""gif"", ""jpeg"", ""jpg"", ""png""); $extension1 = end(explode(""."", $_FILES[""profiel_photos""][""name""])); if ($_FILES[""profiel_photos""][""type""] == ""image/gif"" || $_FILES[""profiel_photos""][""type""] == ""image/jpeg"" || $_FILES[""profiel_photos""][""type""] == ""image/pjpeg"" || $_FILES[""profiel_photos""][""type""] == ""image/png"" || $_FILES[""profiel_photos""][""type""] == ""image/jpg"" ) { $type1 =substr($_FILES[""profiel_photos""][""name""],strrpos($_FILES[""profiel_photos""][""name""], '.') + 1); $photos = ""prf_img_"".time().""."".$type1; move_uploaded_file($_FILES[""profiel_photos""][""tmp_name""], ""admin/upload/"".$photos); } else { header(""Location:apply-now.php?pic=Invalid file,Please upload your updated photos!!""); } $status = ""INSERT INTO `caretel`.`tb_career` (`FullName`, `Address`, `State`, `City`, `ContactNo`, `Email`, `Resume`, `ProfileImg`, `ApplyFor`) VALUES ('$fullname', '$address', '$state', '$city', '$mobile', '$email', '$resume', '$photos', '$apply_for')""; if(mysql_query($status)) { require_once('include/class.phpmailer.php'); $mail = new PHPMailer(); $mail->IsSMTP(); // $mail->Host = ""smtp.gmail.com""; $mail->SMTPDebug = 1; $mail->SMTPAuth = true; $mail->Host = ""smtp.gmail.com""; $mail->Port = 25; $mail->Username = ""XXXXXX@gmail.com""; $mail->Password = ""XXXXXXX""; //$mail->SMTPSecure = ""ssl""; $mail->SMTPSecure = ""tls""; $mail->AddAddress($email,""Guest""); $mail->SetFrom(""cCXXXXXXX@gmail.com"",""XXXXXXXX""); $mail->Subject = ""New Applicat Applyed for "".$apply_for; $body = 'html'; $mail->MsgHTML($body); $mail->AddAttachment(""admin/upload/"".$resume); // attachment $mail->AddAttachment(""admin/upload/"".$photos); // attachment if($mail->Send()) { echo ""hi""; header(""Location:apply-now.php?msg=Thank you for Apply. We will be in touch with you very soon!!""); exit; }else{ header(""Location:apply-now.php?msg=We encountered an error sending your mail""); exit; } } }else{ echo ""dfsdfsdfsdf ""; } ?>"
"361","bad","<?php include_once('admin/dbcon.php'); if(isset($_POST[""submit""])==""Apply Now"") { //$resume=''; //$photos=''; $fullname = strip_tags($_POST[""fullname""]); $address = strip_tags($_POST[""address""]); $state = strip_tags($_POST[""state""]); $city = strip_tags($_POST[""city""]); $mobile = strip_tags($_POST[""mobile""]); $email = strip_tags($_POST[""email""]); $username=""xxxxxxx""; $apply_for = strip_tags($_POST[""apply_for""]); /*Resume file uploaded*/ $allowedExts = array(""pdf"", ""doc"", ""docx""); $extension = end(explode(""."", $_FILES[""up_resume""][""name""])); if ($_FILES[""up_resume""][""type""] == ""application/pdf"" || $_FILES[""up_resume""][""type""] == ""application/msword"" || $_FILES[""up_resume""][""type""] == ""application/vnd.openxmlformats-officedocument.wordprocessingml.document"") { $type =substr($_FILES[""up_resume""][""name""],strrpos($_FILES[""up_resume""][""name""], '.') + 1); $resume = ""Resume_"".time().""."".$type; move_uploaded_file($_FILES[""up_resume""][""tmp_name""], ""admin/upload/"".$resume); } else { header(""Location:apply-now.php?rm=Invalid file, Please upload your updated resume!!""); } /*Photo uploaded here*/ $allowedExts1 = array(""gif"", ""jpeg"", ""jpg"", ""png""); $extension1 = end(explode(""."", $_FILES[""profiel_photos""][""name""])); if ($_FILES[""profiel_photos""][""type""] == ""image/gif"" || $_FILES[""profiel_photos""][""type""] == ""image/jpeg"" || $_FILES[""profiel_photos""][""type""] == ""image/pjpeg"" || $_FILES[""profiel_photos""][""type""] == ""image/png"" || $_FILES[""profiel_photos""][""type""] == ""image/jpg"" ) { $type1 =substr($_FILES[""profiel_photos""][""name""],strrpos($_FILES[""profiel_photos""][""name""], '.') + 1); $photos = ""prf_img_"".time().""."".$type1; move_uploaded_file($_FILES[""profiel_photos""][""tmp_name""], ""admin/upload/"".$photos); } else { header(""Location:apply-now.php?pic=Invalid file,Please upload your updated photos!!""); } $status = ""INSERT INTO `caretel`.`tb_career` (`FullName`, `Address`, `State`, `City`, `ContactNo`, `Email`, `Resume`, `ProfileImg`, `ApplyFor`) VALUES ('$fullname', '$address', '$state', '$city', '$mobile', '$email', '$resume', '$photos', '$apply_for')""; if(mysql_query($status)) { require_once('include/class.phpmailer.php'); $mail = new PHPMailer(); $mail->IsSMTP(); // $mail->Host = ""smtp.gmail.com""; $mail->SMTPDebug = 1; $mail->SMTPAuth = true; $mail->Host = ""smtp.gmail.com""; $mail->Port = 25; $mail->Username = ""XXXXXX@gmail.com""; $mail->Password = ""XXXXXXX""; //$mail->SMTPSecure = ""ssl""; $mail->SMTPSecure = ""tls""; $mail->AddAddress($email,""Guest""); $mail->SetFrom(""cCXXXXXXX@gmail.com"",""XXXXXXXX""); $mail->Subject = ""New Applicat Applyed for "".$apply_for; $body = 'html'; $mail->MsgHTML($body); $mail->AddAttachment(""admin/upload/"".$resume); // attachment $mail->AddAttachment(""admin/upload/"".$photos); // attachment if($mail->Send()) { echo ""hi""; header(""Location:apply-now.php?msg=Thank you for Apply. We will be in touch with you very soon!!""); exit; }else{ header(""Location:apply-now.php?msg=We encountered an error sending your mail""); exit; } } }else{ echo ""dfsdfsdfsdf ""; } ?>"
"362","bad","<?php include_once('admin/dbcon.php'); if(isset($_POST[""submit""])==""Apply Now"") { //$resume=''; //$photos=''; $fullname = strip_tags($_POST[""fullname""]); $address = strip_tags($_POST[""address""]); $state = strip_tags($_POST[""state""]); $city = strip_tags($_POST[""city""]); $mobile = strip_tags($_POST[""mobile""]); $email = strip_tags($_POST[""email""]); $username=""xxxxxxx""; $apply_for = strip_tags($_POST[""apply_for""]); /*Resume file uploaded*/ $allowedExts = array(""pdf"", ""doc"", ""docx""); $extension = end(explode(""."", $_FILES[""up_resume""][""name""])); if ($_FILES[""up_resume""][""type""] == ""application/pdf"" || $_FILES[""up_resume""][""type""] == ""application/msword"" || $_FILES[""up_resume""][""type""] == ""application/vnd.openxmlformats-officedocument.wordprocessingml.document"") { $type =substr($_FILES[""up_resume""][""name""],strrpos($_FILES[""up_resume""][""name""], '.') + 1); $resume = ""Resume_"".time().""."".$type; move_uploaded_file($_FILES[""up_resume""][""tmp_name""], ""admin/upload/"".$resume); } else { header(""Location:apply-now.php?rm=Invalid file, Please upload your updated resume!!""); } /*Photo uploaded here*/ $allowedExts1 = array(""gif"", ""jpeg"", ""jpg"", ""png""); $extension1 = end(explode(""."", $_FILES[""profiel_photos""][""name""])); if ($_FILES[""profiel_photos""][""type""] == ""image/gif"" || $_FILES[""profiel_photos""][""type""] == ""image/jpeg"" || $_FILES[""profiel_photos""][""type""] == ""image/pjpeg"" || $_FILES[""profiel_photos""][""type""] == ""image/png"" || $_FILES[""profiel_photos""][""type""] == ""image/jpg"" ) { $type1 =substr($_FILES[""profiel_photos""][""name""],strrpos($_FILES[""profiel_photos""][""name""], '.') + 1); $photos = ""prf_img_"".time().""."".$type1; move_uploaded_file($_FILES[""profiel_photos""][""tmp_name""], ""admin/upload/"".$photos); } else { header(""Location:apply-now.php?pic=Invalid file,Please upload your updated photos!!""); } $status = ""INSERT INTO `caretel`.`tb_career` (`FullName`, `Address`, `State`, `City`, `ContactNo`, `Email`, `Resume`, `ProfileImg`, `ApplyFor`) VALUES ('$fullname', '$address', '$state', '$city', '$mobile', '$email', '$resume', '$photos', '$apply_for')""; if(mysql_query($status)) { require_once('include/class.phpmailer.php'); $mail = new PHPMailer(); $mail->IsSMTP(); // $mail->Host = ""smtp.gmail.com""; $mail->SMTPDebug = 1; $mail->SMTPAuth = true; $mail->Host = ""smtp.gmail.com""; $mail->Port = 25; $mail->Username = ""XXXXXX@gmail.com""; $mail->Password = ""XXXXXXX""; //$mail->SMTPSecure = ""ssl""; $mail->SMTPSecure = ""tls""; $mail->AddAddress($email,""Guest""); $mail->SetFrom(""cCXXXXXXX@gmail.com"",""XXXXXXXX""); $mail->Subject = ""New Applicat Applyed for "".$apply_for; $body = 'html'; $mail->MsgHTML($body); $mail->AddAttachment(""admin/upload/"".$resume); // attachment $mail->AddAttachment(""admin/upload/"".$photos); // attachment if($mail->Send()) { echo ""hi""; header(""Location:apply-now.php?msg=Thank you for Apply. We will be in touch with you very soon!!""); exit; }else{ header(""Location:apply-now.php?msg=We encountered an error sending your mail""); exit; } } }else{ echo ""dfsdfsdfsdf ""; } ?>"
"363","bad","function ConectarBD() { $vServidor=""localhost""; $vUsuarioBD=""root""; $vClaveBD=""""; $vNombreBD=""admin""; $vConexion=mysql_connect($vServidor, $vUsuarioBD, $vClaveBD); if ($vConexion!=false) { $vSeleccionoBD=mysqli_select_db($vConexion,$vNombreBD); if ($vSeleccionoBD!=false) { return true; }else { return false; } }function CrearListados($vTabla) { $vListado=array(); if (!ConectarBD()) { die ('Error en la conexion'); return false; }else { $vConsulta=""SELECT * FROM provincias""; $vRegistros = mysql_query($vConsulta); if(!$vRegistros){ echo 'MySQL Error: ' . mysql_error().'<br />'; return false; }else { $i=1; while ($vCadaRegistro = mysql_fetch_row($vRegistros)){ $vListado[$i]['ID']=$vCadaRegistro[0]; $vListado[$i]['provincia']= utf8_encode($vCadaRegistro[1]); $i++; } return $vListado; } DesconectarBD(); } }<?php $Registros=array(); $Tabla=""provincia""; $Registros=CrearListados($Tabla); if (!empty($Registros) ){ $cntRegistros=count($Registros); ?> <div class=""form-group""> <select class=""form-control"" name=""provincia""> <option value=""0"">Seleccione una provincia</option> <?php for ($i=1; $i<$cntRegistros; $i++) { ?> <option value=""<?php echo $Registros[$i]['ID']; ?>"" <?php if (!empty($_POST['provincia']) && $_POST['provincia']==$i) {echo 'selected';} ?> ><?php echo $Registros[$i]['provincia']; ?></option> <?php } } ?> </select> </div>"
"364","bad","function ConectarBD() { $vServidor=""localhost""; $vUsuarioBD=""root""; $vClaveBD=""""; $vNombreBD=""admin""; $vConexion=mysql_connect($vServidor, $vUsuarioBD, $vClaveBD); if ($vConexion!=false) { $vSeleccionoBD=mysqli_select_db($vConexion,$vNombreBD); if ($vSeleccionoBD!=false) { return true; }else { return false; } }function CrearListados($vTabla) { $vListado=array(); if (!ConectarBD()) { die ('Error en la conexion'); return false; }else { $vConsulta=""SELECT * FROM provincias""; $vRegistros = mysql_query($vConsulta); if(!$vRegistros){ echo 'MySQL Error: ' . mysql_error().'<br />'; return false; }else { $i=1; while ($vCadaRegistro = mysql_fetch_row($vRegistros)){ $vListado[$i]['ID']=$vCadaRegistro[0]; $vListado[$i]['provincia']= utf8_encode($vCadaRegistro[1]); $i++; } return $vListado; } DesconectarBD(); } }<?php $Registros=array(); $Tabla=""provincia""; $Registros=CrearListados($Tabla); if (!empty($Registros) ){ $cntRegistros=count($Registros); ?> <div class=""form-group""> <select class=""form-control"" name=""provincia""> <option value=""0"">Seleccione una provincia</option> <?php for ($i=1; $i<$cntRegistros; $i++) { ?> <option value=""<?php echo $Registros[$i]['ID']; ?>"" <?php if (!empty($_POST['provincia']) && $_POST['provincia']==$i) {echo 'selected';} ?> ><?php echo $Registros[$i]['provincia']; ?></option> <?php } } ?> </select> </div>"
"365","bad","function ConectarBD() { $vServidor=""localhost""; $vUsuarioBD=""root""; $vClaveBD=""""; $vNombreBD=""admin""; $vConexion=mysql_connect($vServidor, $vUsuarioBD, $vClaveBD); if ($vConexion!=false) { $vSeleccionoBD=mysqli_select_db($vConexion,$vNombreBD); if ($vSeleccionoBD!=false) { return true; }else { return false; } }function CrearListados($vTabla) { $vListado=array(); if (!ConectarBD()) { die ('Error en la conexion'); return false; }else { $vConsulta=""SELECT * FROM provincias""; $vRegistros = mysql_query($vConsulta); if(!$vRegistros){ echo 'MySQL Error: ' . mysql_error().'<br />'; return false; }else { $i=1; while ($vCadaRegistro = mysql_fetch_row($vRegistros)){ $vListado[$i]['ID']=$vCadaRegistro[0]; $vListado[$i]['provincia']= utf8_encode($vCadaRegistro[1]); $i++; } return $vListado; } DesconectarBD(); } }<?php $Registros=array(); $Tabla=""provincia""; $Registros=CrearListados($Tabla); if (!empty($Registros) ){ $cntRegistros=count($Registros); ?> <div class=""form-group""> <select class=""form-control"" name=""provincia""> <option value=""0"">Seleccione una provincia</option> <?php for ($i=1; $i<$cntRegistros; $i++) { ?> <option value=""<?php echo $Registros[$i]['ID']; ?>"" <?php if (!empty($_POST['provincia']) && $_POST['provincia']==$i) {echo 'selected';} ?> ><?php echo $Registros[$i]['provincia']; ?></option> <?php } } ?> </select> </div>"
"366","bad","<?php // Path to PHP-SDK include('config.php'); require '......./src/facebook.php '; $facebook = new Facebook(array( 'appId' => '', 'secret' => '', )); /* $facebook = new Facebook(array( 'appId' => AppInfo::appID(), 'secret' => AppInfo::appSecret(), 'sharedSession' => true, 'trustForwarded' => true, )); */ // See if there is a user from a cookie ## connect mysql server $mysqli = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE); # check connection if ($mysqli->connect_errno) { echo ""<p>MySQL error no {$mysqli->connect_errno} : {$mysqli->connect_error}</p>""; exit();} $user = $facebook->getUser(); if ($user) { try { // Proceed knowing you have a logged in user who's authenticated. $user_profile = $facebook->api('/me'); // $fbid = $user_profile['id']; // To Get Facebook ID $fbuname = $mysqli->real_escape_string($user_profile['name']); // To Get Facebook Username $fbfname = $mysqli->real_escape_string($user_profile['first_name']); // To Get Facebook full name $fblname = $mysqli->real_escape_string($user_profile['last_name']); // To Get Facebook full name $fbemail = $mysqli->real_escape_string($user_profile['email']); // To Get Facebook email ID } catch (FacebookApiException $e) { echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>'; $user = null; } } ?> <!DOCTYPE html> <html xmlns:fb=""http://www.facebook.com/2008/fbml""> <head> <title>Facebook Application Local Development</title> <link type=""text/css"" rel=""stylesheet"" href=""css/reset.css""> <link type=""text/css"" rel=""stylesheet"" href=""css/main.css""> </head> <body> <div id=""login""> <?php if (!$user) { ?> <fb:login-button></fb:login-button> <?php } ?> </div> <div id=""cont""> <!--redirect to local welcome page?!!--> <?php if ($user): // $result = $mysqli->query(""SELECT username from users WHERE username = '$fbuname' LIMIT 1""); // to check if its getting anything in result //print ""<pre>""; //print_r($result); //print ""</pre>""; $result = $mysqli->query(""SELECT username from users WHERE username = '{$fbuname}' LIMIT 1""); print ""<pre>""; print_r($result); print ""</pre>""; if ($result->num_rows == 0){ // to check if it enters a loop echo ""true""; echo ""<br/>"" ; $sql= mysqli_query($db, ""INSERT INTO users (username,first_name,last_name,email) VALUES ('{$user_profile['name']}', '{$user_profile['first_name']}', '{$user_profile['last_name']}', '{$user_profile['email']}')""); //$sql= mysqli_query($db,$sql); if ( $sql === false ){ //handled the SQL error here //echo ""ERROR""; die($mysqli->error); } } echo ""<br/>"" ; echo $fbuname; echo $fbfname; echo $fblname; echo $fbemail; //header(""location: welcome.php""); //<!--img src=""https://graph.facebook.com/ <//?php echo $user; picture""--> //<!--p Hello // echo $user_profile['name']; !</p--> else: echo ""You are not Connected.""; endif ?>"
"367","bad","<?php // Path to PHP-SDK include('config.php'); require '......./src/facebook.php '; $facebook = new Facebook(array( 'appId' => '', 'secret' => '', )); /* $facebook = new Facebook(array( 'appId' => AppInfo::appID(), 'secret' => AppInfo::appSecret(), 'sharedSession' => true, 'trustForwarded' => true, )); */ // See if there is a user from a cookie ## connect mysql server $mysqli = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE); # check connection if ($mysqli->connect_errno) { echo ""<p>MySQL error no {$mysqli->connect_errno} : {$mysqli->connect_error}</p>""; exit();} $user = $facebook->getUser(); if ($user) { try { // Proceed knowing you have a logged in user who's authenticated. $user_profile = $facebook->api('/me'); // $fbid = $user_profile['id']; // To Get Facebook ID $fbuname = $mysqli->real_escape_string($user_profile['name']); // To Get Facebook Username $fbfname = $mysqli->real_escape_string($user_profile['first_name']); // To Get Facebook full name $fblname = $mysqli->real_escape_string($user_profile['last_name']); // To Get Facebook full name $fbemail = $mysqli->real_escape_string($user_profile['email']); // To Get Facebook email ID } catch (FacebookApiException $e) { echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>'; $user = null; } } ?> <!DOCTYPE html> <html xmlns:fb=""http://www.facebook.com/2008/fbml""> <head> <title>Facebook Application Local Development</title> <link type=""text/css"" rel=""stylesheet"" href=""css/reset.css""> <link type=""text/css"" rel=""stylesheet"" href=""css/main.css""> </head> <body> <div id=""login""> <?php if (!$user) { ?> <fb:login-button></fb:login-button> <?php } ?> </div> <div id=""cont""> <!--redirect to local welcome page?!!--> <?php if ($user): // $result = $mysqli->query(""SELECT username from users WHERE username = '$fbuname' LIMIT 1""); // to check if its getting anything in result //print ""<pre>""; //print_r($result); //print ""</pre>""; $result = $mysqli->query(""SELECT username from users WHERE username = '{$fbuname}' LIMIT 1""); print ""<pre>""; print_r($result); print ""</pre>""; if ($result->num_rows == 0){ // to check if it enters a loop echo ""true""; echo ""<br/>"" ; $sql= mysqli_query($db, ""INSERT INTO users (username,first_name,last_name,email) VALUES ('{$user_profile['name']}', '{$user_profile['first_name']}', '{$user_profile['last_name']}', '{$user_profile['email']}')""); //$sql= mysqli_query($db,$sql); if ( $sql === false ){ //handled the SQL error here //echo ""ERROR""; die($mysqli->error); } } echo ""<br/>"" ; echo $fbuname; echo $fbfname; echo $fblname; echo $fbemail; //header(""location: welcome.php""); //<!--img src=""https://graph.facebook.com/ <//?php echo $user; picture""--> //<!--p Hello // echo $user_profile['name']; !</p--> else: echo ""You are not Connected.""; endif ?>"
"368","bad","<?php // Path to PHP-SDK include('config.php'); require '......./src/facebook.php '; $facebook = new Facebook(array( 'appId' => '', 'secret' => '', )); /* $facebook = new Facebook(array( 'appId' => AppInfo::appID(), 'secret' => AppInfo::appSecret(), 'sharedSession' => true, 'trustForwarded' => true, )); */ // See if there is a user from a cookie ## connect mysql server $mysqli = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE); # check connection if ($mysqli->connect_errno) { echo ""<p>MySQL error no {$mysqli->connect_errno} : {$mysqli->connect_error}</p>""; exit();} $user = $facebook->getUser(); if ($user) { try { // Proceed knowing you have a logged in user who's authenticated. $user_profile = $facebook->api('/me'); // $fbid = $user_profile['id']; // To Get Facebook ID $fbuname = $mysqli->real_escape_string($user_profile['name']); // To Get Facebook Username $fbfname = $mysqli->real_escape_string($user_profile['first_name']); // To Get Facebook full name $fblname = $mysqli->real_escape_string($user_profile['last_name']); // To Get Facebook full name $fbemail = $mysqli->real_escape_string($user_profile['email']); // To Get Facebook email ID } catch (FacebookApiException $e) { echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>'; $user = null; } } ?> <!DOCTYPE html> <html xmlns:fb=""http://www.facebook.com/2008/fbml""> <head> <title>Facebook Application Local Development</title> <link type=""text/css"" rel=""stylesheet"" href=""css/reset.css""> <link type=""text/css"" rel=""stylesheet"" href=""css/main.css""> </head> <body> <div id=""login""> <?php if (!$user) { ?> <fb:login-button></fb:login-button> <?php } ?> </div> <div id=""cont""> <!--redirect to local welcome page?!!--> <?php if ($user): // $result = $mysqli->query(""SELECT username from users WHERE username = '$fbuname' LIMIT 1""); // to check if its getting anything in result //print ""<pre>""; //print_r($result); //print ""</pre>""; $result = $mysqli->query(""SELECT username from users WHERE username = '{$fbuname}' LIMIT 1""); print ""<pre>""; print_r($result); print ""</pre>""; if ($result->num_rows == 0){ // to check if it enters a loop echo ""true""; echo ""<br/>"" ; $sql= mysqli_query($db, ""INSERT INTO users (username,first_name,last_name,email) VALUES ('{$user_profile['name']}', '{$user_profile['first_name']}', '{$user_profile['last_name']}', '{$user_profile['email']}')""); //$sql= mysqli_query($db,$sql); if ( $sql === false ){ //handled the SQL error here //echo ""ERROR""; die($mysqli->error); } } echo ""<br/>"" ; echo $fbuname; echo $fbfname; echo $fblname; echo $fbemail; //header(""location: welcome.php""); //<!--img src=""https://graph.facebook.com/ <//?php echo $user; picture""--> //<!--p Hello // echo $user_profile['name']; !</p--> else: echo ""You are not Connected.""; endif ?>"
"369","bad","require_once 'mysql_login.php'; $db_server = mysql_connect($db_hostname, $db_username, $db_password); if (!$db_server) die(""Unable to connect to MySQL: "" . mysql_error()); mysql_select_db($db_database) or die(""Unable to select database: "" . msql_error()); $sql=""SELECT * FROM `TABLE 1` WHERE ""; if (isset($_GET['q'])) { $q = $_GET['q']; $sql .= ""ProductDescription LIKE \""%"".$q.""%\"" AND ""; } if (isset($_GET['wblack'])) { $wblack = $_GET['wblack']; $sql .= ""ProductDescription LIKE \""%"".$wblack.""%\"" AND ""; } if (substr($sql, strlen($sql) - strlen('WHERE ')) == 'WHERE ') { $sql = substr($sql, 0, strlen($sql) - strlen('WHERE ')); } if (substr($sql, strlen($sql) - strlen('AND ')) == 'AND ') { $sql = substr($sql, 0, strlen($sql) - strlen('AND ')); } $result = mysql_query($sql); while ($row = mysql_fetch_array($result)) { echo ""<div class='width'><div class='parent'><div class='searchimage'>""; echo ""<img src='{$row['ImageURL']}' /></div></div>""; echo ""<br><br>"".$row['ProductName'].""<br>""; echo ""&pound"".$row['ProductPrice']; echo ""</div>""; } if (!$result) die (""Database access failed: "" . mysql_error()); mysql_close($db_server); var q = $('#selectmenu').val(); $(""#selectmenu"" ).selectmenu ({ change:function( event,ui ) { q = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'q='+q, success: function (data) { $('#searchresults').html(data); } }).error(function() { alert ('An error occured'); }); } }); }); $(function() { $( ""#checkblack"" ).button(); $( ""#checkblack"" ).click(function(){ if($(this).is(':checked')) { var wblack = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'wblack='+wblack, success: function (data) { $('#searchresults').html(data); } }); } }); });<select id=""selectmenu"" name=""selectmenu""> <option value="""">--Select--</option> <option value=""dress"">Dresses</option> <option value=""tshirt"">T-Shirts</option> <option value=""skirt"">Skirts</option> <option value=""shoes"">Shoes</option> <option value=""top"">Tops</option> <option value=""floral"">Floral</option> <option value=""trousers"">Trousers</option> </select> <input name=""colour[]"" type=""checkbox"" class=""checksize"" id=""checkblack"" value=""black""/> <label for=""checkblack"">Black</label>"
"370","bad","require_once 'mysql_login.php'; $db_server = mysql_connect($db_hostname, $db_username, $db_password); if (!$db_server) die(""Unable to connect to MySQL: "" . mysql_error()); mysql_select_db($db_database) or die(""Unable to select database: "" . msql_error()); $sql=""SELECT * FROM `TABLE 1` WHERE ""; if (isset($_GET['q'])) { $q = $_GET['q']; $sql .= ""ProductDescription LIKE \""%"".$q.""%\"" AND ""; } if (isset($_GET['wblack'])) { $wblack = $_GET['wblack']; $sql .= ""ProductDescription LIKE \""%"".$wblack.""%\"" AND ""; } if (substr($sql, strlen($sql) - strlen('WHERE ')) == 'WHERE ') { $sql = substr($sql, 0, strlen($sql) - strlen('WHERE ')); } if (substr($sql, strlen($sql) - strlen('AND ')) == 'AND ') { $sql = substr($sql, 0, strlen($sql) - strlen('AND ')); } $result = mysql_query($sql); while ($row = mysql_fetch_array($result)) { echo ""<div class='width'><div class='parent'><div class='searchimage'>""; echo ""<img src='{$row['ImageURL']}' /></div></div>""; echo ""<br><br>"".$row['ProductName'].""<br>""; echo ""&pound"".$row['ProductPrice']; echo ""</div>""; } if (!$result) die (""Database access failed: "" . mysql_error()); mysql_close($db_server); var q = $('#selectmenu').val(); $(""#selectmenu"" ).selectmenu ({ change:function( event,ui ) { q = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'q='+q, success: function (data) { $('#searchresults').html(data); } }).error(function() { alert ('An error occured'); }); } }); }); $(function() { $( ""#checkblack"" ).button(); $( ""#checkblack"" ).click(function(){ if($(this).is(':checked')) { var wblack = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'wblack='+wblack, success: function (data) { $('#searchresults').html(data); } }); } }); });<select id=""selectmenu"" name=""selectmenu""> <option value="""">--Select--</option> <option value=""dress"">Dresses</option> <option value=""tshirt"">T-Shirts</option> <option value=""skirt"">Skirts</option> <option value=""shoes"">Shoes</option> <option value=""top"">Tops</option> <option value=""floral"">Floral</option> <option value=""trousers"">Trousers</option> </select> <input name=""colour[]"" type=""checkbox"" class=""checksize"" id=""checkblack"" value=""black""/> <label for=""checkblack"">Black</label>"
"371","bad","require_once 'mysql_login.php'; $db_server = mysql_connect($db_hostname, $db_username, $db_password); if (!$db_server) die(""Unable to connect to MySQL: "" . mysql_error()); mysql_select_db($db_database) or die(""Unable to select database: "" . msql_error()); $sql=""SELECT * FROM `TABLE 1` WHERE ""; if (isset($_GET['q'])) { $q = $_GET['q']; $sql .= ""ProductDescription LIKE \""%"".$q.""%\"" AND ""; } if (isset($_GET['wblack'])) { $wblack = $_GET['wblack']; $sql .= ""ProductDescription LIKE \""%"".$wblack.""%\"" AND ""; } if (substr($sql, strlen($sql) - strlen('WHERE ')) == 'WHERE ') { $sql = substr($sql, 0, strlen($sql) - strlen('WHERE ')); } if (substr($sql, strlen($sql) - strlen('AND ')) == 'AND ') { $sql = substr($sql, 0, strlen($sql) - strlen('AND ')); } $result = mysql_query($sql); while ($row = mysql_fetch_array($result)) { echo ""<div class='width'><div class='parent'><div class='searchimage'>""; echo ""<img src='{$row['ImageURL']}' /></div></div>""; echo ""<br><br>"".$row['ProductName'].""<br>""; echo ""&pound"".$row['ProductPrice']; echo ""</div>""; } if (!$result) die (""Database access failed: "" . mysql_error()); mysql_close($db_server); var q = $('#selectmenu').val(); $(""#selectmenu"" ).selectmenu ({ change:function( event,ui ) { q = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'q='+q, success: function (data) { $('#searchresults').html(data); } }).error(function() { alert ('An error occured'); }); } }); }); $(function() { $( ""#checkblack"" ).button(); $( ""#checkblack"" ).click(function(){ if($(this).is(':checked')) { var wblack = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'wblack='+wblack, success: function (data) { $('#searchresults').html(data); } }); } }); });<select id=""selectmenu"" name=""selectmenu""> <option value="""">--Select--</option> <option value=""dress"">Dresses</option> <option value=""tshirt"">T-Shirts</option> <option value=""skirt"">Skirts</option> <option value=""shoes"">Shoes</option> <option value=""top"">Tops</option> <option value=""floral"">Floral</option> <option value=""trousers"">Trousers</option> </select> <input name=""colour[]"" type=""checkbox"" class=""checksize"" id=""checkblack"" value=""black""/> <label for=""checkblack"">Black</label>"
"372","bad","require_once 'mysql_login.php'; $db_server = mysql_connect($db_hostname, $db_username, $db_password); if (!$db_server) die(""Unable to connect to MySQL: "" . mysql_error()); mysql_select_db($db_database) or die(""Unable to select database: "" . msql_error()); $sql=""SELECT * FROM `TABLE 1` WHERE ""; if (isset($_GET['q'])) { $q = $_GET['q']; $sql .= ""ProductDescription LIKE \""%"".$q.""%\"" AND ""; } if (isset($_GET['wblack'])) { $wblack = $_GET['wblack']; $sql .= ""ProductDescription LIKE \""%"".$wblack.""%\"" AND ""; } if (substr($sql, strlen($sql) - strlen('WHERE ')) == 'WHERE ') { $sql = substr($sql, 0, strlen($sql) - strlen('WHERE ')); } if (substr($sql, strlen($sql) - strlen('AND ')) == 'AND ') { $sql = substr($sql, 0, strlen($sql) - strlen('AND ')); } $result = mysql_query($sql); while ($row = mysql_fetch_array($result)) { echo ""<div class='width'><div class='parent'><div class='searchimage'>""; echo ""<img src='{$row['ImageURL']}' /></div></div>""; echo ""<br><br>"".$row['ProductName'].""<br>""; echo ""&pound"".$row['ProductPrice']; echo ""</div>""; } if (!$result) die (""Database access failed: "" . mysql_error()); mysql_close($db_server); var q = $('#selectmenu').val(); $(""#selectmenu"" ).selectmenu ({ change:function( event,ui ) { q = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'q='+q, success: function (data) { $('#searchresults').html(data); } }).error(function() { alert ('An error occured'); }); } }); }); $(function() { $( ""#checkblack"" ).button(); $( ""#checkblack"" ).click(function(){ if($(this).is(':checked')) { var wblack = $(this).val(); $.ajax({ url: 'searchtestphp.php', data: 'wblack='+wblack, success: function (data) { $('#searchresults').html(data); } }); } }); });<select id=""selectmenu"" name=""selectmenu""> <option value="""">--Select--</option> <option value=""dress"">Dresses</option> <option value=""tshirt"">T-Shirts</option> <option value=""skirt"">Skirts</option> <option value=""shoes"">Shoes</option> <option value=""top"">Tops</option> <option value=""floral"">Floral</option> <option value=""trousers"">Trousers</option> </select> <input name=""colour[]"" type=""checkbox"" class=""checksize"" id=""checkblack"" value=""black""/> <label for=""checkblack"">Black</label>"
"373","bad","<?php error_reporting (E_ALL ^ E_NOTICE); if ( $_POST['register']) { $getuser = $_POST['user']; $getemail = $_POST['email']; $getpass = $_POST['pass']; $getretypepass = $_POST['retypepass']; if($getuser) { if($getemail) { if($getpass){ if($getretypepass) { if( $getpass === $getretypepass ) { if ( (strlen($getemail) >= 6 ) && (strstr($getmeial, ""@"")) && (strstr($getmeial, ""."")){ require(""./config.php""); $query = mysql_query(""SELECT * FROM strizon WHERE user='$getuser'""); $numrows = mysql_num_rows($query); if ($numrows == 0) { $query = mysql_query(""SELECT * FROM strizon WHERE email='$getemail'""); $numrows = mysql_num_rows($query); if ($numrows == 0) { $pass = md5(md5(""Jmsad31"".$pass.""JU821Dkmal"")); $date = date(""F d, Y""); $code = md5(rand()); mysql_query(""INSERT INTO strizon VALUES ('', '$getuser', '$getpass', '$getemail, '0', '$code', '$date')""); $query = mysql_query (""SELECT * FROM strizon WHERE user='$getuser'""); $numrows = mysql_num_rows($query); if($numrows == 1) { $site = ""http://localhost/als""; $webmaster = ""Strizon Account Activiation <noreply@strizon.com>""; $headers = ""From: $webmaster""; $subject = ""Activate your Strizon Account""; $message = ""Thank you so much for registering with Strizon. Please click the link below to activate your account.\n""; $message .= ""$site/activeate?user=$getuser&code=$code\n""; $message .= ""Again, thank you!\n""; $message .= ""Sincerely\n""; $message .= ""The Strizon Team""; if(mail($getemail, $subject, $message, $headers)) { echo(""You have not successfully been registered! You must activate your account from the activation link sent to <b>$getemail</b>""); $getuser = """"; $getemail = """"; } else { echo(""An error has occured. Your activation email could not be sent!""); } } else{ echo(""An error has occured, and your account was not created.""); } } else { echo(""There is already a user with that email address. Please choose another email address!""); } } else { echo(""There is already a user with that username. Please choose another username!""); } mysql_close(); } else { echo(""You must enter an valid email address to register!""); } } else { echo (""Your passwords did not match!""); } } else { echo(""You must retype your password to register!"") } } else { echo(""You must enter a password to register!""); } } else { echo (""You must enter an email address to register!""); } } <pre> else { echo ""You must enter a username to register.""; } </pre> $form = ""<form action='' method='post'> <br> <input type='text' name='user' value='$getuser' placeholder='Username'> <br> <input type='email' name='email' value='$getemail' placeholder='Email Address'> <br> <input type='password' name='pass' placeholder='Password'> <br> <input type='password' name='retypepass' placeholder='Retype Password'> <br> <input type='submit' name='register' value='Register'> ""; echo($form); ?>"
"374","bad","<?php error_reporting (E_ALL ^ E_NOTICE); if ( $_POST['register']) { $getuser = $_POST['user']; $getemail = $_POST['email']; $getpass = $_POST['pass']; $getretypepass = $_POST['retypepass']; if($getuser) { if($getemail) { if($getpass){ if($getretypepass) { if( $getpass === $getretypepass ) { if ( (strlen($getemail) >= 6 ) && (strstr($getmeial, ""@"")) && (strstr($getmeial, ""."")){ require(""./config.php""); $query = mysql_query(""SELECT * FROM strizon WHERE user='$getuser'""); $numrows = mysql_num_rows($query); if ($numrows == 0) { $query = mysql_query(""SELECT * FROM strizon WHERE email='$getemail'""); $numrows = mysql_num_rows($query); if ($numrows == 0) { $pass = md5(md5(""Jmsad31"".$pass.""JU821Dkmal"")); $date = date(""F d, Y""); $code = md5(rand()); mysql_query(""INSERT INTO strizon VALUES ('', '$getuser', '$getpass', '$getemail, '0', '$code', '$date')""); $query = mysql_query (""SELECT * FROM strizon WHERE user='$getuser'""); $numrows = mysql_num_rows($query); if($numrows == 1) { $site = ""http://localhost/als""; $webmaster = ""Strizon Account Activiation <noreply@strizon.com>""; $headers = ""From: $webmaster""; $subject = ""Activate your Strizon Account""; $message = ""Thank you so much for registering with Strizon. Please click the link below to activate your account.\n""; $message .= ""$site/activeate?user=$getuser&code=$code\n""; $message .= ""Again, thank you!\n""; $message .= ""Sincerely\n""; $message .= ""The Strizon Team""; if(mail($getemail, $subject, $message, $headers)) { echo(""You have not successfully been registered! You must activate your account from the activation link sent to <b>$getemail</b>""); $getuser = """"; $getemail = """"; } else { echo(""An error has occured. Your activation email could not be sent!""); } } else{ echo(""An error has occured, and your account was not created.""); } } else { echo(""There is already a user with that email address. Please choose another email address!""); } } else { echo(""There is already a user with that username. Please choose another username!""); } mysql_close(); } else { echo(""You must enter an valid email address to register!""); } } else { echo (""Your passwords did not match!""); } } else { echo(""You must retype your password to register!"") } } else { echo(""You must enter a password to register!""); } } else { echo (""You must enter an email address to register!""); } } <pre> else { echo ""You must enter a username to register.""; } </pre> $form = ""<form action='' method='post'> <br> <input type='text' name='user' value='$getuser' placeholder='Username'> <br> <input type='email' name='email' value='$getemail' placeholder='Email Address'> <br> <input type='password' name='pass' placeholder='Password'> <br> <input type='password' name='retypepass' placeholder='Retype Password'> <br> <input type='submit' name='register' value='Register'> ""; echo($form); ?>"
"375","bad","<?php error_reporting (E_ALL ^ E_NOTICE); if ( $_POST['register']) { $getuser = $_POST['user']; $getemail = $_POST['email']; $getpass = $_POST['pass']; $getretypepass = $_POST['retypepass']; if($getuser) { if($getemail) { if($getpass){ if($getretypepass) { if( $getpass === $getretypepass ) { if ( (strlen($getemail) >= 6 ) && (strstr($getmeial, ""@"")) && (strstr($getmeial, ""."")){ require(""./config.php""); $query = mysql_query(""SELECT * FROM strizon WHERE user='$getuser'""); $numrows = mysql_num_rows($query); if ($numrows == 0) { $query = mysql_query(""SELECT * FROM strizon WHERE email='$getemail'""); $numrows = mysql_num_rows($query); if ($numrows == 0) { $pass = md5(md5(""Jmsad31"".$pass.""JU821Dkmal"")); $date = date(""F d, Y""); $code = md5(rand()); mysql_query(""INSERT INTO strizon VALUES ('', '$getuser', '$getpass', '$getemail, '0', '$code', '$date')""); $query = mysql_query (""SELECT * FROM strizon WHERE user='$getuser'""); $numrows = mysql_num_rows($query); if($numrows == 1) { $site = ""http://localhost/als""; $webmaster = ""Strizon Account Activiation <noreply@strizon.com>""; $headers = ""From: $webmaster""; $subject = ""Activate your Strizon Account""; $message = ""Thank you so much for registering with Strizon. Please click the link below to activate your account.\n""; $message .= ""$site/activeate?user=$getuser&code=$code\n""; $message .= ""Again, thank you!\n""; $message .= ""Sincerely\n""; $message .= ""The Strizon Team""; if(mail($getemail, $subject, $message, $headers)) { echo(""You have not successfully been registered! You must activate your account from the activation link sent to <b>$getemail</b>""); $getuser = """"; $getemail = """"; } else { echo(""An error has occured. Your activation email could not be sent!""); } } else{ echo(""An error has occured, and your account was not created.""); } } else { echo(""There is already a user with that email address. Please choose another email address!""); } } else { echo(""There is already a user with that username. Please choose another username!""); } mysql_close(); } else { echo(""You must enter an valid email address to register!""); } } else { echo (""Your passwords did not match!""); } } else { echo(""You must retype your password to register!"") } } else { echo(""You must enter a password to register!""); } } else { echo (""You must enter an email address to register!""); } } <pre> else { echo ""You must enter a username to register.""; } </pre> $form = ""<form action='' method='post'> <br> <input type='text' name='user' value='$getuser' placeholder='Username'> <br> <input type='email' name='email' value='$getemail' placeholder='Email Address'> <br> <input type='password' name='pass' placeholder='Password'> <br> <input type='password' name='retypepass' placeholder='Retype Password'> <br> <input type='submit' name='register' value='Register'> ""; echo($form); ?>"
"376","bad","citycityID$city = self::getCity($row['id']);// Getting Config file data (DB connection info); $conf = $this->getConf(); $mysqli = $this->dbConnect($conf); // Quering... $query = ""SELECT * FROM cities WHERE id = '"" . $id . ""';""; $result = $mysqli->query($query); if (!$result) { $message = 'Invalid query: ' . mysql_error() . ""\n""; die($message); } $row = $result->fetch_array(); $city = $row['city']; return $city;Invalid query:DROP TABLE citiesdie($message)Call to a member function fetch_array() on a non-objectdbConnect()mysql_errormysqli_errorNo database selected"
"377","bad","citycityID$city = self::getCity($row['id']);// Getting Config file data (DB connection info); $conf = $this->getConf(); $mysqli = $this->dbConnect($conf); // Quering... $query = ""SELECT * FROM cities WHERE id = '"" . $id . ""';""; $result = $mysqli->query($query); if (!$result) { $message = 'Invalid query: ' . mysql_error() . ""\n""; die($message); } $row = $result->fetch_array(); $city = $row['city']; return $city;Invalid query:DROP TABLE citiesdie($message)Call to a member function fetch_array() on a non-objectdbConnect()mysql_errormysqli_errorNo database selected"
"378","bad","citycityID$city = self::getCity($row['id']);// Getting Config file data (DB connection info); $conf = $this->getConf(); $mysqli = $this->dbConnect($conf); // Quering... $query = ""SELECT * FROM cities WHERE id = '"" . $id . ""';""; $result = $mysqli->query($query); if (!$result) { $message = 'Invalid query: ' . mysql_error() . ""\n""; die($message); } $row = $result->fetch_array(); $city = $row['city']; return $city;Invalid query:DROP TABLE citiesdie($message)Call to a member function fetch_array() on a non-objectdbConnect()mysql_errormysqli_errorNo database selected"
"379","bad","citycityID$city = self::getCity($row['id']);// Getting Config file data (DB connection info); $conf = $this->getConf(); $mysqli = $this->dbConnect($conf); // Quering... $query = ""SELECT * FROM cities WHERE id = '"" . $id . ""';""; $result = $mysqli->query($query); if (!$result) { $message = 'Invalid query: ' . mysql_error() . ""\n""; die($message); } $row = $result->fetch_array(); $city = $row['city']; return $city;Invalid query:DROP TABLE citiesdie($message)Call to a member function fetch_array() on a non-objectdbConnect()mysql_errormysqli_errorNo database selected"
"380","bad","<?php // First we execute our common code to connection to the database and start the session require(""common.php""); // This if statement checks to determine whether the registration form has been submitted // If it has, then the registration code is run, otherwise the form is displayed if(!empty($_POST)) { // Ensure that the user has entered a non-empty username if(empty($_POST['username'])) { // Note that die() is generally a terrible way of handling user errors // like this. It is much better to display the error with the form // and allow the user to correct their mistake. However, that is an // exercise for you to implement yourself. $username_error = ""Please enter a username""; } // Ensure that the user has entered a non-empty password if(empty($_POST['password'])) { $password_error = ""Please enter a password""; } // Make sure the user entered a valid E-Mail address // filter_var is a useful PHP function for validating form input, see: // http://us.php.net/manual/en/function.filter-var.php // http://us.php.net/manual/en/filter.filters.php if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) { $invalid_email = ""Invalid email""; } // We will use this SQL query to see whether the username entered by the // user is already in use. A SELECT query is used to retrieve data from the database. // :username is a special token, we will substitute a real value in its place when // we execute the query. $query = "" SELECT 1 FROM users WHERE username = :username ""; // This contains the definitions for any special tokens that we place in // our SQL query. In this case, we are defining a value for the token // :username. It is possible to insert $_POST['username'] directly into // your $query string; however doing so is very insecure and opens your // code up to SQL injection exploits. Using tokens prevents this. // For more information on SQL injections, see Wikipedia: // http://en.wikipedia.org/wiki/SQL_Injection $query_params = array( ':username' => $_POST['username'] ); try { // These two statements run the query against your database table. $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { // Note: On a production website, you should not output $ex->getMessage(). // It may provide an attacker with helpful information about your code. die(""Failed to run query: "" . $ex->getMessage()); } // The fetch() method returns an array representing the ""next"" row from // the selected results, or false if there are no more rows to fetch. $row = $stmt->fetch(); // If a row was returned, then we know a matching username was found in // the database already and we should not allow the user to continue. if($row) { $username_exist = ""This username already exists!""; } // Now we perform the same type of check for the email address, in order // to ensure that it is unique. $query = "" SELECT 1 FROM users WHERE email = :email ""; $query_params = array( ':email' => $_POST['email'] ); try { $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { die(""Failed to run query: "" . $ex->getMessage()); } $row = $stmt->fetch(); if($row) { $email_registered = ""This email is already registered!""; } // An INSERT query is used to add new rows to a database table. // Again, we are using special tokens (technically called parameters) to // protect against SQL injection attacks. $query = "" INSERT INTO users ( username, password, salt, email ) VALUES ( :username, :password, :salt, :email ) ""; // A salt is randomly generated here to protect again brute force attacks // and rainbow table attacks. The following statement generates a hex // representation of an 8 byte salt. Representing this in hex provides // no additional security, but makes it easier for humans to read. // For more information: // http://en.wikipedia.org/wiki/Salt_%28cryptography%29 // http://en.wikipedia.org/wiki/Brute-force_attack // http://en.wikipedia.org/wiki/Rainbow_table $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); // This hashes the password with the salt so that it can be stored securely // in your database. The output of this next statement is a 64 byte hex // string representing the 32 byte sha256 hash of the password. The original // password cannot be recovered from the hash. For more information: // http://en.wikipedia.org/wiki/Cryptographic_hash_function $password = hash('sha256', $_POST['password'] . $salt); // Next we hash the hash value 65536 more times. The purpose of this is to // protect against brute force attacks. Now an attacker must compute the hash 65537 // times for each guess they make against a password, whereas if the password // were hashed only once the attacker would have been able to make 65537 different // guesses in the same amount of time instead of only one. for($round = 0; $round < 65536; $round++) { $password = hash('sha256', $password . $salt); } // Here we prepare our tokens for insertion into the SQL query. We do not // store the original password; only the hashed version of it. We do store // the salt (in its plaintext form; this is not a security risk). $query_params = array( ':username' => $_POST['username'], ':password' => $password, ':salt' => $salt, ':email' => $_POST['email'] ); try { // Execute the query to create the user $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { // Note: On a production website, you should not output $ex->getMessage(). // It may provide an attacker with helpful information about your code. die(""Failed to run query: "" . $ex->getMessage()); } // This redirects the user back to the login page after they register header(""Location: login.php""); // Calling die or exit after performing a redirect using the header function // is critical. The rest of your PHP script will continue to execute and // will be sent to the user if you do not die or exit. die(""Redirecting to login.php""); } ?>"
"381","bad","<?php // First we execute our common code to connection to the database and start the session require(""common.php""); // This if statement checks to determine whether the registration form has been submitted // If it has, then the registration code is run, otherwise the form is displayed if(!empty($_POST)) { // Ensure that the user has entered a non-empty username if(empty($_POST['username'])) { // Note that die() is generally a terrible way of handling user errors // like this. It is much better to display the error with the form // and allow the user to correct their mistake. However, that is an // exercise for you to implement yourself. $username_error = ""Please enter a username""; } // Ensure that the user has entered a non-empty password if(empty($_POST['password'])) { $password_error = ""Please enter a password""; } // Make sure the user entered a valid E-Mail address // filter_var is a useful PHP function for validating form input, see: // http://us.php.net/manual/en/function.filter-var.php // http://us.php.net/manual/en/filter.filters.php if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) { $invalid_email = ""Invalid email""; } // We will use this SQL query to see whether the username entered by the // user is already in use. A SELECT query is used to retrieve data from the database. // :username is a special token, we will substitute a real value in its place when // we execute the query. $query = "" SELECT 1 FROM users WHERE username = :username ""; // This contains the definitions for any special tokens that we place in // our SQL query. In this case, we are defining a value for the token // :username. It is possible to insert $_POST['username'] directly into // your $query string; however doing so is very insecure and opens your // code up to SQL injection exploits. Using tokens prevents this. // For more information on SQL injections, see Wikipedia: // http://en.wikipedia.org/wiki/SQL_Injection $query_params = array( ':username' => $_POST['username'] ); try { // These two statements run the query against your database table. $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { // Note: On a production website, you should not output $ex->getMessage(). // It may provide an attacker with helpful information about your code. die(""Failed to run query: "" . $ex->getMessage()); } // The fetch() method returns an array representing the ""next"" row from // the selected results, or false if there are no more rows to fetch. $row = $stmt->fetch(); // If a row was returned, then we know a matching username was found in // the database already and we should not allow the user to continue. if($row) { $username_exist = ""This username already exists!""; } // Now we perform the same type of check for the email address, in order // to ensure that it is unique. $query = "" SELECT 1 FROM users WHERE email = :email ""; $query_params = array( ':email' => $_POST['email'] ); try { $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { die(""Failed to run query: "" . $ex->getMessage()); } $row = $stmt->fetch(); if($row) { $email_registered = ""This email is already registered!""; } // An INSERT query is used to add new rows to a database table. // Again, we are using special tokens (technically called parameters) to // protect against SQL injection attacks. $query = "" INSERT INTO users ( username, password, salt, email ) VALUES ( :username, :password, :salt, :email ) ""; // A salt is randomly generated here to protect again brute force attacks // and rainbow table attacks. The following statement generates a hex // representation of an 8 byte salt. Representing this in hex provides // no additional security, but makes it easier for humans to read. // For more information: // http://en.wikipedia.org/wiki/Salt_%28cryptography%29 // http://en.wikipedia.org/wiki/Brute-force_attack // http://en.wikipedia.org/wiki/Rainbow_table $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); // This hashes the password with the salt so that it can be stored securely // in your database. The output of this next statement is a 64 byte hex // string representing the 32 byte sha256 hash of the password. The original // password cannot be recovered from the hash. For more information: // http://en.wikipedia.org/wiki/Cryptographic_hash_function $password = hash('sha256', $_POST['password'] . $salt); // Next we hash the hash value 65536 more times. The purpose of this is to // protect against brute force attacks. Now an attacker must compute the hash 65537 // times for each guess they make against a password, whereas if the password // were hashed only once the attacker would have been able to make 65537 different // guesses in the same amount of time instead of only one. for($round = 0; $round < 65536; $round++) { $password = hash('sha256', $password . $salt); } // Here we prepare our tokens for insertion into the SQL query. We do not // store the original password; only the hashed version of it. We do store // the salt (in its plaintext form; this is not a security risk). $query_params = array( ':username' => $_POST['username'], ':password' => $password, ':salt' => $salt, ':email' => $_POST['email'] ); try { // Execute the query to create the user $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { // Note: On a production website, you should not output $ex->getMessage(). // It may provide an attacker with helpful information about your code. die(""Failed to run query: "" . $ex->getMessage()); } // This redirects the user back to the login page after they register header(""Location: login.php""); // Calling die or exit after performing a redirect using the header function // is critical. The rest of your PHP script will continue to execute and // will be sent to the user if you do not die or exit. die(""Redirecting to login.php""); } ?>"
"382","bad","<?php // First we execute our common code to connection to the database and start the session require(""common.php""); // This if statement checks to determine whether the registration form has been submitted // If it has, then the registration code is run, otherwise the form is displayed if(!empty($_POST)) { // Ensure that the user has entered a non-empty username if(empty($_POST['username'])) { // Note that die() is generally a terrible way of handling user errors // like this. It is much better to display the error with the form // and allow the user to correct their mistake. However, that is an // exercise for you to implement yourself. $username_error = ""Please enter a username""; } // Ensure that the user has entered a non-empty password if(empty($_POST['password'])) { $password_error = ""Please enter a password""; } // Make sure the user entered a valid E-Mail address // filter_var is a useful PHP function for validating form input, see: // http://us.php.net/manual/en/function.filter-var.php // http://us.php.net/manual/en/filter.filters.php if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) { $invalid_email = ""Invalid email""; } // We will use this SQL query to see whether the username entered by the // user is already in use. A SELECT query is used to retrieve data from the database. // :username is a special token, we will substitute a real value in its place when // we execute the query. $query = "" SELECT 1 FROM users WHERE username = :username ""; // This contains the definitions for any special tokens that we place in // our SQL query. In this case, we are defining a value for the token // :username. It is possible to insert $_POST['username'] directly into // your $query string; however doing so is very insecure and opens your // code up to SQL injection exploits. Using tokens prevents this. // For more information on SQL injections, see Wikipedia: // http://en.wikipedia.org/wiki/SQL_Injection $query_params = array( ':username' => $_POST['username'] ); try { // These two statements run the query against your database table. $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { // Note: On a production website, you should not output $ex->getMessage(). // It may provide an attacker with helpful information about your code. die(""Failed to run query: "" . $ex->getMessage()); } // The fetch() method returns an array representing the ""next"" row from // the selected results, or false if there are no more rows to fetch. $row = $stmt->fetch(); // If a row was returned, then we know a matching username was found in // the database already and we should not allow the user to continue. if($row) { $username_exist = ""This username already exists!""; } // Now we perform the same type of check for the email address, in order // to ensure that it is unique. $query = "" SELECT 1 FROM users WHERE email = :email ""; $query_params = array( ':email' => $_POST['email'] ); try { $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { die(""Failed to run query: "" . $ex->getMessage()); } $row = $stmt->fetch(); if($row) { $email_registered = ""This email is already registered!""; } // An INSERT query is used to add new rows to a database table. // Again, we are using special tokens (technically called parameters) to // protect against SQL injection attacks. $query = "" INSERT INTO users ( username, password, salt, email ) VALUES ( :username, :password, :salt, :email ) ""; // A salt is randomly generated here to protect again brute force attacks // and rainbow table attacks. The following statement generates a hex // representation of an 8 byte salt. Representing this in hex provides // no additional security, but makes it easier for humans to read. // For more information: // http://en.wikipedia.org/wiki/Salt_%28cryptography%29 // http://en.wikipedia.org/wiki/Brute-force_attack // http://en.wikipedia.org/wiki/Rainbow_table $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); // This hashes the password with the salt so that it can be stored securely // in your database. The output of this next statement is a 64 byte hex // string representing the 32 byte sha256 hash of the password. The original // password cannot be recovered from the hash. For more information: // http://en.wikipedia.org/wiki/Cryptographic_hash_function $password = hash('sha256', $_POST['password'] . $salt); // Next we hash the hash value 65536 more times. The purpose of this is to // protect against brute force attacks. Now an attacker must compute the hash 65537 // times for each guess they make against a password, whereas if the password // were hashed only once the attacker would have been able to make 65537 different // guesses in the same amount of time instead of only one. for($round = 0; $round < 65536; $round++) { $password = hash('sha256', $password . $salt); } // Here we prepare our tokens for insertion into the SQL query. We do not // store the original password; only the hashed version of it. We do store // the salt (in its plaintext form; this is not a security risk). $query_params = array( ':username' => $_POST['username'], ':password' => $password, ':salt' => $salt, ':email' => $_POST['email'] ); try { // Execute the query to create the user $stmt = $db->prepare($query); $result = $stmt->execute($query_params); } catch(PDOException $ex) { // Note: On a production website, you should not output $ex->getMessage(). // It may provide an attacker with helpful information about your code. die(""Failed to run query: "" . $ex->getMessage()); } // This redirects the user back to the login page after they register header(""Location: login.php""); // Calling die or exit after performing a redirect using the header function // is critical. The rest of your PHP script will continue to execute and // will be sent to the user if you do not die or exit. die(""Redirecting to login.php""); } ?>"
"383","bad","<script> $('#addcontact').submit(function(event) { event.preventDefault(); $.ajax({ type: 'POST', url: 'add_contact_process.php', data: $(this).serialize(), dataType: 'json', success: function (data) { $('#success').html(''); $.each( data, function( key, value ) { if(key !== 'error') { $('#success').append('<p>'+value+'</p>'); } }); if( ! data.error) { $('#hide').hide(); setTimeout(function () { $('input[type=submit]').attr('disabled', false); window.location.href = ""../index.php""; //window.location.href = ""../index.php?redcdid=<?php echo $cdid; ?>""; // need something like above }, 5000); } } }); }); </script><?php ob_start(); @session_start(); require_once(""../config.php""); $company_name = ucfirst($_POST['company_name']); $family_name = ucfirst($_POST['family_name']); $msg = array(); $msg['error'] = false; if(empty($company_name)){ $msg[] = ""<font color='red'>Company name required. </font>""; $msg['error'] = true; } if(empty($family_name)){ $msg[] = ""<font color='red'>Family name required. </font>""; $msg['error'] = true; } if($msg['error'] === false){ $query_2 = ""INSERT INTO contact_details (cdid, family_name, given_name, work_phone, mobile_phone, email, email_private, user_id, created_date, cid) VALUES('', '$family_name', '$given_name', '$work_phone', '$mobile_phone', '$email', '$email_private', '$user_id', '$date', '$cid')""; $query_2 = mysql_query($query_2); $last_id = mysql_insert_id(); if($query_2){ $msg[] = '<font color=""green""><strong>Successfully added a new contact</strong>. </font>'; $another = ""close""; } else{ $msg[] = '<font color=""red"">Sorry we can not add a new contact details. </font>'; $msg[] .= mysql_error(); $another = ""close""; } } echo json_encode($msg); ?>if($query_2){ $msg[] = '<font color=""green""><strong>Successfully added a new contact</strong>. </font>'; $msg['last_id'] = $last_id; }if( ! data.error) { $('#hide').hide(); setTimeout(function () { $('input[type=submit]').attr('disabled', false); var last_id = data.last_id; window.location.href = ""../index.php?redcdid=last_id""; }, 5000); }"
"384","bad","C_priceI_typea_typeID=1,A_type=line,I_type=Head,cost=5$E_C; $T_cost = ""1""; $date = date(""d.m.y""); $name = $_POST[""from""]; $email = $_POST[""email""]; $ref = $_POST[""link""]; $i_type = $_POST[""i_type""]; $a_type = $_POST[""a_type""]; $extra = $_POST[""extra""]; $des = $_POST[""description""]; $BG = $_POST[""BG""]; $bg_type = $_POST[""BGtype""]; $msg = $_POST[""message""]; $auto_reply = (""thanks for the email we will get back to you as soon as we can about the cost and how you can pay""); $msg = wordwrap($msg, 70); $host = ""localhost"";// hostname $USER = ""root"";// username $PASS = ""Password"";// password $DBNAME = ""andrea"";// databace name $tbl_name = ""c_price"";// table name $con = mysqli_connect(""localhost"", $USER, $PASS, $DBNAME)or die(""mySQL server connection failed""); $all = ""SELECT cost FROM C_price WHERE a_type=$a_type,i_type=$i_type""; $result = mysqli_query($con,$all) or die(""Error getting total storse""); while($row = mysqli_fetch_array($result)) { echo $row['cost']; } if ($a_type = 'waist' && $extra='Y') { $E_C = $cost * .3; } elseif ($a_type = 'knee' && $extra='Y') { $E_C = $cost * .35; } elseif ($a_type ='full' && $extra='Y') { $E_C = $cost * .4; } else { $E_C = 0; } $T_cost = $cost + $E_C; if ($BG = 'y') { $T_cost = $T_cost + 10; }"
"385","bad","C_priceI_typea_typeID=1,A_type=line,I_type=Head,cost=5$E_C; $T_cost = ""1""; $date = date(""d.m.y""); $name = $_POST[""from""]; $email = $_POST[""email""]; $ref = $_POST[""link""]; $i_type = $_POST[""i_type""]; $a_type = $_POST[""a_type""]; $extra = $_POST[""extra""]; $des = $_POST[""description""]; $BG = $_POST[""BG""]; $bg_type = $_POST[""BGtype""]; $msg = $_POST[""message""]; $auto_reply = (""thanks for the email we will get back to you as soon as we can about the cost and how you can pay""); $msg = wordwrap($msg, 70); $host = ""localhost"";// hostname $USER = ""root"";// username $PASS = ""Password"";// password $DBNAME = ""andrea"";// databace name $tbl_name = ""c_price"";// table name $con = mysqli_connect(""localhost"", $USER, $PASS, $DBNAME)or die(""mySQL server connection failed""); $all = ""SELECT cost FROM C_price WHERE a_type=$a_type,i_type=$i_type""; $result = mysqli_query($con,$all) or die(""Error getting total storse""); while($row = mysqli_fetch_array($result)) { echo $row['cost']; } if ($a_type = 'waist' && $extra='Y') { $E_C = $cost * .3; } elseif ($a_type = 'knee' && $extra='Y') { $E_C = $cost * .35; } elseif ($a_type ='full' && $extra='Y') { $E_C = $cost * .4; } else { $E_C = 0; } $T_cost = $cost + $E_C; if ($BG = 'y') { $T_cost = $T_cost + 10; }"
"386","bad","C_priceI_typea_typeID=1,A_type=line,I_type=Head,cost=5$E_C; $T_cost = ""1""; $date = date(""d.m.y""); $name = $_POST[""from""]; $email = $_POST[""email""]; $ref = $_POST[""link""]; $i_type = $_POST[""i_type""]; $a_type = $_POST[""a_type""]; $extra = $_POST[""extra""]; $des = $_POST[""description""]; $BG = $_POST[""BG""]; $bg_type = $_POST[""BGtype""]; $msg = $_POST[""message""]; $auto_reply = (""thanks for the email we will get back to you as soon as we can about the cost and how you can pay""); $msg = wordwrap($msg, 70); $host = ""localhost"";// hostname $USER = ""root"";// username $PASS = ""Password"";// password $DBNAME = ""andrea"";// databace name $tbl_name = ""c_price"";// table name $con = mysqli_connect(""localhost"", $USER, $PASS, $DBNAME)or die(""mySQL server connection failed""); $all = ""SELECT cost FROM C_price WHERE a_type=$a_type,i_type=$i_type""; $result = mysqli_query($con,$all) or die(""Error getting total storse""); while($row = mysqli_fetch_array($result)) { echo $row['cost']; } if ($a_type = 'waist' && $extra='Y') { $E_C = $cost * .3; } elseif ($a_type = 'knee' && $extra='Y') { $E_C = $cost * .35; } elseif ($a_type ='full' && $extra='Y') { $E_C = $cost * .4; } else { $E_C = 0; } $T_cost = $cost + $E_C; if ($BG = 'y') { $T_cost = $T_cost + 10; }"
"387","bad","define('DB_SERVER', 'localhost'); define ('DB_USERNAME', 'ashish'); define ('DB_PASSWORD', 'ashish33'); define ('DB_DATABASE', 'users'); class DB_Class { function __construct() { $connection = mysqli_connect(""localhost"", ""root"", """",""test""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } }}class user { public $fname; public $lname; public $fullname; public function __construct() { $this->fname = $fname; $this->lname = $lname; $this->fullname = $fullname; $db = new DB_Class(); $result = mysqli_query($db, ""INSERT INTO users(fname, lname, fullname) values ('$this->fname', '$this->lname','$this->fullname')"") or die(mysqli_error()); return $result; } }$userTest = new user(); $userTest->fname = $_POST['fname']; $userTest->lname = $_POST['lname']; $userTest->fullname = $_POST['fullname']; ?>"
"388","bad","define('DB_SERVER', 'localhost'); define ('DB_USERNAME', 'ashish'); define ('DB_PASSWORD', 'ashish33'); define ('DB_DATABASE', 'users'); class DB_Class { function __construct() { $connection = mysqli_connect(""localhost"", ""root"", """",""test""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } }}class user { public $fname; public $lname; public $fullname; public function __construct() { $this->fname = $fname; $this->lname = $lname; $this->fullname = $fullname; $db = new DB_Class(); $result = mysqli_query($db, ""INSERT INTO users(fname, lname, fullname) values ('$this->fname', '$this->lname','$this->fullname')"") or die(mysqli_error()); return $result; } }$userTest = new user(); $userTest->fname = $_POST['fname']; $userTest->lname = $_POST['lname']; $userTest->fullname = $_POST['fullname']; ?>"
"389","bad","$title// To store the values to insert into the database tables. $cid = 0; // Primary key. $dates = array(); $number = array(); $title = array(""aaa"", ""bbb"", ""ccc""); $description = array(); // For connecting to database. $user = 'root'; $pass = ''; $db = 'contractsdb'; // Assign HTML file contents to $content. $content = file_get_contents('C:\xampp\htdocs\HTMLParser/tester.html'); // Load HTML page into Document Object Model for parsing HTML. $dom = new DOMDocument; $dom->loadHTML($content); // Connect to DB and check connection. $con=mysqli_connect(""localhost"", ""$user"", ""$pass"", ""$db""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } // Insert the values into the database contracts table. foreach ($dom->getElementsByTagName('a') as $link) { $sql = ""INSERT INTO contracts (CID, TITLE) VALUES ('$cid', '$title[$cid]')""; echo ""1 record added<BR>""; $cid++; } // Error message if fail. if (!mysqli_query($con, $sql)) { die('Error: ' . mysqli_error($con)); } // Close connection to database. mysqli_close($con);foreach"
"390","good","$title// To store the values to insert into the database tables. $cid = 0; // Primary key. $dates = array(); $number = array(); $title = array(""aaa"", ""bbb"", ""ccc""); $description = array(); // For connecting to database. $user = 'root'; $pass = ''; $db = 'contractsdb'; // Assign HTML file contents to $content. $content = file_get_contents('C:\xampp\htdocs\HTMLParser/tester.html'); // Load HTML page into Document Object Model for parsing HTML. $dom = new DOMDocument; $dom->loadHTML($content); // Connect to DB and check connection. $con=mysqli_connect(""localhost"", ""$user"", ""$pass"", ""$db""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } // Insert the values into the database contracts table. foreach ($dom->getElementsByTagName('a') as $link) { $sql = ""INSERT INTO contracts (CID, TITLE) VALUES ('$cid', '$title[$cid]')""; echo ""1 record added<BR>""; $cid++; } // Error message if fail. if (!mysqli_query($con, $sql)) { die('Error: ' . mysqli_error($con)); } // Close connection to database. mysqli_close($con);foreach"
"391","bad","$title// To store the values to insert into the database tables. $cid = 0; // Primary key. $dates = array(); $number = array(); $title = array(""aaa"", ""bbb"", ""ccc""); $description = array(); // For connecting to database. $user = 'root'; $pass = ''; $db = 'contractsdb'; // Assign HTML file contents to $content. $content = file_get_contents('C:\xampp\htdocs\HTMLParser/tester.html'); // Load HTML page into Document Object Model for parsing HTML. $dom = new DOMDocument; $dom->loadHTML($content); // Connect to DB and check connection. $con=mysqli_connect(""localhost"", ""$user"", ""$pass"", ""$db""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } // Insert the values into the database contracts table. foreach ($dom->getElementsByTagName('a') as $link) { $sql = ""INSERT INTO contracts (CID, TITLE) VALUES ('$cid', '$title[$cid]')""; echo ""1 record added<BR>""; $cid++; } // Error message if fail. if (!mysqli_query($con, $sql)) { die('Error: ' . mysqli_error($con)); } // Close connection to database. mysqli_close($con);foreach"
"392","bad","$title// To store the values to insert into the database tables. $cid = 0; // Primary key. $dates = array(); $number = array(); $title = array(""aaa"", ""bbb"", ""ccc""); $description = array(); // For connecting to database. $user = 'root'; $pass = ''; $db = 'contractsdb'; // Assign HTML file contents to $content. $content = file_get_contents('C:\xampp\htdocs\HTMLParser/tester.html'); // Load HTML page into Document Object Model for parsing HTML. $dom = new DOMDocument; $dom->loadHTML($content); // Connect to DB and check connection. $con=mysqli_connect(""localhost"", ""$user"", ""$pass"", ""$db""); if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } // Insert the values into the database contracts table. foreach ($dom->getElementsByTagName('a') as $link) { $sql = ""INSERT INTO contracts (CID, TITLE) VALUES ('$cid', '$title[$cid]')""; echo ""1 record added<BR>""; $cid++; } // Error message if fail. if (!mysqli_query($con, $sql)) { die('Error: ' . mysqli_error($con)); } // Close connection to database. mysqli_close($con);foreach"
"393","bad","$maker = ""SELECT vidMaker FROM videoinformation""; if ($result = mysqli_query($con, $maker)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""makerImg\"" src=\""addVid/maker/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } <!DOCTYPE html> <head> </head> <body> <?php> . . . . . . . . . . . . BLOCKONE . . . . . . . . . . . ?> </body> </html><!DOCTYPE html> <head> <meta http-equiv=""content-type"" content=""text/html; charset=utf-8""> <?php include 'BSH.php' ?> <link rel=""stylesheet"" type=""text/css"" href=""CSS/ldvid.css""> <script type=""text/javascript"" src=""java/FWDUVPlayer.js""></script> <!-- Setup video player--> <script type=""text/javascript""> <?php include 'video/settings.php'; ?> </script> </head> <body> <?php include_once 'userPages/check_login_status.php';?> <?php include_once 'incIndex/headerTop.php'; ?> <?php include_once 'incIndex/footer.php'; ?> <?php // here we get the incomming video id (videoinfo.php?id=123) $video_id = $_GET['id']; // build a database query to select the videoInformation // here we use WHERE to select the video_id we want $query = 'SELECT newsvid.id, videoinformation.id, videomain.id, newsvid.vidTitle, newsvid.imgCover, videoinformation.vidLD, videoinformation.vidYear, videoinformation.vidCity, videoinformation.vidZanr, videoinformation.vidZanr2,videoinformation.vidZanr3,videoinformation.vidQuality, videoinformation.vidTranslated, videoinformation.vidMaker, videoinformation.vidRoles, videoinformation.vidTime, videoinformation.imgShot1, videoinformation.imgShot2, videoinformation.imgShot3, videomain.vidMUrl FROM newsvid, videomain, videoinformation WHERE newsvid.id = videoinformation.id AND newsvid.id = videomain.id AND newsvid.id = '. $video_id ; // lets connect and do the query include 'connect/con.php'; $result = mysqli_query($con, $query); echo ""<div class=\""ldCover\"">""; while($row = mysqli_fetch_array($result)) { echo ""<div class=\""panel panel-default\""><div class=\""panel-heading\"">""; echo ""<div><strong><h3>"" . $row['id']. "" | "" . $row['vidTitle'] . ""</h3></strong></div>""; echo ""</div><div class=\""panel-body\"">""; echo ""<div class=\""imgCover\""><img style=\""width:200; height:320px\"" class=\""img-thumbnail\""src=\""upload/videoCover/"" . $row['imgCover'] . ""\""></div>""; echo ""<div class=\""vidLD\""> <table> <tr><td class=\""tdBR\""><strong> Years: </strong></td><td >"" . $row['vidYear'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> City: </strong></td><td >"". $row['vidCity'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Zanr: </strong></td><td >"". $row['vidZanr'] ."" , "". $row['vidZanr2'] ."" , "". $row['vidZanr3'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Quality: </strong></td><td >"". $row['vidQuality'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Translated: </strong></td><td >"". $row['vidTranslated'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Video time: </strong></td><td >"". $row['vidTime'] . ""</td></tr> </table>"" . $row['vidLD'] . ""</div></div>""; echo ""<div class=\""panel-body\"" style=\""border-top: 1px solid; border-bottom: 1px solid; border-color:#ddd\""><div class=\""vidDesc\""> </div>""; echo ""<div class=\""vidMR\""> <div><strong> Maker: </strong>"" . $row['vidMaker'] . ""</div><div>""; $maker = ""SELECT vidMaker FROM videoinformation WHERE id="".$row['id']; if ($result = mysqli_query($con, $maker)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""makerImg img-circle\"" src=\""addVid/maker/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } echo""</div><div><strong> Roles: </strong>"". $row['vidRoles'] . ""</div> <div><table>""; $role = ""SELECT vidRoles FROM videoinformation WHERE id="".$row['id']; if ($result = mysqli_query($con, $role)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""roleImg img-circle\"" src=\""addVid/roles/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } echo ""</table></div></div></div>""; echo""<div class=\""panel-body\""><div class=\""screenshots\"">""; echo ""<div class=\""imgShot1\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot1'] . ""\""></div>""; echo ""<div class=\""imgShot2\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot2'] . ""\""></div>""; echo ""<div class=\""imgShot3\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot3'] . ""\""></div>""; echo""</div>""; echo ""</div><div class=\""panel-footer\"">""; echo ""<div class=\""vidMUrl\""> <div id=\""myDiv\""></div> <ul id=\""playlists\"" style=\""display:none;\""> <li data-source=\""playlist1\"" data-playlist-name=\""MY HTML PLAYLIST\"" data-thumbnail-path=\""content/thumbnails/large1.jpg\""> </li></ul> <ul id=\""playlist1\"" style=\""display:none;\""> <li data-thumb-source=\""content/thumbnails/small-fwd.jpg\"" data-video-source=\"""". $row['vidMUrl'] . ""\"" data-poster-source=\""upload/videoCover/"" . $row['imgCover'] . ""\"" data-downloadable=\""yes\""> </li></ul> </div>""; echo ""</div></div></div>""; } mysqli_close($con); ?> </body> </html>"
"394","bad","$maker = ""SELECT vidMaker FROM videoinformation""; if ($result = mysqli_query($con, $maker)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""makerImg\"" src=\""addVid/maker/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } <!DOCTYPE html> <head> </head> <body> <?php> . . . . . . . . . . . . BLOCKONE . . . . . . . . . . . ?> </body> </html><!DOCTYPE html> <head> <meta http-equiv=""content-type"" content=""text/html; charset=utf-8""> <?php include 'BSH.php' ?> <link rel=""stylesheet"" type=""text/css"" href=""CSS/ldvid.css""> <script type=""text/javascript"" src=""java/FWDUVPlayer.js""></script> <!-- Setup video player--> <script type=""text/javascript""> <?php include 'video/settings.php'; ?> </script> </head> <body> <?php include_once 'userPages/check_login_status.php';?> <?php include_once 'incIndex/headerTop.php'; ?> <?php include_once 'incIndex/footer.php'; ?> <?php // here we get the incomming video id (videoinfo.php?id=123) $video_id = $_GET['id']; // build a database query to select the videoInformation // here we use WHERE to select the video_id we want $query = 'SELECT newsvid.id, videoinformation.id, videomain.id, newsvid.vidTitle, newsvid.imgCover, videoinformation.vidLD, videoinformation.vidYear, videoinformation.vidCity, videoinformation.vidZanr, videoinformation.vidZanr2,videoinformation.vidZanr3,videoinformation.vidQuality, videoinformation.vidTranslated, videoinformation.vidMaker, videoinformation.vidRoles, videoinformation.vidTime, videoinformation.imgShot1, videoinformation.imgShot2, videoinformation.imgShot3, videomain.vidMUrl FROM newsvid, videomain, videoinformation WHERE newsvid.id = videoinformation.id AND newsvid.id = videomain.id AND newsvid.id = '. $video_id ; // lets connect and do the query include 'connect/con.php'; $result = mysqli_query($con, $query); echo ""<div class=\""ldCover\"">""; while($row = mysqli_fetch_array($result)) { echo ""<div class=\""panel panel-default\""><div class=\""panel-heading\"">""; echo ""<div><strong><h3>"" . $row['id']. "" | "" . $row['vidTitle'] . ""</h3></strong></div>""; echo ""</div><div class=\""panel-body\"">""; echo ""<div class=\""imgCover\""><img style=\""width:200; height:320px\"" class=\""img-thumbnail\""src=\""upload/videoCover/"" . $row['imgCover'] . ""\""></div>""; echo ""<div class=\""vidLD\""> <table> <tr><td class=\""tdBR\""><strong> Years: </strong></td><td >"" . $row['vidYear'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> City: </strong></td><td >"". $row['vidCity'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Zanr: </strong></td><td >"". $row['vidZanr'] ."" , "". $row['vidZanr2'] ."" , "". $row['vidZanr3'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Quality: </strong></td><td >"". $row['vidQuality'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Translated: </strong></td><td >"". $row['vidTranslated'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Video time: </strong></td><td >"". $row['vidTime'] . ""</td></tr> </table>"" . $row['vidLD'] . ""</div></div>""; echo ""<div class=\""panel-body\"" style=\""border-top: 1px solid; border-bottom: 1px solid; border-color:#ddd\""><div class=\""vidDesc\""> </div>""; echo ""<div class=\""vidMR\""> <div><strong> Maker: </strong>"" . $row['vidMaker'] . ""</div><div>""; $maker = ""SELECT vidMaker FROM videoinformation WHERE id="".$row['id']; if ($result = mysqli_query($con, $maker)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""makerImg img-circle\"" src=\""addVid/maker/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } echo""</div><div><strong> Roles: </strong>"". $row['vidRoles'] . ""</div> <div><table>""; $role = ""SELECT vidRoles FROM videoinformation WHERE id="".$row['id']; if ($result = mysqli_query($con, $role)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""roleImg img-circle\"" src=\""addVid/roles/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } echo ""</table></div></div></div>""; echo""<div class=\""panel-body\""><div class=\""screenshots\"">""; echo ""<div class=\""imgShot1\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot1'] . ""\""></div>""; echo ""<div class=\""imgShot2\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot2'] . ""\""></div>""; echo ""<div class=\""imgShot3\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot3'] . ""\""></div>""; echo""</div>""; echo ""</div><div class=\""panel-footer\"">""; echo ""<div class=\""vidMUrl\""> <div id=\""myDiv\""></div> <ul id=\""playlists\"" style=\""display:none;\""> <li data-source=\""playlist1\"" data-playlist-name=\""MY HTML PLAYLIST\"" data-thumbnail-path=\""content/thumbnails/large1.jpg\""> </li></ul> <ul id=\""playlist1\"" style=\""display:none;\""> <li data-thumb-source=\""content/thumbnails/small-fwd.jpg\"" data-video-source=\"""". $row['vidMUrl'] . ""\"" data-poster-source=\""upload/videoCover/"" . $row['imgCover'] . ""\"" data-downloadable=\""yes\""> </li></ul> </div>""; echo ""</div></div></div>""; } mysqli_close($con); ?> </body> </html>"
"395","bad","$maker = ""SELECT vidMaker FROM videoinformation""; if ($result = mysqli_query($con, $maker)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""makerImg\"" src=\""addVid/maker/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } <!DOCTYPE html> <head> </head> <body> <?php> . . . . . . . . . . . . BLOCKONE . . . . . . . . . . . ?> </body> </html><!DOCTYPE html> <head> <meta http-equiv=""content-type"" content=""text/html; charset=utf-8""> <?php include 'BSH.php' ?> <link rel=""stylesheet"" type=""text/css"" href=""CSS/ldvid.css""> <script type=""text/javascript"" src=""java/FWDUVPlayer.js""></script> <!-- Setup video player--> <script type=""text/javascript""> <?php include 'video/settings.php'; ?> </script> </head> <body> <?php include_once 'userPages/check_login_status.php';?> <?php include_once 'incIndex/headerTop.php'; ?> <?php include_once 'incIndex/footer.php'; ?> <?php // here we get the incomming video id (videoinfo.php?id=123) $video_id = $_GET['id']; // build a database query to select the videoInformation // here we use WHERE to select the video_id we want $query = 'SELECT newsvid.id, videoinformation.id, videomain.id, newsvid.vidTitle, newsvid.imgCover, videoinformation.vidLD, videoinformation.vidYear, videoinformation.vidCity, videoinformation.vidZanr, videoinformation.vidZanr2,videoinformation.vidZanr3,videoinformation.vidQuality, videoinformation.vidTranslated, videoinformation.vidMaker, videoinformation.vidRoles, videoinformation.vidTime, videoinformation.imgShot1, videoinformation.imgShot2, videoinformation.imgShot3, videomain.vidMUrl FROM newsvid, videomain, videoinformation WHERE newsvid.id = videoinformation.id AND newsvid.id = videomain.id AND newsvid.id = '. $video_id ; // lets connect and do the query include 'connect/con.php'; $result = mysqli_query($con, $query); echo ""<div class=\""ldCover\"">""; while($row = mysqli_fetch_array($result)) { echo ""<div class=\""panel panel-default\""><div class=\""panel-heading\"">""; echo ""<div><strong><h3>"" . $row['id']. "" | "" . $row['vidTitle'] . ""</h3></strong></div>""; echo ""</div><div class=\""panel-body\"">""; echo ""<div class=\""imgCover\""><img style=\""width:200; height:320px\"" class=\""img-thumbnail\""src=\""upload/videoCover/"" . $row['imgCover'] . ""\""></div>""; echo ""<div class=\""vidLD\""> <table> <tr><td class=\""tdBR\""><strong> Years: </strong></td><td >"" . $row['vidYear'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> City: </strong></td><td >"". $row['vidCity'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Zanr: </strong></td><td >"". $row['vidZanr'] ."" , "". $row['vidZanr2'] ."" , "". $row['vidZanr3'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Quality: </strong></td><td >"". $row['vidQuality'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Translated: </strong></td><td >"". $row['vidTranslated'] . ""</td></tr> <tr><td class=\""tdBR\""><strong> Video time: </strong></td><td >"". $row['vidTime'] . ""</td></tr> </table>"" . $row['vidLD'] . ""</div></div>""; echo ""<div class=\""panel-body\"" style=\""border-top: 1px solid; border-bottom: 1px solid; border-color:#ddd\""><div class=\""vidDesc\""> </div>""; echo ""<div class=\""vidMR\""> <div><strong> Maker: </strong>"" . $row['vidMaker'] . ""</div><div>""; $maker = ""SELECT vidMaker FROM videoinformation WHERE id="".$row['id']; if ($result = mysqli_query($con, $maker)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""makerImg img-circle\"" src=\""addVid/maker/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } echo""</div><div><strong> Roles: </strong>"". $row['vidRoles'] . ""</div> <div><table>""; $role = ""SELECT vidRoles FROM videoinformation WHERE id="".$row['id']; if ($result = mysqli_query($con, $role)) { while ($row = mysqli_fetch_row($result)) { $values = explode(',',$row[0]); foreach($values as $v) if (!empty($v)) { printf (""<img class=\""roleImg img-circle\"" src=\""addVid/roles/%s.jpg\"">"", $v); } } mysqli_free_result($result); } else{ echo""PM administrator with an error""; } echo ""</table></div></div></div>""; echo""<div class=\""panel-body\""><div class=\""screenshots\"">""; echo ""<div class=\""imgShot1\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot1'] . ""\""></div>""; echo ""<div class=\""imgShot2\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot2'] . ""\""></div>""; echo ""<div class=\""imgShot3\""><img style=\""width:245px; height:140px\"" class=\""img-thumbnail\"" src=\""upload/"" . $row['imgShot3'] . ""\""></div>""; echo""</div>""; echo ""</div><div class=\""panel-footer\"">""; echo ""<div class=\""vidMUrl\""> <div id=\""myDiv\""></div> <ul id=\""playlists\"" style=\""display:none;\""> <li data-source=\""playlist1\"" data-playlist-name=\""MY HTML PLAYLIST\"" data-thumbnail-path=\""content/thumbnails/large1.jpg\""> </li></ul> <ul id=\""playlist1\"" style=\""display:none;\""> <li data-thumb-source=\""content/thumbnails/small-fwd.jpg\"" data-video-source=\"""". $row['vidMUrl'] . ""\"" data-poster-source=\""upload/videoCover/"" . $row['imgCover'] . ""\"" data-downloadable=\""yes\""> </li></ul> </div>""; echo ""</div></div></div>""; } mysqli_close($con); ?> </body> </html>"
"396","bad","id""No row found!"";<?php if(isset($_SESSION['word'])) { $word = $_SESSION['word'].""<br>""; echo $word; $query = (""SELECT id FROM customer WHERE mobil = $word""); if (!$query) { die('Invalid query: ' . mysql_error()); } else { $results = mysql_query($query); while ($row = mysql_fetch_assoc($results)) { echo '<pre>', print_r($row), '<pre>'; } if (!$row) { echo ""No row found!""; } } } ?>"
"397","bad","id""No row found!"";<?php if(isset($_SESSION['word'])) { $word = $_SESSION['word'].""<br>""; echo $word; $query = (""SELECT id FROM customer WHERE mobil = $word""); if (!$query) { die('Invalid query: ' . mysql_error()); } else { $results = mysql_query($query); while ($row = mysql_fetch_assoc($results)) { echo '<pre>', print_r($row), '<pre>'; } if (!$row) { echo ""No row found!""; } } } ?>"
"398","bad","id""No row found!"";<?php if(isset($_SESSION['word'])) { $word = $_SESSION['word'].""<br>""; echo $word; $query = (""SELECT id FROM customer WHERE mobil = $word""); if (!$query) { die('Invalid query: ' . mysql_error()); } else { $results = mysql_query($query); while ($row = mysql_fetch_assoc($results)) { echo '<pre>', print_r($row), '<pre>'; } if (!$row) { echo ""No row found!""; } } } ?>"
"399","bad","require_once('connect.php'); if (isset($_POST['add_product'])): $product_description=$_POST['product_description']; $price=$_POST['price']; $reorder_level=$_POST['reorder_level']; $current_level=$_POST['current_level']; $imagename = $_FILES['image']['name']; $add_this = ""products/$imagename""; move_uploaded_file($_FILES['image']['tmp_name'],$add_this); $my_query=""INSERT INTO products VALUES ('','$product_description','$price','$reorder_level','$current_level', '$imagename')""; $result= mysqli_query($connection, $my_query); if ($result): echo ""<b>Item Successfully Added!</b>""; echo ""File ""; echo $_FILES['image']['name']; echo "" was uploaded - ""; echo $_FILES['image']['size']; echo "" bytes in size<br>Temporary name: ""; echo $_FILES['image']['tmp_name']; echo "" - file type: ""; echo $_FILES['image']['type']; else: echo ""<b>ERROR: unable to post.</b>""; endif; endif; require_once 'header1.php'; ?> <H1>Add a New Product</H1> <table> <form method=post action=""addproduct.php"" enctype=""multipart/form-data""> <tr><td><b>Product Description:</b><td><input type=""text"" name=""product_description"" size=""30""> <tr><td><b>Price:</b><td><input type=""text"" name=""price""> <tr><td><b>Re Order Level:</b><td><input type=""text"" name=""reorder_level""> <tr><td><b>Stock Level:</b><td><input type=""text"" name=""current_level""> <tr><td><b>Add Image:</b><td><input type=""file"" name=""image""> <tr><td><input type=""submit"" name=""add_product"" > </form> </table> </body>"
"400","bad","require_once('connect.php'); if (isset($_POST['add_product'])): $product_description=$_POST['product_description']; $price=$_POST['price']; $reorder_level=$_POST['reorder_level']; $current_level=$_POST['current_level']; $imagename = $_FILES['image']['name']; $add_this = ""products/$imagename""; move_uploaded_file($_FILES['image']['tmp_name'],$add_this); $my_query=""INSERT INTO products VALUES ('','$product_description','$price','$reorder_level','$current_level', '$imagename')""; $result= mysqli_query($connection, $my_query); if ($result): echo ""<b>Item Successfully Added!</b>""; echo ""File ""; echo $_FILES['image']['name']; echo "" was uploaded - ""; echo $_FILES['image']['size']; echo "" bytes in size<br>Temporary name: ""; echo $_FILES['image']['tmp_name']; echo "" - file type: ""; echo $_FILES['image']['type']; else: echo ""<b>ERROR: unable to post.</b>""; endif; endif; require_once 'header1.php'; ?> <H1>Add a New Product</H1> <table> <form method=post action=""addproduct.php"" enctype=""multipart/form-data""> <tr><td><b>Product Description:</b><td><input type=""text"" name=""product_description"" size=""30""> <tr><td><b>Price:</b><td><input type=""text"" name=""price""> <tr><td><b>Re Order Level:</b><td><input type=""text"" name=""reorder_level""> <tr><td><b>Stock Level:</b><td><input type=""text"" name=""current_level""> <tr><td><b>Add Image:</b><td><input type=""file"" name=""image""> <tr><td><input type=""submit"" name=""add_product"" > </form> </table> </body>"
"401","bad","require_once('connect.php'); if (isset($_POST['add_product'])): $product_description=$_POST['product_description']; $price=$_POST['price']; $reorder_level=$_POST['reorder_level']; $current_level=$_POST['current_level']; $imagename = $_FILES['image']['name']; $add_this = ""products/$imagename""; move_uploaded_file($_FILES['image']['tmp_name'],$add_this); $my_query=""INSERT INTO products VALUES ('','$product_description','$price','$reorder_level','$current_level', '$imagename')""; $result= mysqli_query($connection, $my_query); if ($result): echo ""<b>Item Successfully Added!</b>""; echo ""File ""; echo $_FILES['image']['name']; echo "" was uploaded - ""; echo $_FILES['image']['size']; echo "" bytes in size<br>Temporary name: ""; echo $_FILES['image']['tmp_name']; echo "" - file type: ""; echo $_FILES['image']['type']; else: echo ""<b>ERROR: unable to post.</b>""; endif; endif; require_once 'header1.php'; ?> <H1>Add a New Product</H1> <table> <form method=post action=""addproduct.php"" enctype=""multipart/form-data""> <tr><td><b>Product Description:</b><td><input type=""text"" name=""product_description"" size=""30""> <tr><td><b>Price:</b><td><input type=""text"" name=""price""> <tr><td><b>Re Order Level:</b><td><input type=""text"" name=""reorder_level""> <tr><td><b>Stock Level:</b><td><input type=""text"" name=""current_level""> <tr><td><b>Add Image:</b><td><input type=""file"" name=""image""> <tr><td><input type=""submit"" name=""add_product"" > </form> </table> </body>"
"402","bad","<form action=""search.php"" method=""GET""> <input type=""text"" placeholder=""Search"" name=""name""> <input type=""submit"" value=""Search""><?php name = $_GET['name']; require_once(""connect.php""); $records = $connect->query(""SELECT * FROM Userlists WHERE Name = '$name'""); echo ""<table> <thead> <tr> <th>Name</th> <th>Email</th> <th>Description</th> </tr> </thead> <tbody>""; if (mysqli_num_rows($records)== 0){ echo ""No data available for that name specified""; } else { while($row=mysqli_fetch_array($records)) { $name = $row['Name']; $email = $row['Email']; $desc = $row['Desc']; echo ""<tr> <td>"".$name.""</td> <td>"".$email.""</td> <td>"".$desc.""</td> </tr>""; } } echo ""</tbody> </table>""; ?>""No data available for that name specified"""
"403","bad","<form action=""search.php"" method=""GET""> <input type=""text"" placeholder=""Search"" name=""name""> <input type=""submit"" value=""Search""><?php name = $_GET['name']; require_once(""connect.php""); $records = $connect->query(""SELECT * FROM Userlists WHERE Name = '$name'""); echo ""<table> <thead> <tr> <th>Name</th> <th>Email</th> <th>Description</th> </tr> </thead> <tbody>""; if (mysqli_num_rows($records)== 0){ echo ""No data available for that name specified""; } else { while($row=mysqli_fetch_array($records)) { $name = $row['Name']; $email = $row['Email']; $desc = $row['Desc']; echo ""<tr> <td>"".$name.""</td> <td>"".$email.""</td> <td>"".$desc.""</td> </tr>""; } } echo ""</tbody> </table>""; ?>""No data available for that name specified"""
"404","bad","<form action=""search.php"" method=""GET""> <input type=""text"" placeholder=""Search"" name=""name""> <input type=""submit"" value=""Search""><?php name = $_GET['name']; require_once(""connect.php""); $records = $connect->query(""SELECT * FROM Userlists WHERE Name = '$name'""); echo ""<table> <thead> <tr> <th>Name</th> <th>Email</th> <th>Description</th> </tr> </thead> <tbody>""; if (mysqli_num_rows($records)== 0){ echo ""No data available for that name specified""; } else { while($row=mysqli_fetch_array($records)) { $name = $row['Name']; $email = $row['Email']; $desc = $row['Desc']; echo ""<tr> <td>"".$name.""</td> <td>"".$email.""</td> <td>"".$desc.""</td> </tr>""; } } echo ""</tbody> </table>""; ?>""No data available for that name specified"""
"405","bad","<input type ='text'placeholder='Username' name=""username"" id=""username"" > $(""#listener-register"").validate({ rules: { username: { required: true, remote: ""http://... /check_username.php"" }, ....if(isset($_POST[""username""])) { $con = new mysqli(...); //received username value from registration page $username = $mysqli->real_escape_string ($_POST[""username""]); //check username in db $results = mysqli_query($con,""SELECT * FROM ... WHERE username='$username'""); $username_exist = mysqli_num_rows($results); //records count //if returned value is more than 0, username is not available if($username_exist) { die('Username Not Available, Please Choose Another!'); }else{ die('Username Is Available'); } }"
"406","bad","<input type ='text'placeholder='Username' name=""username"" id=""username"" > $(""#listener-register"").validate({ rules: { username: { required: true, remote: ""http://... /check_username.php"" }, ....if(isset($_POST[""username""])) { $con = new mysqli(...); //received username value from registration page $username = $mysqli->real_escape_string ($_POST[""username""]); //check username in db $results = mysqli_query($con,""SELECT * FROM ... WHERE username='$username'""); $username_exist = mysqli_num_rows($results); //records count //if returned value is more than 0, username is not available if($username_exist) { die('Username Not Available, Please Choose Another!'); }else{ die('Username Is Available'); } }"
"407","bad","<input type ='text'placeholder='Username' name=""username"" id=""username"" > $(""#listener-register"").validate({ rules: { username: { required: true, remote: ""http://... /check_username.php"" }, ....if(isset($_POST[""username""])) { $con = new mysqli(...); //received username value from registration page $username = $mysqli->real_escape_string ($_POST[""username""]); //check username in db $results = mysqli_query($con,""SELECT * FROM ... WHERE username='$username'""); $username_exist = mysqli_num_rows($results); //records count //if returned value is more than 0, username is not available if($username_exist) { die('Username Not Available, Please Choose Another!'); }else{ die('Username Is Available'); } }"
"408","bad","Array ( [user_id] => 1 [date] => 2014-12-05 [time] => 12:00 [description] => lol [friends] => ""12"",""9"" [PHPSESSID] => 5ae7c3e6339c528e7804020dd0f0cdbb )u_id | f_id 1 | 12 1 | 9$friendarray = $_POST['Friends']; foreach( $friends as $friendsarray ) { $values[] = ""("" . $u_id . "","" . $friendsarray . "")""; } $query = ""INSERT INTO up2_friends_to_users (u_id , f_id ) VALUES "".implode(',',$values); $stmt = $db->prepare($query); $result = $stmt->execute();$query_params = array( ':u_id' => $_POST['user_id'], ':f_id' => $friendid, $stmt = $db->prepare($query); $result = $stmt->execute($query_params); $friendsarray = explode(',',$_POST['friends']); $placeholders = []; for($i=0, $len=count($friendsarray); $i < $len; $i++) { $placeholders[i] .= ""(:u_id"".$i."", :f_id"".$i."")""; // entries like ""(:u_id0, :f_id0)"" } $query = ""INSERT INTO up2_friends_to_users (u_id , f_id ) VALUES "".implode("","", $placeholders); $stmt = $db->prepare($query); for($i=0, $len=count($placeholders); $i < $len; $i++) { $stmt->bindParam(':u_id'.$i, $_POST['user_id']); $nextFriend = $friendsarray[$i]; $stmt->bindParam(':f_id'.$i,trim($nextFriend,'""')); } $result = $stmt->execute();"
"409","good","Array ( [user_id] => 1 [date] => 2014-12-05 [time] => 12:00 [description] => lol [friends] => ""12"",""9"" [PHPSESSID] => 5ae7c3e6339c528e7804020dd0f0cdbb )u_id | f_id 1 | 12 1 | 9$friendarray = $_POST['Friends']; foreach( $friends as $friendsarray ) { $values[] = ""("" . $u_id . "","" . $friendsarray . "")""; } $query = ""INSERT INTO up2_friends_to_users (u_id , f_id ) VALUES "".implode(',',$values); $stmt = $db->prepare($query); $result = $stmt->execute();$query_params = array( ':u_id' => $_POST['user_id'], ':f_id' => $friendid, $stmt = $db->prepare($query); $result = $stmt->execute($query_params); $friendsarray = explode(',',$_POST['friends']); $placeholders = []; for($i=0, $len=count($friendsarray); $i < $len; $i++) { $placeholders[i] .= ""(:u_id"".$i."", :f_id"".$i."")""; // entries like ""(:u_id0, :f_id0)"" } $query = ""INSERT INTO up2_friends_to_users (u_id , f_id ) VALUES "".implode("","", $placeholders); $stmt = $db->prepare($query); for($i=0, $len=count($placeholders); $i < $len; $i++) { $stmt->bindParam(':u_id'.$i, $_POST['user_id']); $nextFriend = $friendsarray[$i]; $stmt->bindParam(':f_id'.$i,trim($nextFriend,'""')); } $result = $stmt->execute();"
"410","good","foreach ($reponses as $reponse => $valReponse) { var_dump($valReponse); if ($insert_reponses = $this->getConnexion()->prepare('INSERT INTO SD_reponses (reponse_val, question_id) VALUES (?, ?)') or die(mysqli_error($this->getConnexion()))) { $insert_reponses->bind_param(""si"", $valReponse, $question_id); $insert_reponses->execute(); $insert_reponses-> close(); } else { return false; } } return true;array (size=1) 0 => string 'Answer 1 ' (length=9)<br> array (size=1) 0 => string 'Answer 2 ' (length=9)reponse_val"
"411","good","foreach ($reponses as $reponse => $valReponse) { var_dump($valReponse); if ($insert_reponses = $this->getConnexion()->prepare('INSERT INTO SD_reponses (reponse_val, question_id) VALUES (?, ?)') or die(mysqli_error($this->getConnexion()))) { $insert_reponses->bind_param(""si"", $valReponse, $question_id); $insert_reponses->execute(); $insert_reponses-> close(); } else { return false; } } return true;array (size=1) 0 => string 'Answer 1 ' (length=9)<br> array (size=1) 0 => string 'Answer 2 ' (length=9)reponse_val"
"412","good","foreach ($reponses as $reponse => $valReponse) { var_dump($valReponse); if ($insert_reponses = $this->getConnexion()->prepare('INSERT INTO SD_reponses (reponse_val, question_id) VALUES (?, ?)') or die(mysqli_error($this->getConnexion()))) { $insert_reponses->bind_param(""si"", $valReponse, $question_id); $insert_reponses->execute(); $insert_reponses-> close(); } else { return false; } } return true;array (size=1) 0 => string 'Answer 1 ' (length=9)<br> array (size=1) 0 => string 'Answer 2 ' (length=9)reponse_val"
"413","bad","<?php $db_host = ""localhost""; $db_user = ""ms_admin""; $db_pass = ""secretpassword""; $db_name = ""member_system""; $connection = mysqli_connect($db_host, $db_user, $db_pass, $db_name); if(mysqli_connect_errno()) die(""Databse connection failed."" . mysqli_connect_error() . "" ("" . mysqli_connect_errno() . "")"" ); ?> <?php function check_email($e_mail) { $query = ""SELECT email FROM members ""; $query .= ""WHERE email='$e_mail'""; $result = mysqli_query($connection, $query); $num_rows = mysqli_num_rows($result); if($num_rows>0) header(""Location: registration_successful.php""); else header(""Location: registration_unsuccessful.php""); } ?> <?php $full_name = ucwords($_POST[""full_name""]); $email = strtolower($_POST[""email""]); $password = md5($_POST[""password""]); check_email($email); ?> if($num_rows>0) header(""Location: registration_successful.php""); else header(""Location: registration_unsuccessful.php""); if($num_rows>0) header(""Location: registration_unsuccessful.php""); else header(""Location: registration_successful.php"");"
"414","bad","<?php $db_host = ""localhost""; $db_user = ""ms_admin""; $db_pass = ""secretpassword""; $db_name = ""member_system""; $connection = mysqli_connect($db_host, $db_user, $db_pass, $db_name); if(mysqli_connect_errno()) die(""Databse connection failed."" . mysqli_connect_error() . "" ("" . mysqli_connect_errno() . "")"" ); ?> <?php function check_email($e_mail) { $query = ""SELECT email FROM members ""; $query .= ""WHERE email='$e_mail'""; $result = mysqli_query($connection, $query); $num_rows = mysqli_num_rows($result); if($num_rows>0) header(""Location: registration_successful.php""); else header(""Location: registration_unsuccessful.php""); } ?> <?php $full_name = ucwords($_POST[""full_name""]); $email = strtolower($_POST[""email""]); $password = md5($_POST[""password""]); check_email($email); ?> if($num_rows>0) header(""Location: registration_successful.php""); else header(""Location: registration_unsuccessful.php""); if($num_rows>0) header(""Location: registration_unsuccessful.php""); else header(""Location: registration_successful.php"");"
"415","bad","<?php $db_host = ""localhost""; $db_user = ""ms_admin""; $db_pass = ""secretpassword""; $db_name = ""member_system""; $connection = mysqli_connect($db_host, $db_user, $db_pass, $db_name); if(mysqli_connect_errno()) die(""Databse connection failed."" . mysqli_connect_error() . "" ("" . mysqli_connect_errno() . "")"" ); ?> <?php function check_email($e_mail) { $query = ""SELECT email FROM members ""; $query .= ""WHERE email='$e_mail'""; $result = mysqli_query($connection, $query); $num_rows = mysqli_num_rows($result); if($num_rows>0) header(""Location: registration_successful.php""); else header(""Location: registration_unsuccessful.php""); } ?> <?php $full_name = ucwords($_POST[""full_name""]); $email = strtolower($_POST[""email""]); $password = md5($_POST[""password""]); check_email($email); ?> if($num_rows>0) header(""Location: registration_successful.php""); else header(""Location: registration_unsuccessful.php""); if($num_rows>0) header(""Location: registration_unsuccessful.php""); else header(""Location: registration_successful.php"");"
"416","bad","POST<?php include(""functions.php""); get_header(); ?> <div id=""content""> <?php $mysqli = new mysqli('localhost','root','','kargo'); $name = $_POST['c_name']; $c_texit = $_POST['c_texit']; $c_tarrive = $_POST['c_tarrive']; $target = ""kargo/""; $target_file = $_FILES[""cpic""][""tmp_name""]; $target_move = $target.$_FILES[""cpic""][""name""]; $uploadOk = 1 ; if (file_exists($target_move)) { $uploadOk = 0; } if($uploadOk == 1 ) { $query = $mysqli->query(""INSERT INTO cargos VALUES(NULL,'"".$name.""','"".$c_texit.""','"".$c_tarrive.""','"".$target_move.""')""); move_uploaded_file($target_file,$target_move); echo ""Cargo added.""; header( ""refresh:5;url=panel.php"" ); } else { echo ""-""; header( ""refresh:5;url=panel.php"" ); } ?> </div> <?php get_footer(); ?>"
"417","bad","POST<?php include(""functions.php""); get_header(); ?> <div id=""content""> <?php $mysqli = new mysqli('localhost','root','','kargo'); $name = $_POST['c_name']; $c_texit = $_POST['c_texit']; $c_tarrive = $_POST['c_tarrive']; $target = ""kargo/""; $target_file = $_FILES[""cpic""][""tmp_name""]; $target_move = $target.$_FILES[""cpic""][""name""]; $uploadOk = 1 ; if (file_exists($target_move)) { $uploadOk = 0; } if($uploadOk == 1 ) { $query = $mysqli->query(""INSERT INTO cargos VALUES(NULL,'"".$name.""','"".$c_texit.""','"".$c_tarrive.""','"".$target_move.""')""); move_uploaded_file($target_file,$target_move); echo ""Cargo added.""; header( ""refresh:5;url=panel.php"" ); } else { echo ""-""; header( ""refresh:5;url=panel.php"" ); } ?> </div> <?php get_footer(); ?>"
"418","bad","POST<?php include(""functions.php""); get_header(); ?> <div id=""content""> <?php $mysqli = new mysqli('localhost','root','','kargo'); $name = $_POST['c_name']; $c_texit = $_POST['c_texit']; $c_tarrive = $_POST['c_tarrive']; $target = ""kargo/""; $target_file = $_FILES[""cpic""][""tmp_name""]; $target_move = $target.$_FILES[""cpic""][""name""]; $uploadOk = 1 ; if (file_exists($target_move)) { $uploadOk = 0; } if($uploadOk == 1 ) { $query = $mysqli->query(""INSERT INTO cargos VALUES(NULL,'"".$name.""','"".$c_texit.""','"".$c_tarrive.""','"".$target_move.""')""); move_uploaded_file($target_file,$target_move); echo ""Cargo added.""; header( ""refresh:5;url=panel.php"" ); } else { echo ""-""; header( ""refresh:5;url=panel.php"" ); } ?> </div> <?php get_footer(); ?>"
"419","bad","<tr><td>photo</td><td><img src=""image.php?id=<?php echo $employee['id']; ?>"" /></td></tr><?php include db.php; $employee_id = (isset($_GET['id']) && is_numeric($_GET['id'])) ? intval($_GET['id']) : 0; try { $sql = ""SELECT photo FROM employee where id = $employee_id limit 1""; $s = $pdo->prepare($sql); $s->execute(); } catch (PDOException $e) { $error = 'Employee not found' . $e->getMessage(); include 'error.html.php'; exit(); } $employee = $s->fetch(); $image = $employee['photo']; header('Content-Type: image/jpeg'); echo $image; ?>Firebug<img src=""image.php?id=9"">...image.php?id=9"
"420","bad","<tr><td>photo</td><td><img src=""image.php?id=<?php echo $employee['id']; ?>"" /></td></tr><?php include db.php; $employee_id = (isset($_GET['id']) && is_numeric($_GET['id'])) ? intval($_GET['id']) : 0; try { $sql = ""SELECT photo FROM employee where id = $employee_id limit 1""; $s = $pdo->prepare($sql); $s->execute(); } catch (PDOException $e) { $error = 'Employee not found' . $e->getMessage(); include 'error.html.php'; exit(); } $employee = $s->fetch(); $image = $employee['photo']; header('Content-Type: image/jpeg'); echo $image; ?>Firebug<img src=""image.php?id=9"">...image.php?id=9"
"421","bad","<tr><td>photo</td><td><img src=""image.php?id=<?php echo $employee['id']; ?>"" /></td></tr><?php include db.php; $employee_id = (isset($_GET['id']) && is_numeric($_GET['id'])) ? intval($_GET['id']) : 0; try { $sql = ""SELECT photo FROM employee where id = $employee_id limit 1""; $s = $pdo->prepare($sql); $s->execute(); } catch (PDOException $e) { $error = 'Employee not found' . $e->getMessage(); include 'error.html.php'; exit(); } $employee = $s->fetch(); $image = $employee['photo']; header('Content-Type: image/jpeg'); echo $image; ?>Firebug<img src=""image.php?id=9"">...image.php?id=9"
"422","bad","<?php ob_start(); session_start(); $conn = new mysqli('localhost','username','password','mytable'); if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $valuetotest = 'something'; $result = mysql_query(""SELECT id FROM members WHERE UserName = $valuetotest""); if(mysql_num_rows($result) == 0) { echo ""User not found""; } $password = 'something2'; $userData = mysql_fetch_array($result, MYSQL_ASSOC); if($password != $userData['Password']) { echo ""Password not found""; }else{ // Redirect to home page after successful login. header('Location: welcome.php'); } ?>""User not found."" and ""password not found."""
"423","bad","<?php ob_start(); session_start(); $conn = new mysqli('localhost','username','password','mytable'); if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $valuetotest = 'something'; $result = mysql_query(""SELECT id FROM members WHERE UserName = $valuetotest""); if(mysql_num_rows($result) == 0) { echo ""User not found""; } $password = 'something2'; $userData = mysql_fetch_array($result, MYSQL_ASSOC); if($password != $userData['Password']) { echo ""Password not found""; }else{ // Redirect to home page after successful login. header('Location: welcome.php'); } ?>""User not found."" and ""password not found."""
"424","bad","<?php ob_start(); session_start(); $conn = new mysqli('localhost','username','password','mytable'); if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $valuetotest = 'something'; $result = mysql_query(""SELECT id FROM members WHERE UserName = $valuetotest""); if(mysql_num_rows($result) == 0) { echo ""User not found""; } $password = 'something2'; $userData = mysql_fetch_array($result, MYSQL_ASSOC); if($password != $userData['Password']) { echo ""Password not found""; }else{ // Redirect to home page after successful login. header('Location: welcome.php'); } ?>""User not found."" and ""password not found."""
"425","bad","<?php # pdo options/attributes $opt = array( PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION ); # data source name $dsn = ""mysql:host=localhost;dbname=book""; # basic pdo connection (with added option for error handling) if ($_SERVER['REQUEST_METHOD'] == ""POST"") { try { $dbh = new PDO('mysql:host=localhost;dbname=book', 'root', ''); $stmt = $dbh->prepare(""INSERT INTO English books VALUES :English title""); $arrayName = array(':English title' => $_POST['Etitle']); $result = $stmt->execute($arrayName); if($result) { echo ""<p>Data submitted successfully!</p>""; } } catch (PDOException $e) { echo $e->getMessage(); } echo ""<p>Successfully connected!</p>""; } # close the connection $DBH = null; ?><form action=""postbook.php"" method=""post"" /> <p>English title: <input type=""text"" name=""Etitle"" /></p> <input type=""submit"" value=""submit""/>"
"426","bad","<?php # pdo options/attributes $opt = array( PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION ); # data source name $dsn = ""mysql:host=localhost;dbname=book""; # basic pdo connection (with added option for error handling) if ($_SERVER['REQUEST_METHOD'] == ""POST"") { try { $dbh = new PDO('mysql:host=localhost;dbname=book', 'root', ''); $stmt = $dbh->prepare(""INSERT INTO English books VALUES :English title""); $arrayName = array(':English title' => $_POST['Etitle']); $result = $stmt->execute($arrayName); if($result) { echo ""<p>Data submitted successfully!</p>""; } } catch (PDOException $e) { echo $e->getMessage(); } echo ""<p>Successfully connected!</p>""; } # close the connection $DBH = null; ?><form action=""postbook.php"" method=""post"" /> <p>English title: <input type=""text"" name=""Etitle"" /></p> <input type=""submit"" value=""submit""/>"
"427","bad","<? session_start(); require_once('connect.php'); $name = $_SESSION['name']; $q = ""SELECT * FROM pm WHERE to = '$name'""; $r = mysqli_query($link,$q); if(mysqli_num_rows($r)>0) { while($row = mysqli_fetch_array($r,MYSQLI_ASSOC)){ echo $row['to']; echo $row['from']; echo $row['message']; } } ?>"
"428","bad","<? session_start(); require_once('connect.php'); $name = $_SESSION['name']; $q = ""SELECT * FROM pm WHERE to = '$name'""; $r = mysqli_query($link,$q); if(mysqli_num_rows($r)>0) { while($row = mysqli_fetch_array($r,MYSQLI_ASSOC)){ echo $row['to']; echo $row['from']; echo $row['message']; } } ?>"
"429","bad","<? session_start(); require_once('connect.php'); $name = $_SESSION['name']; $q = ""SELECT * FROM pm WHERE to = '$name'""; $r = mysqli_query($link,$q); if(mysqli_num_rows($r)>0) { while($row = mysqli_fetch_array($r,MYSQLI_ASSOC)){ echo $row['to']; echo $row['from']; echo $row['message']; } } ?>"
"430","bad","var comment = ""* CC""; $.ajax({ url: ""php/add_riw_report.php"", type: ""post"", dataType: ""json"", data: { comment: comment }, });&grade=*%C2%A0CC<meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" />$sql = ""INSERT INTO riw_events VALUES( mysql_real_escape_string($_POST[""comment""]).""' )""; $rs=$db->query($sql);"
"431","bad","var comment = ""* CC""; $.ajax({ url: ""php/add_riw_report.php"", type: ""post"", dataType: ""json"", data: { comment: comment }, });&grade=*%C2%A0CC<meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" />$sql = ""INSERT INTO riw_events VALUES( mysql_real_escape_string($_POST[""comment""]).""' )""; $rs=$db->query($sql);"
"432","bad","var comment = ""* CC""; $.ajax({ url: ""php/add_riw_report.php"", type: ""post"", dataType: ""json"", data: { comment: comment }, });&grade=*%C2%A0CC<meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" />$sql = ""INSERT INTO riw_events VALUES( mysql_real_escape_string($_POST[""comment""]).""' )""; $rs=$db->query($sql);"
"433","bad","<?php if (isset($_POST['gigDate'])){ $gigDate = $_POST['gigDate']; if (!empty($gigDate)){ require_once(""dbconnect.php""); $query = $connect->prepare(""DELETE * FROM 'gigs' WHERE 'date'='"".$gigDate.""'""); $query->execute(); } else { echo ""failure""; } require_once('gui.php'); } ?> <h3>Delete a gig by date. (copy and paste gig date)</h3> <?php include (""gigDelete.php"");?> <form action=""gigDelete.php"" method=""post""> <input type=""text"" name=""gigDate""></input> <button type=""submit"" value=""Delete"" name=""Delete"">delete gig</button> </form>"
"434","bad","<?php if (isset($_POST['gigDate'])){ $gigDate = $_POST['gigDate']; if (!empty($gigDate)){ require_once(""dbconnect.php""); $query = $connect->prepare(""DELETE * FROM 'gigs' WHERE 'date'='"".$gigDate.""'""); $query->execute(); } else { echo ""failure""; } require_once('gui.php'); } ?> <h3>Delete a gig by date. (copy and paste gig date)</h3> <?php include (""gigDelete.php"");?> <form action=""gigDelete.php"" method=""post""> <input type=""text"" name=""gigDate""></input> <button type=""submit"" value=""Delete"" name=""Delete"">delete gig</button> </form>"
"435","bad","<?php if (isset($_POST['gigDate'])){ $gigDate = $_POST['gigDate']; if (!empty($gigDate)){ require_once(""dbconnect.php""); $query = $connect->prepare(""DELETE * FROM 'gigs' WHERE 'date'='"".$gigDate.""'""); $query->execute(); } else { echo ""failure""; } require_once('gui.php'); } ?> <h3>Delete a gig by date. (copy and paste gig date)</h3> <?php include (""gigDelete.php"");?> <form action=""gigDelete.php"" method=""post""> <input type=""text"" name=""gigDate""></input> <button type=""submit"" value=""Delete"" name=""Delete"">delete gig</button> </form>"
"436","bad","<head> <script src = ""http://code.jquery.com/jquery-1.9.1.js""></script> </head> <body> <input type=""text"" name=""text"" id=""text"" autocomplete=""off"" onkeyup=""showHint(this.value)""/> <div id=""inner""></div> <script type=""text/javascript""> function showHint(str) { if(str.length == 0) { document.getElementById('inner').innerHTML = ""search""; return; } if(window.XMLHttpRequest) { xmlhttp = XMLHttpRequest(); } else { xmlhttp = new ActiveXObject(""Microsoft.XMLHTTP""); } xmlhttp.onreadystatechange = function() { if(xmlhttpreadystate == 4 && xmlhttp.status == 200) { document.getElementById('inner').innerHTML = xmlhttp.responseText; } } xmlhttp.open(""REQUEST"", ""search.php?text""+str, true); xmlhttp.send(); } </script> </body> </html><?php $host = 'localhost'; $user = 'root'; $password= 'root'; $db = 'demo'; @$conn = mysql_connect($host, $user, $password) or die(mysql_error()); mysql_select_db($db, $conn); /*if($result) { echo ""success""; } else { echo ""fail""; } */ $text = $_REQUEST['text']; $text = preg_replace('#[^a-z0-9]#i', '', $text); $query = ""SELECT * FROM users where first_name LIKE '%$text%' OR last_name LIKE '%$text%'""; $action = mysql_query($query); $result = mysql_num_rows($action); while($res = mysql_fetch_array($action)) { $output .= $res['first_name']. ' '.$res['last_name']; echo $output; } ?>"
"437","bad","<head> <script src = ""http://code.jquery.com/jquery-1.9.1.js""></script> </head> <body> <input type=""text"" name=""text"" id=""text"" autocomplete=""off"" onkeyup=""showHint(this.value)""/> <div id=""inner""></div> <script type=""text/javascript""> function showHint(str) { if(str.length == 0) { document.getElementById('inner').innerHTML = ""search""; return; } if(window.XMLHttpRequest) { xmlhttp = XMLHttpRequest(); } else { xmlhttp = new ActiveXObject(""Microsoft.XMLHTTP""); } xmlhttp.onreadystatechange = function() { if(xmlhttpreadystate == 4 && xmlhttp.status == 200) { document.getElementById('inner').innerHTML = xmlhttp.responseText; } } xmlhttp.open(""REQUEST"", ""search.php?text""+str, true); xmlhttp.send(); } </script> </body> </html><?php $host = 'localhost'; $user = 'root'; $password= 'root'; $db = 'demo'; @$conn = mysql_connect($host, $user, $password) or die(mysql_error()); mysql_select_db($db, $conn); /*if($result) { echo ""success""; } else { echo ""fail""; } */ $text = $_REQUEST['text']; $text = preg_replace('#[^a-z0-9]#i', '', $text); $query = ""SELECT * FROM users where first_name LIKE '%$text%' OR last_name LIKE '%$text%'""; $action = mysql_query($query); $result = mysql_num_rows($action); while($res = mysql_fetch_array($action)) { $output .= $res['first_name']. ' '.$res['last_name']; echo $output; } ?>"
"438","bad","<head> <script src = ""http://code.jquery.com/jquery-1.9.1.js""></script> </head> <body> <input type=""text"" name=""text"" id=""text"" autocomplete=""off"" onkeyup=""showHint(this.value)""/> <div id=""inner""></div> <script type=""text/javascript""> function showHint(str) { if(str.length == 0) { document.getElementById('inner').innerHTML = ""search""; return; } if(window.XMLHttpRequest) { xmlhttp = XMLHttpRequest(); } else { xmlhttp = new ActiveXObject(""Microsoft.XMLHTTP""); } xmlhttp.onreadystatechange = function() { if(xmlhttpreadystate == 4 && xmlhttp.status == 200) { document.getElementById('inner').innerHTML = xmlhttp.responseText; } } xmlhttp.open(""REQUEST"", ""search.php?text""+str, true); xmlhttp.send(); } </script> </body> </html><?php $host = 'localhost'; $user = 'root'; $password= 'root'; $db = 'demo'; @$conn = mysql_connect($host, $user, $password) or die(mysql_error()); mysql_select_db($db, $conn); /*if($result) { echo ""success""; } else { echo ""fail""; } */ $text = $_REQUEST['text']; $text = preg_replace('#[^a-z0-9]#i', '', $text); $query = ""SELECT * FROM users where first_name LIKE '%$text%' OR last_name LIKE '%$text%'""; $action = mysql_query($query); $result = mysql_num_rows($action); while($res = mysql_fetch_array($action)) { $output .= $res['first_name']. ' '.$res['last_name']; echo $output; } ?>"
"439","good","$(document).ready(function(){ $(""#datepicker"").datepicker({ dateFormat: ""mm-dd-yy"" }); });function add_QA($Qtxt, $Atxt, $Date){ require 'config.php'; //First connect to DB using PDO try { $conn = new PDO('mysql:host=localhost;dbname=ExamServer', $config['DB_USERNAME'], $config['DB_PASSWORD']); $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Prepare and execute statment $sql = $conn->prepare(""INSERT INTO `ExamServer`.`QA_Data` (`QText`, `AText`, `Expiry`) VALUES (:qtxt, :atxt, :expdate)""); $sql->execute(array('qtxt' => $Qtxt, 'atxt' => $Atxt, 'expdate' => $Date)); } catch (PDOException $e){ echo 'ERROR: '.$e->getMessage(); } }<form action=""./questionGenerate.php"" method=""POST"" enctype=""multipart/form-data""> <label for=""datepicker"">Set the deadline for these questions (set this once per login session):</label></br> <input name=""datepicker"" id=""datepicker"" placeholder=""dd/mm/yyyy"" required > </br> <input id=""saveButton"" class=""bt"" src=""../img/saveDate.png"" type=""image"" > </form> </p> </br></br> <p> <form id=""form"" action=""./questionGenerate.php"" method=""POST"" enctype=""multipart/form-data""> <!-- Input --> <label for=""QuestionBox"">Enter the text for your question:</label>/br> <textarea name=""QuestionBox"" id=""QuestionBox"" placeholder=""Question"" rows=""5"" cols=""60"" autofocus required ></textarea><br> <label for=""AnswerBox"">Enter the text for your expected answer:</label></br> <textarea name=""AnswerBox"" id=""AnswerBox"" placeholder=""Expected Answer"" rows=""5"" cols=""60"" required ></textarea><br> <!-- Buttons --> <input id=""addButton"" class=""bt"" src=""../img/addButton.png"" type=""image"" > <a href=""./removeQ.php""><img class=""bt"" src=""../img/rmLButton.png""></a> </form> </p> <h3 id=""pre"">Preview</h3> <ol class=""TestContent""> <?php if (!isset($_SESSION['datepicker'])){ $_SESSION['datepicker'] = $_POST['datepicker']; } else { $Qtxt = $_POST['QuestionBox']; $Atxt = $_POST['AnswerBox']; $Date = $_SESSION['datepicker']; // Add data to QA_Data if($Qtxt != """" and $Atxt != """"){ add_QA($Qtxt, $Atxt, $Date); } } // Preview the questions QA_preview(); ?> </ol>"
"440","good","$(document).ready(function(){ $(""#datepicker"").datepicker({ dateFormat: ""mm-dd-yy"" }); });function add_QA($Qtxt, $Atxt, $Date){ require 'config.php'; //First connect to DB using PDO try { $conn = new PDO('mysql:host=localhost;dbname=ExamServer', $config['DB_USERNAME'], $config['DB_PASSWORD']); $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Prepare and execute statment $sql = $conn->prepare(""INSERT INTO `ExamServer`.`QA_Data` (`QText`, `AText`, `Expiry`) VALUES (:qtxt, :atxt, :expdate)""); $sql->execute(array('qtxt' => $Qtxt, 'atxt' => $Atxt, 'expdate' => $Date)); } catch (PDOException $e){ echo 'ERROR: '.$e->getMessage(); } }<form action=""./questionGenerate.php"" method=""POST"" enctype=""multipart/form-data""> <label for=""datepicker"">Set the deadline for these questions (set this once per login session):</label></br> <input name=""datepicker"" id=""datepicker"" placeholder=""dd/mm/yyyy"" required > </br> <input id=""saveButton"" class=""bt"" src=""../img/saveDate.png"" type=""image"" > </form> </p> </br></br> <p> <form id=""form"" action=""./questionGenerate.php"" method=""POST"" enctype=""multipart/form-data""> <!-- Input --> <label for=""QuestionBox"">Enter the text for your question:</label>/br> <textarea name=""QuestionBox"" id=""QuestionBox"" placeholder=""Question"" rows=""5"" cols=""60"" autofocus required ></textarea><br> <label for=""AnswerBox"">Enter the text for your expected answer:</label></br> <textarea name=""AnswerBox"" id=""AnswerBox"" placeholder=""Expected Answer"" rows=""5"" cols=""60"" required ></textarea><br> <!-- Buttons --> <input id=""addButton"" class=""bt"" src=""../img/addButton.png"" type=""image"" > <a href=""./removeQ.php""><img class=""bt"" src=""../img/rmLButton.png""></a> </form> </p> <h3 id=""pre"">Preview</h3> <ol class=""TestContent""> <?php if (!isset($_SESSION['datepicker'])){ $_SESSION['datepicker'] = $_POST['datepicker']; } else { $Qtxt = $_POST['QuestionBox']; $Atxt = $_POST['AnswerBox']; $Date = $_SESSION['datepicker']; // Add data to QA_Data if($Qtxt != """" and $Atxt != """"){ add_QA($Qtxt, $Atxt, $Date); } } // Preview the questions QA_preview(); ?> </ol>"
"441","good","$(document).ready(function(){ $(""#datepicker"").datepicker({ dateFormat: ""mm-dd-yy"" }); });function add_QA($Qtxt, $Atxt, $Date){ require 'config.php'; //First connect to DB using PDO try { $conn = new PDO('mysql:host=localhost;dbname=ExamServer', $config['DB_USERNAME'], $config['DB_PASSWORD']); $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Prepare and execute statment $sql = $conn->prepare(""INSERT INTO `ExamServer`.`QA_Data` (`QText`, `AText`, `Expiry`) VALUES (:qtxt, :atxt, :expdate)""); $sql->execute(array('qtxt' => $Qtxt, 'atxt' => $Atxt, 'expdate' => $Date)); } catch (PDOException $e){ echo 'ERROR: '.$e->getMessage(); } }<form action=""./questionGenerate.php"" method=""POST"" enctype=""multipart/form-data""> <label for=""datepicker"">Set the deadline for these questions (set this once per login session):</label></br> <input name=""datepicker"" id=""datepicker"" placeholder=""dd/mm/yyyy"" required > </br> <input id=""saveButton"" class=""bt"" src=""../img/saveDate.png"" type=""image"" > </form> </p> </br></br> <p> <form id=""form"" action=""./questionGenerate.php"" method=""POST"" enctype=""multipart/form-data""> <!-- Input --> <label for=""QuestionBox"">Enter the text for your question:</label>/br> <textarea name=""QuestionBox"" id=""QuestionBox"" placeholder=""Question"" rows=""5"" cols=""60"" autofocus required ></textarea><br> <label for=""AnswerBox"">Enter the text for your expected answer:</label></br> <textarea name=""AnswerBox"" id=""AnswerBox"" placeholder=""Expected Answer"" rows=""5"" cols=""60"" required ></textarea><br> <!-- Buttons --> <input id=""addButton"" class=""bt"" src=""../img/addButton.png"" type=""image"" > <a href=""./removeQ.php""><img class=""bt"" src=""../img/rmLButton.png""></a> </form> </p> <h3 id=""pre"">Preview</h3> <ol class=""TestContent""> <?php if (!isset($_SESSION['datepicker'])){ $_SESSION['datepicker'] = $_POST['datepicker']; } else { $Qtxt = $_POST['QuestionBox']; $Atxt = $_POST['AnswerBox']; $Date = $_SESSION['datepicker']; // Add data to QA_Data if($Qtxt != """" and $Atxt != """"){ add_QA($Qtxt, $Atxt, $Date); } } // Preview the questions QA_preview(); ?> </ol>"
"442","bad","TABLE `friends` ( `friendship_id` int(11) NOT NULL AUTO_INCREMENT, `user_one` int(11) NOT NULL, `user_two` int(11) NOT NULL, PRIMARY KEY (`friendship_id`), FOREIGN KEY (user_one) REFERENCES users(user_id), FOREIGN KEY (user_two) REFERENCES users(user_id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;TABLE `posts` ( `post_id` int(11) unsigned NOT NULL AUTO_INCREMENT, `post_text` text NOT NULL, `user_id` int(11) unsigned NOT NULL, PRIMARY KEY (`post_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; /** * Get all posts from the suer's friends * @return array an array with several objects (the posts) */ public static function getAllPosts() { $my_id = Session::get('user_id'); $database = DatabaseFactory::getFactory()->getConnection(); // get all of the user's friends $friendsQuery = $database->prepare("" SELECT user_one FROM friends WHERE user_two = '$my_id'; SELECT user_two FROM friends WHERE user_one = '$my_id'; ""); $friendsQuery->execute(); $friends = $friendsQuery->fetchAll(); $friendsQuery->closeCursor(); $query = $database->prepare(""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id = '$friends'""); $query->execute(array()); return $query->fetchAll(); }""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id = '1'""; /** * Gets all posts (of the user and his friends). */ public function index() { $this->View->render('post/index', array( 'posts' => PostModel::getAllPosts() )); } <?php if ($this->posts) { ?> <?php foreach($this->posts as $key => $value) { ?> <p><?= htmlentities($value->post_text); ?></p> <?php } ?> <?php } ?> /** * Get all posts from the suer's friends * @return array an array with several objects (the posts) */ public static function getAllPosts() { $my_id = Session::get('user_id'); $database = DatabaseFactory::getFactory()->getConnection(); // get all of the user's friends $friendsQuery = $database->prepare("" SELECT user_one FROM friends WHERE user_two = '$my_id'; SELECT user_two FROM friends WHERE user_one = '$my_id'; ""); $friendsQuery->execute(); $friends = $friendsQuery->fetchAll(); print_r($friends); $friendsQuery->closeCursor(); foreach($friends as $friend) { $friend_ids[$friend->key] = $friend->val; } print_r($friend_ids); $friendsSQL = implode(',',$friend_ids); $query = $database->prepare(""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id IN('$friendsSQL')""); $query->execute(); return $query->fetchAll(); }"
"443","bad","TABLE `friends` ( `friendship_id` int(11) NOT NULL AUTO_INCREMENT, `user_one` int(11) NOT NULL, `user_two` int(11) NOT NULL, PRIMARY KEY (`friendship_id`), FOREIGN KEY (user_one) REFERENCES users(user_id), FOREIGN KEY (user_two) REFERENCES users(user_id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;TABLE `posts` ( `post_id` int(11) unsigned NOT NULL AUTO_INCREMENT, `post_text` text NOT NULL, `user_id` int(11) unsigned NOT NULL, PRIMARY KEY (`post_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; /** * Get all posts from the suer's friends * @return array an array with several objects (the posts) */ public static function getAllPosts() { $my_id = Session::get('user_id'); $database = DatabaseFactory::getFactory()->getConnection(); // get all of the user's friends $friendsQuery = $database->prepare("" SELECT user_one FROM friends WHERE user_two = '$my_id'; SELECT user_two FROM friends WHERE user_one = '$my_id'; ""); $friendsQuery->execute(); $friends = $friendsQuery->fetchAll(); $friendsQuery->closeCursor(); $query = $database->prepare(""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id = '$friends'""); $query->execute(array()); return $query->fetchAll(); }""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id = '1'""; /** * Gets all posts (of the user and his friends). */ public function index() { $this->View->render('post/index', array( 'posts' => PostModel::getAllPosts() )); } <?php if ($this->posts) { ?> <?php foreach($this->posts as $key => $value) { ?> <p><?= htmlentities($value->post_text); ?></p> <?php } ?> <?php } ?> /** * Get all posts from the suer's friends * @return array an array with several objects (the posts) */ public static function getAllPosts() { $my_id = Session::get('user_id'); $database = DatabaseFactory::getFactory()->getConnection(); // get all of the user's friends $friendsQuery = $database->prepare("" SELECT user_one FROM friends WHERE user_two = '$my_id'; SELECT user_two FROM friends WHERE user_one = '$my_id'; ""); $friendsQuery->execute(); $friends = $friendsQuery->fetchAll(); print_r($friends); $friendsQuery->closeCursor(); foreach($friends as $friend) { $friend_ids[$friend->key] = $friend->val; } print_r($friend_ids); $friendsSQL = implode(',',$friend_ids); $query = $database->prepare(""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id IN('$friendsSQL')""); $query->execute(); return $query->fetchAll(); }"
"444","bad","TABLE `friends` ( `friendship_id` int(11) NOT NULL AUTO_INCREMENT, `user_one` int(11) NOT NULL, `user_two` int(11) NOT NULL, PRIMARY KEY (`friendship_id`), FOREIGN KEY (user_one) REFERENCES users(user_id), FOREIGN KEY (user_two) REFERENCES users(user_id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;TABLE `posts` ( `post_id` int(11) unsigned NOT NULL AUTO_INCREMENT, `post_text` text NOT NULL, `user_id` int(11) unsigned NOT NULL, PRIMARY KEY (`post_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; /** * Get all posts from the suer's friends * @return array an array with several objects (the posts) */ public static function getAllPosts() { $my_id = Session::get('user_id'); $database = DatabaseFactory::getFactory()->getConnection(); // get all of the user's friends $friendsQuery = $database->prepare("" SELECT user_one FROM friends WHERE user_two = '$my_id'; SELECT user_two FROM friends WHERE user_one = '$my_id'; ""); $friendsQuery->execute(); $friends = $friendsQuery->fetchAll(); $friendsQuery->closeCursor(); $query = $database->prepare(""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id = '$friends'""); $query->execute(array()); return $query->fetchAll(); }""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id = '1'""; /** * Gets all posts (of the user and his friends). */ public function index() { $this->View->render('post/index', array( 'posts' => PostModel::getAllPosts() )); } <?php if ($this->posts) { ?> <?php foreach($this->posts as $key => $value) { ?> <p><?= htmlentities($value->post_text); ?></p> <?php } ?> <?php } ?> /** * Get all posts from the suer's friends * @return array an array with several objects (the posts) */ public static function getAllPosts() { $my_id = Session::get('user_id'); $database = DatabaseFactory::getFactory()->getConnection(); // get all of the user's friends $friendsQuery = $database->prepare("" SELECT user_one FROM friends WHERE user_two = '$my_id'; SELECT user_two FROM friends WHERE user_one = '$my_id'; ""); $friendsQuery->execute(); $friends = $friendsQuery->fetchAll(); print_r($friends); $friendsQuery->closeCursor(); foreach($friends as $friend) { $friend_ids[$friend->key] = $friend->val; } print_r($friend_ids); $friendsSQL = implode(',',$friend_ids); $query = $database->prepare(""SELECT * FROM posts WHERE user_id = '$my_id' OR user_id IN('$friendsSQL')""); $query->execute(); return $query->fetchAll(); }"
"445","good","<?php $input = $_GET['input']; if ($input) { $db = mysqli_connect(""localhost"", ""sec"", ""dubbelgeheim"", ""bookshop""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } $escaper = real_escape_string($input); $statement = $db->prepare(""SELECT * FROM productcomment WHERE ProductId = ? LIMIT 1""); $statement->bind_param(""s"", $escaper); $statement->execute(); $result = $statement->get_result(); $statement->close(); $count = $result->num_rows; if ($count > 0) { while ($row = $result->fetch_assoc()) { echo ""Product:"" . $row['ProductId'] . ""<br>""; echo ""Annotation:"" . $row['Comment'] . ""<br>""; echo ""TestOK!<br>""; } } else { echo 'No record!'; } $result->free(); $db->close(); } ?>"
"446","good","<?php $input = $_GET['input']; if ($input) { $db = mysqli_connect(""localhost"", ""sec"", ""dubbelgeheim"", ""bookshop""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } $escaper = real_escape_string($input); $statement = $db->prepare(""SELECT * FROM productcomment WHERE ProductId = ? LIMIT 1""); $statement->bind_param(""s"", $escaper); $statement->execute(); $result = $statement->get_result(); $statement->close(); $count = $result->num_rows; if ($count > 0) { while ($row = $result->fetch_assoc()) { echo ""Product:"" . $row['ProductId'] . ""<br>""; echo ""Annotation:"" . $row['Comment'] . ""<br>""; echo ""TestOK!<br>""; } } else { echo 'No record!'; } $result->free(); $db->close(); } ?>"
"447","good","<?php $input = $_GET['input']; if ($input) { $db = mysqli_connect(""localhost"", ""sec"", ""dubbelgeheim"", ""bookshop""); // Check connection if (mysqli_connect_errno()) { echo ""Failed to connect to MySQL: "" . mysqli_connect_error(); } $escaper = real_escape_string($input); $statement = $db->prepare(""SELECT * FROM productcomment WHERE ProductId = ? LIMIT 1""); $statement->bind_param(""s"", $escaper); $statement->execute(); $result = $statement->get_result(); $statement->close(); $count = $result->num_rows; if ($count > 0) { while ($row = $result->fetch_assoc()) { echo ""Product:"" . $row['ProductId'] . ""<br>""; echo ""Annotation:"" . $row['Comment'] . ""<br>""; echo ""TestOK!<br>""; } } else { echo 'No record!'; } $result->free(); $db->close(); } ?>"
"448","bad","<?php if (!isset($_POST['submit'])){ ?> <!-- The HTML login form --> <center><form action=""<?=$_SERVER['PHP_SELF']?>"" method=""post""> <div class=""form-group""> <input type=""text"" name=""username"" id=""username"" class=""form-control input-lg"" placeholder=""Username"" tabindex=""3""> </div> <div class=""form-group""> <input type=""password"" name=""password"" id=""password"" class=""form-control input-lg"" placeholder=""Password"" tabindex=""5""> </div> <br /> <br /><input type=""submit"" name=""submit"" class=""btn btn-success btn-block btn-lg"" value=""Login"" /> </center> </form> <?php } else { require_once(""db_const.php""); $mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME); # check connection if ($mysqli->connect_errno) { echo ""<p>MySQL error no {$mysqli->connect_errno} : {$mysqli->connect_error}</p>""; exit(); } $username = $_POST['username']; $password = $_POST['password']; $tusername = $_POST['username']; $tpassword = $_POST['password']; $sql = ""SELECT * from client WHERE Client_username LIKE '{$username}' AND Client_password LIKE '{$password}' LIMIT 1""; $result = $mysqli->query($sql); if (!$result->num_rows == 1) { echo ""<p>Invalid username/password combination</p>""; } else { header('location:client_dash.html?msg=success'); } $sql = ""SELECT * from trainer WHERE trainer_username LIKE '{$tusername}' AND trainer_password LIKE '{$tpassword}' LIMIT 1""; $result = $mysqli->query($sql); if (!$result->num_rows == 1) { echo ""<p>Invalid username/password combination</p>""; } else { header('location:trainer_dash.php?msg=success'); } } ?>"
"449","bad","$connection <?php function enterToDb($user, $pass, $email, $gender){ // take those and insert into users $dbname = ""mydb""; $connection = mysqli_connect(""localhost"", ""root"", ""root"", $dbname); //query $query= ""insert into users""; $query.="" (`username`, `password`, `email`)""; $query.= "" values ('"".$user.""','"".$pass.""','"".$email.""','"".$gender.""')""; if(mysqli_query($connection, $query)){ ?> <div class=""alert alert-success"" role=""alert"">Congratulations! you're a member of E-Bridge community! </br> </div> <?php }else{ ?> <div class=""alert alert-danger"" role=""alert"">Error signing you up! Please try again! </div> <?php } }<?php echo""in sign up pages""; $yes=0; if(isset($_POST['submit'])){ // get all the info from the form $username= $_POST['username']; $password= $_POST['password']; $email= $_POST['email']; $gender=$_POST[""radioGroup""]; // check if the user already exists in the db $query= ""select * from users where ""; $query.= ""username =\"""".$username.""\""""; $query.= "" or email=\"""". $email.""\""""; //echo $query; $select= mysqli_query($connection, $query); if(mysqli_num_rows($select)>=1){ // checking if rows exist // if so ?> <div class=""alert alert-danger"" role=""alert"">Credential already exists, please try another name or email.</div> <?php display(); }else{ //echo $username."" "".$password."" "".$email."" "".$gender; enterToDb($username, $password, $email, $gender); //display(); } // if not there > error // else = exitst >> start session and direct to topics or profile ;) }else{ display(); } ?>"
"450","bad","$connection <?php function enterToDb($user, $pass, $email, $gender){ // take those and insert into users $dbname = ""mydb""; $connection = mysqli_connect(""localhost"", ""root"", ""root"", $dbname); //query $query= ""insert into users""; $query.="" (`username`, `password`, `email`)""; $query.= "" values ('"".$user.""','"".$pass.""','"".$email.""','"".$gender.""')""; if(mysqli_query($connection, $query)){ ?> <div class=""alert alert-success"" role=""alert"">Congratulations! you're a member of E-Bridge community! </br> </div> <?php }else{ ?> <div class=""alert alert-danger"" role=""alert"">Error signing you up! Please try again! </div> <?php } }<?php echo""in sign up pages""; $yes=0; if(isset($_POST['submit'])){ // get all the info from the form $username= $_POST['username']; $password= $_POST['password']; $email= $_POST['email']; $gender=$_POST[""radioGroup""]; // check if the user already exists in the db $query= ""select * from users where ""; $query.= ""username =\"""".$username.""\""""; $query.= "" or email=\"""". $email.""\""""; //echo $query; $select= mysqli_query($connection, $query); if(mysqli_num_rows($select)>=1){ // checking if rows exist // if so ?> <div class=""alert alert-danger"" role=""alert"">Credential already exists, please try another name or email.</div> <?php display(); }else{ //echo $username."" "".$password."" "".$email."" "".$gender; enterToDb($username, $password, $email, $gender); //display(); } // if not there > error // else = exitst >> start session and direct to topics or profile ;) }else{ display(); } ?>"
"451","bad","<?php mysql_connect(""*****"", ""root"", ""*****"") or die(""Error connecting to database: "".mysql_error()); /* if connection fails it will stop loading the page and display an error */ mysql_select_db(""jobslist"") or die(mysql_error()); /* tutorial_search is the name of database we've created */ $query = $_GET['query']; // gets value sent over search form $min_length = 4; // you can set minimum length of the query if you want if(strlen($query) >= $min_length){ // if query length is more or equal minimum length then $query = htmlspecialchars($query); // changes characters used in html to their equivalents, for example: < to &gt; $query = mysql_real_escape_string($query); // makes sure nobody uses SQL injection $raw_results = mysql_query(""SELECT * FROM jobs_list WHERE (`job_title` LIKE '%"".$query.""%') OR (`job_location` LIKE '%"".$query.""%')"") or die(mysql_error()); // * means that it selects all fields, you can also write: `id`, `title`, `text` // jobs_list is the name of our table // '%$query%' is what we're looking for, % means anything, for example if $query is Hello // it will match ""hello"", ""Hello man"", ""gogohello"", if you want exact match use `title`='$query' // or if you want to match just full word so ""gogohello"" is out use '% $query %' ...OR ... '$query %' ... OR ... '% $query' if(mysql_num_rows($raw_results) > 0){ // if one or more rows are returned do following while($results = mysql_fetch_array($raw_results)){ // $results = mysql_fetch_array($raw_results) puts data from database into array, while it's valid it does the loop echo ""<p><h3>"".$results['job_id'].""</h3>"" .$results['job_title']. .$results['job_description']. .$results['job_location']. .$results['job_category']. ""</p>""; // posts results gotten from database you can also show id ($results['id']) } } else{ // if there is no matching rows do following echo ""No results""; } } else{ // if query length is less than minimum echo ""Minimum length is "".$min_length; } ?>"
"452","bad","<?php mysql_connect(""*****"", ""root"", ""*****"") or die(""Error connecting to database: "".mysql_error()); /* if connection fails it will stop loading the page and display an error */ mysql_select_db(""jobslist"") or die(mysql_error()); /* tutorial_search is the name of database we've created */ $query = $_GET['query']; // gets value sent over search form $min_length = 4; // you can set minimum length of the query if you want if(strlen($query) >= $min_length){ // if query length is more or equal minimum length then $query = htmlspecialchars($query); // changes characters used in html to their equivalents, for example: < to &gt; $query = mysql_real_escape_string($query); // makes sure nobody uses SQL injection $raw_results = mysql_query(""SELECT * FROM jobs_list WHERE (`job_title` LIKE '%"".$query.""%') OR (`job_location` LIKE '%"".$query.""%')"") or die(mysql_error()); // * means that it selects all fields, you can also write: `id`, `title`, `text` // jobs_list is the name of our table // '%$query%' is what we're looking for, % means anything, for example if $query is Hello // it will match ""hello"", ""Hello man"", ""gogohello"", if you want exact match use `title`='$query' // or if you want to match just full word so ""gogohello"" is out use '% $query %' ...OR ... '$query %' ... OR ... '% $query' if(mysql_num_rows($raw_results) > 0){ // if one or more rows are returned do following while($results = mysql_fetch_array($raw_results)){ // $results = mysql_fetch_array($raw_results) puts data from database into array, while it's valid it does the loop echo ""<p><h3>"".$results['job_id'].""</h3>"" .$results['job_title']. .$results['job_description']. .$results['job_location']. .$results['job_category']. ""</p>""; // posts results gotten from database you can also show id ($results['id']) } } else{ // if there is no matching rows do following echo ""No results""; } } else{ // if query length is less than minimum echo ""Minimum length is "".$min_length; } ?>"
"453","bad","<?php mysql_connect(""*****"", ""root"", ""*****"") or die(""Error connecting to database: "".mysql_error()); /* if connection fails it will stop loading the page and display an error */ mysql_select_db(""jobslist"") or die(mysql_error()); /* tutorial_search is the name of database we've created */ $query = $_GET['query']; // gets value sent over search form $min_length = 4; // you can set minimum length of the query if you want if(strlen($query) >= $min_length){ // if query length is more or equal minimum length then $query = htmlspecialchars($query); // changes characters used in html to their equivalents, for example: < to &gt; $query = mysql_real_escape_string($query); // makes sure nobody uses SQL injection $raw_results = mysql_query(""SELECT * FROM jobs_list WHERE (`job_title` LIKE '%"".$query.""%') OR (`job_location` LIKE '%"".$query.""%')"") or die(mysql_error()); // * means that it selects all fields, you can also write: `id`, `title`, `text` // jobs_list is the name of our table // '%$query%' is what we're looking for, % means anything, for example if $query is Hello // it will match ""hello"", ""Hello man"", ""gogohello"", if you want exact match use `title`='$query' // or if you want to match just full word so ""gogohello"" is out use '% $query %' ...OR ... '$query %' ... OR ... '% $query' if(mysql_num_rows($raw_results) > 0){ // if one or more rows are returned do following while($results = mysql_fetch_array($raw_results)){ // $results = mysql_fetch_array($raw_results) puts data from database into array, while it's valid it does the loop echo ""<p><h3>"".$results['job_id'].""</h3>"" .$results['job_title']. .$results['job_description']. .$results['job_location']. .$results['job_category']. ""</p>""; // posts results gotten from database you can also show id ($results['id']) } } else{ // if there is no matching rows do following echo ""No results""; } } else{ // if query length is less than minimum echo ""Minimum length is "".$min_length; } ?>"
"454","bad","<form method=""post"" action=""security.php""> <input name=""username"" type=""text"" placeholder=""Username"" id=""username""><br /> <input name=""password"" type=""password"" placeholder=""Password"" id=""password""><br /> <input name=""login"" type=""submit"" value=""Log in"" class=""login""> <small><input type=""checkbox""> Keep me logged in</small> </form> <?php if ($failed == 1) { echo ""Wrong Username / Password""; } ?><?php require 'connect.php'; // username and password sent from form $tbl_name = 'users'; $username=$_POST['username']; $password=$_POST['password']; // To protect MySQL injection $username = stripslashes($username); $password = stripslashes($password); $username = mysqli_real_escape_string($conn, $_POST['username']); $password = mysqli_real_escape_string($conn, $_POST['password']); $sql=""SELECT * FROM $tbl_name WHERE username='$username' and password='$password'""; $result = mysqli_query($conn, $sql); // Mysql_num_row is counting table row $count = mysqli_num_rows($result); // If result matched $username and $password, table row must be 1 row if($count == 1) { // Register $username, $password and redirect to file ""login_success.php"" session_start(); $_SESSION[""username""] = $username; header(""location:home.php""); } else { $failed = 1; header(""location:index.php""); } ?>"
"455","bad","<form method=""post"" action=""security.php""> <input name=""username"" type=""text"" placeholder=""Username"" id=""username""><br /> <input name=""password"" type=""password"" placeholder=""Password"" id=""password""><br /> <input name=""login"" type=""submit"" value=""Log in"" class=""login""> <small><input type=""checkbox""> Keep me logged in</small> </form> <?php if ($failed == 1) { echo ""Wrong Username / Password""; } ?><?php require 'connect.php'; // username and password sent from form $tbl_name = 'users'; $username=$_POST['username']; $password=$_POST['password']; // To protect MySQL injection $username = stripslashes($username); $password = stripslashes($password); $username = mysqli_real_escape_string($conn, $_POST['username']); $password = mysqli_real_escape_string($conn, $_POST['password']); $sql=""SELECT * FROM $tbl_name WHERE username='$username' and password='$password'""; $result = mysqli_query($conn, $sql); // Mysql_num_row is counting table row $count = mysqli_num_rows($result); // If result matched $username and $password, table row must be 1 row if($count == 1) { // Register $username, $password and redirect to file ""login_success.php"" session_start(); $_SESSION[""username""] = $username; header(""location:home.php""); } else { $failed = 1; header(""location:index.php""); } ?>"
"456","bad","<form method=""post"" action=""security.php""> <input name=""username"" type=""text"" placeholder=""Username"" id=""username""><br /> <input name=""password"" type=""password"" placeholder=""Password"" id=""password""><br /> <input name=""login"" type=""submit"" value=""Log in"" class=""login""> <small><input type=""checkbox""> Keep me logged in</small> </form> <?php if ($failed == 1) { echo ""Wrong Username / Password""; } ?><?php require 'connect.php'; // username and password sent from form $tbl_name = 'users'; $username=$_POST['username']; $password=$_POST['password']; // To protect MySQL injection $username = stripslashes($username); $password = stripslashes($password); $username = mysqli_real_escape_string($conn, $_POST['username']); $password = mysqli_real_escape_string($conn, $_POST['password']); $sql=""SELECT * FROM $tbl_name WHERE username='$username' and password='$password'""; $result = mysqli_query($conn, $sql); // Mysql_num_row is counting table row $count = mysqli_num_rows($result); // If result matched $username and $password, table row must be 1 row if($count == 1) { // Register $username, $password and redirect to file ""login_success.php"" session_start(); $_SESSION[""username""] = $username; header(""location:home.php""); } else { $failed = 1; header(""location:index.php""); } ?>"
"457","bad","<?php /** * Consider and apply voucher codes * Types of voucher code * - = FIXED AMOUNT OFF * % = PERCENTAGE OFF * s = SET NEW SHIPPING COST * @param voucherCode String * @return void */ if(isset($_POST[""submit""])){ $code=$_POST[""code""]; $coupon=new coupon(); $coupon->Vouchers($code); } class coupon { function Vouchers( $voucherCode ) { //The voucher code value is checked to ensure it is not empty // (as per point 1) if( $voucherCode != '' ) { // we need the date, to see if the voucher has expired $cts = date('Y-m-d H:i:s'); $voucherCode=$this->registry; $voucher_sql = ""SELECT *, if('{$cts}' > expiry, 1, 0) AS expired FROM code WHERE code='{$voucherCode}' LIMIT 1""; $voucher_sql=$this->registry; $this->registry->getObject('code')->executeQuery( $voucher_sql ); if( $this->registry->getObject('code')->numRows() == 0 ) { $this->voucher_notice = 'Sorry, the voucher code you entered is invalid'; } else { $voucher = $this->registry->getObject('code')->getRows(); if( $voucher['active'] == 1 ) { if( $voucher['expired'] == 1 ) { $this->voucher_notice = 'Sorry, this voucher has expired'; return false; } else { // check to see there are some vouchers, and customer // has enough in their basket (points 3 and 4) if( $voucher['num_vouchers'] != 0 ) { if( $this->cost >= $voucher['min_cost'] ) { $this->discountCode = $voucherCode; $this->discountCodeId = $voucher['id']; // If the discount operation is a percentage, then // the discount value is applied to the basket cost // to calculate that percentage. This amount is then // deducted from the order cost, giving a ""discount // value""% discount from the order. if( $voucher['operation'] == '%' ) { $this->cost = $this-> cost - (($this->cost)/100)*$voucher['amount']; $this->voucher_notice = 'A ' . $voucher['amount'] . '% discount has been applied to your order'; return true; // If the discount operation is a subtraction, then // the discount amount from the discount code is // deducted from the order cost, and the order cost // is updated to reflect this. } elseif( $voucher['operation'] == '-' ) { $this->cost = $this->cost - $voucher['amount']; $this->voucher_notice = 'A discount of &pound;' . $voucher['amount'] . ' has been applied to your order'; return true; // Finally, if the discount operation is set to s // then, we set the shipping cost to the discount // value. This could allow us to set free shipping, // or just reduce shipping costs. } elseif( $voucher['operation'] == 's' ) { $this->shipping_cost = $voucher['amount']; $this->voucher_notice = 'Your orders shipping cost has been reduced to &pound;' . $voucher['amount']; return true; } } else { $this->voucher_notice = 'Sorry, your order total is not enough for your order to qualify for this discount code'; return false; } } else { $this->voucher_notice = 'Sorry, this was a limited edition voucher code, there are no more instances of that code left'; return false; } } } else { $this->voucher_notice = 'Sorry, the vocuher code you entered is no longer active'; return false; } } } } } ?><form method=""post"" action=""a.php""> Enter The Coupon Code:<br /> <input name=""code[]"" type=""text"" size=""10"" /> <br /> <input type=""submit"" name=""submit"" value=""submit"" /> </form>"
"458","bad","<?php /** * Consider and apply voucher codes * Types of voucher code * - = FIXED AMOUNT OFF * % = PERCENTAGE OFF * s = SET NEW SHIPPING COST * @param voucherCode String * @return void */ if(isset($_POST[""submit""])){ $code=$_POST[""code""]; $coupon=new coupon(); $coupon->Vouchers($code); } class coupon { function Vouchers( $voucherCode ) { //The voucher code value is checked to ensure it is not empty // (as per point 1) if( $voucherCode != '' ) { // we need the date, to see if the voucher has expired $cts = date('Y-m-d H:i:s'); $voucherCode=$this->registry; $voucher_sql = ""SELECT *, if('{$cts}' > expiry, 1, 0) AS expired FROM code WHERE code='{$voucherCode}' LIMIT 1""; $voucher_sql=$this->registry; $this->registry->getObject('code')->executeQuery( $voucher_sql ); if( $this->registry->getObject('code')->numRows() == 0 ) { $this->voucher_notice = 'Sorry, the voucher code you entered is invalid'; } else { $voucher = $this->registry->getObject('code')->getRows(); if( $voucher['active'] == 1 ) { if( $voucher['expired'] == 1 ) { $this->voucher_notice = 'Sorry, this voucher has expired'; return false; } else { // check to see there are some vouchers, and customer // has enough in their basket (points 3 and 4) if( $voucher['num_vouchers'] != 0 ) { if( $this->cost >= $voucher['min_cost'] ) { $this->discountCode = $voucherCode; $this->discountCodeId = $voucher['id']; // If the discount operation is a percentage, then // the discount value is applied to the basket cost // to calculate that percentage. This amount is then // deducted from the order cost, giving a ""discount // value""% discount from the order. if( $voucher['operation'] == '%' ) { $this->cost = $this-> cost - (($this->cost)/100)*$voucher['amount']; $this->voucher_notice = 'A ' . $voucher['amount'] . '% discount has been applied to your order'; return true; // If the discount operation is a subtraction, then // the discount amount from the discount code is // deducted from the order cost, and the order cost // is updated to reflect this. } elseif( $voucher['operation'] == '-' ) { $this->cost = $this->cost - $voucher['amount']; $this->voucher_notice = 'A discount of &pound;' . $voucher['amount'] . ' has been applied to your order'; return true; // Finally, if the discount operation is set to s // then, we set the shipping cost to the discount // value. This could allow us to set free shipping, // or just reduce shipping costs. } elseif( $voucher['operation'] == 's' ) { $this->shipping_cost = $voucher['amount']; $this->voucher_notice = 'Your orders shipping cost has been reduced to &pound;' . $voucher['amount']; return true; } } else { $this->voucher_notice = 'Sorry, your order total is not enough for your order to qualify for this discount code'; return false; } } else { $this->voucher_notice = 'Sorry, this was a limited edition voucher code, there are no more instances of that code left'; return false; } } } else { $this->voucher_notice = 'Sorry, the vocuher code you entered is no longer active'; return false; } } } } } ?><form method=""post"" action=""a.php""> Enter The Coupon Code:<br /> <input name=""code[]"" type=""text"" size=""10"" /> <br /> <input type=""submit"" name=""submit"" value=""submit"" /> </form>"
"459","good","} else if($ctoken === $utoken) { // Our tokens match, proceed with the view $stmt = $conn->prepare(""SELECT fileMime, fileSize, fileName, file FROM $database.appFiles WHERE fileID = :fileid""); $stmt->bindParam(':fileid', $_GET['fid'], PDO::PARAM_INT, 11); $stmt->execute(); $fRes = $stmt->fetchAll(); header('Content-Disposition: attachment; filename=""' . $fRes[0][fileName] . '""'); ob_clean(); flush(); echo $fRes[0][file]; exit; }try { $stmt = $conn->prepare(""SELECT * FROM $database.users WHERE uID = :uid""); $stmt->bindParam(':uid', $uID, PDO::PARAM_INT, 11); $stmt->execute(); $uRes = $stmt->fetchAll(); } catch(PDOException $e) { catchMySQLerror($e->getMessage()); } $ctoken = $_COOKIE['cookieToken']; $utoken = $uRes[0]['sessionToken']; if($ctoken !== $utoken) { // Our tokens don't match, kill the session header(""Location: ./logOut.php""); exit; } else if($ctoken === $utoken) { // Our tokens match, proceed with the view $stmt = $conn->prepare(""SELECT fileMime, fileSize, fileName, file FROM $database.appFiles WHERE fileID = :fileid""); $stmt->bindParam(':fileid', $_GET['fid'], PDO::PARAM_INT, 11); $stmt->execute(); $fRes = $stmt->fetchAll(); header(""Content-Type: application/octet-stream""); header(""Content-Transfer-Encoding: Binary""); header(""Content-disposition: attachment; filename=\"""".$fRes[0][fileName].""\""""); echo readfile($fRes[0][file]); exit; }"
"460","bad","jsonerror_reporting(E_ALL); ini_set('display_errors', 1); ini_set('memory_limit', '2048M'); $db = new PDO('mysql:host=localhost;dbname=mydb', 'root', ''); $search = $_GET['search']; $searchBy = ( isset($_GET['searchBy']) && !empty($_GET['searchBy']) ) ? $_GET['searchBy'] : 'name'; $sql = ""SELECT * FROM business WHERE name LIKE '%university%' GROUP BY id""; $query = $db->prepare($sql); $query->execute(); $results = $query->fetchAll(); //query returns 5000+ records in under a second in workbench $headers = array('Business', 'City', 'State', 'Zip', 'Phone'); $json = array(""results"" => $results, 'headers' => $headers, 'query' => $sql); var_dump($json); //prints successfully echo json_encode($json); // echos nothing!"
"461","bad","jsonerror_reporting(E_ALL); ini_set('display_errors', 1); ini_set('memory_limit', '2048M'); $db = new PDO('mysql:host=localhost;dbname=mydb', 'root', ''); $search = $_GET['search']; $searchBy = ( isset($_GET['searchBy']) && !empty($_GET['searchBy']) ) ? $_GET['searchBy'] : 'name'; $sql = ""SELECT * FROM business WHERE name LIKE '%university%' GROUP BY id""; $query = $db->prepare($sql); $query->execute(); $results = $query->fetchAll(); //query returns 5000+ records in under a second in workbench $headers = array('Business', 'City', 'State', 'Zip', 'Phone'); $json = array(""results"" => $results, 'headers' => $headers, 'query' => $sql); var_dump($json); //prints successfully echo json_encode($json); // echos nothing!"
"462","bad","jsonerror_reporting(E_ALL); ini_set('display_errors', 1); ini_set('memory_limit', '2048M'); $db = new PDO('mysql:host=localhost;dbname=mydb', 'root', ''); $search = $_GET['search']; $searchBy = ( isset($_GET['searchBy']) && !empty($_GET['searchBy']) ) ? $_GET['searchBy'] : 'name'; $sql = ""SELECT * FROM business WHERE name LIKE '%university%' GROUP BY id""; $query = $db->prepare($sql); $query->execute(); $results = $query->fetchAll(); //query returns 5000+ records in under a second in workbench $headers = array('Business', 'City', 'State', 'Zip', 'Phone'); $json = array(""results"" => $results, 'headers' => $headers, 'query' => $sql); var_dump($json); //prints successfully echo json_encode($json); // echos nothing!"
"463","bad","<div> Subject: <?php $conn = new mysqli('fgdfgfg', 'fggfdgfr', 'fgfgf', 'fgfgfgf') or die('Cannot connect to db'); $result = $conn->query(""select name from class""); echo ""<select name='subject' nChange='getSection('findsection.php?subject='+this.value)'>""; while ($row = $result->fetch_assoc()) { unset($id, $name); $name = $row['name']; echo '<option value=""subject"">' . $name . '</option>'; } echo ""</select>""; ?> </div> <br> <div id=""sectiondiv""> Section: <select name=""select""> </select> </div><? $subject=intval($_GET[‘subject’]);; $servername = ""localhost""; $username = ""fhdfhdfhf""; $password = ""ghhfghgh""; $dbname = ""ghghgh""; $mysqli = new Mysqli($servername, $username, $password, $dbname) or mysqli_error($mysqli); $section = $mysqli->query(""SELECT section FROM class WHERE name = '$subject'"")->fetch_object()->section; $result=mysql_query($section);?> <select name=""section""> <? while ($row = $result->fetch_assoc()) { ?> <option value><?=$row['section']?></option> <? } ?> </select><script type=""text/javascript""> function getSection(strURL) { var req = getXMLHTTP(); // fuction to get xmlhttp object if (req) { req.onreadystatechange = function() { if (req.readyState == 4) { //data is retrieved from server if (req.status == 200) { // which reprents ok status document.getElementById('sectiondiv').innerHTML=req.responseText; } else { alert(""There was a problem while using XMLHTTP:\n""); } } } req.open(""GET"", strURL, true); //open url using get method req.send(null); } } </script>"
"464","bad","<div> Subject: <?php $conn = new mysqli('fgdfgfg', 'fggfdgfr', 'fgfgf', 'fgfgfgf') or die('Cannot connect to db'); $result = $conn->query(""select name from class""); echo ""<select name='subject' nChange='getSection('findsection.php?subject='+this.value)'>""; while ($row = $result->fetch_assoc()) { unset($id, $name); $name = $row['name']; echo '<option value=""subject"">' . $name . '</option>'; } echo ""</select>""; ?> </div> <br> <div id=""sectiondiv""> Section: <select name=""select""> </select> </div><? $subject=intval($_GET[‘subject’]);; $servername = ""localhost""; $username = ""fhdfhdfhf""; $password = ""ghhfghgh""; $dbname = ""ghghgh""; $mysqli = new Mysqli($servername, $username, $password, $dbname) or mysqli_error($mysqli); $section = $mysqli->query(""SELECT section FROM class WHERE name = '$subject'"")->fetch_object()->section; $result=mysql_query($section);?> <select name=""section""> <? while ($row = $result->fetch_assoc()) { ?> <option value><?=$row['section']?></option> <? } ?> </select><script type=""text/javascript""> function getSection(strURL) { var req = getXMLHTTP(); // fuction to get xmlhttp object if (req) { req.onreadystatechange = function() { if (req.readyState == 4) { //data is retrieved from server if (req.status == 200) { // which reprents ok status document.getElementById('sectiondiv').innerHTML=req.responseText; } else { alert(""There was a problem while using XMLHTTP:\n""); } } } req.open(""GET"", strURL, true); //open url using get method req.send(null); } } </script>"
"465","bad","id name parentid name parentfunction print_menu($id = 0) { $sql = ""SELECT directories.id AS id, directories.name AS name, directories.parent AS parent, directories.icon AS icon FROM directories WHERE directories.parent = '"".$id.""' GROUP BY directories.id ORDER BY directories.name ASC""; $req = $cnx->prepare($sql); $req->execute(); if ($req->rowCount()>0) { echo ""<ul>""; while ($data=$req->fetch()) { echo ""<li>"".$data['name'].""</li>""; print_menu($data['id']); } echo ""</ul>""; } }"
"466","bad","id name parentid name parentfunction print_menu($id = 0) { $sql = ""SELECT directories.id AS id, directories.name AS name, directories.parent AS parent, directories.icon AS icon FROM directories WHERE directories.parent = '"".$id.""' GROUP BY directories.id ORDER BY directories.name ASC""; $req = $cnx->prepare($sql); $req->execute(); if ($req->rowCount()>0) { echo ""<ul>""; while ($data=$req->fetch()) { echo ""<li>"".$data['name'].""</li>""; print_menu($data['id']); } echo ""</ul>""; } }"
"467","bad","id name parentid name parentfunction print_menu($id = 0) { $sql = ""SELECT directories.id AS id, directories.name AS name, directories.parent AS parent, directories.icon AS icon FROM directories WHERE directories.parent = '"".$id.""' GROUP BY directories.id ORDER BY directories.name ASC""; $req = $cnx->prepare($sql); $req->execute(); if ($req->rowCount()>0) { echo ""<ul>""; while ($data=$req->fetch()) { echo ""<li>"".$data['name'].""</li>""; print_menu($data['id']); } echo ""</ul>""; } }"
"468","bad","<?php require_once('../layout.php'); require_once('../dbconnect.php'); class student{ public $f_name; public $l_name; public $email; public $state; public $phone; public $birthday; public function __construct($f_name,$l_name,$email,$state,$phone,$birthday) { $f_name = $_POST['f_name']; $l_name = $_POST['l_name']; $email = $_POST['email']; $state = $_POST['state']; $phone = $_POST['phone']; $birthday = $_POST['birthday']; $query = 'INSERT INTO `student`(`first_name`, `last_name`, `email`, `state`, `phone`, `birthday`) VALUES ($f_name,$l_name,$email,$state,$phone,$birthday)'; $resultquery = mysqli_query($dbconnect,$query); if($resultquery) { echo ""<div class='alert alert-success'>dsf</div>""; } } } ?> <form method=""post"" class=""col-md-6 col-md-offset-3""> <input name=""f_name"" class=""form-control""> <input name=""l_name"" class=""form-control""> <input name=""email"" class=""form-control""> <input name=""state"" class=""form-control""> <input name=""phone"" class=""form-control""> <input name=""birthday"" class=""form-control"" type=""date""> <input name=""submit"" type=""submit"" class=""btn btn-default""> </form>"
"469","bad","<?php require_once('../layout.php'); require_once('../dbconnect.php'); class student{ public $f_name; public $l_name; public $email; public $state; public $phone; public $birthday; public function __construct($f_name,$l_name,$email,$state,$phone,$birthday) { $f_name = $_POST['f_name']; $l_name = $_POST['l_name']; $email = $_POST['email']; $state = $_POST['state']; $phone = $_POST['phone']; $birthday = $_POST['birthday']; $query = 'INSERT INTO `student`(`first_name`, `last_name`, `email`, `state`, `phone`, `birthday`) VALUES ($f_name,$l_name,$email,$state,$phone,$birthday)'; $resultquery = mysqli_query($dbconnect,$query); if($resultquery) { echo ""<div class='alert alert-success'>dsf</div>""; } } } ?> <form method=""post"" class=""col-md-6 col-md-offset-3""> <input name=""f_name"" class=""form-control""> <input name=""l_name"" class=""form-control""> <input name=""email"" class=""form-control""> <input name=""state"" class=""form-control""> <input name=""phone"" class=""form-control""> <input name=""birthday"" class=""form-control"" type=""date""> <input name=""submit"" type=""submit"" class=""btn btn-default""> </form>"
"470","bad","<?php session_start(); $id = $_SESSION['user_id']; $db = new PDO('mysql:host=localhost;dbname=idp;charset=utf8','root', ''); foreach($_POST['comp'] as $val){ $tmp['user_id'] = $id; $tmp['comp_id'] = $val; $vars[] = $tmp; } $qry = ""INSERT INTO compentency_result (user_id, result) VALUES (:user_id, :comp_id)""; try { $sql = $db->prepare($qry); $numRows = 0; foreach($vars as $insert){ $numRows += $sql->execute($insert); } print(""<p>There were {$numRows} inserted into the database!</p>""); } catch(PDOException $e) { print(""<p>Oops! There was an issue - this is the message: {$e->getMessage()}</p>""); } ?>"
"471","bad","<?php session_start(); $id = $_SESSION['user_id']; $db = new PDO('mysql:host=localhost;dbname=idp;charset=utf8','root', ''); foreach($_POST['comp'] as $val){ $tmp['user_id'] = $id; $tmp['comp_id'] = $val; $vars[] = $tmp; } $qry = ""INSERT INTO compentency_result (user_id, result) VALUES (:user_id, :comp_id)""; try { $sql = $db->prepare($qry); $numRows = 0; foreach($vars as $insert){ $numRows += $sql->execute($insert); } print(""<p>There were {$numRows} inserted into the database!</p>""); } catch(PDOException $e) { print(""<p>Oops! There was an issue - this is the message: {$e->getMessage()}</p>""); } ?>"
"472","bad","login.phpAccess denied for user 'urbanas8'@'localhost' (using password: NO)<!--LOGIN MODAL --> <?php require_once( ""./inc/connect.inc.php"" ); ?> <div class=""modal fade col-sm-4 col-sm-offset-4"" id=""login"" role=""dialogue""> <div class=""modal-dialogue""> <div class=""modal-content""> <form action="""" method=""POST""> <div class=""modal-header""> <h4>Login</h4> </div> <div class=""modal-body row""> <div class=""form-group""> <div class=""col-sm-12""> <input type=""text"" class=""form-control"" id=""userName"" placeholder=""email address""> </div> <div class=""col-sm-12""> <input type=""password"" class=""form-control"" id=""userPassword"" placeholder=""password""> </div> <!-- END ADDRESS FORM --> </div> </div> <div class=""modal-footer""> <button type=""button"" class = ""btn btn-warning"" id=""loginButton"" value=""login"" name=""/login"">Login</button><a class = ""btn btn-warning"" data-dismiss = ""modal"">Cancel</a> </div> </form> <script> $(document).ready(function(){ $(""#loginButton"").click(function(){ console.log(""test123""); var username = $(""#userName"").val(); var password = $(""#userPassword"").val(); $.post(""../login.php"", {login:username, password:password}, function(data){ console.log(data); }); }); }); </script> </div> </div> </div>login.php<?php if(isset($_POST['login'])){ echo ""<br>login is set<br>""; $user_login = strip_tags($_POST['login']); echo $user_login.""<br>""; $password_login = strip_tags($_POST['password']); echo $password_login.""<br>""; $password_login = md5($password_login); echo $password_login.""<br>""; $sql = mysql_query(""SELECT * FROM users WHERE email='$user_login' AND password='$password_login' LIMIT 1"") or die(mysql_error()); $userCount = mysql_num_rows($sql); echo $userCount.""<br>""; if($userCount == 1){ while($row = mysql_fetch_array($sql)){ $user_id = $row[""id""]; $user_fname = $row[""first_name""]; $user_lname = $row[""last_name""]; $user_membersince = $row[""date""]; } $_SESSION['user_email'] = $user_login; $_SESSION['user_fname'] = $user_fname; $_SESSION['user_lname'] = $user_lname; $_SESSION['user_membersince'] = $user_membersince; echo(""logged in!""); }else { echo(""invalid username/password""); } } ?>connection.inc.php<?php $db = mysql_connect(""localhost:3306"", ""urbanas8_login"", ""Ure1982*"") or die(mysql_error); mysql_select_db('urbanas8_db', $db) or die(mysql_error()); ?>"
"473","bad","login.phpAccess denied for user 'urbanas8'@'localhost' (using password: NO)<!--LOGIN MODAL --> <?php require_once( ""./inc/connect.inc.php"" ); ?> <div class=""modal fade col-sm-4 col-sm-offset-4"" id=""login"" role=""dialogue""> <div class=""modal-dialogue""> <div class=""modal-content""> <form action="""" method=""POST""> <div class=""modal-header""> <h4>Login</h4> </div> <div class=""modal-body row""> <div class=""form-group""> <div class=""col-sm-12""> <input type=""text"" class=""form-control"" id=""userName"" placeholder=""email address""> </div> <div class=""col-sm-12""> <input type=""password"" class=""form-control"" id=""userPassword"" placeholder=""password""> </div> <!-- END ADDRESS FORM --> </div> </div> <div class=""modal-footer""> <button type=""button"" class = ""btn btn-warning"" id=""loginButton"" value=""login"" name=""/login"">Login</button><a class = ""btn btn-warning"" data-dismiss = ""modal"">Cancel</a> </div> </form> <script> $(document).ready(function(){ $(""#loginButton"").click(function(){ console.log(""test123""); var username = $(""#userName"").val(); var password = $(""#userPassword"").val(); $.post(""../login.php"", {login:username, password:password}, function(data){ console.log(data); }); }); }); </script> </div> </div> </div>login.php<?php if(isset($_POST['login'])){ echo ""<br>login is set<br>""; $user_login = strip_tags($_POST['login']); echo $user_login.""<br>""; $password_login = strip_tags($_POST['password']); echo $password_login.""<br>""; $password_login = md5($password_login); echo $password_login.""<br>""; $sql = mysql_query(""SELECT * FROM users WHERE email='$user_login' AND password='$password_login' LIMIT 1"") or die(mysql_error()); $userCount = mysql_num_rows($sql); echo $userCount.""<br>""; if($userCount == 1){ while($row = mysql_fetch_array($sql)){ $user_id = $row[""id""]; $user_fname = $row[""first_name""]; $user_lname = $row[""last_name""]; $user_membersince = $row[""date""]; } $_SESSION['user_email'] = $user_login; $_SESSION['user_fname'] = $user_fname; $_SESSION['user_lname'] = $user_lname; $_SESSION['user_membersince'] = $user_membersince; echo(""logged in!""); }else { echo(""invalid username/password""); } } ?>connection.inc.php<?php $db = mysql_connect(""localhost:3306"", ""urbanas8_login"", ""Ure1982*"") or die(mysql_error); mysql_select_db('urbanas8_db', $db) or die(mysql_error()); ?>"
"474","bad","login.phpAccess denied for user 'urbanas8'@'localhost' (using password: NO)<!--LOGIN MODAL --> <?php require_once( ""./inc/connect.inc.php"" ); ?> <div class=""modal fade col-sm-4 col-sm-offset-4"" id=""login"" role=""dialogue""> <div class=""modal-dialogue""> <div class=""modal-content""> <form action="""" method=""POST""> <div class=""modal-header""> <h4>Login</h4> </div> <div class=""modal-body row""> <div class=""form-group""> <div class=""col-sm-12""> <input type=""text"" class=""form-control"" id=""userName"" placeholder=""email address""> </div> <div class=""col-sm-12""> <input type=""password"" class=""form-control"" id=""userPassword"" placeholder=""password""> </div> <!-- END ADDRESS FORM --> </div> </div> <div class=""modal-footer""> <button type=""button"" class = ""btn btn-warning"" id=""loginButton"" value=""login"" name=""/login"">Login</button><a class = ""btn btn-warning"" data-dismiss = ""modal"">Cancel</a> </div> </form> <script> $(document).ready(function(){ $(""#loginButton"").click(function(){ console.log(""test123""); var username = $(""#userName"").val(); var password = $(""#userPassword"").val(); $.post(""../login.php"", {login:username, password:password}, function(data){ console.log(data); }); }); }); </script> </div> </div> </div>login.php<?php if(isset($_POST['login'])){ echo ""<br>login is set<br>""; $user_login = strip_tags($_POST['login']); echo $user_login.""<br>""; $password_login = strip_tags($_POST['password']); echo $password_login.""<br>""; $password_login = md5($password_login); echo $password_login.""<br>""; $sql = mysql_query(""SELECT * FROM users WHERE email='$user_login' AND password='$password_login' LIMIT 1"") or die(mysql_error()); $userCount = mysql_num_rows($sql); echo $userCount.""<br>""; if($userCount == 1){ while($row = mysql_fetch_array($sql)){ $user_id = $row[""id""]; $user_fname = $row[""first_name""]; $user_lname = $row[""last_name""]; $user_membersince = $row[""date""]; } $_SESSION['user_email'] = $user_login; $_SESSION['user_fname'] = $user_fname; $_SESSION['user_lname'] = $user_lname; $_SESSION['user_membersince'] = $user_membersince; echo(""logged in!""); }else { echo(""invalid username/password""); } } ?>connection.inc.php<?php $db = mysql_connect(""localhost:3306"", ""urbanas8_login"", ""Ure1982*"") or die(mysql_error); mysql_select_db('urbanas8_db', $db) or die(mysql_error()); ?>"
"475","bad","$_GET<?php /* example: website-url-here.com/?command=insert-command-here&password=testing */ $command = $_GET[""command""]; $password = $_GET[""password""]; if ($password == ""testing"") { //Was not a good idea, less secure. //echo eval($command); //More secure if ($command == ""create-user"") { //create user command here } else if ($command == ""delete-user"") { //delete user command here } else { die(""Command is incorrect""); } } echo ""Success""; ?>"
"476","bad","<?php /** * Wishlist page template * * @author Your Inspiration Themes * @package YITH WooCommerce Wishlist * @version 1.0.0 */ global $wpdb, $yith_wcwl, $woocommerce; if( isset( $_GET['user_id'] ) && !empty( $_GET['user_id'] ) ) { $user_id = $_GET['user_id']; } elseif( is_user_logged_in() ) { $user_id = get_current_user_id(); } $current_page = 1; $limit_sql = ''; if( $pagination == 'yes' ) { $count = array(); if( is_user_logged_in() ) { $count = $wpdb->get_results( $wpdb->prepare( 'SELECT COUNT(*) as `cnt` FROM `' . YITH_WCWL_TABLE . '` WHERE `user_id` = %d', $user_id ), ARRAY_A ); $count = $count[0]['cnt']; } elseif( yith_usecookies() ) { $count[0]['cnt'] = count( yith_getcookie( 'yith_wcwl_products' ) ); } else { $count[0]['cnt'] = count( $_SESSION['yith_wcwl_products'] ); } $total_pages = $count/$per_page; if( $total_pages > 1 ) { $current_page = max( 1, get_query_var( 'page' ) ); $page_links = paginate_links( array( 'base' => get_pagenum_link( 1 ) . '%_%', 'format' => '&page=%#%', 'current' => $current_page, 'total' => $total_pages, 'show_all' => true ) ); } $limit_sql = ""LIMIT "" . ( $current_page - 1 ) * 1 . ',' . $per_page; } if( is_user_logged_in() ) { $wishlist = $wpdb->get_results( $wpdb->prepare( ""SELECT * FROM `"" . YITH_WCWL_TABLE . ""` WHERE `user_id` = %s"" . $limit_sql, $user_id ), ARRAY_A ); } elseif( yith_usecookies() ) { $wishlist = yith_getcookie( 'yith_wcwl_products' ); } else { $wishlist = isset( $_SESSION['yith_wcwl_products'] ) ? $_SESSION['yith_wcwl_products'] : array(); } // Start wishlist page printing $woocommerce->show_messages() ?> <div id=""yith-wcwl-messages""></div> <form id=""yith-wcwl-form"" action=""<?php echo esc_url( $yith_wcwl->get_wishlist_url() ) ?>"" method=""post""> <?php do_action( 'yith_wcwl_before_wishlist_title' ); $wishlist_title = get_option( 'yith_wcwl_wishlist_title' ); if( !empty( $wishlist_title ) ) { echo apply_filters( 'yith_wcwl_wishlist_title', '<h2>' . $wishlist_title . '</h2>' ); } do_action( 'yith_wcwl_before_wishlist' ); ?> <table class=""shop_table cart wishlist_table"" cellspacing=""0""> <thead> <tr> <th class=""product-thumbnail""><?php _e( 'Image', 'Maxshop' ) ?></th> <th class=""product-name""><?php _e( 'Product Name', 'Maxshop' ) ?></th> <th class=""product-price""><?php _e( 'Unit Price', 'Maxshop' ) ?></th> <th><?php _e( 'Stock Status', 'Maxshop' ) ?></th> <th><?php _e( 'Action', 'Maxshop' ) ?></th> <th class=""product-remove""><?php _e( 'Remove', 'Maxshop' ) ?></th> </tr> </thead> <tbody> <?php if( count( $wishlist ) > 0 ) : foreach( $wishlist as $values ) : if( !is_user_logged_in() ) { if( isset( $values['add-to-wishlist'] ) && is_numeric( $values['add-to-wishlist'] ) ) { $values['prod_id'] = $values['add-to-wishlist']; $values['ID'] = $values['add-to-wishlist']; } else { $values['prod_id'] = $values['product_id']; $values['ID'] = $values['product_id']; } } $product_obj = get_product( $values['prod_id'] ); if( $product_obj !== false && $product_obj->exists() ) : ?> <tr id=""yith-wcwl-row-<?php echo $values['ID'] ?>""> <td class=""product-thumbnail""> <a href=""<?php echo esc_url( get_permalink( apply_filters( 'woocommerce_in_cart_product', $values['prod_id'] ) ) ) ?>""> <?php echo $product_obj->get_image() ?> </a> </td> <td class=""product-name""> <a href=""<?php echo esc_url( get_permalink( apply_filters( 'woocommerce_in_cart_product', $values['prod_id'] ) ) ) ?>""><?php echo apply_filters( 'woocommerce_in_cartproduct_obj_title', $product_obj->get_title(), $product_obj ) ?></a> </td> <td class=""product-price""> <?php if( get_option( 'woocommerce_display_cart_prices_excluding_tax' ) == 'yes' ) { echo apply_filters( 'woocommerce_cart_item_price_html', woocommerce_price( $product_obj->get_price_excluding_tax() ), $values, '' ); } else { echo apply_filters( 'woocommerce_cart_item_price_html', woocommerce_price( $product_obj->get_price() ), $values, '' ); } ?> </td> <td class=""product-stock-status""> <?php $availability = $product_obj->get_availability(); $stock_status = $availability['class']; if( $stock_status == 'out-of-stock' ) { $stock_status = ""Out""; echo '<span class=""wishlist-out-of-stock"">' . __( 'Out of Stock', 'Maxshop' ) . '</span>'; } else { $stock_status = ""In""; echo '<span class=""wishlist-in-stock"">' . __( 'In Stock', 'Maxshop' ) . '</span>'; } ?> </td> <td class=""product-add-to-cart""> <?php echo YITH_WCWL_UI::add_to_cart_button( $values['prod_id'], $availability['class'] ) ?> </td> <td class=""product-remove""><div><a href=""javascript:void(0)"" onclick=""remove_item_from_wishlist( '<?php echo esc_url( $yith_wcwl->get_remove_url( $values['ID'] ) )?>', 'yith-wcwl-row-<?php echo $values['ID'] ?>');"" class=""remove"" title=""<?php _e( 'Remove this product', 'Maxshop' ) ?>"">&times;</a></td> </tr> <?php endif; endforeach; else: ?> <tr> <td colspan=""6"" class=""wishlist-empty""><?php _e( 'No products were added to the wishlist', 'Maxshop' ) ?></td> </tr> <?php endif; if( isset( $page_links ) ) : ?> <tr> <td colspan=""6""><?php echo $page_links ?></td> </tr> <?php endif ?> </tbody> </table> <?php do_action( 'yith_wcwl_after_wishlist' ); yith_wcwl_get_template( 'share.php' ); do_action( 'yith_wcwl_after_wishlist_share' ); ?> </form>/****************************WISHLIST**********************************/ .wishlist_table{margin: 20px 0;} .wishlist_table thead tr{ background: #f0f0f0; width: 100%; } .wishlist_table th{ height: 72px; line-height: 72px; padding: 0px; text-align: center; text-transform: uppercase; width: 175px; color: #000000; font: 15px 'Arial', sans-serif; border: 1px solid #dfdfdf; vertical-align: middle; } .wishlist_table td{ text-align: center !important; width: 150px; height: 80px; padding: 22px; color: #000000; font: 15px 'Arial', sans-serif; border: 1px solid #dfdfdf; vertical-align: middle; } /*=============================Wishlist Button===============================*/ .yith-wcwl-add-to-wishlist{ width: 145px; margin-bottom: 15px; } .icon .yith-wcwl-add-to-wishlist{ width: 42px; display: inline-block; margin: 0; } .icon .yith-wcwl-add-to-wishlist img{ display: none !important; } .icon .yith-wcwl-add-to-wishlist span{ font-size: 9px; } .icon div.clear{ display: none; } .icon .yith-wcwl-wishlistexistsbrowse, .icon .yith-wcwl-wishlistaddedbrowse{ font-size: 8px; height: 21px; } .icon .yith-wcwl-wishlistexistsbrowse span, .icon .yith-wcwl-wishlistaddedbrowse span{ display: none; } #selectpage{display:none} table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb} table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center} table td, table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:6px 12px} table td:first-child,table th:first-child{border-left-width:0} table thead{background:#e0e0e0;color:#000;text-align:left;vertical-align:bottom} table td{background-color:transparent} .table-odd td{background-color:#f2f2f2} .table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2} .table-bordered td{border-bottom:1px solid #cbcbcb} .table-bordered tbody>tr:last-child td, .table-horizontal tbody>tr:last-child td{border-bottom-width:0} .table-horizontal td, .table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb} .table-horizontal tbody>tr:last-child td{border-bottom-width:0} .top-spacing{margin-top:40px !important; margin-bottom:10px} .toggle-trigger { background: #fff url(""images/plus.png"") 90% center no-repeat; cursor: pointer; color:#333; transition: all 0.17s ease-in-out; -moz-transition: all 0.17s ease-in-out; -webkit-transition: all 0.17s ease-in-out; -o-transition: all 0.17s ease-in-out; } .toggle-trigger.open { color:#fff; background: #6a6a6a url(""images/minas.png"") 90% center no-repeat } .toggle-container { padding: 12px 22px; border: 1px solid #e8e8e8; border-top: none; } .container{max-width:100% !important} .nav-tabs li, .work_slide li{list-style:none !important; margin-left:0 !Important; line-height:1.3} .btn [class^=""icon-""], .btn [class*="" icon-""]{margin-right:6px !Important} strong {font-weight:bold} em {font-style:italic} .flex-video iframe, ifame{max-width:100% !important; } .woocommerce li {list-style: none !important;margin-left:0} .shopping-cart .title li, .shopping-cart ul li{margin-left:0 !important} .showlogin {} /*::-moz-selection { background: #f71919; color: #fff; text-shadow: none; } ::selection { background: #f71919; color: #fff; text-shadow: none; }*/ #wc-sorting {margin:-58px 0 40px 16px} .product figure {border:1px solid #fff; border-bottom:none} .product figure {border:1px solid #fff; border-bottom:none} .related.products figure, .related.products figure > a {width:100% !important; height:auto !important} .related.products h2 {margin-bottom:12px} .related.products li{border-bottom:none !important} .sort-select {margin:-58px 0 38px 10px;display: none;} .sub-menu ul.sub-menu {left: 150px; top:50px} .single-product-right{ margin-left:10px} .product-left .images {width:auto !Important} .thumbnails a {margin-bottom:10px} .product-detail .compare.big-button{margin-top:37px} .no-shadow:hover{box-shadow:none !important} .single-product .yith-wcwl-add-to-wishlist{float:left; width:124px} .single-product a.compare {width:40px; float:left; margin-top:10px} .single-product .product-detail div.clear {display:none}"
"477","bad","<?php /** * Wishlist page template * * @author Your Inspiration Themes * @package YITH WooCommerce Wishlist * @version 1.0.0 */ global $wpdb, $yith_wcwl, $woocommerce; if( isset( $_GET['user_id'] ) && !empty( $_GET['user_id'] ) ) { $user_id = $_GET['user_id']; } elseif( is_user_logged_in() ) { $user_id = get_current_user_id(); } $current_page = 1; $limit_sql = ''; if( $pagination == 'yes' ) { $count = array(); if( is_user_logged_in() ) { $count = $wpdb->get_results( $wpdb->prepare( 'SELECT COUNT(*) as `cnt` FROM `' . YITH_WCWL_TABLE . '` WHERE `user_id` = %d', $user_id ), ARRAY_A ); $count = $count[0]['cnt']; } elseif( yith_usecookies() ) { $count[0]['cnt'] = count( yith_getcookie( 'yith_wcwl_products' ) ); } else { $count[0]['cnt'] = count( $_SESSION['yith_wcwl_products'] ); } $total_pages = $count/$per_page; if( $total_pages > 1 ) { $current_page = max( 1, get_query_var( 'page' ) ); $page_links = paginate_links( array( 'base' => get_pagenum_link( 1 ) . '%_%', 'format' => '&page=%#%', 'current' => $current_page, 'total' => $total_pages, 'show_all' => true ) ); } $limit_sql = ""LIMIT "" . ( $current_page - 1 ) * 1 . ',' . $per_page; } if( is_user_logged_in() ) { $wishlist = $wpdb->get_results( $wpdb->prepare( ""SELECT * FROM `"" . YITH_WCWL_TABLE . ""` WHERE `user_id` = %s"" . $limit_sql, $user_id ), ARRAY_A ); } elseif( yith_usecookies() ) { $wishlist = yith_getcookie( 'yith_wcwl_products' ); } else { $wishlist = isset( $_SESSION['yith_wcwl_products'] ) ? $_SESSION['yith_wcwl_products'] : array(); } // Start wishlist page printing $woocommerce->show_messages() ?> <div id=""yith-wcwl-messages""></div> <form id=""yith-wcwl-form"" action=""<?php echo esc_url( $yith_wcwl->get_wishlist_url() ) ?>"" method=""post""> <?php do_action( 'yith_wcwl_before_wishlist_title' ); $wishlist_title = get_option( 'yith_wcwl_wishlist_title' ); if( !empty( $wishlist_title ) ) { echo apply_filters( 'yith_wcwl_wishlist_title', '<h2>' . $wishlist_title . '</h2>' ); } do_action( 'yith_wcwl_before_wishlist' ); ?> <table class=""shop_table cart wishlist_table"" cellspacing=""0""> <thead> <tr> <th class=""product-thumbnail""><?php _e( 'Image', 'Maxshop' ) ?></th> <th class=""product-name""><?php _e( 'Product Name', 'Maxshop' ) ?></th> <th class=""product-price""><?php _e( 'Unit Price', 'Maxshop' ) ?></th> <th><?php _e( 'Stock Status', 'Maxshop' ) ?></th> <th><?php _e( 'Action', 'Maxshop' ) ?></th> <th class=""product-remove""><?php _e( 'Remove', 'Maxshop' ) ?></th> </tr> </thead> <tbody> <?php if( count( $wishlist ) > 0 ) : foreach( $wishlist as $values ) : if( !is_user_logged_in() ) { if( isset( $values['add-to-wishlist'] ) && is_numeric( $values['add-to-wishlist'] ) ) { $values['prod_id'] = $values['add-to-wishlist']; $values['ID'] = $values['add-to-wishlist']; } else { $values['prod_id'] = $values['product_id']; $values['ID'] = $values['product_id']; } } $product_obj = get_product( $values['prod_id'] ); if( $product_obj !== false && $product_obj->exists() ) : ?> <tr id=""yith-wcwl-row-<?php echo $values['ID'] ?>""> <td class=""product-thumbnail""> <a href=""<?php echo esc_url( get_permalink( apply_filters( 'woocommerce_in_cart_product', $values['prod_id'] ) ) ) ?>""> <?php echo $product_obj->get_image() ?> </a> </td> <td class=""product-name""> <a href=""<?php echo esc_url( get_permalink( apply_filters( 'woocommerce_in_cart_product', $values['prod_id'] ) ) ) ?>""><?php echo apply_filters( 'woocommerce_in_cartproduct_obj_title', $product_obj->get_title(), $product_obj ) ?></a> </td> <td class=""product-price""> <?php if( get_option( 'woocommerce_display_cart_prices_excluding_tax' ) == 'yes' ) { echo apply_filters( 'woocommerce_cart_item_price_html', woocommerce_price( $product_obj->get_price_excluding_tax() ), $values, '' ); } else { echo apply_filters( 'woocommerce_cart_item_price_html', woocommerce_price( $product_obj->get_price() ), $values, '' ); } ?> </td> <td class=""product-stock-status""> <?php $availability = $product_obj->get_availability(); $stock_status = $availability['class']; if( $stock_status == 'out-of-stock' ) { $stock_status = ""Out""; echo '<span class=""wishlist-out-of-stock"">' . __( 'Out of Stock', 'Maxshop' ) . '</span>'; } else { $stock_status = ""In""; echo '<span class=""wishlist-in-stock"">' . __( 'In Stock', 'Maxshop' ) . '</span>'; } ?> </td> <td class=""product-add-to-cart""> <?php echo YITH_WCWL_UI::add_to_cart_button( $values['prod_id'], $availability['class'] ) ?> </td> <td class=""product-remove""><div><a href=""javascript:void(0)"" onclick=""remove_item_from_wishlist( '<?php echo esc_url( $yith_wcwl->get_remove_url( $values['ID'] ) )?>', 'yith-wcwl-row-<?php echo $values['ID'] ?>');"" class=""remove"" title=""<?php _e( 'Remove this product', 'Maxshop' ) ?>"">&times;</a></td> </tr> <?php endif; endforeach; else: ?> <tr> <td colspan=""6"" class=""wishlist-empty""><?php _e( 'No products were added to the wishlist', 'Maxshop' ) ?></td> </tr> <?php endif; if( isset( $page_links ) ) : ?> <tr> <td colspan=""6""><?php echo $page_links ?></td> </tr> <?php endif ?> </tbody> </table> <?php do_action( 'yith_wcwl_after_wishlist' ); yith_wcwl_get_template( 'share.php' ); do_action( 'yith_wcwl_after_wishlist_share' ); ?> </form>/****************************WISHLIST**********************************/ .wishlist_table{margin: 20px 0;} .wishlist_table thead tr{ background: #f0f0f0; width: 100%; } .wishlist_table th{ height: 72px; line-height: 72px; padding: 0px; text-align: center; text-transform: uppercase; width: 175px; color: #000000; font: 15px 'Arial', sans-serif; border: 1px solid #dfdfdf; vertical-align: middle; } .wishlist_table td{ text-align: center !important; width: 150px; height: 80px; padding: 22px; color: #000000; font: 15px 'Arial', sans-serif; border: 1px solid #dfdfdf; vertical-align: middle; } /*=============================Wishlist Button===============================*/ .yith-wcwl-add-to-wishlist{ width: 145px; margin-bottom: 15px; } .icon .yith-wcwl-add-to-wishlist{ width: 42px; display: inline-block; margin: 0; } .icon .yith-wcwl-add-to-wishlist img{ display: none !important; } .icon .yith-wcwl-add-to-wishlist span{ font-size: 9px; } .icon div.clear{ display: none; } .icon .yith-wcwl-wishlistexistsbrowse, .icon .yith-wcwl-wishlistaddedbrowse{ font-size: 8px; height: 21px; } .icon .yith-wcwl-wishlistexistsbrowse span, .icon .yith-wcwl-wishlistaddedbrowse span{ display: none; } #selectpage{display:none} table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb} table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center} table td, table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:6px 12px} table td:first-child,table th:first-child{border-left-width:0} table thead{background:#e0e0e0;color:#000;text-align:left;vertical-align:bottom} table td{background-color:transparent} .table-odd td{background-color:#f2f2f2} .table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2} .table-bordered td{border-bottom:1px solid #cbcbcb} .table-bordered tbody>tr:last-child td, .table-horizontal tbody>tr:last-child td{border-bottom-width:0} .table-horizontal td, .table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb} .table-horizontal tbody>tr:last-child td{border-bottom-width:0} .top-spacing{margin-top:40px !important; margin-bottom:10px} .toggle-trigger { background: #fff url(""images/plus.png"") 90% center no-repeat; cursor: pointer; color:#333; transition: all 0.17s ease-in-out; -moz-transition: all 0.17s ease-in-out; -webkit-transition: all 0.17s ease-in-out; -o-transition: all 0.17s ease-in-out; } .toggle-trigger.open { color:#fff; background: #6a6a6a url(""images/minas.png"") 90% center no-repeat } .toggle-container { padding: 12px 22px; border: 1px solid #e8e8e8; border-top: none; } .container{max-width:100% !important} .nav-tabs li, .work_slide li{list-style:none !important; margin-left:0 !Important; line-height:1.3} .btn [class^=""icon-""], .btn [class*="" icon-""]{margin-right:6px !Important} strong {font-weight:bold} em {font-style:italic} .flex-video iframe, ifame{max-width:100% !important; } .woocommerce li {list-style: none !important;margin-left:0} .shopping-cart .title li, .shopping-cart ul li{margin-left:0 !important} .showlogin {} /*::-moz-selection { background: #f71919; color: #fff; text-shadow: none; } ::selection { background: #f71919; color: #fff; text-shadow: none; }*/ #wc-sorting {margin:-58px 0 40px 16px} .product figure {border:1px solid #fff; border-bottom:none} .product figure {border:1px solid #fff; border-bottom:none} .related.products figure, .related.products figure > a {width:100% !important; height:auto !important} .related.products h2 {margin-bottom:12px} .related.products li{border-bottom:none !important} .sort-select {margin:-58px 0 38px 10px;display: none;} .sub-menu ul.sub-menu {left: 150px; top:50px} .single-product-right{ margin-left:10px} .product-left .images {width:auto !Important} .thumbnails a {margin-bottom:10px} .product-detail .compare.big-button{margin-top:37px} .no-shadow:hover{box-shadow:none !important} .single-product .yith-wcwl-add-to-wishlist{float:left; width:124px} .single-product a.compare {width:40px; float:left; margin-top:10px} .single-product .product-detail div.clear {display:none}"
"478","bad","<?php /** * Wishlist page template * * @author Your Inspiration Themes * @package YITH WooCommerce Wishlist * @version 1.0.0 */ global $wpdb, $yith_wcwl, $woocommerce; if( isset( $_GET['user_id'] ) && !empty( $_GET['user_id'] ) ) { $user_id = $_GET['user_id']; } elseif( is_user_logged_in() ) { $user_id = get_current_user_id(); } $current_page = 1; $limit_sql = ''; if( $pagination == 'yes' ) { $count = array(); if( is_user_logged_in() ) { $count = $wpdb->get_results( $wpdb->prepare( 'SELECT COUNT(*) as `cnt` FROM `' . YITH_WCWL_TABLE . '` WHERE `user_id` = %d', $user_id ), ARRAY_A ); $count = $count[0]['cnt']; } elseif( yith_usecookies() ) { $count[0]['cnt'] = count( yith_getcookie( 'yith_wcwl_products' ) ); } else { $count[0]['cnt'] = count( $_SESSION['yith_wcwl_products'] ); } $total_pages = $count/$per_page; if( $total_pages > 1 ) { $current_page = max( 1, get_query_var( 'page' ) ); $page_links = paginate_links( array( 'base' => get_pagenum_link( 1 ) . '%_%', 'format' => '&page=%#%', 'current' => $current_page, 'total' => $total_pages, 'show_all' => true ) ); } $limit_sql = ""LIMIT "" . ( $current_page - 1 ) * 1 . ',' . $per_page; } if( is_user_logged_in() ) { $wishlist = $wpdb->get_results( $wpdb->prepare( ""SELECT * FROM `"" . YITH_WCWL_TABLE . ""` WHERE `user_id` = %s"" . $limit_sql, $user_id ), ARRAY_A ); } elseif( yith_usecookies() ) { $wishlist = yith_getcookie( 'yith_wcwl_products' ); } else { $wishlist = isset( $_SESSION['yith_wcwl_products'] ) ? $_SESSION['yith_wcwl_products'] : array(); } // Start wishlist page printing $woocommerce->show_messages() ?> <div id=""yith-wcwl-messages""></div> <form id=""yith-wcwl-form"" action=""<?php echo esc_url( $yith_wcwl->get_wishlist_url() ) ?>"" method=""post""> <?php do_action( 'yith_wcwl_before_wishlist_title' ); $wishlist_title = get_option( 'yith_wcwl_wishlist_title' ); if( !empty( $wishlist_title ) ) { echo apply_filters( 'yith_wcwl_wishlist_title', '<h2>' . $wishlist_title . '</h2>' ); } do_action( 'yith_wcwl_before_wishlist' ); ?> <table class=""shop_table cart wishlist_table"" cellspacing=""0""> <thead> <tr> <th class=""product-thumbnail""><?php _e( 'Image', 'Maxshop' ) ?></th> <th class=""product-name""><?php _e( 'Product Name', 'Maxshop' ) ?></th> <th class=""product-price""><?php _e( 'Unit Price', 'Maxshop' ) ?></th> <th><?php _e( 'Stock Status', 'Maxshop' ) ?></th> <th><?php _e( 'Action', 'Maxshop' ) ?></th> <th class=""product-remove""><?php _e( 'Remove', 'Maxshop' ) ?></th> </tr> </thead> <tbody> <?php if( count( $wishlist ) > 0 ) : foreach( $wishlist as $values ) : if( !is_user_logged_in() ) { if( isset( $values['add-to-wishlist'] ) && is_numeric( $values['add-to-wishlist'] ) ) { $values['prod_id'] = $values['add-to-wishlist']; $values['ID'] = $values['add-to-wishlist']; } else { $values['prod_id'] = $values['product_id']; $values['ID'] = $values['product_id']; } } $product_obj = get_product( $values['prod_id'] ); if( $product_obj !== false && $product_obj->exists() ) : ?> <tr id=""yith-wcwl-row-<?php echo $values['ID'] ?>""> <td class=""product-thumbnail""> <a href=""<?php echo esc_url( get_permalink( apply_filters( 'woocommerce_in_cart_product', $values['prod_id'] ) ) ) ?>""> <?php echo $product_obj->get_image() ?> </a> </td> <td class=""product-name""> <a href=""<?php echo esc_url( get_permalink( apply_filters( 'woocommerce_in_cart_product', $values['prod_id'] ) ) ) ?>""><?php echo apply_filters( 'woocommerce_in_cartproduct_obj_title', $product_obj->get_title(), $product_obj ) ?></a> </td> <td class=""product-price""> <?php if( get_option( 'woocommerce_display_cart_prices_excluding_tax' ) == 'yes' ) { echo apply_filters( 'woocommerce_cart_item_price_html', woocommerce_price( $product_obj->get_price_excluding_tax() ), $values, '' ); } else { echo apply_filters( 'woocommerce_cart_item_price_html', woocommerce_price( $product_obj->get_price() ), $values, '' ); } ?> </td> <td class=""product-stock-status""> <?php $availability = $product_obj->get_availability(); $stock_status = $availability['class']; if( $stock_status == 'out-of-stock' ) { $stock_status = ""Out""; echo '<span class=""wishlist-out-of-stock"">' . __( 'Out of Stock', 'Maxshop' ) . '</span>'; } else { $stock_status = ""In""; echo '<span class=""wishlist-in-stock"">' . __( 'In Stock', 'Maxshop' ) . '</span>'; } ?> </td> <td class=""product-add-to-cart""> <?php echo YITH_WCWL_UI::add_to_cart_button( $values['prod_id'], $availability['class'] ) ?> </td> <td class=""product-remove""><div><a href=""javascript:void(0)"" onclick=""remove_item_from_wishlist( '<?php echo esc_url( $yith_wcwl->get_remove_url( $values['ID'] ) )?>', 'yith-wcwl-row-<?php echo $values['ID'] ?>');"" class=""remove"" title=""<?php _e( 'Remove this product', 'Maxshop' ) ?>"">&times;</a></td> </tr> <?php endif; endforeach; else: ?> <tr> <td colspan=""6"" class=""wishlist-empty""><?php _e( 'No products were added to the wishlist', 'Maxshop' ) ?></td> </tr> <?php endif; if( isset( $page_links ) ) : ?> <tr> <td colspan=""6""><?php echo $page_links ?></td> </tr> <?php endif ?> </tbody> </table> <?php do_action( 'yith_wcwl_after_wishlist' ); yith_wcwl_get_template( 'share.php' ); do_action( 'yith_wcwl_after_wishlist_share' ); ?> </form>/****************************WISHLIST**********************************/ .wishlist_table{margin: 20px 0;} .wishlist_table thead tr{ background: #f0f0f0; width: 100%; } .wishlist_table th{ height: 72px; line-height: 72px; padding: 0px; text-align: center; text-transform: uppercase; width: 175px; color: #000000; font: 15px 'Arial', sans-serif; border: 1px solid #dfdfdf; vertical-align: middle; } .wishlist_table td{ text-align: center !important; width: 150px; height: 80px; padding: 22px; color: #000000; font: 15px 'Arial', sans-serif; border: 1px solid #dfdfdf; vertical-align: middle; } /*=============================Wishlist Button===============================*/ .yith-wcwl-add-to-wishlist{ width: 145px; margin-bottom: 15px; } .icon .yith-wcwl-add-to-wishlist{ width: 42px; display: inline-block; margin: 0; } .icon .yith-wcwl-add-to-wishlist img{ display: none !important; } .icon .yith-wcwl-add-to-wishlist span{ font-size: 9px; } .icon div.clear{ display: none; } .icon .yith-wcwl-wishlistexistsbrowse, .icon .yith-wcwl-wishlistaddedbrowse{ font-size: 8px; height: 21px; } .icon .yith-wcwl-wishlistexistsbrowse span, .icon .yith-wcwl-wishlistaddedbrowse span{ display: none; } #selectpage{display:none} table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb} table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center} table td, table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:6px 12px} table td:first-child,table th:first-child{border-left-width:0} table thead{background:#e0e0e0;color:#000;text-align:left;vertical-align:bottom} table td{background-color:transparent} .table-odd td{background-color:#f2f2f2} .table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2} .table-bordered td{border-bottom:1px solid #cbcbcb} .table-bordered tbody>tr:last-child td, .table-horizontal tbody>tr:last-child td{border-bottom-width:0} .table-horizontal td, .table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb} .table-horizontal tbody>tr:last-child td{border-bottom-width:0} .top-spacing{margin-top:40px !important; margin-bottom:10px} .toggle-trigger { background: #fff url(""images/plus.png"") 90% center no-repeat; cursor: pointer; color:#333; transition: all 0.17s ease-in-out; -moz-transition: all 0.17s ease-in-out; -webkit-transition: all 0.17s ease-in-out; -o-transition: all 0.17s ease-in-out; } .toggle-trigger.open { color:#fff; background: #6a6a6a url(""images/minas.png"") 90% center no-repeat } .toggle-container { padding: 12px 22px; border: 1px solid #e8e8e8; border-top: none; } .container{max-width:100% !important} .nav-tabs li, .work_slide li{list-style:none !important; margin-left:0 !Important; line-height:1.3} .btn [class^=""icon-""], .btn [class*="" icon-""]{margin-right:6px !Important} strong {font-weight:bold} em {font-style:italic} .flex-video iframe, ifame{max-width:100% !important; } .woocommerce li {list-style: none !important;margin-left:0} .shopping-cart .title li, .shopping-cart ul li{margin-left:0 !important} .showlogin {} /*::-moz-selection { background: #f71919; color: #fff; text-shadow: none; } ::selection { background: #f71919; color: #fff; text-shadow: none; }*/ #wc-sorting {margin:-58px 0 40px 16px} .product figure {border:1px solid #fff; border-bottom:none} .product figure {border:1px solid #fff; border-bottom:none} .related.products figure, .related.products figure > a {width:100% !important; height:auto !important} .related.products h2 {margin-bottom:12px} .related.products li{border-bottom:none !important} .sort-select {margin:-58px 0 38px 10px;display: none;} .sub-menu ul.sub-menu {left: 150px; top:50px} .single-product-right{ margin-left:10px} .product-left .images {width:auto !Important} .thumbnails a {margin-bottom:10px} .product-detail .compare.big-button{margin-top:37px} .no-shadow:hover{box-shadow:none !important} .single-product .yith-wcwl-add-to-wishlist{float:left; width:124px} .single-product a.compare {width:40px; float:left; margin-top:10px} .single-product .product-detail div.clear {display:none}"
"479","bad","<?php // this file connects to the database include(""includes/connect.inc.php""); session_start(); if (isset($_SESSION['id'])) { $uid = $_SESSION['id']; } //If the search input was submitted then run if(isset($_POST['search'])){ // turn that the user searched into a varible $searchQ = $_POST['search']; // delete any symbols for security $searchQ = preg_replace(""#[^0-9a-z]#i"", """", $searchQ); // Define varibles before the loop $searchArray = array(); $searchIndex = 0; // Search through these columns inside the main database $searchQuery = mysqli_query(""SELECT * FROM database WHERE title LIKE '%"" . mysqli_escape_string( $searchQ ) . ""%' ""); // count the number of results $searchCount = mysqli_num_rows($searchQuery); if($searchCount != 0){ while($row = mysqli_fetch_array($searchQuery)){ $titleSearch = $row['title']; $dateSearch = $row['date']; // buile the array which will hold all the results $searchArray[$searchIndex] = array($titleSearch, $dateSearch); $searchIndex++; } } } // End of search php <form id=""search"" action=""hub.php"" method=""POST""> <div id=""searchIcon""></div> <input type=""search"" name=""search"" placeholder=""Search""> </form><?php $host = ""MYHOSTINGDOMAIN""; $username = ""MYUSERNAME""; $password = ""MYPASSWORD""; $db = $username; $connect = mysqli_connect($host, $username, $password, $db) or die(mysqli_connect_error());"
"480","bad","<?php // this file connects to the database include(""includes/connect.inc.php""); session_start(); if (isset($_SESSION['id'])) { $uid = $_SESSION['id']; } //If the search input was submitted then run if(isset($_POST['search'])){ // turn that the user searched into a varible $searchQ = $_POST['search']; // delete any symbols for security $searchQ = preg_replace(""#[^0-9a-z]#i"", """", $searchQ); // Define varibles before the loop $searchArray = array(); $searchIndex = 0; // Search through these columns inside the main database $searchQuery = mysqli_query(""SELECT * FROM database WHERE title LIKE '%"" . mysqli_escape_string( $searchQ ) . ""%' ""); // count the number of results $searchCount = mysqli_num_rows($searchQuery); if($searchCount != 0){ while($row = mysqli_fetch_array($searchQuery)){ $titleSearch = $row['title']; $dateSearch = $row['date']; // buile the array which will hold all the results $searchArray[$searchIndex] = array($titleSearch, $dateSearch); $searchIndex++; } } } // End of search php <form id=""search"" action=""hub.php"" method=""POST""> <div id=""searchIcon""></div> <input type=""search"" name=""search"" placeholder=""Search""> </form><?php $host = ""MYHOSTINGDOMAIN""; $username = ""MYUSERNAME""; $password = ""MYPASSWORD""; $db = $username; $connect = mysqli_connect($host, $username, $password, $db) or die(mysqli_connect_error());"
"481","bad","<?php // this file connects to the database include(""includes/connect.inc.php""); session_start(); if (isset($_SESSION['id'])) { $uid = $_SESSION['id']; } //If the search input was submitted then run if(isset($_POST['search'])){ // turn that the user searched into a varible $searchQ = $_POST['search']; // delete any symbols for security $searchQ = preg_replace(""#[^0-9a-z]#i"", """", $searchQ); // Define varibles before the loop $searchArray = array(); $searchIndex = 0; // Search through these columns inside the main database $searchQuery = mysqli_query(""SELECT * FROM database WHERE title LIKE '%"" . mysqli_escape_string( $searchQ ) . ""%' ""); // count the number of results $searchCount = mysqli_num_rows($searchQuery); if($searchCount != 0){ while($row = mysqli_fetch_array($searchQuery)){ $titleSearch = $row['title']; $dateSearch = $row['date']; // buile the array which will hold all the results $searchArray[$searchIndex] = array($titleSearch, $dateSearch); $searchIndex++; } } } // End of search php <form id=""search"" action=""hub.php"" method=""POST""> <div id=""searchIcon""></div> <input type=""search"" name=""search"" placeholder=""Search""> </form><?php $host = ""MYHOSTINGDOMAIN""; $username = ""MYUSERNAME""; $password = ""MYPASSWORD""; $db = $username; $connect = mysqli_connect($host, $username, $password, $db) or die(mysqli_connect_error());"
"482","bad","<?php $names = array(); if(isset($_POST['searchterm'])) { mysql_connect(""localhost"", ""root"", ""Oliver""); mysql_select_db(""videos""); $search = mysql_real_escape_string(trim($_POST['searchterm'])); $find_videos = mysql_query(""SELECT * FROM `videos` WHERE `keywords` LIKE'%$search%'""); while ($row = mysql_fetch_assoc($find_videos)) { $names[] = $row['name']; } } include('session.php'); ?> <!DOCTYPE html> <html> <head> <link href=""http://vjs.zencdn.net/4.12/video-js.css"" rel=""stylesheet""> <link rel=""icon"" type=""image/ico"" href=""images/favicon.ico""> <script src=""http://vjs.zencdn.net/4.12/video.js""></script> <link href=""http://vjs.zencdn.net/4.12/video-js.css"" rel=""stylesheet""> <script src=""http://vjs.zencdn.net/4.12/video.js""></script> <style type=""text/css""> .vjs-default-skin .vjs-control-bar { font-size: 125% } </style> <meta charset=""utf-8""> <title>Network TV | search</title> <meta name=""viewport"" content=""width=device-width, initial-scale=1.0""> <link rel=""stylesheet"" href=""css/bootstrap.css"" /> <link href=""css/font-awesome.css"" rel=""stylesheet"" /> <link href=""css/3.1.1/animate.css"" rel=""stylesheet"" /> <link rel=""stylesheet"" href=""css/styles.css"" /> </head> <body style=""overflow-x: hidden""> <nav class=""navbar navbar-default navbar-fixed-top""> <div class=""container""> <div class=""navbar-header""> <button type=""button"" class=""navbar-toggle collapsed"" data-toggle=""collapse"" data-target=""#navbar"" aria-expanded=""false"" aria-controls=""navbar""> <span class=""sr-only"">Toggle navigation</span> <span class=""icon-bar""></span> <span class=""icon-bar""></span> <span class=""icon-bar""></span> </button> <a class=""navbar-brand"" href=""#"">Network TV</a> </div> <div id=""navbar"" class=""navbar-collapse collapse""> <ul class=""nav navbar-nav""> <li class=""""><a href=""\1\index.php"">Home</a></li> </ul> </div><!--/.nav-collapse --> </div> </nav> <section style=""padding-top:100px; width:100%""class=""container-fluid"" id=""section2""> <h1 class=""text-center"" style=""color:white"">Network TV</h1> <h3 class=""text-center"" style=""color:white""><u>Search results</u></h3> <table class=""table"" style=""color: white""> <thead> <tr> <th>Username</th> </tr> </thead> <tbody> <tr> <td><?php foreach($names as $name) { ?> <td><?php echo $name; ?> <a href=""http://www.google.com""><strong><h7><u>Watch!</u></h7></strong></a></td> <?php } ?></td> </tr> </tbody> </table> </section> <script src=""//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js""></script> <script src=""//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js""></script> <script src=""js/scripts.js""></script> </html>"
"483","bad","<?php $names = array(); if(isset($_POST['searchterm'])) { mysql_connect(""localhost"", ""root"", ""Oliver""); mysql_select_db(""videos""); $search = mysql_real_escape_string(trim($_POST['searchterm'])); $find_videos = mysql_query(""SELECT * FROM `videos` WHERE `keywords` LIKE'%$search%'""); while ($row = mysql_fetch_assoc($find_videos)) { $names[] = $row['name']; } } include('session.php'); ?> <!DOCTYPE html> <html> <head> <link href=""http://vjs.zencdn.net/4.12/video-js.css"" rel=""stylesheet""> <link rel=""icon"" type=""image/ico"" href=""images/favicon.ico""> <script src=""http://vjs.zencdn.net/4.12/video.js""></script> <link href=""http://vjs.zencdn.net/4.12/video-js.css"" rel=""stylesheet""> <script src=""http://vjs.zencdn.net/4.12/video.js""></script> <style type=""text/css""> .vjs-default-skin .vjs-control-bar { font-size: 125% } </style> <meta charset=""utf-8""> <title>Network TV | search</title> <meta name=""viewport"" content=""width=device-width, initial-scale=1.0""> <link rel=""stylesheet"" href=""css/bootstrap.css"" /> <link href=""css/font-awesome.css"" rel=""stylesheet"" /> <link href=""css/3.1.1/animate.css"" rel=""stylesheet"" /> <link rel=""stylesheet"" href=""css/styles.css"" /> </head> <body style=""overflow-x: hidden""> <nav class=""navbar navbar-default navbar-fixed-top""> <div class=""container""> <div class=""navbar-header""> <button type=""button"" class=""navbar-toggle collapsed"" data-toggle=""collapse"" data-target=""#navbar"" aria-expanded=""false"" aria-controls=""navbar""> <span class=""sr-only"">Toggle navigation</span> <span class=""icon-bar""></span> <span class=""icon-bar""></span> <span class=""icon-bar""></span> </button> <a class=""navbar-brand"" href=""#"">Network TV</a> </div> <div id=""navbar"" class=""navbar-collapse collapse""> <ul class=""nav navbar-nav""> <li class=""""><a href=""\1\index.php"">Home</a></li> </ul> </div><!--/.nav-collapse --> </div> </nav> <section style=""padding-top:100px; width:100%""class=""container-fluid"" id=""section2""> <h1 class=""text-center"" style=""color:white"">Network TV</h1> <h3 class=""text-center"" style=""color:white""><u>Search results</u></h3> <table class=""table"" style=""color: white""> <thead> <tr> <th>Username</th> </tr> </thead> <tbody> <tr> <td><?php foreach($names as $name) { ?> <td><?php echo $name; ?> <a href=""http://www.google.com""><strong><h7><u>Watch!</u></h7></strong></a></td> <?php } ?></td> </tr> </tbody> </table> </section> <script src=""//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js""></script> <script src=""//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js""></script> <script src=""js/scripts.js""></script> </html>"
"484","bad","January 2015 Name |1 |2 |3|...|31| STAFF A-Full Name |9:02|8:30| |...| | STAFF B-Full Name |8:43| | |...| |<html> <?php error_reporting(0); //database connection goes here $m = $_POST['month']; $y = $_POST['year']; $inidate= print_r($y.'/'.$m.'/%',true); $sql = ""SELECT NAME, DATEIN, TIMEIN FROM VXDTIME WHERE NAME != '' AND NAME LIKE '%-%' AND NAME NOT LIKE '%Old% %Data%' AND TIMEIN != '' ORDER BY NAME, DATEIN""; $result = ibase_query($connect,$sql); $staff = $dome = array(); $getmonth = date(""m"",strtotime($inidate)); $getyear = date(""Y"",strtotime($inidate)); while($row = ibase_fetch_assoc($result)) { $dome[] = $row; } foreach($dome as &$value) { if (ctype_upper(substr($value['NAME'],0,2))== TRUE) $staff = $value['NAME']; } $staff = array_values(array_unique($staff,SORT_REGULAR)); //*************************** foreach ($staff as $key1 => $value1) { foreach ($dome as $key => $value) { for ($i=0;$i<cal_days_in_month(CAL_GREGORIAN,$getmonth,$getyear);$i++) { if ($value1 == $key['NAME']) //compares name if ($key['DATEIN'] != NULL) //compares date if (idate(""d"",strtotime($key['DATEIN'])) == (i+1)) $key1[$i+1] = $key['TIMEIN']; else $key1[$i+1] = 'No Record'; else $key1[$i+1] = 'Blank'; } } } //Make the array start at 0 //$staff = array_values($staff); //array_walk($staff, create_function('&$v,$k', 'if (is_array($v)) $v=array_values($v);')); $getdate = print_r($y.'/'.$m.'/01',true); echo ""<table border=1><tr><td>No.</td> <td style='width:350'>Name</td>""; for($i=0;$i<cal_days_in_month(CAL_GREGORIAN,$getmonth,$getyear);$i++) echo ""<td style='width:40'>"".($i+1).""</td>""; echo ""</tr>""; $count=0; foreach ($staff as $key => $value) { echo ""<tr><td>"".($count+1).""</td><td>"".$key[0].""</td>""; for($j=1;$j<(cal_days_in_month(CAL_GREGORIAN,$getmonth,$getyear)+1);$j++) { if (date(""D"",strtotime($getdate)) == 'Sat' || date(""D"",strtotime($getdate)) == 'Sun') echo ""<td BGCOLOR='#525266'> </td>""; else if (strtotime($key[$j]) > strtotime('09:10')) echo ""<td BGCOLOR='#ffff00'>"".$key[$j].""</td>""; else echo ""<td>"".$key[$j].""</td>""; } echo ""</tr>""; $getdate=strftime(""%Y/%m/%d"", strtotime(""$getdate +1 day"")); count++; } echo ""</table>""; ?> </html>array 0 => array 'NAME' => string 'STAFF A-Full Name' 'DATEIN' => string '2015/01/01' //string date/time isn't not my choice 'TIMEIN' => string '09:02' 1 => array 'NAME' => string 'STAFF A-Full Name' 'DATEIN' => string '2015/01/02' 'TIMEIN' => string '08:30' 2 => array 'NAME' => string 'STAFF B-Full Name' 'DATEIN' => string '2015/01/01' 'TIMEIN' => string '08:43' 3 => array 'NAME' => string 'Staff B-Full Name' 'DATEIN' => string '2012/01/01' 'TIMEIN' => string '09:11' //and so on...array 0 => array 'NAME' => string 'STAFF A-Full Name' 0 => string '09:02' 1 => string '08:30' 2 => string '09:00' //... all the way to the end of month 1 => array 'NAME' => string 'STAFF B-Full Name' 0 => string '08:43' 1 => string '09:01' 2 => string '08:50' //... //..."
"485","bad","January 2015 Name |1 |2 |3|...|31| STAFF A-Full Name |9:02|8:30| |...| | STAFF B-Full Name |8:43| | |...| |<html> <?php error_reporting(0); //database connection goes here $m = $_POST['month']; $y = $_POST['year']; $inidate= print_r($y.'/'.$m.'/%',true); $sql = ""SELECT NAME, DATEIN, TIMEIN FROM VXDTIME WHERE NAME != '' AND NAME LIKE '%-%' AND NAME NOT LIKE '%Old% %Data%' AND TIMEIN != '' ORDER BY NAME, DATEIN""; $result = ibase_query($connect,$sql); $staff = $dome = array(); $getmonth = date(""m"",strtotime($inidate)); $getyear = date(""Y"",strtotime($inidate)); while($row = ibase_fetch_assoc($result)) { $dome[] = $row; } foreach($dome as &$value) { if (ctype_upper(substr($value['NAME'],0,2))== TRUE) $staff = $value['NAME']; } $staff = array_values(array_unique($staff,SORT_REGULAR)); //*************************** foreach ($staff as $key1 => $value1) { foreach ($dome as $key => $value) { for ($i=0;$i<cal_days_in_month(CAL_GREGORIAN,$getmonth,$getyear);$i++) { if ($value1 == $key['NAME']) //compares name if ($key['DATEIN'] != NULL) //compares date if (idate(""d"",strtotime($key['DATEIN'])) == (i+1)) $key1[$i+1] = $key['TIMEIN']; else $key1[$i+1] = 'No Record'; else $key1[$i+1] = 'Blank'; } } } //Make the array start at 0 //$staff = array_values($staff); //array_walk($staff, create_function('&$v,$k', 'if (is_array($v)) $v=array_values($v);')); $getdate = print_r($y.'/'.$m.'/01',true); echo ""<table border=1><tr><td>No.</td> <td style='width:350'>Name</td>""; for($i=0;$i<cal_days_in_month(CAL_GREGORIAN,$getmonth,$getyear);$i++) echo ""<td style='width:40'>"".($i+1).""</td>""; echo ""</tr>""; $count=0; foreach ($staff as $key => $value) { echo ""<tr><td>"".($count+1).""</td><td>"".$key[0].""</td>""; for($j=1;$j<(cal_days_in_month(CAL_GREGORIAN,$getmonth,$getyear)+1);$j++) { if (date(""D"",strtotime($getdate)) == 'Sat' || date(""D"",strtotime($getdate)) == 'Sun') echo ""<td BGCOLOR='#525266'> </td>""; else if (strtotime($key[$j]) > strtotime('09:10')) echo ""<td BGCOLOR='#ffff00'>"".$key[$j].""</td>""; else echo ""<td>"".$key[$j].""</td>""; } echo ""</tr>""; $getdate=strftime(""%Y/%m/%d"", strtotime(""$getdate +1 day"")); count++; } echo ""</table>""; ?> </html>array 0 => array 'NAME' => string 'STAFF A-Full Name' 'DATEIN' => string '2015/01/01' //string date/time isn't not my choice 'TIMEIN' => string '09:02' 1 => array 'NAME' => string 'STAFF A-Full Name' 'DATEIN' => string '2015/01/02' 'TIMEIN' => string '08:30' 2 => array 'NAME' => string 'STAFF B-Full Name' 'DATEIN' => string '2015/01/01' 'TIMEIN' => string '08:43' 3 => array 'NAME' => string 'Staff B-Full Name' 'DATEIN' => string '2012/01/01' 'TIMEIN' => string '09:11' //and so on...array 0 => array 'NAME' => string 'STAFF A-Full Name' 0 => string '09:02' 1 => string '08:30' 2 => string '09:00' //... all the way to the end of month 1 => array 'NAME' => string 'STAFF B-Full Name' 0 => string '08:43' 1 => string '09:01' 2 => string '08:50' //... //..."
"486","bad","<?php $servername = ""localhost""; $username = ""username""; $password = ""password""; $dbname = ""myDB""; // Create connection $conn = new mysqli($servername, $username, $password, $dbname); // Check connection if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $header = $_POST['header']; // $description = $_POST['description']; // $city = $_POST['city']; $sql = ""UPDATE CityTable SET head=header WHERE id=1""; if ($conn->query($sql) === TRUE) { echo ""Record updated successfully""; } else { echo ""Error updating record: "" . $conn->error; } // $para = $_POST['parameter']; // $parad = $_POST['parameterData']; var_dump($_POST); echo '<br>', '<br>'; echo ""Header, description and city:"" , '<br>', '<br>'; echo ""Header : "" .$header, '<br>'; echo ""Desc : "" .$description, '<br>'; echo ""City : "".$city, '<br>','<br>'; // echo ""Para : "" .$para, '<br>'; // echo ""Parad : "".$parad, '<br>'; $conn->close(); ?>#import ""ViewController.h"" @interface ViewController () @end @implementation ViewController{ NSMutableData *mutableData; #define URL @""http://mydb.com/upload.php"" // change this URL #define NO_CONNECTION @""No Connection"" #define NO_VALUES @""Please enter parameter values"" } - (void)viewDidLoad { [super viewDidLoad]; } -(IBAction)sendDataUsingPost:(id)sender{ [self sendDataToServer :@""POST""]; } -(void) sendDataToServer : (NSString *) method{ NSString *head = header.text; NSString *desc = description.text; NSString *cty = city.text; if(head.length > 0 && desc.length > 0 && cty.length > 0){ serverResponse.text = @""Sending to server...""; NSURL *url = nil; NSMutableURLRequest *request = nil; // Only Difference between POST and GET is only in the way they send parameters if([method isEqualToString:@""POST""]){ NSString *parameter = [NSString stringWithFormat:@""header=%@&description=%@&city=%@"", head, desc, cty ]; NSData *parameterData = [parameter dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]; url = [NSURL URLWithString: URL]; request = [NSMutableURLRequest requestWithURL:url]; [request setHTTPBody:parameterData]; } [request setHTTPMethod:@""POST""]; [request addValue: @""application/x-www-form-urlencoded; charset=utf-8"" forHTTPHeaderField:@""Content-Type""]; NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; if(connection) { mutableData = [NSMutableData new]; }else{ serverResponse.text = NO_CONNECTION; } }else{ serverResponse.text = NO_VALUES; } } #pragma mark NSURLConnection delegates -(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)response { [mutableData setLength:0]; } -(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data { [mutableData appendData:data]; } -(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error { serverResponse.text = NO_CONNECTION; return; } -(void)connectionDidFinishLoading:(NSURLConnection *)connection { NSString *responseStringWithEncoded = [[NSString alloc] initWithData: mutableData encoding:NSUTF8StringEncoding]; //NSLog(@""Response from Server : %@"", responseStringWithEncoded); NSAttributedString * attrStr = [[NSAttributedString alloc] initWithData:[responseStringWithEncoded dataUsingEncoding:NSUnicodeStringEncoding] options:@{ NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType } documentAttributes:nil error:nil]; serverResponse.attributedText = attrStr; } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; } @end"
"487","bad","<?php $servername = ""localhost""; $username = ""username""; $password = ""password""; $dbname = ""myDB""; // Create connection $conn = new mysqli($servername, $username, $password, $dbname); // Check connection if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $header = $_POST['header']; // $description = $_POST['description']; // $city = $_POST['city']; $sql = ""UPDATE CityTable SET head=header WHERE id=1""; if ($conn->query($sql) === TRUE) { echo ""Record updated successfully""; } else { echo ""Error updating record: "" . $conn->error; } // $para = $_POST['parameter']; // $parad = $_POST['parameterData']; var_dump($_POST); echo '<br>', '<br>'; echo ""Header, description and city:"" , '<br>', '<br>'; echo ""Header : "" .$header, '<br>'; echo ""Desc : "" .$description, '<br>'; echo ""City : "".$city, '<br>','<br>'; // echo ""Para : "" .$para, '<br>'; // echo ""Parad : "".$parad, '<br>'; $conn->close(); ?>#import ""ViewController.h"" @interface ViewController () @end @implementation ViewController{ NSMutableData *mutableData; #define URL @""http://mydb.com/upload.php"" // change this URL #define NO_CONNECTION @""No Connection"" #define NO_VALUES @""Please enter parameter values"" } - (void)viewDidLoad { [super viewDidLoad]; } -(IBAction)sendDataUsingPost:(id)sender{ [self sendDataToServer :@""POST""]; } -(void) sendDataToServer : (NSString *) method{ NSString *head = header.text; NSString *desc = description.text; NSString *cty = city.text; if(head.length > 0 && desc.length > 0 && cty.length > 0){ serverResponse.text = @""Sending to server...""; NSURL *url = nil; NSMutableURLRequest *request = nil; // Only Difference between POST and GET is only in the way they send parameters if([method isEqualToString:@""POST""]){ NSString *parameter = [NSString stringWithFormat:@""header=%@&description=%@&city=%@"", head, desc, cty ]; NSData *parameterData = [parameter dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]; url = [NSURL URLWithString: URL]; request = [NSMutableURLRequest requestWithURL:url]; [request setHTTPBody:parameterData]; } [request setHTTPMethod:@""POST""]; [request addValue: @""application/x-www-form-urlencoded; charset=utf-8"" forHTTPHeaderField:@""Content-Type""]; NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; if(connection) { mutableData = [NSMutableData new]; }else{ serverResponse.text = NO_CONNECTION; } }else{ serverResponse.text = NO_VALUES; } } #pragma mark NSURLConnection delegates -(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)response { [mutableData setLength:0]; } -(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data { [mutableData appendData:data]; } -(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error { serverResponse.text = NO_CONNECTION; return; } -(void)connectionDidFinishLoading:(NSURLConnection *)connection { NSString *responseStringWithEncoded = [[NSString alloc] initWithData: mutableData encoding:NSUTF8StringEncoding]; //NSLog(@""Response from Server : %@"", responseStringWithEncoded); NSAttributedString * attrStr = [[NSAttributedString alloc] initWithData:[responseStringWithEncoded dataUsingEncoding:NSUnicodeStringEncoding] options:@{ NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType } documentAttributes:nil error:nil]; serverResponse.attributedText = attrStr; } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; } @end"
"488","bad","$hash = password_hash($password, PASSWORD_BCRYPT);password_verify($password, $hash)<?php if (isset($_GET[""username""]) && isset($_GET[""password""]) ){ $username = $_GET[""username""]; $password = $_GET[""password""]; $result = login( $username, $password); echo $result; } function makeSqlConnection() { $DB_HostName = """"; $DB_Name = """"; $DB_User = """"; $DB_Pass = """"; $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error()); mysql_select_db($DB_Name,$con) or die(mysql_error()); return $con; } function disconnectSqlConnection($con) { mysql_close($con); } function login($username, $password) { $con = makeSqlConnection(); $sql = ""select * from login where username = '$username' and password = '$password';""; $res = mysql_query($sql,$con) or die(mysql_error()); $res1 = mysql_num_rows($res); disconnectSqlConnection($con); if ($res1 != 0) { return 1; }else{ return 0; }// end else }// end of Function ?>"
"489","bad","<button value=""0.10"" class=""round-button"">&#8364; 0.10</button> <button value=""0.25"" class=""round-button"">&#8364; 0.25</button> <button value=""0.50"" class=""round-button"">&#8364; 0.50</button> <button value=""1.00"" class=""round-button"">&#8364; 1.00</button> <form action=""validate.php"" method=""post""> <input name=""total"" type=""text"" class=""total"" id=""total"" /> <input type=""image"" src=""image/accept.fw.png"" name=""submit"" /> </form>include 'sql.php'; $query_pretest = mysql_query(""SELECT credits FROM users WHERE username='"".$_SESSION['login'].""'""); $check = mysql_fetch_array($query_pretest); $total = $_POST['total']; if ($check['credits']<=($_POST['total'])) { echo 'not enough money in your account'; } else { mysql_query(""UPDATE users SET credits = (credits -'{$_POST[total]}') WHERE username='"".$_SESSION['login'].""'""); echo 'Thanks for your donation'; }"
"490","bad","<button value=""0.10"" class=""round-button"">&#8364; 0.10</button> <button value=""0.25"" class=""round-button"">&#8364; 0.25</button> <button value=""0.50"" class=""round-button"">&#8364; 0.50</button> <button value=""1.00"" class=""round-button"">&#8364; 1.00</button> <form action=""validate.php"" method=""post""> <input name=""total"" type=""text"" class=""total"" id=""total"" /> <input type=""image"" src=""image/accept.fw.png"" name=""submit"" /> </form>include 'sql.php'; $query_pretest = mysql_query(""SELECT credits FROM users WHERE username='"".$_SESSION['login'].""'""); $check = mysql_fetch_array($query_pretest); $total = $_POST['total']; if ($check['credits']<=($_POST['total'])) { echo 'not enough money in your account'; } else { mysql_query(""UPDATE users SET credits = (credits -'{$_POST[total]}') WHERE username='"".$_SESSION['login'].""'""); echo 'Thanks for your donation'; }"
"491","bad","<button value=""0.10"" class=""round-button"">&#8364; 0.10</button> <button value=""0.25"" class=""round-button"">&#8364; 0.25</button> <button value=""0.50"" class=""round-button"">&#8364; 0.50</button> <button value=""1.00"" class=""round-button"">&#8364; 1.00</button> <form action=""validate.php"" method=""post""> <input name=""total"" type=""text"" class=""total"" id=""total"" /> <input type=""image"" src=""image/accept.fw.png"" name=""submit"" /> </form>include 'sql.php'; $query_pretest = mysql_query(""SELECT credits FROM users WHERE username='"".$_SESSION['login'].""'""); $check = mysql_fetch_array($query_pretest); $total = $_POST['total']; if ($check['credits']<=($_POST['total'])) { echo 'not enough money in your account'; } else { mysql_query(""UPDATE users SET credits = (credits -'{$_POST[total]}') WHERE username='"".$_SESSION['login'].""'""); echo 'Thanks for your donation'; }"
"492","bad","$new_id = $_POST['c_id']; $new_name = $_POST['c_name']; $table_name = ""tcompany""; $sqlStatement = ""UPDATE $table_name SET 'name'=$new_name WHERE 'id'= $new_id""; if($result_1 = mysql_query($sqlStatement)) { header('Location: edit_company.php'); } else { echo """". mysql_error(); }"
"493","bad","$new_id = $_POST['c_id']; $new_name = $_POST['c_name']; $table_name = ""tcompany""; $sqlStatement = ""UPDATE $table_name SET 'name'=$new_name WHERE 'id'= $new_id""; if($result_1 = mysql_query($sqlStatement)) { header('Location: edit_company.php'); } else { echo """". mysql_error(); }"
"494","bad","<?php session_start(); if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_SESSION['user'])) { if($_GET['catId'] == '' || $_GET['catId'] == null) header('location:../user/logout.php'); $inc = -1; if($_POST['title'] == '' || $_POST['title'] == null) { $inc++;$_SESSION['error'][$inc] = ""TITLE IS REQUIRED""; } $selectImg=mysql_query(""SELECT pri_img FROM aboutus_tbl WHERE id=4""); if ($_GET['catId']==4) { if($_FILES[""file""][""name""]) { $allowedExts = array(""gif"", ""jpeg"", ""jpg"", ""png""); $temp = explode(""."", $_FILES[""file""][""name""]); $extension = end($temp); if ((($_FILES[""file""][""type""] == ""image/gif"") || ($_FILES[""file""][""type""] == ""image/jpeg"") || ($_FILES[""file""][""type""] == ""image/jpg"") || ($_FILES[""file""][""type""] == ""image/pjpeg"") || ($_FILES[""file""][""type""] == ""image/x-png"") || ($_FILES[""file""][""type""] == ""image/png"")) && ($_FILES[""file""][""size""] < 5242880) && in_array($extension, $allowedExts)) $imageNewName = md5(date(""l, F d, Y h:i"" ,time()) . (microtime())) . ""."" . $extension; else { $inc++;$_SESSION['error'][$inc] = ""IVALID IMAGE""; } } else { $inc++;$_SESSION['error'][$inc] = ""IMAGE IS REQUIRED""; } } function inputValues() { $_SESSION['values']['title'] = $_POST['title']; $_SESSION['values']['sub_title1'] = $_POST['sub_title1']; $_SESSION['values']['desc1'] = $_POST['desc1']; $_SESSION['values']['sub_title2'] = $_POST['sub_title2']; $_SESSION['values']['desc2'] = $_POST['desc2']; $_SESSION['values']['sub_title3'] = $_POST['sub_title3']; $_SESSION['values']['desc3'] = $_POST['desc3']; header(""location:../../views/aboutus_content/list.php?catId="".$_GET['catId']); } if($inc > -1) inputValues(); else { require_once('../../includes/connect.php'); if($_GET['catId']==4 && isset($_FILES[""file""][""name""])) { $update=""UPDATE aboutus_tbl SET title='"".$_POST['title'].""',sub_title1='"".$_POST['sub_title1'].""',desc1='"".$_POST['desc1'].""',sub_title2='"".$_POST['sub_title2'].""',desc2='"".$_POST['desc2'].""',sub_title3='"".$_POST['sub_title3'].""',desc3='"".$_POST['desc3'].""',pri_img='"".$imageNewName.""' WHERE id='"".$_GET['catId'].""'""; } else{ $update=""UPDATE aboutus_tbl SET title='"".$_POST['title'].""',sub_title1='"".$_POST['sub_title1'].""',desc1='"".$_POST['desc1'].""',sub_title2='"".$_POST['sub_title2'].""',desc2='"".$_POST['desc2'].""',sub_title3='"".$_POST['sub_title3'].""',desc3='"".$_POST['desc3'].""' WHERE id='"".$_GET['catId'].""'""; } if(mysql_query($update)) { if($_GET['catId']==4 && isset($_FILES[""file""][""name""])) { move_uploaded_file($_FILES[""file""][""tmp_name""],""../../public/img/principal/"".$imageNewName); unlink(""../../public/img/principal/"".mysql_result($selectImg, 0, ""pri_img"")); } $_SESSION['message'] = $_POST['title']."" SUCESSFULLY UPDATED""; header('location:../../views/aboutus_content/list.php?catId='.$_GET['catId']); } else { $_SESSION['error'] = ""ERROR : '"".mysql_error().""' CODE : "".mysql_errno(); inputValues(); } } } else header('location:../user/logout.php') ?><?php ob_start(); include '../../includes/header.php'; if(!isset($_GET['catId']) || $_GET['catId']=='') header('location:../error'); $contactResult = mysql_query(""SELECT * FROM aboutus_tbl WHERE id='"".$_GET['catId'].""'""); if(mysql_num_rows($contactResult) != 1) header('location:../error'); else { ?> <div class=""mainbar""> <div class=""page-head""> <div class=""container""> <div class=""row""> <div class=""col-md-12 col-sm-12 col-xs-12""> <h2><i class=""fa fa-desktop""></i> <?php echo mysql_result($contactResult, 0, ""title"");?> Content</h2> </div> <div class=""clearfix""></div> </div> </div> </div> <div class=""container""> <?php if(isset($_SESSION['error'])) { echo""<div class='alert alert-danger'>""; for($i=0;$i<sizeof($_SESSION['error']);$i++) echo ""<p><b>"".$_SESSION['error'][$i].""</b></p>""; echo""</div>""; unset($_SESSION['error']); } if(isset($_SESSION['message'])) { echo""<div class='alert alert-success'><p><b>"".$_SESSION['message'].""</b></p></div>""; unset($_SESSION['message']); } ?> <div class=""hide alert alert-danger"" id=""errorContainer""></div> <div class=""row""> <div class=""col-lg-12""> <form action=""../../controllers/aboutus_content/save.php?catId=<?php echo $_GET['catId'];?>"" method=""post"" class=""contactForms"" role=""form"" enctype=""multipart/form-data""> <div class=""col-lg-6""> <div class=""form-group""> <label for=""title""><span class=""text-danger"">* </span>Title</label> <input name=""title"" id=""title"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Title"" value=""<?php if(isset($_SESSION['values'])) echo $_SESSION['values']['title']; echo mysql_result($contactResult, 0, ""title"");?>"" /> </div> <div class=""form-group""> <label for=""sub_title1""><span class=""text-danger"">* </span>Sub Title 1</label> <input name=""sub_title1"" id=""sub_title1"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Sub Title 1"" value=""<?php if(isset($_SESSION['values'])) echo $_SESSION['values']['sub_title1']; else echo mysql_result($contactResult, 0, ""sub_title1"");?>"" /> </div> <div class=""form-group""> <label for=""desc1""><span class=""text-danger"">* </span>Description 1</label> <textarea name=""desc1"" id=""desc1"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Description 1""><?php if(isset($_SESSION['values'])) echo $_SESSION['values']['desc1']; else echo mysql_result($contactResult, 0, ""desc1"");?></textarea> </div> <div class=""form-group""> <label for=""sub_title2""><span class=""text-danger"">* </span>Sub Title 2</label> <input name=""sub_title2"" id=""sub_title2"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Sub Title 2"" value=""<?php if(isset($_SESSION['values'])) echo $_SESSION['values']['sub_title2']; else echo mysql_result($contactResult, 0, ""sub_title2"");?>"" /> </div> <div class=""form-group""> <label for=""desc2""><span class=""text-danger"">* </span>Description 2</label> <textarea name=""desc2"" id=""desc2"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Description 2""><?php if(isset($_SESSION['values'])) echo $_SESSION['values']['desc2']; else echo mysql_result($contactResult, 0, ""desc2"");?></textarea> </div> </div> <div class=""col-lg-6""> <div class=""form-group""> <label for=""sub_title3""><span class=""text-danger"">* </span>Sub Title 3</label> <input name=""sub_title3"" id=""sub_title3"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Sub Title 3"" value=""<?php if(isset($_SESSION['values'])) echo $_SESSION['values']['sub_title3']; else echo mysql_result($contactResult, 0, ""sub_title3"");?>"" /> </div> <div class=""form-group""> <label for=""desc3""><span class=""text-danger"">* </span>Description 3</label> <textarea name=""desc3"" id=""desc3"" data-validation-allowing=""'"" class=""form-control"" placeholder=""Enter Description 3""><?php if(isset($_SESSION['values'])) echo $_SESSION['values']['desc3']; else echo mysql_result($contactResult, 0, ""desc3"");?></textarea> </div> <div class=""form-group""> <label for=""pri_img""><span class=""text-danger"">* </span>Principle Image(Only For Principal's Message)</label> <input type=""file"" name=""file"" id=""file"" class=""form-control""> </div> </div> <div class=""form-group text-center""> <input type=""submit"" class=""btn btn-info"" value=""Save"" /> <a href=""list.php"" class=""btn btn-default"">Reset</a> </div> </form> </div> </div> </div> </div> <?php } ?> <script type=""text/javascript""> window.onload = function() { $(document).ready(function() { $('.aboutus_content').addClass('current'); $('.aboutus_content').addClass('open'); $("".courImgItm<?php echo $_GET['catId']?>"").addClass('active'); }); } </script> <?php include '../../includes/footer.php'; if(isset($_SESSION['values'])) unset($_SESSION['values']); ob_flush(); ?>"
"495","good","<?php require_once 'php/db.php'; $conn = dbConnect(); $OK = true; if (isset($_GET['name'])) { $data = ""%"".$_GET['name'].""%""; $sql = 'SELECT * FROM company LEFT JOIN xref_ap_comp ON company.CompId=xref_ap_comp.CompID LEFT JOIN persons ON xref_ap_comp.APID=persons.APID LEFT JOIN xref_comp_prod2 ON company.CompId=xref_comp_prod2.CompID LEFT JOIN product ON xref_comp_prod2.NAICS=product.NAICS LEFT JOIN product2 ON product.NAICSThreeDigitCode=product2.NAICSThreeDigitCode LEFT JOIN product3 ON product2.NAICSRootCode=product3.NAICSRootCode WHERE CompName like ? ORDER BY company.CompName'; $stmt = $conn->prepare($sql); $results = $stmt->execute(array($data)); $rows = $stmt->fetchAll(); $error = $stmt->errorInfo(); } if(empty($rows)) { echo ""<h3>No Records Found</h3>""; } else { foreach ($rows as $row) { echo ""<h3 class=\""ui-accordion-header ui-state-default ui-corner-all ui-accordion-icons\"" role=\""tab\"" id=\""ui-id-1\"" aria-selected=\""false\"" aria-expanded=\""false\"" tabindex=\""0\"">"".$row['CompName'].""<span class=\""ui-accordion-header-icon ui-icon ui-icon-triangle-1-e\""></span></h3>""; echo ""<div>""; echo ""<p>"".$row['HistoricalNotes'].""</p>""; echo ""<ul>""; echo ""<li>Affiliated Person: "".$row['APFirstName']."" "".$row['APLastName'].""</li>""; echo ""<li>Year Established: "".$row['StartDate'].""</li>""; echo ""<li>Year Closed: "".$row['EndDate'].""</li>""; echo ""<li>Product/Service: "".$row['ProductCategory'].""</li>""; echo ""<li>NAICS: "".$row['NAICS'].""</li>""; echo ""</ul>""; echo ""</div>""; } }echo ""<li>Affiliated Person: "".$row['APFirstName']."" "".$row['APLastName'].""</li>"";"
"496","good","<?php require_once 'php/db.php'; $conn = dbConnect(); $OK = true; if (isset($_GET['name'])) { $data = ""%"".$_GET['name'].""%""; $sql = 'SELECT * FROM company LEFT JOIN xref_ap_comp ON company.CompId=xref_ap_comp.CompID LEFT JOIN persons ON xref_ap_comp.APID=persons.APID LEFT JOIN xref_comp_prod2 ON company.CompId=xref_comp_prod2.CompID LEFT JOIN product ON xref_comp_prod2.NAICS=product.NAICS LEFT JOIN product2 ON product.NAICSThreeDigitCode=product2.NAICSThreeDigitCode LEFT JOIN product3 ON product2.NAICSRootCode=product3.NAICSRootCode WHERE CompName like ? ORDER BY company.CompName'; $stmt = $conn->prepare($sql); $results = $stmt->execute(array($data)); $rows = $stmt->fetchAll(); $error = $stmt->errorInfo(); } if(empty($rows)) { echo ""<h3>No Records Found</h3>""; } else { foreach ($rows as $row) { echo ""<h3 class=\""ui-accordion-header ui-state-default ui-corner-all ui-accordion-icons\"" role=\""tab\"" id=\""ui-id-1\"" aria-selected=\""false\"" aria-expanded=\""false\"" tabindex=\""0\"">"".$row['CompName'].""<span class=\""ui-accordion-header-icon ui-icon ui-icon-triangle-1-e\""></span></h3>""; echo ""<div>""; echo ""<p>"".$row['HistoricalNotes'].""</p>""; echo ""<ul>""; echo ""<li>Affiliated Person: "".$row['APFirstName']."" "".$row['APLastName'].""</li>""; echo ""<li>Year Established: "".$row['StartDate'].""</li>""; echo ""<li>Year Closed: "".$row['EndDate'].""</li>""; echo ""<li>Product/Service: "".$row['ProductCategory'].""</li>""; echo ""<li>NAICS: "".$row['NAICS'].""</li>""; echo ""</ul>""; echo ""</div>""; } }echo ""<li>Affiliated Person: "".$row['APFirstName']."" "".$row['APLastName'].""</li>"";"
"497","good","$input = str_replace(array('%','_'),'',$_POST['input']); if (!$input) { header('Location: index.php?action=null value'); exit; } $query =('SELECT * FROM sales WHERE datetime LIKE :search OR datetime LIKE :search'.$pages->get_limit()); $stmt = $digital->prepare($query); $stmt->bindValue(':search', '%' . $input . '%', PDO::PARAM_INT); $stmt->execute();"
"498","good","$input = str_replace(array('%','_'),'',$_POST['input']); if (!$input) { header('Location: index.php?action=null value'); exit; } $query =('SELECT * FROM sales WHERE datetime LIKE :search OR datetime LIKE :search'.$pages->get_limit()); $stmt = $digital->prepare($query); $stmt->bindValue(':search', '%' . $input . '%', PDO::PARAM_INT); $stmt->execute();"
"499","good","$input = str_replace(array('%','_'),'',$_POST['input']); if (!$input) { header('Location: index.php?action=null value'); exit; } $query =('SELECT * FROM sales WHERE datetime LIKE :search OR datetime LIKE :search'.$pages->get_limit()); $stmt = $digital->prepare($query); $stmt->bindValue(':search', '%' . $input . '%', PDO::PARAM_INT); $stmt->execute();"
"500","bad","<?php $mysqli = new mysqli(""localhost"", ""root"", ""mypass"", ""mybase""); if ($mysqli->connect_error) { die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error); } $mysqli->query(""SET NAMES 'utf8'""); // editing existing table $success = $mysqli->query (""INSERT INTO `myBase`.`users` (`login`, `password`, `reg_date`) VALUES ('aaa', '"".md5(""123"").""', '"".time().""')""); echo $success; // this echo does not work $mysqli->close(); ?>"
"501","bad","<?php $mysqli = new mysqli(""localhost"", ""root"", ""mypass"", ""mybase""); if ($mysqli->connect_error) { die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error); } $mysqli->query(""SET NAMES 'utf8'""); // editing existing table $success = $mysqli->query (""INSERT INTO `myBase`.`users` (`login`, `password`, `reg_date`) VALUES ('aaa', '"".md5(""123"").""', '"".time().""')""); echo $success; // this echo does not work $mysqli->close(); ?>"
"502","bad","<?php $mysqli = new mysqli(""localhost"", ""root"", ""mypass"", ""mybase""); if ($mysqli->connect_error) { die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error); } $mysqli->query(""SET NAMES 'utf8'""); // editing existing table $success = $mysqli->query (""INSERT INTO `myBase`.`users` (`login`, `password`, `reg_date`) VALUES ('aaa', '"".md5(""123"").""', '"".time().""')""); echo $success; // this echo does not work $mysqli->close(); ?>"
"503","bad","<?php if ($_POST['login']) { $uname = $_POST['uname']; $pass = $_POST['pass']; $email = $_POST['email']; $phnoe = $_POST['phnoe']; $ipd = $_SERVER['REMOTE_ADDR']; if (mysql_query(""Insert Into nennetwork (name, email, password, phone, useripp ) Values ('$uname', '$email', '$pass', '$phnoe', '$ipd' )"")) $pdmsg = ""New Member Added!!""; }"
"504","bad","<?php if ($_POST['login']) { $uname = $_POST['uname']; $pass = $_POST['pass']; $email = $_POST['email']; $phnoe = $_POST['phnoe']; $ipd = $_SERVER['REMOTE_ADDR']; if (mysql_query(""Insert Into nennetwork (name, email, password, phone, useripp ) Values ('$uname', '$email', '$pass', '$phnoe', '$ipd' )"")) $pdmsg = ""New Member Added!!""; }"
"505","bad","<?php if ($_POST['login']) { $uname = $_POST['uname']; $pass = $_POST['pass']; $email = $_POST['email']; $phnoe = $_POST['phnoe']; $ipd = $_SERVER['REMOTE_ADDR']; if (mysql_query(""Insert Into nennetwork (name, email, password, phone, useripp ) Values ('$uname', '$email', '$pass', '$phnoe', '$ipd' )"")) $pdmsg = ""New Member Added!!""; }"
"506","bad","<?php //setting connection to the database $connection = mysqli_connect(""localhost"", ""root"", """", ""SCINFO""); //checking the connection if(mysqli_connect_errno()){ echo ""Connection Failed!""; } ?> <!DOCTYPE html> <html> <head> <title>Order -- SHOPPERS||COLLECTION</title> </head> <body> <h2 align=""left"">Purchase/Order Items</h2> <form method=""post"" action=""<?php echo htmlspecialchars($_SERVER[""PHP_SELF""]); >""> <table cellpadding=""15""> <tr bgcolor=""#996699""> <td>Product ID</td> <td>Product Name</td> <td>Quantity</td> <td>Price (RM)</td> <td>Total</td> </tr> <?php //prints the data in table $result = mysqli_query($connection, ""SELECT * FROM PRODUCT""); // loop through results of database query, displaying them in the table while($row = mysqli_fetch_array( $result)) { // echo out the contents of each row echo ""<tr>""; echo '<td>' . $row['PRD_ID'] . '</td>'; //prints out the product ID echo '<td>' . $row['PRD_NAME'] . '</td>'; //prints out the product name echo '<td><input type=""text"" name=""qty""> X</td>'; echo '<td>'.$row['PRD_PRICE'].'</td>'; echo '<td><input type=""text"" name=""total"" value="""" disabled=""disabled""></td>'; echo '</tr>'; } ?> <tr> <td colspan=""5""><hr></td> </tr> <tr> <td colspan=""4"" align=""right"">ORDER TOTAL:</td> <td><input type=""text"" name=""ototal"" value=""RM "" disabled=""disabled""></td> </tr> <tr> <td colspan=""4"" align=""right""><input type=""submit"" name=""submit"" value=""Submit""></td> </tr> </table> </form> <?php if($_SERVER[""REQUEST_METHOD""]==""POST""){ if($_POST[""submit""]){ $qty = $_POST['qty']; $price = $_POST['prc']; if(isset($_POST['submit'])){ $sum = $qty * $price; } } } ?> </body> </html>"
"507","bad","<?php //setting connection to the database $connection = mysqli_connect(""localhost"", ""root"", """", ""SCINFO""); //checking the connection if(mysqli_connect_errno()){ echo ""Connection Failed!""; } ?> <!DOCTYPE html> <html> <head> <title>Order -- SHOPPERS||COLLECTION</title> </head> <body> <h2 align=""left"">Purchase/Order Items</h2> <form method=""post"" action=""<?php echo htmlspecialchars($_SERVER[""PHP_SELF""]); >""> <table cellpadding=""15""> <tr bgcolor=""#996699""> <td>Product ID</td> <td>Product Name</td> <td>Quantity</td> <td>Price (RM)</td> <td>Total</td> </tr> <?php //prints the data in table $result = mysqli_query($connection, ""SELECT * FROM PRODUCT""); // loop through results of database query, displaying them in the table while($row = mysqli_fetch_array( $result)) { // echo out the contents of each row echo ""<tr>""; echo '<td>' . $row['PRD_ID'] . '</td>'; //prints out the product ID echo '<td>' . $row['PRD_NAME'] . '</td>'; //prints out the product name echo '<td><input type=""text"" name=""qty""> X</td>'; echo '<td>'.$row['PRD_PRICE'].'</td>'; echo '<td><input type=""text"" name=""total"" value="""" disabled=""disabled""></td>'; echo '</tr>'; } ?> <tr> <td colspan=""5""><hr></td> </tr> <tr> <td colspan=""4"" align=""right"">ORDER TOTAL:</td> <td><input type=""text"" name=""ototal"" value=""RM "" disabled=""disabled""></td> </tr> <tr> <td colspan=""4"" align=""right""><input type=""submit"" name=""submit"" value=""Submit""></td> </tr> </table> </form> <?php if($_SERVER[""REQUEST_METHOD""]==""POST""){ if($_POST[""submit""]){ $qty = $_POST['qty']; $price = $_POST['prc']; if(isset($_POST['submit'])){ $sum = $qty * $price; } } } ?> </body> </html>"
"508","bad","<?php //setting connection to the database $connection = mysqli_connect(""localhost"", ""root"", """", ""SCINFO""); //checking the connection if(mysqli_connect_errno()){ echo ""Connection Failed!""; } ?> <!DOCTYPE html> <html> <head> <title>Order -- SHOPPERS||COLLECTION</title> </head> <body> <h2 align=""left"">Purchase/Order Items</h2> <form method=""post"" action=""<?php echo htmlspecialchars($_SERVER[""PHP_SELF""]); >""> <table cellpadding=""15""> <tr bgcolor=""#996699""> <td>Product ID</td> <td>Product Name</td> <td>Quantity</td> <td>Price (RM)</td> <td>Total</td> </tr> <?php //prints the data in table $result = mysqli_query($connection, ""SELECT * FROM PRODUCT""); // loop through results of database query, displaying them in the table while($row = mysqli_fetch_array( $result)) { // echo out the contents of each row echo ""<tr>""; echo '<td>' . $row['PRD_ID'] . '</td>'; //prints out the product ID echo '<td>' . $row['PRD_NAME'] . '</td>'; //prints out the product name echo '<td><input type=""text"" name=""qty""> X</td>'; echo '<td>'.$row['PRD_PRICE'].'</td>'; echo '<td><input type=""text"" name=""total"" value="""" disabled=""disabled""></td>'; echo '</tr>'; } ?> <tr> <td colspan=""5""><hr></td> </tr> <tr> <td colspan=""4"" align=""right"">ORDER TOTAL:</td> <td><input type=""text"" name=""ototal"" value=""RM "" disabled=""disabled""></td> </tr> <tr> <td colspan=""4"" align=""right""><input type=""submit"" name=""submit"" value=""Submit""></td> </tr> </table> </form> <?php if($_SERVER[""REQUEST_METHOD""]==""POST""){ if($_POST[""submit""]){ $qty = $_POST['qty']; $price = $_POST['prc']; if(isset($_POST['submit'])){ $sum = $qty * $price; } } } ?> </body> </html>"
"509","bad","'/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/'^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$<form method=""post"" action=""submit.php""> <div class=""box""> <div class=""cl""><input type=""text"" name=""name"" placeholder=""Name"" /></div> <div class=""cl""><input type=""text"" name=""city"" placeholder=""City"" /></div> <div class=""cl""><input type=""text"" name=""mobile"" placeholder=""Mobile"" /></div> <div class=""cl""><input type=""email"" name=""email"" placeholder=""Email"" /></div> <div class=""cl""><input type=""text"" name=""sub"" placeholder=""Want 3 m Free Subscription (Yes/No)?""></textarea></div> <div class=""cl""><input type=""text"" name=""slogan"" placeholder=""Suggest a slogan for 6 m subscription""></textarea></div> </div> <div class=""srow""> <div class=""cl1""> <ul class=""action""> <li><input type=""submit"" value=""Submit"" /></li> </ul> </div> </div> </form><?php include 'config.php'; // store your configuration in a seperate file so // you only need to update it once when your environment changes $errors = false; $output = ''; $nl = '<br>'.PHP_EOL; $redirect_url = 'index.html'; if (!$con = new mysqli(DBHOST,DBUSER,DBPASS,DBNAME)){ $errors = true; $output .= ""ERROR Can't connect to DB"".$nl; }; if (!$errors){ //should validate/clean $_POST before using in query $name = $con->escape_string($_POST['name']); $city = $con->escape_string($_POST['city']); $email = $con->escape_string($_POST['email']); $mobile = $con->escape_string($_POST['mobile']); $sub = $con->escape_string($_POST['sub']); $slogan = $con->escape_string($_POST['slogan']); $sql=""INSERT INTO members (sName, sCity, sMobile, sEmail, sSub, sSlogan) VALUES ('$name', '$city', '$mobile', '$email', '$sub','$slogan')""; if (!$con->query($sql)){ //forgot a parenthesis here earlier $output .= 'ERROR: DB said: ('.$con->errno.') '.$con->error.$nl; $output .= 'Query was:'.$sql.$nl; $errors = true; }else{ $output .= ""1 record added"".$nl; } } if (!$errors){ //if there are no errors redirect to index.html; header('refresh: 2; URL='.$redirect_url); $output .= '...Redirecting...'.$nl; }else{ //show the errors and allow display a link to go back/try again $output .= '<a href=""'.$redirect_url.'"">Try again</a>'.$nl; } echo $output; ?>function validate_name($input){ // fairly naive rule: // upper and lower case latin characters and space // at least three character long // you may want to look at allowing other characters such as é ö etc. $input = trim($input); //get rid of spaces at either end if (preg_match('/^[a-zA-Z ]{3,}$/',$input) == 1){ return $input; }else{ return false; } } if (!empty($_POST['name']){ if (!$name = $con->escape_string(validate_name($_POST['name'])){ $error = true; $output .= 'ERROR: Invalid Name: '.$_POST['name'].$nl; } }else{ $error = true; $output .= 'ERROR: No name specified'.$nl; }"
"510","bad","'/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/'^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$<form method=""post"" action=""submit.php""> <div class=""box""> <div class=""cl""><input type=""text"" name=""name"" placeholder=""Name"" /></div> <div class=""cl""><input type=""text"" name=""city"" placeholder=""City"" /></div> <div class=""cl""><input type=""text"" name=""mobile"" placeholder=""Mobile"" /></div> <div class=""cl""><input type=""email"" name=""email"" placeholder=""Email"" /></div> <div class=""cl""><input type=""text"" name=""sub"" placeholder=""Want 3 m Free Subscription (Yes/No)?""></textarea></div> <div class=""cl""><input type=""text"" name=""slogan"" placeholder=""Suggest a slogan for 6 m subscription""></textarea></div> </div> <div class=""srow""> <div class=""cl1""> <ul class=""action""> <li><input type=""submit"" value=""Submit"" /></li> </ul> </div> </div> </form><?php include 'config.php'; // store your configuration in a seperate file so // you only need to update it once when your environment changes $errors = false; $output = ''; $nl = '<br>'.PHP_EOL; $redirect_url = 'index.html'; if (!$con = new mysqli(DBHOST,DBUSER,DBPASS,DBNAME)){ $errors = true; $output .= ""ERROR Can't connect to DB"".$nl; }; if (!$errors){ //should validate/clean $_POST before using in query $name = $con->escape_string($_POST['name']); $city = $con->escape_string($_POST['city']); $email = $con->escape_string($_POST['email']); $mobile = $con->escape_string($_POST['mobile']); $sub = $con->escape_string($_POST['sub']); $slogan = $con->escape_string($_POST['slogan']); $sql=""INSERT INTO members (sName, sCity, sMobile, sEmail, sSub, sSlogan) VALUES ('$name', '$city', '$mobile', '$email', '$sub','$slogan')""; if (!$con->query($sql)){ //forgot a parenthesis here earlier $output .= 'ERROR: DB said: ('.$con->errno.') '.$con->error.$nl; $output .= 'Query was:'.$sql.$nl; $errors = true; }else{ $output .= ""1 record added"".$nl; } } if (!$errors){ //if there are no errors redirect to index.html; header('refresh: 2; URL='.$redirect_url); $output .= '...Redirecting...'.$nl; }else{ //show the errors and allow display a link to go back/try again $output .= '<a href=""'.$redirect_url.'"">Try again</a>'.$nl; } echo $output; ?>function validate_name($input){ // fairly naive rule: // upper and lower case latin characters and space // at least three character long // you may want to look at allowing other characters such as é ö etc. $input = trim($input); //get rid of spaces at either end if (preg_match('/^[a-zA-Z ]{3,}$/',$input) == 1){ return $input; }else{ return false; } } if (!empty($_POST['name']){ if (!$name = $con->escape_string(validate_name($_POST['name'])){ $error = true; $output .= 'ERROR: Invalid Name: '.$_POST['name'].$nl; } }else{ $error = true; $output .= 'ERROR: No name specified'.$nl; }"
"511","bad","'/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/'^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$<form method=""post"" action=""submit.php""> <div class=""box""> <div class=""cl""><input type=""text"" name=""name"" placeholder=""Name"" /></div> <div class=""cl""><input type=""text"" name=""city"" placeholder=""City"" /></div> <div class=""cl""><input type=""text"" name=""mobile"" placeholder=""Mobile"" /></div> <div class=""cl""><input type=""email"" name=""email"" placeholder=""Email"" /></div> <div class=""cl""><input type=""text"" name=""sub"" placeholder=""Want 3 m Free Subscription (Yes/No)?""></textarea></div> <div class=""cl""><input type=""text"" name=""slogan"" placeholder=""Suggest a slogan for 6 m subscription""></textarea></div> </div> <div class=""srow""> <div class=""cl1""> <ul class=""action""> <li><input type=""submit"" value=""Submit"" /></li> </ul> </div> </div> </form><?php include 'config.php'; // store your configuration in a seperate file so // you only need to update it once when your environment changes $errors = false; $output = ''; $nl = '<br>'.PHP_EOL; $redirect_url = 'index.html'; if (!$con = new mysqli(DBHOST,DBUSER,DBPASS,DBNAME)){ $errors = true; $output .= ""ERROR Can't connect to DB"".$nl; }; if (!$errors){ //should validate/clean $_POST before using in query $name = $con->escape_string($_POST['name']); $city = $con->escape_string($_POST['city']); $email = $con->escape_string($_POST['email']); $mobile = $con->escape_string($_POST['mobile']); $sub = $con->escape_string($_POST['sub']); $slogan = $con->escape_string($_POST['slogan']); $sql=""INSERT INTO members (sName, sCity, sMobile, sEmail, sSub, sSlogan) VALUES ('$name', '$city', '$mobile', '$email', '$sub','$slogan')""; if (!$con->query($sql)){ //forgot a parenthesis here earlier $output .= 'ERROR: DB said: ('.$con->errno.') '.$con->error.$nl; $output .= 'Query was:'.$sql.$nl; $errors = true; }else{ $output .= ""1 record added"".$nl; } } if (!$errors){ //if there are no errors redirect to index.html; header('refresh: 2; URL='.$redirect_url); $output .= '...Redirecting...'.$nl; }else{ //show the errors and allow display a link to go back/try again $output .= '<a href=""'.$redirect_url.'"">Try again</a>'.$nl; } echo $output; ?>function validate_name($input){ // fairly naive rule: // upper and lower case latin characters and space // at least three character long // you may want to look at allowing other characters such as é ö etc. $input = trim($input); //get rid of spaces at either end if (preg_match('/^[a-zA-Z ]{3,}$/',$input) == 1){ return $input; }else{ return false; } } if (!empty($_POST['name']){ if (!$name = $con->escape_string(validate_name($_POST['name'])){ $error = true; $output .= 'ERROR: Invalid Name: '.$_POST['name'].$nl; } }else{ $error = true; $output .= 'ERROR: No name specified'.$nl; }"
"512","bad","$user=$_POST[""username""]; $query = ""SELECT longitude,latitude FROM friends INNER JOIN coordinates ON friends.username = coordinates.username WHERE friends.friend_of='$user'""; $sql=mysqli_query($conn, $query); if (!$sql) { echo 'Could not run query: ' . mysql_error(); exit; } while($row = mysqli_fetch_array($sql)>0){ $response[""longitude""] = $row[0]; $response[""latitude""] = $row[1]; die(json_encode($response)); }class Findfriends extends AsyncTask<String, String, JSONObject> { protected JSONObject doInBackground(String... args) { // TODO Auto-generated method stub // here Check for success tag try { HashMap<String, String> params = new HashMap<>(); params.put(""username"", args[0]); JSONObject json = jsonParser.makeHttpRequest( GET_FRIENDS, ""POST"", params); if (json != null) { Log.d(""JSON result"", json.toString()); return json; } } catch (Exception e) { e.printStackTrace(); } return null; } protected void onPostExecute(JSONObject json) { if (json != null) { Toast.makeText(Borrower_AP.this, json.toString(), Toast.LENGTH_LONG).show(); try { Longitude = json.getDouble(""longitude""); Latitude = json.getDouble(""latitude""); } catch (JSONException e) { e.printStackTrace(); } } } }"
"513","bad","$user=$_POST[""username""]; $query = ""SELECT longitude,latitude FROM friends INNER JOIN coordinates ON friends.username = coordinates.username WHERE friends.friend_of='$user'""; $sql=mysqli_query($conn, $query); if (!$sql) { echo 'Could not run query: ' . mysql_error(); exit; } while($row = mysqli_fetch_array($sql)>0){ $response[""longitude""] = $row[0]; $response[""latitude""] = $row[1]; die(json_encode($response)); }class Findfriends extends AsyncTask<String, String, JSONObject> { protected JSONObject doInBackground(String... args) { // TODO Auto-generated method stub // here Check for success tag try { HashMap<String, String> params = new HashMap<>(); params.put(""username"", args[0]); JSONObject json = jsonParser.makeHttpRequest( GET_FRIENDS, ""POST"", params); if (json != null) { Log.d(""JSON result"", json.toString()); return json; } } catch (Exception e) { e.printStackTrace(); } return null; } protected void onPostExecute(JSONObject json) { if (json != null) { Toast.makeText(Borrower_AP.this, json.toString(), Toast.LENGTH_LONG).show(); try { Longitude = json.getDouble(""longitude""); Latitude = json.getDouble(""latitude""); } catch (JSONException e) { e.printStackTrace(); } } } }"
"514","bad","if (isset($_POST['update'])) { $statquery = ""UPDATE `highlight_feature` SET `active` = '0'""; $ststresult = mysql_query($statquery) or die(mysql_error()); $query = ""SELECT * FROM highlight_feature ORDER BY No DESC""; $result = mysql_query($query) or die(mysql_error()); while ($resultdata = mysql_fetch_array($result)) { $highlightid = $resultdata['No']; $status = $_POST[$highlightid]; if ($status > 0) { $update_Query = ""UPDATE `highlight_feature` SET `active` = $status WHERE `No` =$highlightid""; $updateresult = mysql_query($update_Query) or die(mysql_error()); } } header(""Location: "" . $domain . ""/highlight/edit/index.php?cat=999""); exit(); }"
"515","bad","if (isset($_POST['update'])) { $statquery = ""UPDATE `highlight_feature` SET `active` = '0'""; $ststresult = mysql_query($statquery) or die(mysql_error()); $query = ""SELECT * FROM highlight_feature ORDER BY No DESC""; $result = mysql_query($query) or die(mysql_error()); while ($resultdata = mysql_fetch_array($result)) { $highlightid = $resultdata['No']; $status = $_POST[$highlightid]; if ($status > 0) { $update_Query = ""UPDATE `highlight_feature` SET `active` = $status WHERE `No` =$highlightid""; $updateresult = mysql_query($update_Query) or die(mysql_error()); } } header(""Location: "" . $domain . ""/highlight/edit/index.php?cat=999""); exit(); }"
"516","bad","<html> <head> <title>asdad</title> </head> <body> <form method = ""POST""> <?php $con=mysql_connect('localhost','root','') or die(mysql_error()); mysql_select_db('aclc_esys') or die(""cannot select DB""); session_start(); $query=mysql_query(""SELECT * FROM add_student_subject WHERE student_id = '"".$_SESSION['sess_stud_id'].""'""); while($row=mysql_fetch_array($query)){ ?> <input type=""radio"" name=""subj"" value=""<?php$roww['subject_name']?>""> <?php echo $row['subject_name'].""<br />""; } ?> <input type=""submit"" value=""Submit Evaluation"" name=""submiteval"" /> <?php if(isset($_POST[""submiteval""])){ echo $_POST['subj']; } ?> </form> </body> </html>"
"517","bad","<?php if($_SESSION['admin'] > 0) { echo'<div id=""registreer"">'; echo'<div id=""titel"">update</div>'; echo'<form action=""done.php"" method=""post"">'; echo'<input type=""text"" name=""regname"" placeholder=""username"" /> '; echo'<input type=""password"" name=""regpass"" placeholder=""password"" />'; echo'<input type=""text"" name=""regdbhost"" placeholder=""host"" /> '; echo'<input type=""text"" name=""regdbuser"" placeholder=""user"" /> '; echo'<input type=""text"" name=""regdbpass"" placeholder=""dbpass"" /> '; echo'<input type=""text"" name=""regdbname"" placeholder=""dbname"" /> '; echo'<input type=""text"" name=""regdbtable"" placeholder=""table"" /> '; echo""<button type='submit' name='regsubmit' value='register'>""; echo'<p>UPDATE</p>'; echo'</button>'; echo'</form> '; echo'</div>'; echo'<a href=""hetwerkt.php"">terug</a>'; } else if($_SESSION['admin'] < 1) { header(""Location: hetwerkt.php""); } ?><?php session_start(); ?> <?php $servername = ""----""; $username = ""----""; $password = ""----""; $dbname = ""----""; $name = mysql_real_escape_string($_POST['regname']); $pass = mysql_real_escape_string($_POST['regpass']); $regdbhost = $_POST['regdbhost']; $regdbuser = $_POST['regdbuser']; $regdbpass = $_POST['regdbpass']; $regdbname = $_POST['regdbname']; $regdbtable = $_POST['regdbtable']; $pass = crypt($pass,'$2a$09$anexamplestringforsalt$'); try { $conn = new PDO(""mysql:host=$servername;dbname=$dbname"", $username, $password); // set the PDO error mode to exception $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $sql = ""UPDATE info SET regdbname='$regdbname' WHERE id='"".$id.""'""; // Prepare statement $stmt = $conn->prepare($sql); // execute the query $stmt->execute(); // echo a message to say the UPDATE succeeded echo $stmt->rowCount() . "" records UPDATED successfully""; } catch(PDOException $e) { echo $sql . ""<br>"" . $e->getMessage(); } $conn = null; ?> UPDATE info SET regdbname='test' WHERE id='' SQLSTATE[42S22]: Column not found: 1054 Unknown column 'regdbname' in 'field list'"
"518","bad","<?php if($_SESSION['admin'] > 0) { echo'<div id=""registreer"">'; echo'<div id=""titel"">update</div>'; echo'<form action=""done.php"" method=""post"">'; echo'<input type=""text"" name=""regname"" placeholder=""username"" /> '; echo'<input type=""password"" name=""regpass"" placeholder=""password"" />'; echo'<input type=""text"" name=""regdbhost"" placeholder=""host"" /> '; echo'<input type=""text"" name=""regdbuser"" placeholder=""user"" /> '; echo'<input type=""text"" name=""regdbpass"" placeholder=""dbpass"" /> '; echo'<input type=""text"" name=""regdbname"" placeholder=""dbname"" /> '; echo'<input type=""text"" name=""regdbtable"" placeholder=""table"" /> '; echo""<button type='submit' name='regsubmit' value='register'>""; echo'<p>UPDATE</p>'; echo'</button>'; echo'</form> '; echo'</div>'; echo'<a href=""hetwerkt.php"">terug</a>'; } else if($_SESSION['admin'] < 1) { header(""Location: hetwerkt.php""); } ?><?php session_start(); ?> <?php $servername = ""----""; $username = ""----""; $password = ""----""; $dbname = ""----""; $name = mysql_real_escape_string($_POST['regname']); $pass = mysql_real_escape_string($_POST['regpass']); $regdbhost = $_POST['regdbhost']; $regdbuser = $_POST['regdbuser']; $regdbpass = $_POST['regdbpass']; $regdbname = $_POST['regdbname']; $regdbtable = $_POST['regdbtable']; $pass = crypt($pass,'$2a$09$anexamplestringforsalt$'); try { $conn = new PDO(""mysql:host=$servername;dbname=$dbname"", $username, $password); // set the PDO error mode to exception $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $sql = ""UPDATE info SET regdbname='$regdbname' WHERE id='"".$id.""'""; // Prepare statement $stmt = $conn->prepare($sql); // execute the query $stmt->execute(); // echo a message to say the UPDATE succeeded echo $stmt->rowCount() . "" records UPDATED successfully""; } catch(PDOException $e) { echo $sql . ""<br>"" . $e->getMessage(); } $conn = null; ?> UPDATE info SET regdbname='test' WHERE id='' SQLSTATE[42S22]: Column not found: 1054 Unknown column 'regdbname' in 'field list'"
"519","bad","<?php session_start(); include('../../includes/connection.php'); $id=$_SESSION['id']; $select_query=@mysql_query(""select balance from players_signup where id=$id""); $_SESSION['balance']=@mysql_result($select_query,0,'balance'); //echo ""$"",$_SESSION['balance'],"".00""; $balance=$_SESSION['balance']; if($balance<""1""){ header('location:../../paypal/'); exit(); } ?>"
"520","bad","<?php session_start(); include('../../includes/connection.php'); $id=$_SESSION['id']; $select_query=@mysql_query(""select balance from players_signup where id=$id""); $_SESSION['balance']=@mysql_result($select_query,0,'balance'); //echo ""$"",$_SESSION['balance'],"".00""; $balance=$_SESSION['balance']; if($balance<""1""){ header('location:../../paypal/'); exit(); } ?>"
"521","bad","<?php session_start(); include('../../includes/connection.php'); $id=$_SESSION['id']; $select_query=@mysql_query(""select balance from players_signup where id=$id""); $_SESSION['balance']=@mysql_result($select_query,0,'balance'); //echo ""$"",$_SESSION['balance'],"".00""; $balance=$_SESSION['balance']; if($balance<""1""){ header('location:../../paypal/'); exit(); } ?>"
"522","bad","<?php $dbhost=""xxxx""; $dbusr=""xxxx""; $dbpass=""xxxx""; $database=""xxxxx""; mysql_connect($dbhost,$dbusr,$dbpass, $database); mysql_select_db($database) or die(""databse not connected""); $num = rand(98564654, 415231564); If(isset($_POST['login'])){ $Pin=$_GET['pin']; $ID =$_POST['ID']; $date=date('Y-m-d H:i:s'); if($Pin!=''){ mysql_query(""UPDATE pin SET appid ='$num', status='Activated' WHERE Pin= '$Pin'"") or die(mysql_error()); mysql_query(""INSERT IGNORE INTO pinlog (TableName,pin,id,TIME_UPDATED) VALUES('Pin','$Pin','$num','$date')"") or die(mysql_error()); header(""location:applicantlogin.php""); } } ?>"
"523","bad","<?php $dbhost=""xxxx""; $dbusr=""xxxx""; $dbpass=""xxxx""; $database=""xxxxx""; mysql_connect($dbhost,$dbusr,$dbpass, $database); mysql_select_db($database) or die(""databse not connected""); $num = rand(98564654, 415231564); If(isset($_POST['login'])){ $Pin=$_GET['pin']; $ID =$_POST['ID']; $date=date('Y-m-d H:i:s'); if($Pin!=''){ mysql_query(""UPDATE pin SET appid ='$num', status='Activated' WHERE Pin= '$Pin'"") or die(mysql_error()); mysql_query(""INSERT IGNORE INTO pinlog (TableName,pin,id,TIME_UPDATED) VALUES('Pin','$Pin','$num','$date')"") or die(mysql_error()); header(""location:applicantlogin.php""); } } ?>"
"524","bad","<?php $dbhost=""xxxx""; $dbusr=""xxxx""; $dbpass=""xxxx""; $database=""xxxxx""; mysql_connect($dbhost,$dbusr,$dbpass, $database); mysql_select_db($database) or die(""databse not connected""); $num = rand(98564654, 415231564); If(isset($_POST['login'])){ $Pin=$_GET['pin']; $ID =$_POST['ID']; $date=date('Y-m-d H:i:s'); if($Pin!=''){ mysql_query(""UPDATE pin SET appid ='$num', status='Activated' WHERE Pin= '$Pin'"") or die(mysql_error()); mysql_query(""INSERT IGNORE INTO pinlog (TableName,pin,id,TIME_UPDATED) VALUES('Pin','$Pin','$num','$date')"") or die(mysql_error()); header(""location:applicantlogin.php""); } } ?>"
"525","bad","if(isset($_GET['status']) && in_array($_GET['status'], $options)){ $sql .= "" WHERE status = ?""; $execute = array($_GET['status']); }<?php # Exercise solution 1 $employees = ''; $execute = array(); $options = array(0,1); $db = new PDO('mysql:host=localhost;dbname=eshop;charset=utf8', 'root', ''); $sql = ""SELECT firstName,lastName FROM employees""; if(isset($_GET['status']) && in_array($_GET['status'], $options)){ $sql .= "" WHERE status = ?""; $execute = array($_GET['status']); } $query = $db->prepare($sql); $query->setFetchMode(PDO::FETCH_OBJ); $query->execute($execute); $result = $query->fetchAll(); foreach($result as $row){ $employees .= ""{$row->firstName} {$row->lastName}<br/>""; } ?> <!DOCTYPE html> <html> <head> <meta charset=""utf-8"" /> <title>Exercise solution 1</title> </head> <body> <strong>Employees list</strong>&nbsp;&nbsp; <a href=""1.php"">All</a>&nbsp; <a href=""1.php?status=1"">Status Active</a>&nbsp; <a href=""1.php?status=0"">Status Not Active</a> <br/><br/> <div class=""result-list""><?= $employees; ?></div> </body> </html>"
"526","bad","if(isset($_GET['status']) && in_array($_GET['status'], $options)){ $sql .= "" WHERE status = ?""; $execute = array($_GET['status']); }<?php # Exercise solution 1 $employees = ''; $execute = array(); $options = array(0,1); $db = new PDO('mysql:host=localhost;dbname=eshop;charset=utf8', 'root', ''); $sql = ""SELECT firstName,lastName FROM employees""; if(isset($_GET['status']) && in_array($_GET['status'], $options)){ $sql .= "" WHERE status = ?""; $execute = array($_GET['status']); } $query = $db->prepare($sql); $query->setFetchMode(PDO::FETCH_OBJ); $query->execute($execute); $result = $query->fetchAll(); foreach($result as $row){ $employees .= ""{$row->firstName} {$row->lastName}<br/>""; } ?> <!DOCTYPE html> <html> <head> <meta charset=""utf-8"" /> <title>Exercise solution 1</title> </head> <body> <strong>Employees list</strong>&nbsp;&nbsp; <a href=""1.php"">All</a>&nbsp; <a href=""1.php?status=1"">Status Active</a>&nbsp; <a href=""1.php?status=0"">Status Not Active</a> <br/><br/> <div class=""result-list""><?= $employees; ?></div> </body> </html>"
"527","bad","<form class=""form-horizontal"" role=""form"" method=""post"" action=""#section4""> <div class=""form-group""> <label for=""first_name"" class=""col-sm-2 control-label"">Name</label> <div class=""col-sm-10""> <input type=""text"" class=""form-control"" id=""first_name"" name=""first_name"" placeholder=""First name"" value=""<?php echo htmlspecialchars($_POST['first_name']); ?>""> <?php echo ""<p class='text-danger'>$errName</p>"";?> </div> <div class=""col-sm-10""> <input type=""text"" class=""form-control"" id=""last_name"" name=""last_name"" placeholder=""Last name"" value=""<?php echo htmlspecialchars($_POST['last_name']); ?>""> <?php echo ""<p class='text-danger'>$errName</p>"";?> </div> </div> <div class=""form-group""> <label for=""email"" class=""col-sm-2 control-label"">Email</label> <div class=""col-sm-10""> <input type=""email"" class=""form-control"" id=""email"" name=""email"" placeholder=""eksample@domain.com"" value=""<?php echo htmlspecialchars($_POST['email']); ?>""> <?php echo ""<p class='text-danger'>$errEmail</p>"";?> </div> </div> <div class=""form-group""> <div class=""col-sm-10 col-sm-offset-2""> <input id=""submit"" name=""submit"" type=""submit"" value=""Send"" class=""btn btn-primary""> </div> </div> </form><?php if ($_POST[""submit""]) { $first_name = $_POST['first_name']; $last_name = $_POST['last_name']; $email = $_POST['email'];}$dbhost = 'mysql.info.dk'; $dbuser = 'myinfo'; $dbpass = 'mypass'; $dbname = 'moreinfo'; $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Error connecting to mysql'); mysql_select_db($dbname);$sql = ""INSERT INTO contacts(`first_name`, `last_name`, `email`) VALUES ([$first_name],[$last_name],[$email])"";mysqli_close($conn); ?>"
"528","bad","<form class=""form-horizontal"" role=""form"" method=""post"" action=""#section4""> <div class=""form-group""> <label for=""first_name"" class=""col-sm-2 control-label"">Name</label> <div class=""col-sm-10""> <input type=""text"" class=""form-control"" id=""first_name"" name=""first_name"" placeholder=""First name"" value=""<?php echo htmlspecialchars($_POST['first_name']); ?>""> <?php echo ""<p class='text-danger'>$errName</p>"";?> </div> <div class=""col-sm-10""> <input type=""text"" class=""form-control"" id=""last_name"" name=""last_name"" placeholder=""Last name"" value=""<?php echo htmlspecialchars($_POST['last_name']); ?>""> <?php echo ""<p class='text-danger'>$errName</p>"";?> </div> </div> <div class=""form-group""> <label for=""email"" class=""col-sm-2 control-label"">Email</label> <div class=""col-sm-10""> <input type=""email"" class=""form-control"" id=""email"" name=""email"" placeholder=""eksample@domain.com"" value=""<?php echo htmlspecialchars($_POST['email']); ?>""> <?php echo ""<p class='text-danger'>$errEmail</p>"";?> </div> </div> <div class=""form-group""> <div class=""col-sm-10 col-sm-offset-2""> <input id=""submit"" name=""submit"" type=""submit"" value=""Send"" class=""btn btn-primary""> </div> </div> </form><?php if ($_POST[""submit""]) { $first_name = $_POST['first_name']; $last_name = $_POST['last_name']; $email = $_POST['email'];}$dbhost = 'mysql.info.dk'; $dbuser = 'myinfo'; $dbpass = 'mypass'; $dbname = 'moreinfo'; $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Error connecting to mysql'); mysql_select_db($dbname);$sql = ""INSERT INTO contacts(`first_name`, `last_name`, `email`) VALUES ([$first_name],[$last_name],[$email])"";mysqli_close($conn); ?>"
"529","good","$order = ""SELECT name, name_id FROM requests WHERE name LIKE %?%"" ; $statement = $pdo->prepare($order); $statement->bindParam(1, $_POST['name']); $statement->execute(); $data = $statement->fetch(PDO::FETCH_ASSOC);Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%'kevin'%' at line 1' in /var/www/xxx/html/partials/requestinsert.php:13 Stack trace: #0 /var/www/xxx/html/partials/requestinsert.php(13): PDOStatement->execute() #1 /var/www/xxx/html/partials/requestcontact.php(231): include('/var/www/xxx...') #2 /var/www/xxx/html/xxx.php(124): include('/var/www/xxx...') #3 {main} thrown in /var/www/xxx/html/partials/requestinsert.php on line 13"
"530","good","$order = ""SELECT name, name_id FROM requests WHERE name LIKE %?%"" ; $statement = $pdo->prepare($order); $statement->bindParam(1, $_POST['name']); $statement->execute(); $data = $statement->fetch(PDO::FETCH_ASSOC);Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%'kevin'%' at line 1' in /var/www/xxx/html/partials/requestinsert.php:13 Stack trace: #0 /var/www/xxx/html/partials/requestinsert.php(13): PDOStatement->execute() #1 /var/www/xxx/html/partials/requestcontact.php(231): include('/var/www/xxx...') #2 /var/www/xxx/html/xxx.php(124): include('/var/www/xxx...') #3 {main} thrown in /var/www/xxx/html/partials/requestinsert.php on line 13"
"531","good","$order = ""SELECT name, name_id FROM requests WHERE name LIKE %?%"" ; $statement = $pdo->prepare($order); $statement->bindParam(1, $_POST['name']); $statement->execute(); $data = $statement->fetch(PDO::FETCH_ASSOC);Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%'kevin'%' at line 1' in /var/www/xxx/html/partials/requestinsert.php:13 Stack trace: #0 /var/www/xxx/html/partials/requestinsert.php(13): PDOStatement->execute() #1 /var/www/xxx/html/partials/requestcontact.php(231): include('/var/www/xxx...') #2 /var/www/xxx/html/xxx.php(124): include('/var/www/xxx...') #3 {main} thrown in /var/www/xxx/html/partials/requestinsert.php on line 13"
"532","bad","questionsanswersinclude ""db.php""; $exam_title=$_POST[""title_id""]; $exam_id=$_POST[""exam""]; $conn = new mysqli($servername, $username, $password, $dbname); if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $sql = ""insert into questions(question, option_type, media_type, media_link, exam_id) select question, option_type, media_type, media_link, '$exam_id' from questions where exam_id = "". $exam_id; $sql2 = ""insert into answers(answer, ques_id, right_ans) select a.answer, q.ques_id, a.right_ans from questions q, answers a where q.exam_id = "". $exam_id; if ($conn->query($sql) === TRUE) { echo ""done""; } else { echo ""Error: "" . $sql . ""<br>"" . $conn->error; } if ($conn->query($sql2) === TRUE) { echo ""done2""; } else { echo ""Error: "" . $sql . ""<br>"" . $conn->error; } $conn->close();ques_idquestionsans_idanswersprimary keyauto incrementques_idanswersques_idquestions"
"533","bad","questionsanswersinclude ""db.php""; $exam_title=$_POST[""title_id""]; $exam_id=$_POST[""exam""]; $conn = new mysqli($servername, $username, $password, $dbname); if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $sql = ""insert into questions(question, option_type, media_type, media_link, exam_id) select question, option_type, media_type, media_link, '$exam_id' from questions where exam_id = "". $exam_id; $sql2 = ""insert into answers(answer, ques_id, right_ans) select a.answer, q.ques_id, a.right_ans from questions q, answers a where q.exam_id = "". $exam_id; if ($conn->query($sql) === TRUE) { echo ""done""; } else { echo ""Error: "" . $sql . ""<br>"" . $conn->error; } if ($conn->query($sql2) === TRUE) { echo ""done2""; } else { echo ""Error: "" . $sql . ""<br>"" . $conn->error; } $conn->close();ques_idquestionsans_idanswersprimary keyauto incrementques_idanswersques_idquestions"
"534","bad","questionsanswersinclude ""db.php""; $exam_title=$_POST[""title_id""]; $exam_id=$_POST[""exam""]; $conn = new mysqli($servername, $username, $password, $dbname); if ($conn->connect_error) { die(""Connection failed: "" . $conn->connect_error); } $sql = ""insert into questions(question, option_type, media_type, media_link, exam_id) select question, option_type, media_type, media_link, '$exam_id' from questions where exam_id = "". $exam_id; $sql2 = ""insert into answers(answer, ques_id, right_ans) select a.answer, q.ques_id, a.right_ans from questions q, answers a where q.exam_id = "". $exam_id; if ($conn->query($sql) === TRUE) { echo ""done""; } else { echo ""Error: "" . $sql . ""<br>"" . $conn->error; } if ($conn->query($sql2) === TRUE) { echo ""done2""; } else { echo ""Error: "" . $sql . ""<br>"" . $conn->error; } $conn->close();ques_idquestionsans_idanswersprimary keyauto incrementques_idanswersques_idquestions"
"535","good","mysqli_stmt::bind_param():<form action=""<?php $_SERVER['PHP_SELF'] ?>"" method=""post"" enctype=""multipart/form-data""> <div class=""form-row""> <label for=""firstName"">First Name:</label> <input type=""text"" name=""firstName"" id=""firstName"" value=""<?php echo $_SESSION['firstName']; ?>""> </div> <div class=""form-row""> <label for=""lastName"">Last Name:</label> <input type=""text"" name=""lastName"" id=""lastName"" value=""<?php echo $_SESSION['lastName']; ?>""> </div> <div class=""form-row""> <label for=""username"">Username:</label> <input type=""text"" name=""username"" id=""username"" value=""<?php echo $_SESSION['username']; ?>""> </div> <div class=""form-row""> <label for=""email"">Email:</label> <input type=""email"" name=""email"" id=""email"" value=""<?php echo $_SESSION['email']; ?>""> </div> <div class=""form-row""> <label for=""profileImage"">Profile Image:</label> <input type=""file"" name=""file"" id=""file""> </div> <div class=""form-row""> <label for=""bio"">Bio:</label> <textarea type=""text"" name=""bio"" id=""bio""></textarea> </div> <div class=""form-row""> <input type=""submit"" name=""update"" value=""Submit Updates"" class=""btn black pull-left""> </div> </form>class Upload { public function uploadImages() { if (isset($_POST['update'])) { if (isset($_FILES['file'])) { $fileName = $_FILES['file']['name']; $fileName = mt_rand(100000, 999999) . $fileName; $fileName = preg_replace('#[^a-z0-9.]#i', '', $fileName); $fileTmp = $_FILES['file']['tmp_name']; $fileType = $_FILES['file']['type']; $fileSize = $_FILES['file']['size']; $fileError = $_FILES['file']['error']; $extensions = array('jpg', 'jpeg', 'png', 'tif', 'tiff', 'gif', ''); $tmp = explode('.', $fileName); $fileExtension = strtolower(end($tmp)); // if (!$fileTmp) { // die('No File Selected, Please try again - <a href=""user-profile-edit.php"">Try Again?</a>'); // } if ($fileSize > 2097152) { die('Error, File too big - <a href=""user-profile-edit.php"">Try Again?</a>'); } if (in_array($fileExtension,$extensions) === false and $fileError === 4) { move_uploaded_file($fileTmp, CURRENTROOT . '../img/upload/profiles/'.$fileName); $GLOBALS['fileName'] = $fileName; } elseif (in_array($fileExtension,$extensions) === false) { die('Acceptable file types are jpg, png, tif, and gif - <a href=""user-profile-edit.php"">Try Again?</a>'); } else { move_uploaded_file($fileTmp, CURRENTROOT . '../img/upload/profiles/'.$fileName); $GLOBALS['fileName'] = $fileName; } } } } }public function userProfileEdit() { $upload = new Upload(); $upload->uploadImages(); $userID = $_SESSION['userID']; $result = $this->con->db->query('SELECT * FROM users WHERE userID=""'.$userID.'""'); $row = $result->fetch_array(MYSQLI_BOTH); $_SESSION['firstName'] = $row['firstName']; $_SESSION['lastName'] = $row['lastName']; $_SESSION['username'] = $row['username']; $_SESSION['email'] = $row['email']; $_SESSION['profileImage'] = $row['profileImage']; $_SESSION['bio'] = $row['bio']; if (!empty($_POST)) { if (isset($_POST['update'])) { trim($updateFirstName = $_POST['firstName']); trim($updateLastName = $_POST['lastName']); trim($updateUsername = $_POST['username']); trim($updateEmail = $_POST['email']); trim($updateProfileImage = $GLOBALS['fileName']); trim($updateBio = $_POST['bio']); $insert = $this->con->db->prepare('UPDATE users SET firstName=""'.$updateFirstName.'"", lastName=""'.$updateLastName.'"", username=""'.$updateUsername.'"", email=""'.$updateEmail.'"", profileImage=""'.$updateProfileImage.'"", bio=""'.$updateBio.'"" WHERE userID = '.$userID); $insert->bind_param('sssssss', $updateFirstName, $updateLastName, $updateUsername, $updateEmail, $updateProfileImage, $updateBio, $userID); if ($insert->execute()) { $GLOBALS['profileUpdated'] = '<p>Your profile has been updated. <a href=""user-profile-edit.php""><i class=""fa fa-refresh""></i> Refresh </a>to see changes.</p>'; } } } }bind_param$userID"
"536","good","mysqli_stmt::bind_param():<form action=""<?php $_SERVER['PHP_SELF'] ?>"" method=""post"" enctype=""multipart/form-data""> <div class=""form-row""> <label for=""firstName"">First Name:</label> <input type=""text"" name=""firstName"" id=""firstName"" value=""<?php echo $_SESSION['firstName']; ?>""> </div> <div class=""form-row""> <label for=""lastName"">Last Name:</label> <input type=""text"" name=""lastName"" id=""lastName"" value=""<?php echo $_SESSION['lastName']; ?>""> </div> <div class=""form-row""> <label for=""username"">Username:</label> <input type=""text"" name=""username"" id=""username"" value=""<?php echo $_SESSION['username']; ?>""> </div> <div class=""form-row""> <label for=""email"">Email:</label> <input type=""email"" name=""email"" id=""email"" value=""<?php echo $_SESSION['email']; ?>""> </div> <div class=""form-row""> <label for=""profileImage"">Profile Image:</label> <input type=""file"" name=""file"" id=""file""> </div> <div class=""form-row""> <label for=""bio"">Bio:</label> <textarea type=""text"" name=""bio"" id=""bio""></textarea> </div> <div class=""form-row""> <input type=""submit"" name=""update"" value=""Submit Updates"" class=""btn black pull-left""> </div> </form>class Upload { public function uploadImages() { if (isset($_POST['update'])) { if (isset($_FILES['file'])) { $fileName = $_FILES['file']['name']; $fileName = mt_rand(100000, 999999) . $fileName; $fileName = preg_replace('#[^a-z0-9.]#i', '', $fileName); $fileTmp = $_FILES['file']['tmp_name']; $fileType = $_FILES['file']['type']; $fileSize = $_FILES['file']['size']; $fileError = $_FILES['file']['error']; $extensions = array('jpg', 'jpeg', 'png', 'tif', 'tiff', 'gif', ''); $tmp = explode('.', $fileName); $fileExtension = strtolower(end($tmp)); // if (!$fileTmp) { // die('No File Selected, Please try again - <a href=""user-profile-edit.php"">Try Again?</a>'); // } if ($fileSize > 2097152) { die('Error, File too big - <a href=""user-profile-edit.php"">Try Again?</a>'); } if (in_array($fileExtension,$extensions) === false and $fileError === 4) { move_uploaded_file($fileTmp, CURRENTROOT . '../img/upload/profiles/'.$fileName); $GLOBALS['fileName'] = $fileName; } elseif (in_array($fileExtension,$extensions) === false) { die('Acceptable file types are jpg, png, tif, and gif - <a href=""user-profile-edit.php"">Try Again?</a>'); } else { move_uploaded_file($fileTmp, CURRENTROOT . '../img/upload/profiles/'.$fileName); $GLOBALS['fileName'] = $fileName; } } } } }public function userProfileEdit() { $upload = new Upload(); $upload->uploadImages(); $userID = $_SESSION['userID']; $result = $this->con->db->query('SELECT * FROM users WHERE userID=""'.$userID.'""'); $row = $result->fetch_array(MYSQLI_BOTH); $_SESSION['firstName'] = $row['firstName']; $_SESSION['lastName'] = $row['lastName']; $_SESSION['username'] = $row['username']; $_SESSION['email'] = $row['email']; $_SESSION['profileImage'] = $row['profileImage']; $_SESSION['bio'] = $row['bio']; if (!empty($_POST)) { if (isset($_POST['update'])) { trim($updateFirstName = $_POST['firstName']); trim($updateLastName = $_POST['lastName']); trim($updateUsername = $_POST['username']); trim($updateEmail = $_POST['email']); trim($updateProfileImage = $GLOBALS['fileName']); trim($updateBio = $_POST['bio']); $insert = $this->con->db->prepare('UPDATE users SET firstName=""'.$updateFirstName.'"", lastName=""'.$updateLastName.'"", username=""'.$updateUsername.'"", email=""'.$updateEmail.'"", profileImage=""'.$updateProfileImage.'"", bio=""'.$updateBio.'"" WHERE userID = '.$userID); $insert->bind_param('sssssss', $updateFirstName, $updateLastName, $updateUsername, $updateEmail, $updateProfileImage, $updateBio, $userID); if ($insert->execute()) { $GLOBALS['profileUpdated'] = '<p>Your profile has been updated. <a href=""user-profile-edit.php""><i class=""fa fa-refresh""></i> Refresh </a>to see changes.</p>'; } } } }bind_param$userID"
"537","good","define('DB_SERVER', 'localhost'); define('DB_USERNAME', 'root'); define('DB_PASSWORD', ''); define('DB_DATABASE', 'user'); $database_user = mysqli_connect(DB_SERVER,DB_USERNAME,DB_PASSWORD,DB_DATABASE);$database_user; //Variable -> Database $login_mail = $_REQUEST['a_email']; //Email Textbox $login_pw = hash('sha512',$_REQUEST['a_password']); //Password Textbox login($login_mail,$login_pw,$database_user); function login($login_mail,$login_pw,$database_user) { $stmt = $database_user->prepare(""SELECT * FROM user(email,passwort) VALUES(?,?)""); $stmt->bind_param(""ss"",$login_mail,$login_pw); $stmt->execute(); //$stmt->fetch_row(); if($database_user->connect_errno) { echo ""<h3>Connection Failed</h3>""; exit(); } $url = $result[7]; if($result > 0) { $_SESSION['your_url'] = $url; header('location:../profil.php?user=' . $url); } }"
"538","good","define('DB_SERVER', 'localhost'); define('DB_USERNAME', 'root'); define('DB_PASSWORD', ''); define('DB_DATABASE', 'user'); $database_user = mysqli_connect(DB_SERVER,DB_USERNAME,DB_PASSWORD,DB_DATABASE);$database_user; //Variable -> Database $login_mail = $_REQUEST['a_email']; //Email Textbox $login_pw = hash('sha512',$_REQUEST['a_password']); //Password Textbox login($login_mail,$login_pw,$database_user); function login($login_mail,$login_pw,$database_user) { $stmt = $database_user->prepare(""SELECT * FROM user(email,passwort) VALUES(?,?)""); $stmt->bind_param(""ss"",$login_mail,$login_pw); $stmt->execute(); //$stmt->fetch_row(); if($database_user->connect_errno) { echo ""<h3>Connection Failed</h3>""; exit(); } $url = $result[7]; if($result > 0) { $_SESSION['your_url'] = $url; header('location:../profil.php?user=' . $url); } }"
"539","bad","mysql_real_escape_string()$_SESSION<input value='<?php echo $_SESSION['reg']['data']['password1']; ?>'"
"540","bad","$con = mysqli_connect($host,$uname,$pwd,$db); echo 'hi' $description= $_GET['description']; $categorie= $_GET['categorie']; $image=$_POST['image']; $imagename = uniqid(""uploaded_images"")."".png""; $imageurl=""http://justedhak.com/"".$imagename; $binary=base64_decode($image); header('Content-Type: bitmap; charset=utf-8'); $file = fopen($imagename, 'wb'); fwrite($file, $binary); fclose($file); $sql=""INSERT INTO OBJECTS( NAME, TYOE, URL, CATEGORY, USERS_ID, HIDE_YN ) VALUES ('$imagename', 'IMAGE', '$imageurl', 'CATEG' , 1, 'N')""; if(mysqli_query($con,$sql)){ echo $sql } else{ echo 'failure'; } mysqli_close($con);"
"541","bad","<!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <title>search</title> <link rel=""stylesheet"" type=""text/css""href=""http://www.sayahonline.com/a/my.css""> <link href=""http://www.sayahonline.com/templates/sayah/favicon.ico"" rel=""shortcut icon""> </head> <body> <center> <form name=""search"" method=""post"" action=""<?=$PHP_SELF?>""> <Select NAME=""field""> <Option VALUE=""idno"">ID</option> <Option VALUE=""name"">Name</option> <Option VALUE=""fname"">Father Name</option> <Option VALUE=""province"">Province</option> </Select> <input placeholder=""Search"" type=""text"" name=""find"" /> <input type=""hidden"" name=""searching"" value=""yes"" /> <input type=""submit"" name=""search"" value=""Search"" /> </form> <table border=""1"" width=""""> <thead> <tr> <th><center>ID</center></th> <th><center>Name</center></th> <th><center>Father Name</center></th> <th><center>G/F Name</center></th> <th><center>School</center></th> <th><center>Province</center></th> <th><center>Grade</center></th> <th><center>Result</center></th> </tr> </thead> <tbody id=""tbl""> <p></p> <? //get information $field = @$_POST['field'] ; $find = @$_POST['find'] ; $searching = @$_POST['searching'] ; //once submitted if ($searching ==""yes"") { echo ""<p></p>""; //blank search returns all results mysql_connect(""localhost"",""User"",""Password"") or die(mysql_error()); mysql_select_db(""Name"") or die(mysql_error()); mysql_query('SET NAMES utf8'); //filter search term $find = strtoupper($find); $find = strip_tags($find); $find = trim ($find); //search database $getquery = mysql_query(""SELECT * FROM Table WHERE upper($field) LIKE'%$find%' LIMIT $start, $per_page""); //display the results while($result = mysql_fetch_assoc($getquery)) { $idno = $result ['idno']; $name = $result ['name']; $fname = $result ['fname']; $gfname = $result ['gfname']; $school = $result ['school']; $province = $result ['province']; $grade = $result ['grade']; $result = $result ['result']; echo "" <tr> <td><center>$idno</center></td> <td>$name</td> <td>$fname</td> <td>$gfname</td> <td>$school</td> <td>$province</td> <td><center>$grade</center></td> <td>$result</td> </tr> </center> ""; } //number of results or error $anymatches=mysql_num_rows($getquery); if ($anymatches == 0) { echo ""Sorry...""; } //the search term echo ""Result: <b>$find</b> | Total: <b>$anymatches</b> <hr size='1'>""; } ?> </body> </html>"
"542","good","<?php $con = mysqli_connect(""localhost"", ""user"", ""userpass"", ""Android""); $username = $_POST[""username""]; $password = $_POST[""password""] $statement = mysqli_prepare($con, ""SELECT * FROM Utilisateur where username = ? AND password = ?""); mysqli_stmt_bind_param($statement, ""ss"", $username, $password); mysqli_stmt_execute($statement); mysqli_stmt_store_result($statement); mysqli_stmt_bind_result($statement, $userID, $name, $username, $mail, $password, $adresse, $ville, $zipCode); $user = array(); while(mysqli_stmt_fetch($statement)){ $user[name] = $name; $user[username] = $username; $user[mail] = $mail; $user[password] = $password; $user[adresse] = $adresse; $user[ville] = $ville; $user[zipCode] = $zipCode; } echo json_encode($user); mysqli_stmt_close($statement); mysqli_close($con); ?>public static final int CONNECTION_TIMEOUT = 1000 * 15; public static final String SERVER_ADDRESS = ""http://user:userpassword@62.210.193.223/Android/""; public class fetchUserDataAsyncTask extends AsyncTask<Void, Void, User> { User user; GetUserCallBack userCallBack; public fetchUserDataAsyncTask(User user, GetUserCallBack callBack) { this.user = user; this.userCallBack = callBack; } @Override protected User doInBackground(Void... params) { User returnedUser; try { URL url = new URL(SERVER_ADDRESS + ""FetchUserData.php""); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); conn.setRequestMethod(""POST""); Uri.Builder builder = new Uri.Builder().appendQueryParameter(""username"", user.username) .appendQueryParameter(""password"", user.password); String query = builder.build().getEncodedQuery(); OutputStream os = conn.getOutputStream(); BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(os, ""UTF-8"")); writer.write(query); writer.flush(); writer.close(); os.close(); conn.connect(); InputStream in = new BufferedInputStream(conn.getInputStream()); String response = IOUtils.toString(in, ""UTF-8""); JSONObject jResponse = new JSONObject(response); if (jResponse.length() == 0) { returnedUser = null; } else { String name = jResponse.getString(""name""); String mail = jResponse.getString(""mail""); String adresse = jResponse.getString(""adresse""); String ville = jResponse.getString(""ville""); int zipCode = jResponse.getInt(""zipCode""); returnedUser = new User(name, user.name, user.password, mail, adresse, ville, zipCode); } return returnedUser; } catch (IOException | JSONException e) { e.printStackTrace(); } return null; } @Override protected void onPostExecute(User returnedUser) { progressDialog.dismiss(); userCallBack.done(returnedUser); super.onPostExecute(returnedUser); } }java.io.FileNotFoundException: http://user:userpassword@62.210.193.223/Android/FetchUserData.php"
"543","good","<?php $con = mysqli_connect(""localhost"", ""user"", ""userpass"", ""Android""); $username = $_POST[""username""]; $password = $_POST[""password""] $statement = mysqli_prepare($con, ""SELECT * FROM Utilisateur where username = ? AND password = ?""); mysqli_stmt_bind_param($statement, ""ss"", $username, $password); mysqli_stmt_execute($statement); mysqli_stmt_store_result($statement); mysqli_stmt_bind_result($statement, $userID, $name, $username, $mail, $password, $adresse, $ville, $zipCode); $user = array(); while(mysqli_stmt_fetch($statement)){ $user[name] = $name; $user[username] = $username; $user[mail] = $mail; $user[password] = $password; $user[adresse] = $adresse; $user[ville] = $ville; $user[zipCode] = $zipCode; } echo json_encode($user); mysqli_stmt_close($statement); mysqli_close($con); ?>public static final int CONNECTION_TIMEOUT = 1000 * 15; public static final String SERVER_ADDRESS = ""http://user:userpassword@62.210.193.223/Android/""; public class fetchUserDataAsyncTask extends AsyncTask<Void, Void, User> { User user; GetUserCallBack userCallBack; public fetchUserDataAsyncTask(User user, GetUserCallBack callBack) { this.user = user; this.userCallBack = callBack; } @Override protected User doInBackground(Void... params) { User returnedUser; try { URL url = new URL(SERVER_ADDRESS + ""FetchUserData.php""); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); conn.setRequestMethod(""POST""); Uri.Builder builder = new Uri.Builder().appendQueryParameter(""username"", user.username) .appendQueryParameter(""password"", user.password); String query = builder.build().getEncodedQuery(); OutputStream os = conn.getOutputStream(); BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(os, ""UTF-8"")); writer.write(query); writer.flush(); writer.close(); os.close(); conn.connect(); InputStream in = new BufferedInputStream(conn.getInputStream()); String response = IOUtils.toString(in, ""UTF-8""); JSONObject jResponse = new JSONObject(response); if (jResponse.length() == 0) { returnedUser = null; } else { String name = jResponse.getString(""name""); String mail = jResponse.getString(""mail""); String adresse = jResponse.getString(""adresse""); String ville = jResponse.getString(""ville""); int zipCode = jResponse.getInt(""zipCode""); returnedUser = new User(name, user.name, user.password, mail, adresse, ville, zipCode); } return returnedUser; } catch (IOException | JSONException e) { e.printStackTrace(); } return null; } @Override protected void onPostExecute(User returnedUser) { progressDialog.dismiss(); userCallBack.done(returnedUser); super.onPostExecute(returnedUser); } }java.io.FileNotFoundException: http://user:userpassword@62.210.193.223/Android/FetchUserData.php"
"544","good","<?php $con = mysqli_connect(""localhost"", ""user"", ""userpass"", ""Android""); $username = $_POST[""username""]; $password = $_POST[""password""] $statement = mysqli_prepare($con, ""SELECT * FROM Utilisateur where username = ? AND password = ?""); mysqli_stmt_bind_param($statement, ""ss"", $username, $password); mysqli_stmt_execute($statement); mysqli_stmt_store_result($statement); mysqli_stmt_bind_result($statement, $userID, $name, $username, $mail, $password, $adresse, $ville, $zipCode); $user = array(); while(mysqli_stmt_fetch($statement)){ $user[name] = $name; $user[username] = $username; $user[mail] = $mail; $user[password] = $password; $user[adresse] = $adresse; $user[ville] = $ville; $user[zipCode] = $zipCode; } echo json_encode($user); mysqli_stmt_close($statement); mysqli_close($con); ?>public static final int CONNECTION_TIMEOUT = 1000 * 15; public static final String SERVER_ADDRESS = ""http://user:userpassword@62.210.193.223/Android/""; public class fetchUserDataAsyncTask extends AsyncTask<Void, Void, User> { User user; GetUserCallBack userCallBack; public fetchUserDataAsyncTask(User user, GetUserCallBack callBack) { this.user = user; this.userCallBack = callBack; } @Override protected User doInBackground(Void... params) { User returnedUser; try { URL url = new URL(SERVER_ADDRESS + ""FetchUserData.php""); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); conn.setRequestMethod(""POST""); Uri.Builder builder = new Uri.Builder().appendQueryParameter(""username"", user.username) .appendQueryParameter(""password"", user.password); String query = builder.build().getEncodedQuery(); OutputStream os = conn.getOutputStream(); BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(os, ""UTF-8"")); writer.write(query); writer.flush(); writer.close(); os.close(); conn.connect(); InputStream in = new BufferedInputStream(conn.getInputStream()); String response = IOUtils.toString(in, ""UTF-8""); JSONObject jResponse = new JSONObject(response); if (jResponse.length() == 0) { returnedUser = null; } else { String name = jResponse.getString(""name""); String mail = jResponse.getString(""mail""); String adresse = jResponse.getString(""adresse""); String ville = jResponse.getString(""ville""); int zipCode = jResponse.getInt(""zipCode""); returnedUser = new User(name, user.name, user.password, mail, adresse, ville, zipCode); } return returnedUser; } catch (IOException | JSONException e) { e.printStackTrace(); } return null; } @Override protected void onPostExecute(User returnedUser) { progressDialog.dismiss(); userCallBack.done(returnedUser); super.onPostExecute(returnedUser); } }java.io.FileNotFoundException: http://user:userpassword@62.210.193.223/Android/FetchUserData.php"
"545","good","<a href=""details.php> <form method=""post"" action=""extra.php""> Date Range From: <input type=""text"" id=""dateFrom"" name=""dateFrom"" value=""""> To: <input type=""text"" id=""dateTo"" name=""dateTo"" value=""""> <br/> Name Search: <input type=""text"" id=""nameSearch"" name=""nameSearch"" value=""""> <br/> Game Result: <select name=""gameResult""> <option value=""any"">Any</option> <option value=""p1"">Player 1</option> <option value=""p2"">Player 2</option> <option value=""draw"">Draw</option> </select> <input type=""submit"" id=""submit""> </form> <?php include('../inclass/db_connect.php'); //Dates are filled in if(isset($_POST['dateFrom']) && ($_POST['dateTo'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) ORDER BY DATE_FORMAT(matchDate, '%m/%Y/%d') desc LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); //Dates and Search for Name filled in if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and p1 picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='1') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and p2 picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='2') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and Draw picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='D') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } ?> <table border=""1""> <tr> <th>Match Date</th> <th>Player 1</th> <th>Player 2</th> <th>Result</th> <th>ECO Code</th> <th>Match Details</th> </tr> <?php for($i=0; $row = $result->fetch(); $i++){ ?> <tr> <td><?php echo $row['matchDate']; ?></td> <td><?php echo $row['player1']; ?></td> <td><?php echo $row['player2']; ?></td> <td><?php echo $row['result']; ?></td> <td><?php echo $row['eco']; ?></td> **<td><a href=""details.php"" id="".$row['id']."">Details</a></td>** </tr> <?php } ?> </table> <?php }else{ $dateFrom = 0; $dateTo = 0; $nameSearch = 0; $gameResult = 0; }"
"546","good","<a href=""details.php> <form method=""post"" action=""extra.php""> Date Range From: <input type=""text"" id=""dateFrom"" name=""dateFrom"" value=""""> To: <input type=""text"" id=""dateTo"" name=""dateTo"" value=""""> <br/> Name Search: <input type=""text"" id=""nameSearch"" name=""nameSearch"" value=""""> <br/> Game Result: <select name=""gameResult""> <option value=""any"">Any</option> <option value=""p1"">Player 1</option> <option value=""p2"">Player 2</option> <option value=""draw"">Draw</option> </select> <input type=""submit"" id=""submit""> </form> <?php include('../inclass/db_connect.php'); //Dates are filled in if(isset($_POST['dateFrom']) && ($_POST['dateTo'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) ORDER BY DATE_FORMAT(matchDate, '%m/%Y/%d') desc LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); //Dates and Search for Name filled in if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and p1 picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='1') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and p2 picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='2') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and Draw picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='D') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } ?> <table border=""1""> <tr> <th>Match Date</th> <th>Player 1</th> <th>Player 2</th> <th>Result</th> <th>ECO Code</th> <th>Match Details</th> </tr> <?php for($i=0; $row = $result->fetch(); $i++){ ?> <tr> <td><?php echo $row['matchDate']; ?></td> <td><?php echo $row['player1']; ?></td> <td><?php echo $row['player2']; ?></td> <td><?php echo $row['result']; ?></td> <td><?php echo $row['eco']; ?></td> **<td><a href=""details.php"" id="".$row['id']."">Details</a></td>** </tr> <?php } ?> </table> <?php }else{ $dateFrom = 0; $dateTo = 0; $nameSearch = 0; $gameResult = 0; }"
"547","good","<a href=""details.php> <form method=""post"" action=""extra.php""> Date Range From: <input type=""text"" id=""dateFrom"" name=""dateFrom"" value=""""> To: <input type=""text"" id=""dateTo"" name=""dateTo"" value=""""> <br/> Name Search: <input type=""text"" id=""nameSearch"" name=""nameSearch"" value=""""> <br/> Game Result: <select name=""gameResult""> <option value=""any"">Any</option> <option value=""p1"">Player 1</option> <option value=""p2"">Player 2</option> <option value=""draw"">Draw</option> </select> <input type=""submit"" id=""submit""> </form> <?php include('../inclass/db_connect.php'); //Dates are filled in if(isset($_POST['dateFrom']) && ($_POST['dateTo'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) ORDER BY DATE_FORMAT(matchDate, '%m/%Y/%d') desc LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); //Dates and Search for Name filled in if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and p1 picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='1') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and p2 picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='2') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } //Dates search for name and Draw picked for results if(isset($_POST['dateFrom']) && ($_POST['dateTo']) && ($_POST['nameSearch']) && ($_POST['gameResult'])){ $dateFrom = $_POST['dateFrom']; $dateTo = $_POST['dateTo']; $nameSearch = $_POST['nameSearch']; $gameResult = $_POST['gameResult']; $result =$pdo->prepare(""SELECT matchDate, player1, player2, result, eco FROM matches WHERE (matchDate BETWEEN :a AND :b) AND ((player1 LIKE '$nameSearch%') OR (player2 LIKE '$nameSearch%')) AND (result ='D') LIMIT 250""); $result->bindParam(':a', $dateFrom); $result->bindParam(':b', $dateTo); $result->execute(); } ?> <table border=""1""> <tr> <th>Match Date</th> <th>Player 1</th> <th>Player 2</th> <th>Result</th> <th>ECO Code</th> <th>Match Details</th> </tr> <?php for($i=0; $row = $result->fetch(); $i++){ ?> <tr> <td><?php echo $row['matchDate']; ?></td> <td><?php echo $row['player1']; ?></td> <td><?php echo $row['player2']; ?></td> <td><?php echo $row['result']; ?></td> <td><?php echo $row['eco']; ?></td> **<td><a href=""details.php"" id="".$row['id']."">Details</a></td>** </tr> <?php } ?> </table> <?php }else{ $dateFrom = 0; $dateTo = 0; $nameSearch = 0; $gameResult = 0; }"
"548","bad","function getStudent () { global $conn; $query = ""SELECT * FROM pending_students_table WHERE status IS NULL;""; $result = mysqli_query($conn, $query); $i = 1; while ($row = mysqli_fetch_array($result)) { $sId = $row['id']; $sName = $row['student_name']; $_SESSION['id'] = $row['id']; echo ""<tr id='sNew"".$i.""'>""; echo ""<td>"".$i."" - </td>""; echo ""<td>{$sName}</td>""; echo ""<td><button type='submit' name='sAcc' value='{$sId}'>Accept</button></td>""; echo ""<td><button type='submit' name='sRej' value='{$sId}'>Reject</button></td>""; echo ""<td><button name='stInfo' value='{$sId}'><a href='student_information.php?id=<?php echo "".'""$row[$id]""'.""; ?>' target='_blank' style='color: #000000; text-decoration: none;' onClick='pop_up(this)'>Student Details</a></button></td>""; echo ""</tr>""; $i++; } }<?php session_start(); include ('partials/connectDb.php'); echo ""<h2>Student Information</h2>""; $id = $_SESSION['id']; $sql = ""SELECT pending_students_table.id, pending_students_table.student_name, pending_students_table.student_email, pending_students_table.student_phone, major_table.major_name, pending_students_table.student_password, pending_students_table.high_school_major, pending_students_table.high_school_gpa, pending_students_table.adviser, pending_students_table.status FROM pending_students_table INNER JOIN major_table ON pending_students_table.student_major = major_table.major_id WHERE pending_students_table.id = '$id';""; $result = mysqli_query($conn, $sql); while($row = mysqli_fetch_array($result)) { $sId = $row['id']; $sName = $row['student_name']; $sPhone = $row['student_phone']; $sMajor = $row['major_name']; $sHsMajor = $row['high_school_major']; $sHsGpa = $row['high_school_gpa']; $sHsMajorString = ''; if ($sHsMajor == 1) { $sHsMajorString = 'Commercial'; } elseif ($sHsMajor == 2) { $sHsMajorString = 'Literature'; } elseif ($sHsMajor == 3) { $sHsMajorString = 'Science'; } elseif ($sHsMajor == 4) { $sHsMajorString = '(Institute of Technology)'; } echo ""<ul>""; echo ""<li>Name: {$sName}</li>""; echo ""<li>Phone: {$sPhone}</li>""; echo ""<li>Selected Major: {$sMajor}</li>""; echo ""<li>High School Major: {$sHsMajorString}</li>""; echo ""<li>High School GPA: {$sHsGpa}</li>""; echo ""</ul>""; } ?>"
"549","good","<?php $mysql_pekare= new mysqli (""host"", "" user"",""pass"", ""db""); $stmt = $mysql_pekare->prepare(""INSERT INTO Events(`Name`, `Title`) VALUES(?,?)""); $stmt->bind_param(""ss"", $namn, $age); $stmt->execute(); $stmt->close(); $mysql_pekare->close(); ?>static public async Task <bool> createOurMainInfo (string userId, string thename, string thetitle) { var httpClientRequest = new HttpClient (); var postData = new Dictionary <string, string> (); postData.Add (""Name"", thename); postData.Add (""Title"", thetitle); var jsonRequest = JsonConvert.SerializeObject(postData); HttpContent content = new StringContent(jsonRequest, System.Text.Encoding.UTF8, ""application/json""); var result = await httpClientRequest.PostAsync(""http://localhost/Events.php"", content); var resultString = await result.Content.ReadAsStringAsync (); return true; }$value1 = json_decode(file_get_contents('php://input')); $value2 = json_decode(file_get_contents('php://input')); $mysql_pekare= new mysqli ("""", """","""", """"); $stmt = $mysql_pekare->prepare(""INSERT INTO Events(`Name`, `Title`) VALUES(?,?)""); $stmt->bind_param(""ss"", $value1, $value2); $stmt->execute(); $stmt->close(); $mysql_pekare->close(); echo $value1->Name; echo $value2->Title;"
"550","good","<?php $mysql_pekare= new mysqli (""host"", "" user"",""pass"", ""db""); $stmt = $mysql_pekare->prepare(""INSERT INTO Events(`Name`, `Title`) VALUES(?,?)""); $stmt->bind_param(""ss"", $namn, $age); $stmt->execute(); $stmt->close(); $mysql_pekare->close(); ?>static public async Task <bool> createOurMainInfo (string userId, string thename, string thetitle) { var httpClientRequest = new HttpClient (); var postData = new Dictionary <string, string> (); postData.Add (""Name"", thename); postData.Add (""Title"", thetitle); var jsonRequest = JsonConvert.SerializeObject(postData); HttpContent content = new StringContent(jsonRequest, System.Text.Encoding.UTF8, ""application/json""); var result = await httpClientRequest.PostAsync(""http://localhost/Events.php"", content); var resultString = await result.Content.ReadAsStringAsync (); return true; }$value1 = json_decode(file_get_contents('php://input')); $value2 = json_decode(file_get_contents('php://input')); $mysql_pekare= new mysqli ("""", """","""", """"); $stmt = $mysql_pekare->prepare(""INSERT INTO Events(`Name`, `Title`) VALUES(?,?)""); $stmt->bind_param(""ss"", $value1, $value2); $stmt->execute(); $stmt->close(); $mysql_pekare->close(); echo $value1->Name; echo $value2->Title;"
"551","good","ProductoIngresoDevoprovTransacciones if(isset($_POST['btnnewsal'])){ //Array Productos require_once 'config.php'; for ($i=0; $i < count($_POST['itemNo']); $i++ ) { $idventa = $_POST['venta']; $idpro = $_POST['itemNo'][$i]; $res = $_SESSION['nombre']; $cre = ""NOW()""; $comentario = $_POST['notes']; $centro = $_POST['cbocod']; $canpro = $_POST['quantity'][$i]; $qryUpt = ""INSERT INTO transacciones VALUES ('$idventa','$centro','$idpro','$canpro','$comentario','$res',$cre,1)""; mysqli_query($con,$qryUpt) or die(mysqli_error()); } //Disminuir inventario for ($i=0; $i < count($_POST['itemNo']); $i++ ) { $idpro = $_POST['itemNo'][$i]; $canpro = $_POST['quantity'][$i]; $qryUpt = ""UPDATE producto SET uni_pro = uni_pro-'$canpro' WHERE id_pro='$idpro'""; mysqli_query($con,$qryUpt) or die(mysqli_error()); } }<form class=""form"" method=""post"" action=""despacho.php""> <div class=""form-group""> <label for=""cbocod"" class=""col-sm-2 control-label"">Centro Medico:</label> <div class=""col-sm-6""> <select class=""form-control select2"" id=""cbocod"" name=""cbocod"" style=""width: 50%;""> <?php $u->llenarcombocentros(); ?> </select> </div> </div> <div class=""form-group""> <label for=""cbocod"" class=""col-sm-2 control-label"">Codigo Transaccion:</label> <div class=""col-md-1""> <input type=""text"" style=""text-align: center;"" class=""form-control"" id=""venta"" name=""venta"" value=""<?php $u->contarventas(); ?>"" readonly> </div> </div> <div class=""col-xs-12 col-sm-12 col-md-12 col-lg-12""> <table id=""vender"" width=""90%"" class=""table table-bordered table-hover""> <thead> <tr> <th width=""2%""><input id=""check_all"" class=""formcontrol"" type=""checkbox""/></th> <th width=""15%"">Codigo</th> <th width=""35%"">Nombre</th> <!-- 34% --> <th width=""10%"">Stock</th> <th width=""10%"">Cantidad</th> </tr> </thead> <tbody> <tr> <td><input class=""case"" type=""checkbox""/></td> <td><input type=""text"" data-type=""id_pro"" name=""itemNo[]"" id=""itemNo_1"" class=""form-control autocomplete_txt changesNo"" autocomplete=""off"" required></td> <td><input type=""text"" data-type=""nom_pro"" name=""itemName[]"" id=""itemName_1"" class=""form-control autocomplete_txt changesNo"" autocomplete=""off"" required></td> <td><input type=""number"" name=""stock[]"" id=""stock_1"" class=""form-control changesNo"" autocomplete=""off"" onkeypress=""return IsNumeric(event);"" ondrop=""return false;"" onpaste=""return false;"" readonly></td> <td><input type=""number"" name=""quantity[]"" id=""quantity_1"" class=""form-control changesNo"" autocomplete=""off"" onkeypress=""return IsNumeric(event);"" ondrop=""return false;"" onpaste=""return false;"" required></td> </tr> </tbody> </table> </div> <div class=""col-xs-12 col-sm-3 col-md-3 col-lg-3""> <button class=""btn btn-danger delete"" type=""button"">- Borrar</button> <button class=""btn btn-success addmore"" type=""button"">+ Agregar Producto</button> </div> </div> <br><br> <div class=""row""> <div class=""col-xs-12 col-sm-12 col-md-12 col-lg-12""> <div class=""form-group""> <label for=""notes"" class=""col-sm-1 control-label"">Comentarios:</label> <div class=""col-sm-6""> <input type=""text"" class=""form-control"" id=""notes"" name=""notes"" placeholder=""Comentarios""> </div> </div> </div> <div class=""col-xs-11 col-sm-11 col-md-11 col-lg-11""> <button type=""reset"" class=""btn btn-default"">Limpiar</button> <button type=""submit"" id=""btnnewsal"" name=""btnnewsal"" class=""btn btn-info pull-right"">Despachar</button> </div><!-- /.box-footer --> </div> </form>$(document).on('focus','.autocomplete_txt',function(){ type = $(this).data('type'); if(type =='id_pro' )autoTypeNo=0; if(type =='nom_pro' )autoTypeNo=1; $(this).autocomplete({ source: function( request, response ) { $.ajax({ url : 'ajax.php', dataType: ""json"", method: 'post', data: { name_startsWith: request.term, type: type }, success: function( data ) { response( $.map( data, function( item ) { var code = item.split(""|""); return { label: code[autoTypeNo], value: code[autoTypeNo], data : item } })); } }); }, autoFocus: true, minLength: 0, select: function( event, ui ) { var names = ui.item.data.split(""|""); id_arr = $(this).attr('id'); id = id_arr.split(""_""); $('#itemNo_'+id[1]).val(names[0]); $('#itemName_'+id[1]).val(names[1]); $('#stock_'+id[1]).val(names[2]); $('#quantity_'+id[1]).val(1); } }); });<?php require_once 'config.php'; if(!empty($_POST['type'])){ $type = $_POST['type']; $name = $_POST['name_startsWith']; $query = ""SELECT id_pro, nom_pro, uni_pro FROM producto where UPPER($type) LIKE '"".strtoupper($name).""%'""; $result = mysqli_query($con, $query); $data = array(); while ($row = mysqli_fetch_assoc($result)) { $name = $row['id_pro'].'|'.$row['nom_pro'].'|'.$row['uni_pro']; array_push($data, $name); } echo json_encode($data);exit; }require_once 'config.php'; if(isset($_POST['generar'])){ $start = $_POST['desde']; $end = $_POST['hasta']; $centro = $_POST['cbocod']; if($centro==-1){ $qryMem = ""SELECT calendar.datefield AS DATE, IFNULL(SUM(transacciones.can_ven),0) AS total_sales FROM transacciones RIGHT JOIN calendar ON (DATE(transacciones.cre_dep) = calendar.datefield) WHERE calendar.datefield BETWEEN '$start' AND '$end' AND transacciones.id_tra=1 GROUP BY DATE""; $memresult = mysqli_query($con, $qryMem) or die(mysqli_error());"
"552","bad","ProductoIngresoDevoprovTransacciones if(isset($_POST['btnnewsal'])){ //Array Productos require_once 'config.php'; for ($i=0; $i < count($_POST['itemNo']); $i++ ) { $idventa = $_POST['venta']; $idpro = $_POST['itemNo'][$i]; $res = $_SESSION['nombre']; $cre = ""NOW()""; $comentario = $_POST['notes']; $centro = $_POST['cbocod']; $canpro = $_POST['quantity'][$i]; $qryUpt = ""INSERT INTO transacciones VALUES ('$idventa','$centro','$idpro','$canpro','$comentario','$res',$cre,1)""; mysqli_query($con,$qryUpt) or die(mysqli_error()); } //Disminuir inventario for ($i=0; $i < count($_POST['itemNo']); $i++ ) { $idpro = $_POST['itemNo'][$i]; $canpro = $_POST['quantity'][$i]; $qryUpt = ""UPDATE producto SET uni_pro = uni_pro-'$canpro' WHERE id_pro='$idpro'""; mysqli_query($con,$qryUpt) or die(mysqli_error()); } }<form class=""form"" method=""post"" action=""despacho.php""> <div class=""form-group""> <label for=""cbocod"" class=""col-sm-2 control-label"">Centro Medico:</label> <div class=""col-sm-6""> <select class=""form-control select2"" id=""cbocod"" name=""cbocod"" style=""width: 50%;""> <?php $u->llenarcombocentros(); ?> </select> </div> </div> <div class=""form-group""> <label for=""cbocod"" class=""col-sm-2 control-label"">Codigo Transaccion:</label> <div class=""col-md-1""> <input type=""text"" style=""text-align: center;"" class=""form-control"" id=""venta"" name=""venta"" value=""<?php $u->contarventas(); ?>"" readonly> </div> </div> <div class=""col-xs-12 col-sm-12 col-md-12 col-lg-12""> <table id=""vender"" width=""90%"" class=""table table-bordered table-hover""> <thead> <tr> <th width=""2%""><input id=""check_all"" class=""formcontrol"" type=""checkbox""/></th> <th width=""15%"">Codigo</th> <th width=""35%"">Nombre</th> <!-- 34% --> <th width=""10%"">Stock</th> <th width=""10%"">Cantidad</th> </tr> </thead> <tbody> <tr> <td><input class=""case"" type=""checkbox""/></td> <td><input type=""text"" data-type=""id_pro"" name=""itemNo[]"" id=""itemNo_1"" class=""form-control autocomplete_txt changesNo"" autocomplete=""off"" required></td> <td><input type=""text"" data-type=""nom_pro"" name=""itemName[]"" id=""itemName_1"" class=""form-control autocomplete_txt changesNo"" autocomplete=""off"" required></td> <td><input type=""number"" name=""stock[]"" id=""stock_1"" class=""form-control changesNo"" autocomplete=""off"" onkeypress=""return IsNumeric(event);"" ondrop=""return false;"" onpaste=""return false;"" readonly></td> <td><input type=""number"" name=""quantity[]"" id=""quantity_1"" class=""form-control changesNo"" autocomplete=""off"" onkeypress=""return IsNumeric(event);"" ondrop=""return false;"" onpaste=""return false;"" required></td> </tr> </tbody> </table> </div> <div class=""col-xs-12 col-sm-3 col-md-3 col-lg-3""> <button class=""btn btn-danger delete"" type=""button"">- Borrar</button> <button class=""btn btn-success addmore"" type=""button"">+ Agregar Producto</button> </div> </div> <br><br> <div class=""row""> <div class=""col-xs-12 col-sm-12 col-md-12 col-lg-12""> <div class=""form-group""> <label for=""notes"" class=""col-sm-1 control-label"">Comentarios:</label> <div class=""col-sm-6""> <input type=""text"" class=""form-control"" id=""notes"" name=""notes"" placeholder=""Comentarios""> </div> </div> </div> <div class=""col-xs-11 col-sm-11 col-md-11 col-lg-11""> <button type=""reset"" class=""btn btn-default"">Limpiar</button> <button type=""submit"" id=""btnnewsal"" name=""btnnewsal"" class=""btn btn-info pull-right"">Despachar</button> </div><!-- /.box-footer --> </div> </form>$(document).on('focus','.autocomplete_txt',function(){ type = $(this).data('type'); if(type =='id_pro' )autoTypeNo=0; if(type =='nom_pro' )autoTypeNo=1; $(this).autocomplete({ source: function( request, response ) { $.ajax({ url : 'ajax.php', dataType: ""json"", method: 'post', data: { name_startsWith: request.term, type: type }, success: function( data ) { response( $.map( data, function( item ) { var code = item.split(""|""); return { label: code[autoTypeNo], value: code[autoTypeNo], data : item } })); } }); }, autoFocus: true, minLength: 0, select: function( event, ui ) { var names = ui.item.data.split(""|""); id_arr = $(this).attr('id'); id = id_arr.split(""_""); $('#itemNo_'+id[1]).val(names[0]); $('#itemName_'+id[1]).val(names[1]); $('#stock_'+id[1]).val(names[2]); $('#quantity_'+id[1]).val(1); } }); });<?php require_once 'config.php'; if(!empty($_POST['type'])){ $type = $_POST['type']; $name = $_POST['name_startsWith']; $query = ""SELECT id_pro, nom_pro, uni_pro FROM producto where UPPER($type) LIKE '"".strtoupper($name).""%'""; $result = mysqli_query($con, $query); $data = array(); while ($row = mysqli_fetch_assoc($result)) { $name = $row['id_pro'].'|'.$row['nom_pro'].'|'.$row['uni_pro']; array_push($data, $name); } echo json_encode($data);exit; }require_once 'config.php'; if(isset($_POST['generar'])){ $start = $_POST['desde']; $end = $_POST['hasta']; $centro = $_POST['cbocod']; if($centro==-1){ $qryMem = ""SELECT calendar.datefield AS DATE, IFNULL(SUM(transacciones.can_ven),0) AS total_sales FROM transacciones RIGHT JOIN calendar ON (DATE(transacciones.cre_dep) = calendar.datefield) WHERE calendar.datefield BETWEEN '$start' AND '$end' AND transacciones.id_tra=1 GROUP BY DATE""; $memresult = mysqli_query($con, $qryMem) or die(mysqli_error());"
"553","bad","ProductoIngresoDevoprovTransacciones if(isset($_POST['btnnewsal'])){ //Array Productos require_once 'config.php'; for ($i=0; $i < count($_POST['itemNo']); $i++ ) { $idventa = $_POST['venta']; $idpro = $_POST['itemNo'][$i]; $res = $_SESSION['nombre']; $cre = ""NOW()""; $comentario = $_POST['notes']; $centro = $_POST['cbocod']; $canpro = $_POST['quantity'][$i]; $qryUpt = ""INSERT INTO transacciones VALUES ('$idventa','$centro','$idpro','$canpro','$comentario','$res',$cre,1)""; mysqli_query($con,$qryUpt) or die(mysqli_error()); } //Disminuir inventario for ($i=0; $i < count($_POST['itemNo']); $i++ ) { $idpro = $_POST['itemNo'][$i]; $canpro = $_POST['quantity'][$i]; $qryUpt = ""UPDATE producto SET uni_pro = uni_pro-'$canpro' WHERE id_pro='$idpro'""; mysqli_query($con,$qryUpt) or die(mysqli_error()); } }<form class=""form"" method=""post"" action=""despacho.php""> <div class=""form-group""> <label for=""cbocod"" class=""col-sm-2 control-label"">Centro Medico:</label> <div class=""col-sm-6""> <select class=""form-control select2"" id=""cbocod"" name=""cbocod"" style=""width: 50%;""> <?php $u->llenarcombocentros(); ?> </select> </div> </div> <div class=""form-group""> <label for=""cbocod"" class=""col-sm-2 control-label"">Codigo Transaccion:</label> <div class=""col-md-1""> <input type=""text"" style=""text-align: center;"" class=""form-control"" id=""venta"" name=""venta"" value=""<?php $u->contarventas(); ?>"" readonly> </div> </div> <div class=""col-xs-12 col-sm-12 col-md-12 col-lg-12""> <table id=""vender"" width=""90%"" class=""table table-bordered table-hover""> <thead> <tr> <th width=""2%""><input id=""check_all"" class=""formcontrol"" type=""checkbox""/></th> <th width=""15%"">Codigo</th> <th width=""35%"">Nombre</th> <!-- 34% --> <th width=""10%"">Stock</th> <th width=""10%"">Cantidad</th> </tr> </thead> <tbody> <tr> <td><input class=""case"" type=""checkbox""/></td> <td><input type=""text"" data-type=""id_pro"" name=""itemNo[]"" id=""itemNo_1"" class=""form-control autocomplete_txt changesNo"" autocomplete=""off"" required></td> <td><input type=""text"" data-type=""nom_pro"" name=""itemName[]"" id=""itemName_1"" class=""form-control autocomplete_txt changesNo"" autocomplete=""off"" required></td> <td><input type=""number"" name=""stock[]"" id=""stock_1"" class=""form-control changesNo"" autocomplete=""off"" onkeypress=""return IsNumeric(event);"" ondrop=""return false;"" onpaste=""return false;"" readonly></td> <td><input type=""number"" name=""quantity[]"" id=""quantity_1"" class=""form-control changesNo"" autocomplete=""off"" onkeypress=""return IsNumeric(event);"" ondrop=""return false;"" onpaste=""return false;"" required></td> </tr> </tbody> </table> </div> <div class=""col-xs-12 col-sm-3 col-md-3 col-lg-3""> <button class=""btn btn-danger delete"" type=""button"">- Borrar</button> <button class=""btn btn-success addmore"" type=""button"">+ Agregar Producto</button> </div> </div> <br><br> <div class=""row""> <div class=""col-xs-12 col-sm-12 col-md-12 col-lg-12""> <div class=""form-group""> <label for=""notes"" class=""col-sm-1 control-label"">Comentarios:</label> <div class=""col-sm-6""> <input type=""text"" class=""form-control"" id=""notes"" name=""notes"" placeholder=""Comentarios""> </div> </div> </div> <div class=""col-xs-11 col-sm-11 col-md-11 col-lg-11""> <button type=""reset"" class=""btn btn-default"">Limpiar</button> <button type=""submit"" id=""btnnewsal"" name=""btnnewsal"" class=""btn btn-info pull-right"">Despachar</button> </div><!-- /.box-footer --> </div> </form>$(document).on('focus','.autocomplete_txt',function(){ type = $(this).data('type'); if(type =='id_pro' )autoTypeNo=0; if(type =='nom_pro' )autoTypeNo=1; $(this).autocomplete({ source: function( request, response ) { $.ajax({ url : 'ajax.php', dataType: ""json"", method: 'post', data: { name_startsWith: request.term, type: type }, success: function( data ) { response( $.map( data, function( item ) { var code = item.split(""|""); return { label: code[autoTypeNo], value: code[autoTypeNo], data : item } })); } }); }, autoFocus: true, minLength: 0, select: function( event, ui ) { var names = ui.item.data.split(""|""); id_arr = $(this).attr('id'); id = id_arr.split(""_""); $('#itemNo_'+id[1]).val(names[0]); $('#itemName_'+id[1]).val(names[1]); $('#stock_'+id[1]).val(names[2]); $('#quantity_'+id[1]).val(1); } }); });<?php require_once 'config.php'; if(!empty($_POST['type'])){ $type = $_POST['type']; $name = $_POST['name_startsWith']; $query = ""SELECT id_pro, nom_pro, uni_pro FROM producto where UPPER($type) LIKE '"".strtoupper($name).""%'""; $result = mysqli_query($con, $query); $data = array(); while ($row = mysqli_fetch_assoc($result)) { $name = $row['id_pro'].'|'.$row['nom_pro'].'|'.$row['uni_pro']; array_push($data, $name); } echo json_encode($data);exit; }require_once 'config.php'; if(isset($_POST['generar'])){ $start = $_POST['desde']; $end = $_POST['hasta']; $centro = $_POST['cbocod']; if($centro==-1){ $qryMem = ""SELECT calendar.datefield AS DATE, IFNULL(SUM(transacciones.can_ven),0) AS total_sales FROM transacciones RIGHT JOIN calendar ON (DATE(transacciones.cre_dep) = calendar.datefield) WHERE calendar.datefield BETWEEN '$start' AND '$end' AND transacciones.id_tra=1 GROUP BY DATE""; $memresult = mysqli_query($con, $qryMem) or die(mysqli_error());"
"554","bad","<html><!DOCTYPE html> <html xmlns=""http://www.w3.org/1999/xhtml""> <head> <style type=""text/css""> .select-boxes{width: 280px;text-align: center;} select { background-color: #F5F5F5; border: 1px double #FB4314; color: #55BB91; font-family: Georgia; font-weight: bold; font-size: 14px; height: 39px; padding: 7px 8px; width: 250px; outline: none; margin: 10px 0 10px 0; } select option{ font-family: Georgia; font-size: 14px; } </style> <script src=""jquery.min.js""></script> <script type=""text/javascript""> $(document).ready(function(){ $('#sem').on('change',function(){ var SEM = $(this).val(); if(SEM){ $.ajax({ type:'POST', url:'sta.php', data:'sem='+SEM, success:function(html){ $('#sub').html(html); $('#staff').html('<option value="""">Select sub first</option>'); } }); }else{ $('#sem').html('<option value="""">Select batch first</option>'); $('#sub').html('<option value="""">Select sem first</option>'); } }); $('#sub').on('change',function(){ var SUB = $(this).val(); if(1){ $.ajax({ type:'POST', url:'sta.php', data:'sub='+SUB, //VALUE IS NOT PASSING success:function(html){ $('#staff').html(html); } }); }else{ $('#staff').html('<option value="""">Select sub first</option>'); } }); }); </script> </head> <body> <div class=""select-boxes""> <form name=""signup"" method=""POST"" action=""feedform.php""> <br><br><br><br> <select id=""sem"" name=""sem""> <option value="""" selected>Select current semester</option> <option value=""1"">1</option> <option value=""2"">2</option> <option value=""3"">3</option> <option value=""4"">4</option> </select><br><br><br> <select name=""sub"" id=""sub""> <option value="""">Select semester first</option> </select> <select name=""staff"" id=""staff""> <option value="""">Select sub first</option> </select> </form> </div> </body> </html><?php include(""../Mine/connection.php""); if(isset($_POST[""sem""]) && !empty($_POST[""sem""])) { $query = mysql_query(""SELECT course_name FROM subject WHERE semester ="".$_POST['sem']); //Count total number of rows $rowCount = mysql_num_rows($query); if($rowCount > 0){ echo '<option value="""">Select course</option>'; while($row = mysql_fetch_assoc($query)){ echo '<option value=""'.$row['course_name'].'"">'.$row['course_name'].'</option>'; } }else{ echo '<option value="""">course not available</option>'; } } if(isset($_POST[""sub""]) && !empty($_POST[""sub""])) { $query = mysql_query(""SELECT staff_name FROM subject WHERE course_name = "".$_POST['sub']); //Count total number of rows $rowCount = mysql_num_rows($query); if($rowCount > 0){ echo '<option value="""">Select Staff</option>'; while($row = mysql_fetch_assoc($query)){ echo '<option value=""'.$row['staff_name'].'"">'.$row['staff_name'].'</option>'; } }else{ echo '<option value="""">Staff not available</option>'; } } ?>"
"555","bad","<?php $connection =mysqli_connect(""localhost"", ""widget_cms"", ""password"", ""widget_corp""); ?> <html> <body> <form name=""login"" action=""login.php""> Username: <input type=""text"" name=""username""></br> <input name=""submit"" type=""submit"" value=""Submit"" style=""cursor:pointer""> </form> <?php $username = $_POST['username']; $username = mysqli_real_escape_string($connection, $username); $query = ""INSERT INTO subjects (menu_name) VALUES ('{$username}')""; if(isset($_POST['submit'])){ $qresult = mysqli_query($connection, $query); if($qresult){ header(""Location: second_page.php""); }else{ die(""Error "" . mysqli_error($connection) . "" "" . ""("" . mysqli_errno($connection) . "")"" ."", Please contact Sammy for troubleshooting as soon as you can.""); } } ?> </body> </html> <?php mysqli_close($connection); ?>"
"556","good","<?php $connection =mysqli_connect(""localhost"", ""widget_cms"", ""password"", ""widget_corp""); ?> <html> <body> <form name=""login"" action=""login.php""> Username: <input type=""text"" name=""username""></br> <input name=""submit"" type=""submit"" value=""Submit"" style=""cursor:pointer""> </form> <?php $username = $_POST['username']; $username = mysqli_real_escape_string($connection, $username); $query = ""INSERT INTO subjects (menu_name) VALUES ('{$username}')""; if(isset($_POST['submit'])){ $qresult = mysqli_query($connection, $query); if($qresult){ header(""Location: second_page.php""); }else{ die(""Error "" . mysqli_error($connection) . "" "" . ""("" . mysqli_errno($connection) . "")"" ."", Please contact Sammy for troubleshooting as soon as you can.""); } } ?> </body> </html> <?php mysqli_close($connection); ?>"
"557","bad","<?php $connection =mysqli_connect(""localhost"", ""widget_cms"", ""password"", ""widget_corp""); ?> <html> <body> <form name=""login"" action=""login.php""> Username: <input type=""text"" name=""username""></br> <input name=""submit"" type=""submit"" value=""Submit"" style=""cursor:pointer""> </form> <?php $username = $_POST['username']; $username = mysqli_real_escape_string($connection, $username); $query = ""INSERT INTO subjects (menu_name) VALUES ('{$username}')""; if(isset($_POST['submit'])){ $qresult = mysqli_query($connection, $query); if($qresult){ header(""Location: second_page.php""); }else{ die(""Error "" . mysqli_error($connection) . "" "" . ""("" . mysqli_errno($connection) . "")"" ."", Please contact Sammy for troubleshooting as soon as you can.""); } } ?> </body> </html> <?php mysqli_close($connection); ?>"
